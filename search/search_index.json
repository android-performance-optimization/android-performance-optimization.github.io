{"config":{"lang":["ja"],"separator":"[\\s\\-\uff0c\u3002]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u7b80\u4ecb","text":"<p>\u6027\u80fd\u4f18\u5316\u662f Android \u5f00\u53d1\u8fdb\u9636\u5fc5\u5907\u6280\u80fd\u4e4b\u4e00\uff0c\u662f\u9879\u76ee\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7684\u91cd\u70b9\uff0c\u75db\u70b9\u540c\u65f6\u4e5f\u662f\u96be\u70b9\u3002</p> <p>\u8fd9\u91cc\u662f Andriod \u6027\u80fd\u4f18\u5316\u624b\u518c\uff0c\u4e13\u6ce8\u4e8e Android \u6027\u80fd\u4f18\u5316\u9886\u57df\uff0c\u5206\u4eab\u57fa\u7840\u77e5\u8bc6\uff0c\u5b9e\u6218\u65b9\u6848\uff0c\u5b66\u4e60\u8def\u7ebf\uff0c\u6280\u672f\u52a8\u6001\u7b49\u8d44\u6e90</p>"},{"location":"#_2","title":"\u672c\u7ad9\u5185\u5bb9","text":"<p>\u672c\u7ad9\u9884\u671f\u5c06\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff0c\u6b63\u5728\u5efa\u8bbe\u4e2d\uff0c\u656c\u8bf7\u671f\u5f85</p> <ul> <li>Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u5b66\u4e60\u8d44\u6e90\u4e0e\u5b66\u4e60\u8def\u7ebf\u603b\u7ed3</li> <li>\u4ee5\u6280\u672f\u6708\u62a5\u7684\u5f62\u5f0f\u603b\u7ed3\u8fc7\u53bb\u4e00\u4e2a\u6708(\u4f46\u4e0d\u9650\u4e8e\u6b64)\u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u535a\u5ba2\uff0c\u89c6\u9891\uff0c\u5f00\u6e90\u9879\u76ee\u7b49</li> <li>Android \u6027\u80fd\u4f18\u5316\u4e2d\u9700\u8981\u7528\u5230\u7684\u8ba1\u7b97\u673a\u57fa\u7840\u77e5\u8bc6\u4ecb\u7ecd</li> <li>\u9488\u5bf9\u542f\u52a8\u901f\u5ea6\u3001\u5185\u5b58\u3001\u5361\u987f\u3001\u7626\u8eab\u7b49\u5e38\u89c1\u4f18\u5316\u65b9\u5411\uff0c\u8fdb\u884c\u539f\u7406\u5256\u6790\u5e76\u7ed3\u5408\u5b9e\u6218\u6848\u4f8b\u6765\u89e3\u51b3</li> </ul>"},{"location":"#_3","title":"\u4e3a\u4ec0\u4e48\u53d1\u8d77\u672c\u7ad9","text":"<p>\u5728\u6211\u770b\u6765\uff0cAndroid \u6027\u80fd\u4f18\u5316\u7684\u96be\u70b9\u5728\u4e8e\u4ee5\u4e0b\u51e0\u70b9</p> <ul> <li>Android \u7cfb\u7edf\u67b6\u6784\u6db5\u76d6\u5e94\u7528\u5c42\u3001Framework \u5c42\u3001Android \u8fd0\u884c\u65f6\u548c\u539f\u751f\u5e93\u4ee5\u53ca Linux \u5185\u6838\u5c42\u7b49\u591a\u4e2a\u5c42\u6b21\uff0c\u8981\u771f\u6b63\u4f53\u7cfb\u5316\u7684\u8fdb\u884c\u6027\u80fd\u4f18\u5316\uff0c\u4e0d\u4ec5\u8981\u4e86\u89e3\u5e94\u7528\u5c42\uff0c\u66f4\u8981\u5168\u9762\u7406\u89e3\u8fd9\u4e9b\u5c42\u9762\u4ee5\u53ca\u5b83\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb</li> <li>\u6027\u80fd\u4f18\u5316\u6d89\u53ca\u7684\u77e5\u8bc6\u9762\u975e\u5e38\u5e7f\u6cdb\uff0c\u5305\u62ec\u8ba1\u7b97\u673a\u786c\u4ef6\uff0c\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5185\u5b58\u7ba1\u7406\u3001\u7ebf\u7a0b\u4e0e\u8fdb\u7a0b\u8c03\u5ea6\uff0cJVM \u865a\u62df\u673a\uff0cC/C++ \u57fa\u7840\u7b49\u591a\u4e2a\u65b9\u9762\uff0c\u9700\u8981\u5bf9\u8fd9\u4e9b\u77e5\u8bc6\u70b9\u8fdb\u884c\u6df1\u5165\u5b66\u4e60\u624d\u80fd\u66f4\u597d\u5730\u8fdb\u884c\u4f18\u5316</li> </ul> <p>\u6211\u4ece\u4e8b Android \u5f00\u53d1\u5df2\u7ecf\u597d\u51e0\u5e74\u4e86\uff0c\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u4e5f\u7ecf\u5e38\u6d89\u53ca\u6027\u80fd\u4f18\u5316\u9700\u6c42\u3002\u4f46\u603b\u7684\u6765\u8bf4\uff0c\u4ecd\u5b58\u5728\u8bf8\u591a\u4e0d\u8db3\u4e4b\u5904\uff0c\u4e00\u662f\u7f3a\u4e4f\u6df1\u5165\u7406\u89e3\uff0c\u4e8c\u662f\u4e0d\u591f\u4f53\u7cfb\u5316\u3002</p> <p>\u7531\u4e8e\u6027\u80fd\u4f18\u5316\u7684\u590d\u6742\u6027\uff0c\u5e76\u4e0d\u662f\u96f6\u96f6\u6563\u6563\u5730\u770b\u4e00\u4e9b\u535a\u5ba2\u6587\u7ae0\u5c31\u53ef\u4ee5\u638c\u63e1\u7684\uff0c\u56e0\u6b64\u6211\u53d1\u8d77\u4e86\u672c\u7ad9\uff0c\u671f\u671b\u80fd\u591f\u7cfb\u7edf\u5730\u6574\u7406 Android \u6027\u80fd\u4f18\u5316\u7684\u5404\u4e2a\u65b9\u5411\u53ca\u5173\u952e\u77e5\u8bc6\u70b9\uff0c\u5e76\u4ecb\u7ecd\u4e1a\u754c\u5e38\u7528\u7684\u6027\u80fd\u4f18\u5316\u5b9e\u6218\u65b9\u6848\u4e0e\u6280\u672f\u52a8\u6001\u3002</p> <p>\u672c\u7ad9\u6b63\u5728\u52aa\u529b\u5efa\u8bbe\u4e2d\uff0c\u4e5f\u5e0c\u671b\u8ddf\u5927\u5bb6\u591a\u591a\u4ea4\u6d41~</p>"},{"location":"foundation/framework/activity-start/","title":"Activity \u542f\u52a8\u6d41\u7a0b\u5206\u6790","text":"<p>https://zhuanlan.zhihu.com/p/33017826</p> <p>https://mp.weixin.qq.com/s/Q6Z3pQpYWtQ_X9bk-KJdzw</p>"},{"location":"foundation/kotlin-compiler-learn/learning-resource/","title":"Kotlin \u7f16\u8bd1\u5668\u76f8\u5173\u5b66\u4e60\u8d44\u6e90","text":"<ul> <li>Reading Kotlin compiler source: advices?</li> <li>https://github.com/ahinchman1/Kotlin-Compiler-Crash-Course</li> <li>Crash Course on the Kotlin Compiler by Amanda Hinchman-Dominguez</li> <li>crash-course-on-the-kotlin-compiler-k1-k2-frontends-backends</li> </ul>"},{"location":"foundation/kotlin-meta-programming/code-generate/","title":"\u6e90\u4ee3\u7801\u751f\u6210","text":"<p>\u672c\u6587\u4e3a\u300a\u6df1\u5165\u5b9e\u8df5 kotlin \u5143\u7f16\u7a0b\u300b\u8bfb\u4e66\u7b14\u8bb0\uff0c\u60f3\u8981\u6df1\u5165\u4e86\u89e3 kotlin \u5143\u7f16\u7a0b\u7684\u540c\u5b66\u53ef\u4ee5\u9605\u8bfb\u539f\u4e66\u3002</p> <p>\u89e3\u51b3\u91cd\u590d\u6216\u8005\u76f8\u4f3c\u7684\u4ee3\u7801\u903b\u8f91\u6700\u76f4\u63a5\u7684\u65b9\u6848\u5c31\u662f\u63d0\u53d6\u5176\u4e2d\u7684\u5171\u6027\uff0c\u7f16\u5199\u7a0b\u5e8f\u751f\u6210\u8fd9\u4e9b\u4ee3\u7801\uff0c \u8fd9\u5b9e\u9645\u4e0a\u662f\u7f16\u8bd1\u9636\u6bb5\u6700\u7b80\u5355\u7684\u5143\u7f16\u7a0b\u5f62\u5f0f\u3002</p>"},{"location":"foundation/kotlin-meta-programming/code-generate/#_2","title":"\u6807\u51c6\u5e93\u7684\u4ee3\u7801\u751f\u6210","text":"<p>Kotlin \u7684\u6807\u51c6\u5e93\u5f53\u4e2d\u6709\u5173\u6570\u503c\u7c7b\u578b\u7684\u58f0\u660e\uff0c\u4f8b\u5982 Byte\u3001Short\u3001Int\u3001Long\u3001Double\u3001 Float\u3002\u8fd9\u4e9b\u7c7b\u7684\u51fd\u6570\u90fd\u6ca1\u6709\u5b9e\u73b0\uff0c\u56e0\u4e3a\u5b83\u4eec\u5728\u7f16\u8bd1\u65f6\u4f1a\u88ab\u7f16\u8bd1\u5668\u6620\u5c04\u5230\u5bf9\u5e94\u5e73\u53f0\u7684\u5b9e\u9645\u7c7b\u578b\u3002 \u8fd9\u4e9b\u7c7b\u578b\u7684\u58f0\u660e\u9ad8\u5ea6\u76f8\u4f3c\uff0c\u975e\u5e38\u9002\u5408\u7f16\u5199\u7a0b\u5e8f\u76f4\u63a5\u751f\u6210\u3002</p>"},{"location":"foundation/kotlin-meta-programming/code-generate/#_3","title":"\u4ee3\u7801\u751f\u6210\u65b9\u5f0f","text":"<ol> <li>\u76f4\u63a5\u7528\u7a0b\u5e8f\u8f93\u51fa\u4ee3\u7801</li> <li>\u4f7f\u7528\u6a21\u677f\u5f15\u64ce\u6e32\u67d3</li> <li>\u4f7f\u7528\u4ee3\u7801\u751f\u6210\u6846\u67b6\u751f\u6210\u76ee\u6807\u7a0b\u5e8f</li> </ol> <p>\u76f4\u63a5\u8f93\u51fa\u4ee3\u7801\u7684\u65b9\u5f0f\u5728\u5927\u591a\u6570\u573a\u666f\u4e0b\u5f00\u53d1\u6548\u7387\u8f83\u4f4e\u3002\u4f7f\u7528\u6a21\u677f\u5f15\u64ce\u6e32\u67d3\u7684\u65b9\u5f0f\u867d\u7136\u5728\u5f00\u53d1\u6548\u7387\u4e0a\u6709\u6240\u63d0\u5347\uff0c\u4f46\u4e5f\u53d7\u9650\u4e8e\u6a21\u677f\u672c\u8eab\uff0c\u7075\u6d3b\u6027\u4e0d\u591f\uff0c\u60f3\u8981\u6269\u5c55\u6837\u5f0f\u5c31\u8981\u589e\u52a0\u6a21\u677f;\u540c\u65f6\uff0c\u6a21\u677f\u672c\u8eab\u662f\u4e2d\u7acb\u7684\uff0c\u7f3a\u4e4f\u5bf9\u751f\u6210\u7684\u76ee\u6807\u7a0b\u5e8f\u7684\u9488\u5bf9\u6027\u652f\u6301\uff0c\u6211\u4eec\u9700\u8981\u989d\u5916\u5904\u7406\u5bf9\u76ee\u6807\u7a0b\u5e8f\u81ea\u8eab\u7684\u4f18\u5316\u3002</p> <p>\u672c\u7ae0\u901a\u8fc7 KotlinTuple\u3001Anko\u3001\u6269\u5c55\u51fd\u6570\u751f\u6210\u7b49\u6848\u4f8b\u4ecb\u7ecd\u4e86\u51e0\u79cd\u5e38\u89c1\u7684\u4ee3\u7801\u751f\u6210\u65b9\u5f0f\uff0c \u5305\u62ec\u5b57\u7b26\u4e32\u76f4\u63a5\u8f93\u51fa\u3001\u6a21\u677f\u5f15\u64ce\u6e32\u67d3\u3001JavaPoet/KotlinPoet  \u751f\u6210\u7b49\u3002\u8fd9\u51e0\u79cd\u65b9\u5f0f\u5404\u6709\u4f18\u52a3\uff0c \u5176\u4e2d JavaPoet/KotlinPoet \u751f\u6210\u7684\u65b9\u6848\u662f\u5e94\u7528\u6700\u4e3a\u5e7f\u6cdb\u7684\u3002</p>"},{"location":"foundation/kotlin-meta-programming/code-static-analyse/","title":"\u7a0b\u5e8f\u9759\u6001\u5206\u6790","text":"<p>\u672c\u6587\u4e3a\u300a\u6df1\u5165\u5b9e\u8df5 kotlin \u5143\u7f16\u7a0b\u300b\u8bfb\u4e66\u7b14\u8bb0\uff0c\u60f3\u8981\u6df1\u5165\u4e86\u89e3 kotlin \u5143\u7f16\u7a0b\u7684\u540c\u5b66\u53ef\u4ee5\u9605\u8bfb\u539f\u4e66\u3002</p> <p>\u7a0b\u5e8f\u9759\u6001\u5206\u6790\uff08Program Static Analysis\uff09\u662f\u6307\u5728\u4e0d\u8fd0\u884c\u4ee3\u7801\u7684\u65b9\u5f0f\u4e0b\uff0c\u901a\u8fc7\u8bcd\u6cd5\u5206\u6790\u3001\u8bed\u6cd5\u5206\u6790\u3001\u63a7\u5236\u6d41\u5206\u6790\u3001\u6570\u636e\u6d41\u5206\u6790\u7b49\u6280\u672f\u5bf9\u7a0b\u5e8f\u4ee3\u7801\u8fdb\u884c\u626b\u63cf\uff0c\u9a8c\u8bc1\u4ee3\u7801\u662f\u5426\u6ee1\u8db3\u89c4\u8303\u6027\u3001 \u5b89\u5168\u6027\u3001\u53ef\u9760\u6027\u3001\u53ef\u7ef4\u62a4\u6027\u7b49\u6307\u6807\u7684\u4e00\u79cd\u4ee3\u7801\u5206\u6790\u6280\u672f\u3002</p>"},{"location":"foundation/kotlin-meta-programming/code-static-analyse/#kotlin","title":"\u4f7f\u7528 Kotlin \u7f16\u8bd1\u5668\u505a\u8bed\u4e49\u5206\u6790","text":"<p>\u9700\u8981\u83b7\u53d6\u8bed\u4e49\u5206\u6790\u7684\u7ed3\u679c\uff0c\u5c31\u4e0d\u5f97\u4e0d\u501f\u52a9\u7f16\u8bd1\u5668\u4e86\u3002</p> <p>\u7f16\u8bd1\u5668\u7684\u52a0\u6301\u4e0b\uff0c\u60f3\u8981\u505a\u76ee\u6807\u7a0b\u5e8f\u7684\u9759\u6001\u5206\u6790\u601d\u8def\u4e0a\u5e76\u4e0d\u590d\u6742\u3002\u4e0d\u8fc7\uff0c\u60f3\u8981\u8f7b\u677e\u5b9e\u73b0\u8fd9\u6837\u7684\u529f\u80fd\u9700\u8981\u5bf9\u7f16\u8bd1\u5668\u7684\u5404\u79cd\u7c7b\u578b\u6709\u76f8\u5bf9\u6e05\u6670\u7684\u8ba4\u8bc6\u3002</p> <p>\u7531\u4e8e\u6587\u6863\u8f83\u4e3a\u7f3a\u4e4f\uff0c\u521d\u5b66\u8005\u901a\u5e38\u5728\u5904\u7406\u8bed\u6cd5\u7ed3\u6784\u65f6\u5bb9\u6613\u5bf9\u4ee5\u4e0b\u51e0\u79cd\u7c7b\u578b\u7684\u4f5c\u7528\u548c\u4f7f\u7528\u65b9\u6cd5\u4ea7\u751f\u7591\u60d1\uff0c\u4e3b\u8981\u5305\u62ec\uff1a</p> <ul> <li>\u7c7b\u540d\u5f62\u5982 Kt*\uff0c\u4f8b\u5982 KtFile\u3001KtClass\uff0c\u662f\u5bf9 Kotlin \u8bed\u6cd5\u6811\u7684\u63cf\u8ff0\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u628a\u5b83\u4eec\u5f53\u505a\u7ed3\u6784\u5316\u7684\u6e90\u7801\u672c\u8eab\u6765\u770b\u5f85\u3002\u5b9e\u9645\u4e0a\uff0cKt \u7c7b\u578b\u6b63\u662f PSI \u7684 Kotlin \u5b9e\u73b0\u3002</li> <li>\u7c7b\u540d\u5f62\u5982 **Descriptor\uff0c\u4f8b\u5982 ClassDescriptor\uff0c\u662f\u5bf9 Kotlin \u8bed\u6cd5\u7684\u63cf\u8ff0\u3002\u8bed\u6cd5\u6811\u89e3\u6790\u4e4b\u540e\uff0c\u7f16\u8bd1\u5668\u4f1a\u4e3a\u4e0d\u540c\u7c7b\u578b\u7684\u8bed\u6cd5\u8282\u70b9\u5173\u8054\u76f8\u5e94\u7684\u8bed\u6cd5\u63cf\u8ff0\u7c7b\u3002</li> <li>KotlinType \u53ca\u5176\u5b50\u7c7b\uff0c\u662f\u5bf9 Kotlin \u7c7b\u578b\u7684\u63cf\u8ff0\u3002</li> </ul> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u5206\u6790\u76ee\u6807\u7a0b\u5e8f\u5f53\u4e2d\u7684\u7a0b\u5e8f\u7ed3\u6784\u4fe1\u606f\uff0c\u4f7f\u7528 Kt \u6765\u8bbf\u95ee\u8bed\u6cd5\u6811\uff1b\u5982\u679c\u4f60\u5e0c\u671b\u5206\u6790\u76ee\u6807\u7a0b\u5e8f\u7684\u8bed\u6cd5\u4fe1\u606f\uff0c\u4f7f\u7528 Descritpor \u7c7b\u578b\uff1b\u5982\u679c\u60f3\u8981\u83b7\u53d6 Kotlin \u7684\u7c7b \u578b\u4fe1\u606f\uff0c\u5219\u4f7f\u7528 KotlinType\u3002</p> <p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u5206\u6790\u5de5\u4f5c\u90fd\u662f\u4ece\u8bed\u6cd5\u6811\u51fa\u53d1\uff0c\u4f7f\u7528 BindingContext \u6765\u83b7\u53d6\u8bed\u6cd5\u4fe1\u606f\u548c\u7c7b\u578b\u4fe1\u606f\uff0c\u8fdb\u800c\u5f97\u51fa\u5206\u6790\u7684\u7ed3\u679c\u3002</p>"},{"location":"foundation/kotlin-meta-programming/code-static-analyse/#detekt","title":"\u4f7f\u7528 Detekt \u505a\u9759\u6001\u626b\u63cf","text":"<p>\u5728\u5b9e\u9645\u9879\u76ee\u5f53\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u4f7f\u7528\u6210\u719f\u7684\u9759\u6001\u5206\u6790\u6846\u67b6\u6765\u5b8c\u6210\u4ee3\u7801\u626b\u63cf\u548c\u5206\u6790\u7684\u9700\u6c42\u3002\u4e1a\u5185\u6700\u4e3a\u8457\u540d\u7684 Kotlin \u4ee3\u7801\u626b\u63cf\u6846\u67b6\u5c31\u662f detekt \u548c ktlint\u3002\u5176\u4e2d\uff1a</p> <ul> <li>detekt \u652f\u6301\u975e\u5e38\u7075\u6d3b\u7684\u914d\u7f6e\uff0c\u4e5f\u652f\u6301\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7684\u626b\u63cf\u89c4\u5219\u3002</li> <li>ktlint \u5219\u4e3b\u8981\u57fa\u4e8e\u5b98\u65b9\u7684\u4ee3\u7801\u98ce\u683c\u505a\u68c0\u67e5\u3002</li> </ul> <p>\u5bf9\u4e8e\u6709\u81ea\u5b9a\u4e49\u9700\u6c42\u7684\u6211\u4eec\u800c\u8a00\uff0cdetekt \u663e\u7136\u66f4\u5177\u4f18\u52bf\u3002detekt \u9664\u4e86\u5185\u7f6e\u4e86\u8bf8\u591a\u4ee3\u7801\u98ce\u683c\u3001\u4ee3\u7801\u8d28\u91cf\u76f8\u5173\u7684\u68c0\u67e5\u4ee5\u5916\uff0c\u8fd8\u652f\u6301\u5b9e\u73b0\u81ea\u5b9a\u4e49\u626b\u63cf\u89c4\u5219\u3002</p>"},{"location":"foundation/kotlin-meta-programming/code-static-analyse/#_2","title":"\u5c0f\u7ed3","text":"<p>\u672c\u7ae0\u4ee5\u626b\u63cf\u9879\u76ee\u5f53\u4e2d\u7684\u6570\u636e\u7c7b\u4e3a\u80cc\u666f\uff0c\u5c55\u5f00\u4e86\u5bf9 Kotlin \u4ee3\u7801\u9759\u6001\u626b\u63cf\u7684\u63a2\u8ba8\u3002\u968f\u7740\u9700\u6c42\u590d\u6742\u5ea6\u7684\u63d0\u5347\uff0c\u5148\u540e\u57fa\u4e8e\u6587\u672c\u5206\u6790\uff08\u6b63\u5219\u8868\u8fbe\u5f0f\uff09\u3001\u8bed\u6cd5\u5206\u6790\uff08Antlr\uff09\u3001\u8bed\u4e49\u5206\u6790\uff08\u7f16\u8bd1\u5668\uff09 \u4e09\u4e2a\u5c42\u6b21\u6765\u5b9e\u73b0\u4ee3\u7801\u626b\u63cf\u3002</p> <p>\u4e4b\u540e\u8fd8\u4ecb\u7ecd\u4e86\u5982\u4f55\u57fa\u4e8e detekt \u4ee5\u53ca IntelliJ \u7684\u4ee3\u7801\u68c0\u67e5\u548c\u5feb\u6377\u4fee\u590d\u7b49\u529f\u80fd\u6765\u5b9e\u73b0\u5bf9\u4ee3\u7801\u7684\u626b\u63cf\u548c\u5206\u6790\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/","title":"\u7f16\u8bd1\u5668\u63d2\u4ef6","text":"<p>\u672c\u6587\u4e3a\u300a\u6df1\u5165\u5b9e\u8df5 kotlin \u5143\u7f16\u7a0b\u300b\u8bfb\u4e66\u7b14\u8bb0\uff0c\u60f3\u8981\u6df1\u5165\u4e86\u89e3 kotlin \u5143\u7f16\u7a0b\u7684\u540c\u5b66\u53ef\u4ee5\u9605\u8bfb\u539f\u4e66\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_2","title":"\u7f16\u8bd1\u5668\u63d2\u4ef6\u6982\u8ff0","text":"<p>\u7f16\u8bd1\u5668\u63d2\u4ef6\u662f\u7f16\u8bd1\u5668\u5728\u4e00\u5b9a\u8303\u56f4\u5185\u4e3a\u5f00\u53d1\u8005\u63d0\u4f9b\u7684\u5b9a\u5236\u7f16\u8bd1\u8fc7\u7a0b\u7684\u80fd\u529b\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_3","title":"\u4ec0\u4e48\u662f\u7f16\u8bd1\u5668\u63d2\u4ef6","text":"<p>\u7f16\u8bd1\u5668\u7684\u6267\u884c\u6d41\u7a0b\u662f\u4e00\u4e2a\u76f8\u5bf9\u6807\u51c6\u5316\u7684\u8fc7\u7a0b\u3002\u7f16\u8bd1\u8fc7\u7a0b\u5f53\u4e2d\u5305\u542b\u5f88\u591a\u73af\u8282\uff0c\u73af\u8282\u4e0e\u73af\u8282\u4e4b\u95f4\u901a\u8fc7\u8f93\u5165\u8f93\u51fa\u8fde\u63a5\u8d77\u6765\uff0c\u53ea\u8981\u7f16\u8bd1\u5668\u63d0\u4f9b\u4e86\u76f8\u5e94\u7684 API\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u7f16\u5199\u63d2\u4ef6\u7684\u5f62\u5f0f\u4ece\u5916\u90e8 \u4ecb\u5165\u8fd9\u4e9b\u7279\u5b9a\u7684\u7f16\u8bd1\u73af\u8282\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_4","title":"\u7f16\u8bd1\u5668\u63d2\u4ef6\u80fd\u505a\u4ec0\u4e48","text":"<p>Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\u7684\u5177\u4f53\u80fd\u529b\u8303\u56f4\u53d6\u51b3\u4e8e API \u7684\u5f00\u653e\u60c5\u51b5\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u9605\u8bfb\u6e90\u7801\uff0c\u641e\u6e05\u695a\u7f16\u8bd1\u5668\u63d2\u4ef6\u7684\u6269\u5c55\u70b9\uff08Extension Point\uff09\u7684\u4f5c\u7528\uff0c\u901a\u8fc7\u5206\u6790\u8fd9\u4e9b\u6269\u5c55\u70b9\uff0c\u6211\u4eec\u5927\u81f4\u53ef\u4ee5\u4e86\u89e3\u5230\u7f16\u8bd1\u5668\u63d2\u4ef6\u7684\u80fd\u529b\u8303\u56f4\uff1a</p> <ol> <li>\u8bed\u6cd5\u68c0\u67e5\uff0c\u4f8b\u5982\u5bf9\u67d0\u4e9b\u5408\u6cd5\u7684\u8bed\u6cd5\u6dfb\u52a0\u66f4\u52a0\u4e25\u683c\u7684\u68c0\u67e5\u3002</li> <li>\u751f\u6210\u65b0\u7684\u5305\u3001\u7c7b\u3001\u51fd\u6570\u3001\u5c5e\u6027\u7b49\uff0cKotlin Android Extensions \u548c Parcelize \u63d2\u4ef6\u5f53\u4e2d\u5927\u91cf\u4f7f\u7528\u5230\u4e86\u4ee3\u7801\u751f\u6210\u7684\u80fd\u529b\u3002</li> <li>\u4fee\u6539\u4ee3\u7801\u7684\u7f16\u8bd1\u4ea7\u7269\u3002</li> </ol> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u76ee\u524d\u6765\u770b\uff0cKotlin \u7684\u8bed\u6cd5\u6811\u65e0\u6cd5\u5728\u7f16\u8bd1\u5668\u63d2\u4ef6\u5f53\u4e2d\u88ab\u76f4\u63a5\u4fee\u6539\uff0c\u56e0\u6b64\u4e0d\u8981\u5bc4\u5e0c\u671b\u4e8e\u901a\u8fc7\u5f00\u53d1\u7f16\u8bd1\u5668\u63d2\u4ef6\u6765\u4e3a Kotlin \u6dfb\u52a0\u65b0\u8bed\u6cd5\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_5","title":"\u7f16\u8bd1\u5668\u63d2\u4ef6\u9879\u76ee\u7684\u57fa\u672c\u7ed3\u6784","text":"<p>\u7f16\u8bd1\u5668\u63d2\u4ef6\u9664\u4e86\u81ea\u8eab\u7684\u903b\u8f91\u4ee5\u5916\uff0c\u8fd8\u9700\u8981\u4e0e\u7f16\u8bd1\u5de5\u5177\u94fe\uff08Toolchain\uff09\u3001\u96c6\u6210\u5f00\u53d1\u73af\u5883\uff08IDE\uff09\u914d\u5408\uff0c\u56e0\u6b64\u901a\u5e38\u6765\u8bf4\u4e00\u4e2a\u5b8c\u6574\u7684\u7f16\u8bd1\u5668\u63d2\u4ef6\u9879\u76ee\u4f1a\u5305\u542b</p> <ul> <li>\u4e00\u4e2a\u7f16\u8bd1\u5668\u63d2\u4ef6\u6a21\u5757</li> <li>\u7f16\u8bd1\u5de5\u5177\u94fe\u63d2\u4ef6\u6a21\u5757(gradle, maven)</li> <li>\u96c6\u6210\u5f00\u53d1\u73af\u5883\u63d2\u4ef6\u6a21\u5757</li> </ul>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_6","title":"\u7f16\u8bd1\u5668\u63d2\u4ef6\u6a21\u5757","text":"<p>Kotlin \u7684\u7f16\u8bd1\u5668\u5165\u53e3\u662f kotlinc\uff0ckotlinc \u662f\u4e00\u4e2a JVM \u7a0b\u5e8f\u3002\u7f16\u8bd1\u5668\u63d2\u4ef6\u9700\u8981\u52a0\u8f7d\u5230\u7f16\u8bd1\u5668\u5f53\u4e2d\u8fd0\u884c\uff0c\u56e0\u6b64\u4e5f\u662f\u4e00\u4e2a JVM \u7a0b\u5e8f\uff0c\u5b83\u7684\u4ea7\u7269\u901a\u5e38\u5c31\u662f\u4e00\u4e2a jar \u6587\u4ef6\u3002</p> <p>\u7f16\u8bd1\u5668\u63d2\u4ef6\u6a21\u5757\u9700\u8981\u4f9d\u8d56 Kotlin \u7f16\u8bd1\u5668\uff0c\u4ee5\u8c03\u7528\u7f16\u8bd1\u5668\u63d2\u4ef6\u7684 API\u3002Kotlin \u56e2\u961f\u5df2\u7ecf\u5c06 Kotlin \u7f16\u8bd1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684 jar \u6587\u4ef6\u53d1\u5e03\u5230\u4e86 Maven \u4ed3\u5e93\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6dfb\u52a0\u4f9d\u8d56\u5373\u53ef</p> <p>\u5728\u7f16\u8bd1\u5668\u63d2\u4ef6\u6a21\u5757\u4e3b\u8981\u5b8c\u6210\u4e24\u4e2a\u4efb\u52a1\uff1a</p> <ul> <li>\u89e3\u6790\u547d\u4ee4\u884c\u53c2\u6570</li> <li>\u6ce8\u518c\u6269\u5c55\u70b9</li> </ul>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_7","title":"\u7f16\u8bd1\u5de5\u5177\u94fe\u63d2\u4ef6\u6a21\u5757","text":"<p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4f1a\u4f7f\u7528 Gradle \u6216\u8005 Maven \u6765\u7ba1\u7406 Kotlin \u9879\u76ee\u3002\u4e3a\u4e86\u65b9\u4fbf\u5c06\u7f16\u8bd1\u5668\u63d2\u4ef6\u96c6\u6210\u5230\u6574\u4f53\u7684\u7f16\u8bd1\u6d41\u7a0b\u5f53\u4e2d\uff0c\u6bcf\u4e00\u4e2a Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\u9879\u76ee\u90fd\u9700\u8981\u540c\u65f6\u63d0\u4f9b\u76f8\u5e94\u7684 Gradle \u548c Maven \u63d2\u4ef6\u6a21\u5757\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_8","title":"\u96c6\u6210\u5f00\u53d1\u73af\u5883\u63d2\u4ef6\u6a21\u5757","text":"<p>\u5f00\u53d1\u73af\u5883\u63d2\u4ef6\u6a21\u5757\u4e0d\u662f\u5fc5\u987b\u7684\u3002\u901a\u5e38\u53ea\u6709\u5728\u7f16\u8bd1\u5668\u63d2\u4ef6\u7684\u5904\u7406\u7ed3\u679c\u5bfc\u81f4\u4ee3\u7801\u63d0\u793a\u7684\u884c\u4e3a\u53d1\u751f\u4e86\u53d8\u5316\u4e4b\u540e\u624d\u9700\u8981\u63d0\u4f9b\u914d\u5957\u7684\u5f00\u53d1\u73af\u5883\u63d2\u4ef6\uff0c\u4f8b\u5982\u751f\u6210\u4e86\u65b0\u7684\u51fd\u6570\uff0c\u4fee\u6539\u4e86\u7c7b\u7684\u4fee\u9970\u7b26\u7b49\u7b49\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_9","title":"\u63d2\u4ef6\u7684\u53d1\u5e03","text":""},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_10","title":"\u4f9d\u8d56\u5305\u540d\u91cd\u5b9a\u5411","text":"<p>Kotlin \u56e2\u961f\u5728\u53d1\u5e03 Kotlin \u7f16\u8bd1\u5668\u65f6\uff0c\u9664\u4e86 kotlin-compiler \u8fd9\u4e2a\u6784\u4ef6\u4ee5\u5916\uff0c\u8fd8\u53d1\u5e03\u4e86\u4e00\u4e2a kotlin-compiler-embeddable \u7684\u6784\u4ef6\u3002\u8fd9\u4e24\u4e2a\u6784\u4ef6\u90fd\u662f Kotlin \u7684\u7f16\u8bd1\u5668\uff0c \u4e8c\u8005\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f</p> <p>\u539f\u6765\uff0c\u4e3a\u4e86\u786e\u4fdd\u7f16\u8bd1\u5668\u7684\u5b8c\u6574\u6027\u548c\u72ec\u7acb\u6027\uff0cKotlin \u56e2\u961f\u5c06 Kotlin \u7f16\u8bd1\u5668\u4f9d\u8d56\u7684\u4e00\u4e9b\u7b2c\u4e09\u65b9\u4f9d\u8d56\u4e5f\u4e00\u5e76\u6253\u5305\u5230\u4e86\u7f16\u8bd1\u5668\u7684\u6784\u4ef6\u5f53\u4e2d\u3002</p> <p>\u8fd9\u6837\u505a\u786e\u5b9e\u53ef\u4ee5\u89e3\u51b3\u7f16\u8bd1\u5668\u5b8c\u6574\u6027\u548c\u72ec\u7acb\u6027\u7684\u95ee\u9898\uff0c\u4e0d\u8fc7\u4e5f\u4f1a\u5f15\u5165\u65b0\u7684\u95ee\u9898\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e00\u4e2a\u7a0b\u5e8f\u540c\u65f6\u5f15\u5165\u4e86 Kotlin \u7f16\u8bd1\u5668\u548c Proto Buffer\uff0c\u90a3\u4e48\u7f16\u8bd1\u65f6\u5c31\u4f1a\u56e0 Kotlin \u7f16\u8bd1\u5668\u5f53 \u4e2d\u540c\u6837\u5b58\u5728\u4e00\u4efd Proto Buffer \u7684\u7c7b\u800c\u5bfc\u81f4\u51b2\u7a81\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cKotlin \u7f16\u8bd1\u5668\u5728\u6784\u5efa\u65f6\u4f1a\u5c06\u8fd9\u4e9b\u7b2c\u4e09\u65b9\u4f9d\u8d56\u7684\u5305\u540d\u505a\u91cd\u5b9a\u5411\uff0c\u4f8b\u5982\uff1acom.intellij \u5c31\u88ab\u91cd\u5b9a\u5411\u6210\u4e86 org.jetbrains.kotlin.com.intellij\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_11","title":"\u5728\u63d2\u4ef6\u5f53\u4e2d\u5e94\u7528\u5305\u540d\u91cd\u5b9a\u5411","text":"<p>\u4e3a\u4e86\u5728\u63d2\u4ef6\u5f53\u4e2d\u5e94\u7528\u5305\u540d\u91cd\u5b9a\u5411\uff0c\u6700\u5e38\u89c1\u7684\u505a\u6cd5\u5c31\u662f\u65b0\u5efa\u4e00\u4e2a\u7a7a\u6a21\u5757\uff0c\u4f9d\u8d56\u4e4b\u524d\u5199\u597d\u7684\u7f16\u8bd1\u5668\u63d2\u4ef6\uff0c\u5e76\u901a\u8fc7\u4fee\u6539\u7f16\u8bd1\u903b\u8f91\u6765\u5b9e\u73b0\u5305\u540d\u7684\u91cd\u5b9a\u5411\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#embeddable","title":"\u76f4\u63a5\u4f9d\u8d56 embeddable \u7684\u7f16\u8bd1\u5668","text":"<p>\u65e2\u7136 kotlin-compiler-embeddable \u5f53\u4e2d\u5df2\u7ecf\u5bf9\u8fd9\u4e9b\u7b2c\u4e09\u65b9\u7684\u7c7b\u505a\u4e86\u91cd\u5b9a\u5411\uff0c\u6211\u4eec\u76f4\u63a5\u4f9d\u8d56\u5b83\u5e76\u57fa\u4e8e\u91cd\u5b9a\u5411\u4e4b\u540e\u7684\u7c7b\u505a\u5f00\u53d1\u4e0d\u5c31\u53ef\u4ee5\u4e86\u5417\uff1f</p> <p>\u8fd9\u5f53\u7136\u662f\u53ef\u4ee5\u7684\uff0c\u4e0d\u8fc7\u524d\u63d0\u662f\u6211\u4eec\u7684\u7f16\u8bd1\u5668\u63d2\u4ef6\u9879\u76ee\u4e0d\u9700\u8981\u540c\u65f6\u63d0\u4f9b IntelliJ \u63d2\u4ef6\u3002</p> <p>\u7531\u4e8e IntelliJ \u63d2\u4ef6\u7684\u8fd0\u884c\u73af\u5883\u662f\u786e\u5b9a\u7684\uff0c\u4e0d\u4f1a\u5b58\u5728\u4f9d\u8d56\u51b2\u7a81\u7684\u95ee\u9898\uff0c\u56e0\u6b64\u8fd0\u884c\u5728 IntelliJ \u73af\u5883\u5f53\u4e2d\u7684 Kotlin \u7f16\u8bd1\u5668\u662f\u6ca1\u6709\u7ecf\u8fc7\u5305\u540d\u91cd\u5b9a\u5411\u7684\u3002\u6362\u53e5\u8bdd\uff0c\u6211\u4eec\u4e3a\u4e86\u8ba9 IntelliJ \u63d2\u4ef6\u80fd\u591f\u5171\u4eab\u7f16\u8bd1\u5668\u63d2\u4ef6\u5f53\u4e2d\u7684\u903b\u8f91\uff0c\u5c31\u5fc5\u987b\u8ba9\u7f16\u8bd1\u5668\u63d2\u4ef6\u4f9d\u8d56 kotlin-compiler\uff0c\u800c\u4e0d\u662f\u5bf9\u5e94\u7684 embeddable \u7248\u672c\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_12","title":"\u7b26\u53f7\u5904\u7406\u5668\u7684\u5b9e\u73b0\u539f\u7406","text":""},{"location":"foundation/kotlin-meta-programming/compiler-extension/#java","title":"Java \u5b58\u6839\u7684\u751f\u6210","text":"<p>KAPT \u672c\u8d28\u4e0a\u4ecd\u7136\u662f Java \u7f16\u8bd1\u5668\u63d0\u4f9b\u7684\u7b26\u53f7\u5904\u7406\u673a\u5236\u3002\u5728 KAPT \u6267\u884c\u65f6\uff0cKotlin \u7f16\u8bd1\u5668\u4f1a\u5c06 Kotlin \u6e90\u7801\u8f6c\u8bd1\u6210 Java \u5b58\u6839\uff0c\u8fd9\u5176\u4e2d\u5c31\u5305\u542b\u4e86\u7b26\u53f7\u5904\u7406\u8fc7\u7a0b\u5f53\u4e2d\u5fc5\u987b\u7684 Java \u7b26\u53f7\u4fe1\u606f\u3002</p> <p>Java \u5b58\u6839\u7684\u8f6c\u8bd1\u4e3b\u8981\u5305\u542b Kotlin \u4ee3\u7801\u7f16\u8bd1\u751f\u6210 JVM \u5b57\u8282\u7801\u3001JVM \u5b57\u8282\u7801\u8f6c\u6362\u6210 Java \u8bed\u6cd5\u6811\u3001\u6253\u5370 Java \u8bed\u6cd5\u6811\u51e0\u4e2a\u5173\u952e\u73af\u8282\u3002</p> <p></p> <p>Kotlin \u7f16\u8bd1\u5668\u7f16\u8bd1\u751f\u6210 JVM \u5b57\u8282\u7801\u8fd9\u4e00\u6b65\u6bd4\u8f83\u5bb9\u6613\u7406\u89e3\uff0c\u6267\u884c\u7684\u5c31\u662f\u5b8c\u6574\u7684 Kotlin \u4ee3\u7801\u7684\u7f16\u8bd1\u6d41\u7a0b\u3002\u5982\u679c Kotlin \u6e90\u7801\u5f53\u4e2d\u5f15\u7528\u4e86\u5f85\u751f\u6210\u7684\u7c7b\u578b\uff0c\u8fd9\u4e9b\u7c7b\u578b\u5728\u7f16\u8bd1\u65f6\u4f1a\u88ab\u66ff\u6362\u6210 NonExistentClass\u3002</p> <p>Kotlin \u6e90\u7801\u7ecf\u8fc7\u7f16\u8bd1\u4e4b\u540e\u5f97\u5230 JVM \u5b57\u8282\u7801\uff0c\u518d\u8f6c\u6362\u6210 Java \u8bed\u6cd5\u6811\u3002\u8fd9\u4e00\u6b65\u7684\u76f8\u5173\u5b9e\u73b0\u4e3b\u8981\u5728 ClassFileToSourceStubConverter \u6587\u4ef6\u5f53\u4e2d\uff0c\u5b8c\u6210\u4e86\u9876\u7ea7\u7c7b\u4ece ASM \u7684 ClassNode \u7ed3\u6784\u5230 Java \u8bed\u6cd5\u6811\u7684 JCCompilationUnit \u7ed3\u6784\u7684\u8f6c\u6362\u3002\u6b64\u5916\uff0c\u8fd9\u4e00\u6b65\u8fd8\u4f1a\u6839\u636e\u5b9e\u9645\u9700\u8981\u751f\u6210 NonExistentClass\u3002</p> <p>\u6700\u540e\u4e00\u6b65\u5c31\u6bd4\u8f83\u7b80\u5355\u4e86\uff0c\u5c31\u662f\u5355\u7eaf\u5730\u5c06 JCCompilationUnit \u4ee5\u6587\u672c\u7684\u5f62\u5f0f\u8f93\u51fa\u5230\u6587\u4ef6\u5f53\u4e2d\uff0c\u5f97\u5230\u6700\u7ec8\u7684 Java \u5b58\u6839\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#java_1","title":"Java \u7f16\u8bd1\u5668\u7684\u8c03\u7528","text":"<p>\u751f\u6210 Java \u5b58\u6839\u4e4b\u540e\uff0cKAPT \u4f1a\u5c06\u539f\u672c\u7684 Java \u6e90\u7801\u548c\u65b0\u751f\u6210\u7684 Java \u5b58\u6839\u4e00\u8d77\u4f5c\u4e3a Java \u7f16\u8bd1\u5668\u7684\u8f93\u5165\uff0c\u4ee5\u6267\u884c\u7b26\u53f7\u5904\u7406\u7684\u903b\u8f91\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_13","title":"\u589e\u91cf\u7f16\u8bd1\u7684\u652f\u6301","text":""},{"location":"foundation/kotlin-meta-programming/compiler-extension/#java_2","title":"Java \u5b58\u6839\u7684\u589e\u91cf\u751f\u6210","text":"<p>\u5f53\u53ea\u6709\u90e8\u5206 Kotlin \u6e90\u7801\u53d1\u751f\u4fee\u6539\u65f6\uff0c\u7f16\u8bd1\u65f6\u53ef\u4ee5\u5229\u7528 Kotlin \u7f16\u8bd1\u5668\u7684\u589e\u91cf\u7279\u6027\u5c06\u53d1\u751f\u4fee\u6539\u7684\u6e90\u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\uff0c\u5e76\u751f\u6210 JVM \u5b57\u8282\u7801\u3002\u8fd9\u4e00\u6b65\u7f16\u8bd1\u7684\u7ed3\u679c\u9ed8\u8ba4\u4fdd\u5b58\u4e8e build/tmp/kapt3/incrementalData \u76ee\u5f55\u5f53\u4e2d\u3002\u540e\u7eed\u7684\u5904\u7406\u6d41\u7a0b\u5219\u4ee5\u7c7b\u4e3a\u5355\u4f4d\u4e00\u4e00\u8fdb\u884c\u5904\u7406\u3002\u7531\u6b64\u53ef\u89c1\uff0cJava \u5b58\u6839\u7684\u589e\u91cf\u751f\u6210\u53ea\u4f9d\u8d56\u4e8e\u7b2c\u4e00\u6b65\u7684 Kotlin \u6e90\u7801\u7684\u589e\u91cf\u7f16\u8bd1\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_14","title":"\u5904\u7406\u5668\u7684\u589e\u91cf\u6267\u884c","text":"<p>Java \u7f16\u8bd1\u5668\u672c\u8eab\u6ca1\u6709\u5bf9\u589e\u91cf\u7f16\u8bd1\u76f4\u63a5\u63d0\u4f9b\u652f\u6301\uff0c\u56e0\u800c\u4e5f\u4e0d\u4f1a\u5bf9\u7b26\u53f7\u5904\u7406\u63d0\u4f9b\u589e\u91cf\u652f\u6301\u3002</p> <p>\u7b26\u53f7\u5904\u7406\u5668\u7684\u589e\u91cf\u7f16\u8bd1\u76f4\u63a5\u53d6\u51b3\u4e8e\u751f\u6210\u7684\u76ee\u6807\u6587\u4ef6\u548c\u6e90\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5373\u5728\u521b\u5efa\u76ee\u6807\u6587\u4ef6\u65f6\u4f20\u5165\u7684 originatingElements\u3002</p> <p>\u800c Java \u7f16\u8bd1\u5668\u7684\u9ed8\u8ba4\u5b9e\u73b0 JavacFiler \u5374\u6ca1\u6709\u7528\u5230\u8fd9\u4e2a\u53c2\u6570\u3002Gradle \u4e3a\u4e86\u652f\u6301 Java \u6ce8\u89e3\u5904\u7406\u5668\u7684\u589e\u91cf\u7f16\u8bd1\uff0c\u63d0\u4f9b\u4e86\u81ea\u5df1\u7684 IncrementalFiler \u5b9e\u73b0\uff0cKAPT \u4e3a\u4e86\u517c\u5bb9 Gradle \u7684\u589e\u91cf\u7f16\u8bd1\u673a\u5236\u4e5f\u63d0\u4f9b\u4e86\u81ea\u5df1\u7684 IncrementalFiler \u5b9e\u73b0\u3002</p>"},{"location":"foundation/kotlin-meta-programming/compiler-extension/#_15","title":"\u591a\u8f6e\u6b21\u7b26\u53f7\u5904\u7406","text":"<p>\u5728\u591a\u8f6e\u6b21\u7b26\u53f7\u5904\u7406\u7684\u5b9e\u73b0\u4e0a\uff0c KAPT \u548c KSP \u5dee\u5f02\u8f83\u5927\u3002</p> <p>KAPT \u8c03\u7528\u4e86 Java \u7f16\u8bd1\u5668\uff0c\u591a\u8f6e\u6b21\u5904\u7406\u7684\u903b\u8f91\u7531 Java \u7f16\u8bd1\u5668\u8d1f\u8d23\uff0c\u800c KAPT \u7684 Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\u5bf9\u6b64\u5b8c\u5168\u4e0d\u9700\u8981\u5173\u5fc3\u3002\u8fd9\u4e5f\u80fd\u5f88\u597d\u7684\u89e3\u91ca\u4e3a\u4ec0\u4e48 KAPT \u7684\u5904\u7406\u5668\u65e0\u6cd5\u5728\u540e\u7eed\u8f6e\u6b21\u7684\u7b26\u53f7\u5904\u7406\u4e2d\u5904\u7406\u65b0\u751f\u6210\u7684 Kotlin \u6e90\u6587\u4ef6\u4e86\uff0c\u56e0\u4e3a\u6574\u4e2a\u7b26\u53f7\u5904\u7406\u7684\u8fc7\u7a0b\u7531 Java \u7f16\u8bd1\u5668\u5168\u6743\u8d1f\u8d23\uff0cKAPT \u6ca1\u6709\u5408\u9002\u7684\u65f6\u673a\u4e3a\u65b0\u751f\u6210\u7684 Kotlin \u6e90\u6587\u4ef6\u751f\u6210 Java \u5b58\u6839\u3002</p> <p>\u800c KSP \u4f5c\u4e3a\u4e00\u6b3e\u7eaf\u7cb9\u7684 Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\uff0c\u53ef\u4ee5\u5145\u5206\u5229\u7528 Kotlin \u7f16\u8bd1\u5668\u7684\u80fd\u529b\u6765\u5b9e\u73b0\u591a\u8f6e\u6b21\u7684\u7b26\u53f7\u5904\u7406\u3002</p> <p>KSP \u662f\u652f\u6301\u5728\u591a\u8f6e\u6b21\u7b26\u53f7\u5904\u7406\u4e2d\u5bf9\u65b0\u751f\u6210\u7684 Java \u548c Kotlin \u6e90\u6587\u4ef6\u8fdb\u884c\u5904\u7406\u7684\u3002\u8fd9\u4e5f\u662f KSP \u76f8\u6bd4 KAPT \u66f4\u6709\u4f18\u52bf\u7684\u4e00\u4e2a\u7ec6\u8282\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/","title":"\u5143\u6570\u636e\u7b80\u4ecb","text":"<p>\u672c\u6587\u4e3a\u300a\u6df1\u5165\u5b9e\u8df5 kotlin \u5143\u7f16\u7a0b\u300b\u8bfb\u4e66\u7b14\u8bb0\uff0c\u60f3\u8981\u6df1\u5165\u4e86\u89e3 kotlin \u5143\u7f16\u7a0b\u7684\u540c\u5b66\u53ef\u4ee5\u9605\u8bfb\u539f\u4e66\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#_2","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>\u5143\u6570\u636e(Metadata)\u662f\u6307\u63cf\u8ff0\u5176\u4ed6\u6570\u636e\u7684\u4fe1\u606f\u7684\u6570\u636e\uff0c\u4e0d\u5305\u542b\u88ab\u63cf\u8ff0\u7684\u6570\u636e\u7684\u5185\u5bb9\u3002\u4f8b\u5982 \u4e00\u4e2a\u5b57\u7b26\u4e32\u4e00\u5171\u6709 10 \u4e2a\u5b57\u7b26\uff0c\u8fd9\u91cc\u7684 10 \u4e2a\u5b57\u7b26\u7684\u957f\u5ea6\u5c31\u662f\u8fd9\u4e2a\u5b57\u7b26\u4e32\u7684\u5143\u6570\u636e\u3002</p> <p>\u5177\u4f53\u5230\u6211\u4eec\u8ba8\u8bba\u7684 Kotlin \u5143\u7f16\u7a0b\u7684\u8303\u7574\uff0c\u5143\u6570\u636e\u53ef\u4ee5\u7406\u89e3\u4e3a\u63cf\u8ff0\u76ee\u6807\u7a0b\u5e8f\u672c\u8eab\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u4ee3\u7801\u7684\u884c\u6570\u3001\u8bed\u6cd5\u6811\uff0c\u751a\u81f3\u7f16\u8bd1\u540e\u7684\u4ea7\u7269\u7b49\u7b49\u3002\u6309\u7167\u5143\u6570\u636e\u7684\u4ea7\u751f\u9014\u5f84\uff0c\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5c06\u5176\u5206\u4e3a\u4e24\u79cd\u7c7b\u578b\uff0c\u5373\u8bed\u6cd5\u7ed3\u6784\u548c\u7f16\u8bd1\u4ea7\u7269\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#_3","title":"\u6ce8\u89e3","text":"<p>\u6ce8\u89e3(Annotation)\u662f\u4e00\u79cd\u53ef\u4ee5\u5728\u6e90\u7801\u5f53\u4e2d\u6dfb\u52a0\u5143\u6570\u636e\u7684\u8bed\u6cd5\u3002\u6ce8\u89e3\u5728 Kotlin \u5143\u7f16\u7a0b \u4e2d\u626e\u6f14\u4e86\u975e\u5e38\u91cd\u8981\u7684\u89d2\u8272\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#_4","title":"\u6ce8\u89e3\u7684\u6982\u5ff5","text":"<p>\u6ce8\u89e3\u548c\u6ce8\u91ca\u662f\u4e24\u4e2a\u63aa\u8f9e\u548c\u529f\u80fd\u90fd\u6bd4\u8f83\u63a5\u8fd1\u7684\u6982\u5ff5\uff0c\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u6ce8\u89e3\u662f\u4e00\u79cd\u6709\u7740\u4e25\u683c\u7684\u8bed\u6cd5\u5b9a\u4e49\u548c\u4f7f\u7528\u7ea6\u675f\u7684\u7ed3\u6784\u5316\u4fe1\u606f\uff0c\u662f\u4e13\u95e8\u4e3a\u5143\u7f16\u7a0b\u8bbe\u8ba1\u7684\u8bed\u6cd5\u7ed3\u6784\u3002</p> <p>\u6839\u636e\u6ce8\u89e3\u5728\u7a0b\u5e8f\u4e0d\u540c\u9636\u6bb5\u7684\u53ef\u89c1\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u5206\u4e3a\u4e09\u7c7b\uff1a</p> <ul> <li>\u6e90\u4ee3\u7801\u53ef\u89c1\u7684\u6ce8\u89e3</li> <li>\u4e8c\u8fdb\u5236\u53ef\u89c1\u7684\u6ce8\u89e3</li> <li>\u8fd0\u884c\u65f6\u53ef\u89c1\u7684\u6ce8\u89e3</li> </ul>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#_5","title":"\u6e90\u4ee3\u7801\u53ef\u89c1\u7684\u6ce8\u89e3","text":"<p>\u6e90\u4ee3\u7801\u53ef\u89c1\u7684\u6ce8\u89e3\u5728\u5b9a\u4e49\u65f6\uff0c\u9700\u8981\u5c06 @Retention \u7684\u53c2\u6570\u8bbe\u7f6e\u4e3a AnnotationRetention.SOURCE\u3002\u6b64\u7c7b\u6ce8\u89e3\u4e0d\u4f1a\u5b58\u5728\u4e8e\u7f16\u8bd1\u4ea7\u7269\u5f53\u4e2d\uff0c\u53ef\u4ee5\u7528\u6765\u505a\u4ee3\u7801\u63d0\u793a\uff0c \u7f16\u8bd1\u914d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u5728\u7f16\u8bd1\u65f6\u4f7f\u7528 KAPT\u3001KSP \u6216\u8005\u7f16\u8bd1\u5668\u63d2\u4ef6\u5b9e\u73b0\u4ee3\u7801\u751f\u6210\u3001\u4ee3\u7801\u68c0\u67e5\u7b49\u529f\u80fd\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#_6","title":"\u4e8c\u8fdb\u5236\u53ef\u89c1\u7684\u6ce8\u89e3","text":"<p>\u4e8c\u8fdb\u5236\u53ef\u89c1\u7684\u6ce8\u89e3\u5728\u5b9a\u4e49\u65f6\uff0c\u9700\u8981\u5c06 @Retention \u7684\u503c\u8bbe\u7f6e\u4e3a AnnotationRetention.BINARY\u3002\u6b64\u7c7b\u6ce8\u89e3\u4f1a\u5b58\u5728\u4e8e\u7f16\u8bd1\u4ea7\u7269\u5f53\u4e2d\uff0c\u4f46\u5bf9\u8fd0\u884c\u65f6\u4e0d\u53ef\u89c1\uff0c\u9664\u9002\u7528\u4e8e\u6e90\u4ee3\u7801\u53ef\u89c1\u7684\u6ce8\u89e3\u7684\u6240\u6709\u4f7f\u7528\u573a\u666f\u4ee5\u5916\uff0c\u4e5f\u9002\u7528\u4e8e\u5bf9\u7f16\u8bd1\u4ea7\u7269\u8fdb\u884c\u5904\u7406\u7684\u573a\u666f\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#_7","title":"\u8fd0\u884c\u65f6\u53ef\u89c1\u7684\u6ce8\u89e3","text":"<p>\u8fd0\u884c\u65f6\u53ef\u89c1\u7684\u6ce8\u89e3\u5728\u5b9a\u4e49\u65f6\uff0c\u9700\u8981\u5c06 @Retention \u7684\u503c\u8bbe\u7f6e\u4e3a AnnotationRetention.RUNTIME\u3002\u6b64\u7c7b\u6ce8\u89e3\u4f1a\u5b58\u5728\u4e8e\u7f16\u8bd1\u4ea7\u7269\u5f53\u4e2d\uff0c\u5e76\u5bf9\u8fd0\u884c\u65f6\u53ef\u89c1\uff0c\u9664\u9002\u7528\u4e8e\u4e8c\u8fdb\u5236\u53ef\u89c1\u7684\u6ce8\u89e3\u7684\u5168\u90e8\u4f7f\u7528\u573a\u666f\u4ee5\u5916\uff0c\u4e5f\u53ef\u5728\u8fd0\u884c\u65f6\u901a\u8fc7\u53cd\u5c04\u8bbf\u95ee\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#kotlin-metadata","title":"Kotlin \u7684 Metadata","text":"<p>Kotlin \u6709\u81ea\u5df1\u4e13\u5c5e\u7684 Metadata \u8bbe\u8ba1\uff0c\u4e3b\u8981\u7528\u4e8e\u4e3a\u7f16\u8bd1\u4ea7\u7269\u63d0\u4f9b\u5b8c\u5584\u7684 Kotlin \u8bed\u6cd5\u4fe1\u606f\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#kotlin-jvm-metadata","title":"Kotlin JVM \u5f53\u4e2d\u7684 @Metadata \u6ce8\u89e3","text":"<p>Kotlin \u63d0\u4f9b\u4e86\u5f88\u591a Java \u4e0d\u652f\u6301\u7684\u7279\u6027\uff0c\u8fd9\u4e9b\u7279\u6027\u4e5f\u5f88\u96be\u76f4\u63a5\u4f7f\u7528 JVM \u5b57\u8282\u7801\u8fdb\u884c\u7b49 \u4ef7\u7684\u63cf\u8ff0\u3002\u4e3a\u4e86\u786e\u4fdd\u53d1\u5e03\u7684\u4e8c\u8fdb\u5236\u4ea7\u7269\u5f53\u4e2d\u5305\u542b\u5b8c\u6574\u7684 Kotlin \u7684\u8bed\u6cd5\u4fe1\u606f\uff0cKotlin \u7f16\u8bd1\u5668 \u4e3a\u6bcf\u4e00\u4e2a\u7c7b\u751f\u6210\u4e00\u4e2a @Metadata \u6ce8\u89e3\uff0c\u540c\u65f6\u4e5f\u4f1a\u4e3a\u6a21\u5757\u5185\u6240\u6709\u7684\u9876\u7ea7\u58f0\u660e\u751f\u6210\u4e00\u4e2a\u6a21\u5757\u4e13\u5c5e\u7684 metadata \u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u901a\u5e38\u4ee5 kotlin_module \u4e3a\u540e\u7f00\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#metadata","title":"@Metadata \u6ce8\u89e3\u7684\u5b9a\u4e49","text":"<pre><code>public annotation class Metadata( \n// metadata \u7684\u7c7b\u578b\uff0c\u5171 5 \u79cd @get:JvmName(\"k\")\nval kind: Int = 1,\n\n// metadata \u7684\u7248\u672c @get:JvmName(\"mv\")\nval metadataVersion: IntArray = [],\n\n// metadata \u7684\u81ea\u5b9a\u4e49\u683c\u5f0f\u6570\u636e\uff0c\u683c\u5f0f\u53d6\u51b3\u4e8e kind @get:JvmName(\"d1\")\nval data1: Array&lt;String&gt; = [],\n\n// data1 \u7684\u8865\u5145\uff0c\u5185\u5bb9\u662f\u5b57\u7b26\u4e32\u5e38\u91cf\uff0c\u53ef\u4ee5\u76f4\u63a5\u5b58\u5165\u5e38\u91cf\u6c60\u65b9\u4fbf\u590d\u7528 @get:JvmName(\"d2\")\nval data2: Array&lt;String&gt; = [],\n... // \u7701\u7565\u90e8\u5206\u5b57\u6bb5 )\n</code></pre>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#kotlin-metadata_1","title":"Kotlin \u53cd\u5c04\u4e0e @Metadata","text":"<p>Kotlin \u53cd\u5c04\u4e4b\u6240\u4ee5\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u83b7\u53d6\u5230 Kotlin \u7279\u6709\u7684\u5404\u79cd\u8bed\u6cd5\u4fe1\u606f\uff0c\u4e5f\u6b63\u662f\u5f97\u76ca\u4e8e\u5bf9 @Metadata \u6ce8\u89e3\u6240\u5305\u542b\u7684\u4fe1\u606f\u7684\u8bfb\u53d6\u3002</p> <p>\u7531\u4e8e\u9700\u8981\u5904\u7406 @Metadata \u6ce8\u89e3\u7684\u53cd\u5e8f\u5217\u5316\uff0cKotlin \u53cd\u5c04\u76f8\u6bd4 Java \u53cd\u5c04\u5728\u521d\u59cb\u5316\u5bf9\u5e94 \u7c7b\u578b\u65f6\u4f1a\u7a0d\u6162\u4e00\u4e9b\uff0c\u540e\u7eed\u7684\u4f7f\u7528\u5f53\u4e2d\u4e8c\u8005\u7684\u6027\u80fd\u5219\u5dee\u5f02\u4e0d\u5927\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#kotlin-jvm-metadata_1","title":"Kotlin JVM \u5e93\u5f53\u4e2d\u7684 metadata","text":"<p>\u5728 Kotlin JVM \u6a21\u5757\u4e2d\uff0c\u540e\u7f00\u4e3a kotlin_module \u7684\u6587\u4ef6\u5b58\u50a8\u4e86\u6a21\u5757\u5185 JVM \u5b57\u8282\u7801\u4e0d \u652f\u6301\u7684\u9876\u7ea7\u58f0\u660e\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u51fd\u6570\u3001\u5c5e\u6027\u3001\u7c7b\u578b\u522b\u540d\u7b49\u3002\u5982\u679c\u6211\u4eec\u5728\u6253\u5305\u53d1\u5e03\u81ea\u5df1\u7684\u6a21\u5757\u65f6\u6ca1\u6709\u643a\u5e26&lt;\u6a21\u5757\u540d&gt;.kotlin_module \u6587\u4ef6\uff0c\u5c31\u4f1a\u5bfc\u81f4\u8fd9\u4e9b\u9876\u7ea7\u58f0\u660e\u65e0\u6cd5\u6b63\u5e38\u88ab\u5176\u4ed6\u8c03\u7528\u8005\u4f7f\u7528\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#kotlin","title":"Kotlin \u7684\u8bed\u6cd5\u6811","text":"<p>Kotlin \u6e90\u4ee3\u7801\u5728\u7f16\u8bd1\u65f6\uff0c\u7ecf\u8fc7\u8bcd\u6cd5\u5206\u6790\u3001\u8bed\u6cd5\u5206\u6790\u4e4b\u540e\uff0c\u4f1a\u751f\u6210\u76f8\u5e94\u7684\u8bed\u6cd5\u6811\u3002</p> <p>\u7b2c\u4e00\u4ee3 Kotlin \u7f16\u8bd1\u5668\u57fa\u4e8e IntelliJ \u5e73\u53f0\u7684 PSI \u5b9e\u73b0\u4e86\u81ea\u5df1\u7684\u8bed\u6cd5\u6811;\u7b2c\u4e8c\u4ee3 Kotlin \u7f16\u8bd1\u5668(\u5373 K2 Compiler\uff0c\u4e0b\u79f0 K2 \u7f16\u8bd1\u5668)\u5219\u8bbe\u8ba1\u5b9e\u73b0\u4e86\u4e00\u5957\u5168\u65b0\u7684\u8bed\u6cd5\u7ed3\u6784\uff0c \u79f0\u4e3a FIR(Front-end IR\uff0c\u524d\u7aef\u4e2d\u95f4\u4ee3\u7801\u8868\u793a)\u3002</p> <p>FE1.0 \u7684\u8bed\u6cd5\u6811\u4e4b\u6240\u4ee5\u9009\u62e9\u57fa\u4e8e IntelliJ \u5e73\u53f0\u7684 PSI \u5b9e\u73b0\uff0c\u597d\u5904\u81ea\u7136\u662f\u53ef\u4ee5\u5c3d\u53ef\u80fd\u5730\u590d\u7528 IntelliJ \u5e73\u53f0\u5df2\u6709\u7684\u6280\u672f\u79ef\u7d2f\uff0c\u5728\u65e9\u671f\u53ef\u4ee5\u5feb\u901f\u5b9e\u73b0\u9700\u6c42\u3002\u4f46\u957f\u4e45\u6765\u770b\uff0c\u8fd9\u4e5f\u4f1a\u4f7f\u5f97 Kotlin \u7f16\u8bd1\u5668\u4e25\u91cd\u4f9d\u8d56\u4e8e IntelliJ \u5e73\u53f0\u81ea\u8eab\u7684\u8fed\u4ee3\u800c\u96be\u4ee5\u5b9e\u73b0\u9488\u5bf9\u6027\u7684\u4f18\u5316\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9 \u4e2a\u95ee\u9898\uff0cKotlin \u56e2\u961f\u4ece 1.6 \u5f00\u59cb\u5c31\u5728\u6301\u7eed\u7814\u53d1\u4e00\u6b3e\u65b0\u7684\u524d\u7aef\u7f16\u8bd1\u5668\uff0c\u4e5f\u5c31\u662f K2 \u7f16\u8bd1\u5668\u7684 FIR \u524d\u7aef\u3002</p> <p>\u5728 FE1.0 \u4e2d\uff0c\u524d\u7aef\u7f16\u8bd1\u5668\u7684\u8f93\u51fa\u5305\u542b PSI \u6811\u548c BindingContext \u4e24\u90e8\u5206\uff0c\u5176\u4e2d BindingContext \u5b9e\u9645\u4e0a\u5c31\u662f\u8bed\u4e49\u5206\u6790\u7ed3\u679c\u7684\u6620\u5c04\u8868\uff0c\u5305\u542b\u4e86 PSI \u8282\u70b9\u5230\u5bf9\u5e94\u7684\u8bed\u4e49\u4fe1\u606f\u7684 \u6620\u5c04\u5173\u7cfb\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0cFIR \u7684\u8282\u70b9\u5f53\u4e2d\u5305\u542b\u4e86\u5b8c\u6574\u7684\u8bed\u4e49\u5206\u6790\u7ed3\u679c\uff0c\u56e0\u6b64\u5728\u83b7\u53d6\u8bed\u4e49\u5206\u6790\u65f6\u65e0\u987b\u53cd\u590d\u67e5\u8868\uff0c\u65e0\u8bba\u4ece\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u4e0a\u8fd8\u662f\u4ece\u6267\u884c\u6548\u7387\u4e0a\u90fd\u6709\u5f88\u5927\u7684\u63d0\u5347\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#ir","title":"\u8fde\u63a5\u524d\u540e\u7aef\u7f16\u8bd1\u5668\u7684 IR","text":"<p>Kotlin IR(Intermediate Representation\uff0c\u4e2d\u95f4\u8868\u793a)\u6700\u65e9\u5728 Kotlin Native \u7684\u7f16\u8bd1\u5668\u5f53\u4e2d\u8bbe\u8ba1\u5b9e\u73b0\u3002IR \u5bf9\u4e8e Kotlin \u7f16\u8bd1\u5668\u7684\u5b9e\u73b0\u975e\u5e38\u91cd\u8981\uff0c\u8fd9\u53ef\u4ee5\u4f7f\u5f97 Kotlin \u7684\u524d \u540e\u7aef\u7f16\u8bd1\u5668\u5206\u79bb\uff0c\u5404\u81ea\u4f18\u5316\u548c\u8fed\u4ee3\u3002\u540c\u65f6\uff0c\u4e0d\u540c\u76ee\u6807\u5e73\u53f0\u7684\u540e\u7aef\u7f16\u8bd1\u5668\u5747\u53ef\u4ee5\u4f7f\u7528 Kotlin IR \u4f5c\u4e3a\u7edf\u4e00\u7684\u8f93\u5165\uff0c\u8fd9\u4e5f\u4e3a\u540e\u7eed\u6269\u5c55\u65b0\u5e73\u53f0\u63d0\u4f9b\u4e86\u975e\u5e38\u4fbf\u5229\u7684\u6761\u4ef6\u3002</p> <p>\u81ea Kotlin 1.5 \u4ee5\u6765\uff0cKotlin JVM \u548c JS \u7684\u540e\u7aef\u7f16\u8bd1\u5668\u4e5f\u5df2\u7ecf\u9646\u7eed\u8fc1\u79fb\u81f3 IR \u7f16\u8bd1 \u5668\uff0cWASM \u7684\u540e\u7aef\u7f16\u8bd1\u5668\u4e5f\u57fa\u4e8e Kotlin IR \u505a\u4e86\u91cd\u65b0\u5b9e\u73b0\u3002</p> <p></p> <p>IR \u6700\u521d\u7531 PSI \u6216\u8005 FIR \u8f6c\u6362\u800c\u6765\uff0c\u63a5\u7740\u7531\u7f16\u8bd1\u5668\u63d2\u4ef6\u7684\u5904\u7406\uff0c\u4e4b\u540e\u518d\u7ecf\u8fc7\u4e00\u7cfb\u5217\u964d\u7ea7(Lowering)\uff0c\u6700\u7ec8\u4ea4\u7531\u76ee\u6807\u7a0b\u5e8f\u751f\u6210\u5668\u751f\u6210\u6700\u7ec8\u7684\u76ee\u6807\u7a0b\u5e8f\u3002\u964d\u7ea7\u64cd\u4f5c\u975e\u5e38\u591a\uff0c\u6bcf\u4e00\u4e2a\u964d\u7ea7\u9636\u6bb5\u90fd\u53ea\u662f\u4e00\u4e2a\u72ec\u7acb\u4e14\u7ec6\u8282\u7684\u4f18\u5316\u6b65\u9aa4\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#java-kotlin","title":"Java \u548c Kotlin \u7684\u7b26\u53f7\u6811","text":"<p>APT \u662f Java \u5f53\u4e2d\u6700\u91cd\u8981\u7684\u5143\u7f16\u7a0b\u6280\u672f\u4e4b\u4e00\uff0c\u5b83\u672c\u8d28\u4e0a\u662f Java \u7f16\u8bd1\u5668\u63d0\u4f9b\u7684\u5143\u7f16\u7a0b API\u3002</p> <p>Kotlin \u4ece 1.0 \u5f00\u59cb\u5c31\u9010\u6b65\u5b9e\u73b0\u4e86\u5bf9 APT \u7684\u652f\u6301\uff0c\u5373 KAPT\u3002KAPT \u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u7f16\u8bd1 \u5668\u63d2\u4ef6\uff0c\u5b83\u5148\u5c06 Kotlin \u4ee3\u7801\u8f6c\u6210 Java \u5b58\u6839(Java Stubs)\uff0c\u4f5c\u4e3a Java \u7f16\u8bd1\u5668\u7684\u8f93\u5165\u8fdb \u800c\u652f\u6301 APT\u3002</p> <p>\u56e0\u6b64\uff0c\u4f7f\u7528 KAPT \u5bf9 Kotlin \u6e90\u7801\u8fdb\u884c\u5904\u7406\u65f6\uff0c\u6211\u4eec\u80fd\u591f\u8bbf\u95ee\u5230\u7684\u5b9e\u9645\u4e0a\u5c31\u662f Java \u7b26\u53f7\u6811\uff0c\u5373\u4f7f\u6e90\u4ee3\u7801\u662f\u4f7f\u7528 Kotlin \u7f16\u5199\u7684\u3002</p> <p>\u968f\u7740 Kotlin \u7684\u65e5\u76ca\u666e\u53ca\uff0cKAPT \u8fd9\u4e2a\u201c\u66f2\u7ebf\u6551\u56fd\u201d\u65b9\u6848\u7684\u5f0a\u7aef\u4e5f\u9010\u6e10\u663e\u73b0\u3002\u4e00\u65b9\u9762 Java \u7b26\u53f7\u5f88\u96be\u53cd\u5e94\u771f\u5b9e\u7684 Kotlin \u6e90\u4ee3\u7801\u5f53\u4e2d\u7684\u7b26\u53f7\u4fe1\u606f\uff0c\u56e0\u800c\u6211\u4eec\u4e0d\u5f97\u4e0d\u7ecf\u5e38\u501f\u52a9 @Metadata \u6ce8\u89e3\u6765\u8fd8\u539f\u771f\u5b9e\u7684 Kotlin \u7b26\u53f7;\u53e6\u4e00\u65b9\u9762\uff0cKAPT \u603b\u662f\u9700\u8981\u5148\u751f\u6210 Java \u5b58\u6839\uff0c\u8fd9\u5bf9\u4e8e\u6709\u4e00\u5b9a\u89c4\u6a21\u7684\u9879\u76ee\u6765\u8bf4\u7b80\u76f4\u5c31\u662f\u707e\u96be\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cGoogle \u5f00\u6e90\u4e86 KSP(Kotlin Symbol Processing\uff0cKotlin \u7b26 \u53f7\u5904\u7406\u5668)\uff0c\u57fa\u4e8e Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\u5c06 Kotlin \u7684\u8bed\u6cd5\u6811\u62bd\u8c61\u6210\u7b26\u53f7\u6811\uff0c\u5b8c\u7f8e\u5730\u89e3\u51b3\u4e86 KAPT \u5b58\u5728\u7684\u95ee\u9898\u3002</p> <p>KSP \u9664\u4e86\u652f\u6301 Kotlin \u4e4b\u5916\uff0c\u4e5f\u4f1a\u628a Java \u7b26\u53f7\u62bd\u8c61\u6210 Kotlin \u7b26\u53f7\uff0c\u56e0\u6b64\u6211\u4eec\u5b8c\u5168 \u53ef\u4ee5\u4f7f\u7528 KSP \u6765\u66ff\u4ee3 KAPT\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#kotlin_1","title":"Kotlin \u7684\u7f16\u8bd1\u4ea7\u7269","text":""},{"location":"foundation/kotlin-meta-programming/meta-data-introduction/#jvm","title":"JVM","text":"<p>\u4e25\u683c\u610f\u4e49\u4e0a\u6765\u8bb2\uff0c\u5bf9\u4e8e Kotlin \u7f16\u8bd1\u5668\u7684\u7f16\u8bd1\u4ea7\u7269\u7684\u5904\u7406\u4e0d\u5c5e\u4e8e\u5178\u578b\u7684 Kotlin \u5143\u7f16\u7a0b \u7684\u8303\u7574\u3002\u4e0d\u8fc7\uff0c\u7531\u4e8e Kotlin \u5e7f\u6cdb\u5e94\u7528\u4e8e JVM \u73af\u5883\u5f53\u4e2d\uff0c\u56e0\u6b64 JVM \u5b57\u8282\u7801\u5206\u6790\u548c\u7f16\u8f91\u6280\u672f \u4e5f\u662f Kotlin \u5f00\u53d1\u8005\u7ecf\u5e38\u9700\u8981\u9762\u5bf9\u7684\u5143\u7f16\u7a0b\u573a\u666f\u3002</p> <p>\u901a\u8fc7\u7f16\u8f91 JVM \u5b57\u8282\u7801\u53ef\u4ee5\u5e94\u5bf9\u7684\u9700\u6c42\u573a\u666f\u6709\u5f88\u591a\u3002\u4f8b\u5982:</p> <ol> <li>\u53bb\u9664 @Metadata \u6ce8\u89e3\u3002Kotlin \u6807\u51c6\u5e93\u548c\u53cd\u5c04\u5e93\u5728\u7f16\u8bd1\u65f6\u5c31\u4f1a\u4f7f\u7528 ASM \u6765\u53bb\u9664\u81ea\u8eab\u65e0\u7528\u7684 @Metadata \u6ce8\u89e3\uff0c\u4ee5\u51cf\u5c11\u4ea7\u7269\u4f53\u79ef\u3002</li> <li>\u62e6\u622a\u6216\u8005\u66ff\u6362\u65b9\u6cd5\u8c03\u7528\u3002\u6211\u4eec\u7ecf\u5e38\u5e0c\u671b\u5e94\u7528\u5185\u90e8\u5bf9\u67d0\u4e9b\u7279\u5b9a API \u7684\u8bbf\u95ee\u662f\u53ef\u63a7\u7684\uff0c\u5bf9\u4e8e\u7b2c\u4e09\u65b9 SDK\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u5b57\u8282\u7801\u7f16\u8f91\u6280\u672f\u6765\u5b9e\u73b0\u201c\u5077\u6881\u6362\u67f1\u201d\u3002</li> </ol>"},{"location":"foundation/kotlin-meta-programming/meta-programming-basic/","title":"\u5143\u7f16\u7a0b\u6982\u8ff0","text":"<p>\u672c\u6587\u4e3a\u300a\u6df1\u5165\u5b9e\u8df5 kotlin \u5143\u7f16\u7a0b\u300b\u8bfb\u4e66\u7b14\u8bb0\uff0c\u60f3\u8981\u6df1\u5165\u4e86\u89e3 kotlin \u5143\u7f16\u7a0b\u7684\u540c\u5b66\u53ef\u4ee5\u9605\u8bfb\u539f\u4e66\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-programming-basic/#_2","title":"\u5143\u7f16\u7a0b\u7684\u57fa\u672c\u6982\u5ff5","text":""},{"location":"foundation/kotlin-meta-programming/meta-programming-basic/#_3","title":"\u5143\u7f16\u7a0b\u7684\u5b9a\u4e49","text":"<p>\u5143\u7f16\u7a0b(Meta Programming)\uff0c\u5c31\u662f\u4ee5\u7a0b\u5e8f\u4e3a\u6570\u636e\u7684\u7f16\u7a0b\u3002\u8fd9\u610f\u5473\u7740\u5143\u7f16\u7a0b\u5f80\u5f80\u662f\u4ee5\u8bbf\u95ee\u548c\u4fee\u6539\u7a0b\u5e8f\u672c\u8eab\u4e3a\u76ee\u7684\u7684\u3002\u5176\u4e2d\uff0c\u7f16\u5199\u5143\u7a0b\u5e8f\u7684\u8bed\u8a00\u88ab\u79f0\u4e3a\u5143\u8bed\u8a00\uff0c\u88ab\u64cd\u4f5c\u7684\u8bed\u8a00\u5219\u88ab\u79f0\u4e3a\u76ee\u6807\u8bed\u8a00\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-programming-basic/#_4","title":"\u5143\u7f16\u7a0b\u7684\u5206\u7c7b","text":""},{"location":"foundation/kotlin-meta-programming/meta-programming-basic/#_5","title":"\u5143\u7f16\u7a0b\u5b66\u4e60\u65b9\u6cd5","text":"<ol> <li>\u57f9\u517b\u5174\u8da3</li> <li>\u4ed8\u8bf8\u884c\u52a8</li> <li>\u5584\u7528\u5de5\u5177</li> <li>\u591a\u8bfb\u6e90\u7801</li> </ol>"},{"location":"foundation/kotlin-meta-programming/meta-programming-debug/","title":"\u5143\u7a0b\u5e8f\u7684\u5f00\u53d1\u548c\u8c03\u8bd5","text":"<p>\u672c\u6587\u4e3a\u300a\u6df1\u5165\u5b9e\u8df5 kotlin \u5143\u7f16\u7a0b\u300b\u8bfb\u4e66\u7b14\u8bb0\uff0c\u60f3\u8981\u6df1\u5165\u4e86\u89e3 kotlin \u5143\u7f16\u7a0b\u7684\u540c\u5b66\u53ef\u4ee5\u9605\u8bfb\u539f\u4e66\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-programming-debug/#kotlin-compile-testing","title":"\u4f7f\u7528 kotlin-compile-testing \u7f16\u5199\u5355\u5143\u6d4b\u8bd5","text":"<p>\u5143\u7f16\u7a0b\u7684\u903b\u8f91\u901a\u5e38\u8f83\u4e3a\u62bd\u8c61\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5355\u5143\u6d4b\u8bd5\u5c06\u5404\u79cd\u8fb9\u754c\u7528\u4f8b\u8bb0\u5f55\u4e0b\u6765\uff0c\u5e76\u5728\u529f\u80fd\u8fed\u4ee3\u4e4b\u65f6\u4e0d\u65ad\u5bf9\u5143\u7a0b\u5e8f\u8fdb\u884c\u9a8c\u8bc1\uff0c\u4e3a\u5143\u7a0b\u5e8f\u63d0\u4f9b\u53ef\u9760\u6027\u4fdd\u8bc1\u3002\u540c\u65f6\uff0c\u6211\u4eec\u4e5f\u80fd\u5728\u8fd0\u884c\u5355\u5143\u6d4b\u8bd5\u65f6\u901a \u8fc7\u65ad\u70b9\u8c03\u8bd5\u3001\u65e5\u5fd7\u8f93\u51fa\u7684\u65b9\u5f0f\u5bf9\u7f16\u8bd1\u5668\u5185\u90e8\u7684\u7ed3\u6784\u548c\u903b\u8f91\u8fdb\u884c\u6df1\u5165\u5206\u6790\uff0c\u4ee5\u52a0\u6df1\u5bf9\u7f16\u8bd1\u5668\u5185\u90e8\u7ec6\u8282\u7684\u8ba4\u8bc6\u548c\u7406\u89e3\uff0c\u964d\u4f4e\u5f00\u53d1\u96be\u5ea6\u548c\u6210\u672c\u3002</p> <ul> <li>\u7f16\u8bd1\u5668\u7684\u8c03\u7528\u548c\u8c03\u8bd5</li> <li>\u68c0\u67e5 KAPT \u7684\u8f93\u51fa</li> <li>\u6dfb\u52a0\u5bf9 KSP \u7684\u652f\u6301</li> <li>\u8fd0\u884c\u7f16\u8bd1\u540e\u7684\u7a0b\u5e8f</li> <li>\u6253\u5370\u53d8\u6362\u4e4b\u540e\u7684 IR</li> <li>\u591a\u6a21\u5757\u7f16\u8bd1</li> </ul>"},{"location":"foundation/kotlin-meta-programming/meta-programming-debug/#_2","title":"\u5728\u5b9e\u9645\u9879\u76ee\u5f53\u4e2d\u96c6\u6210","text":"<p>\u5728\u5143\u7f16\u7a0b\u9879\u76ee\u7684\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u91c7\u7528\u5355\u5143\u6d4b\u8bd5\u53ef\u4ee5\u5e94\u5bf9\u7edd\u5927\u591a\u6570\u7684\u8c03\u8bd5\u548c\u6d4b\u8bd5\u573a\u666f\u3002</p> <p>\u4e0d\u8fc7\uff0c\u5728\u5b9e\u9645\u9879\u76ee\u5f53\u4e2d\u8fdb\u884c\u96c6\u6210\u4e5f\u662f\u6bd4\u8f83\u91cd\u8981\u7684\u5f00\u53d1\u548c\u8c03\u8bd5\u624b\u6bb5\u3002\u6709\u4e9b\u65f6\u5019\u6211\u4eec\u5e0c\u671b\u80fd\u591f\u5feb\u901f\u7ed3\u5408\u5b9e\u9645\u9879\u76ee\u5b8c\u6210\u4e00\u4e9b\u60f3\u6cd5\u7684\u9a8c\u8bc1\uff0c\u76f4\u63a5\u96c6\u6210\u5f00\u53d1\u751a\u81f3\u4f3c\u4e4e\u662f\u4e00\u4e2a\u66f4\u597d\u7684\u529e\u6cd5\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-programming-debug/#_3","title":"\u5de5\u7a0b\u7684\u7ec4\u7ec7\u5f62\u5f0f","text":"<p>\u5728\u672c\u5730\u5f00\u53d1\u65f6\uff0c\u4e3a\u4e86\u5b9e\u73b0\u96c6\u6210\u8c03\u8bd5\uff0c\u901a\u5e38\u6211\u4eec\u6700\u5bb9\u6613\u60f3\u5230\u7684\u505a\u6cd5\u5c31\u662f\u5148\u5c06\u5143\u7a0b\u5e8f\u53d1\u5e03\u5230 Maven \u7684\u672c\u5730\u4ed3\u5e93\uff0c\u7136\u540e\u5728\u4e1a\u52a1\u9879\u76ee\u5f15\u5165\u3002\u8fd9\u79cd\u505a\u6cd5\u8db3\u591f\u7b80\u5355\uff0c\u4f46\u5bf9\u4e8e\u9700\u8981\u9891\u7e41\u4fee\u6539\u5143\u7a0b\u5e8f\u8fdb \u884c\u529f\u80fd\u9a8c\u8bc1\u7684\u573a\u666f\u53c8\u663e\u5f97\u6bd4\u8f83\u7b28\u91cd\u3002</p> <p>\u4e3a\u4e86\u5e94\u5bf9\u8fd9\u6837\u7684\u5f00\u53d1\u573a\u666f\uff0cGradle \u63d0\u4f9b\u4e86\u4e00\u5957\u6df7\u5408\u7f16\u8bd1\uff08CompositeBuild\uff09\u673a\u5236\uff0c\u5b83\u4f7f\u5f97\u6211\u4eec\u65e0\u9700\u4fee\u6539\u4e1a\u52a1\u4ee3\u7801\u5f53\u4e2d\u7684\u4f9d\u8d56\u914d\u7f6e\u5373\u53ef\u5b9e\u73b0\u4e0e\u4f9d\u8d56\u9879\u76ee\u7684\u6e90\u7801\u4f9d\u8d56\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-programming-debug/#kotlin","title":"\u5355\u6b65\u8c03\u8bd5 Kotlin \u7f16\u8bd1\u5668","text":"<p>\u96c6\u6210\u5f00\u53d1\u7684\u65f6\u5019\uff0c\u901a\u5e38\u6211\u4eec\u4f1a\u901a\u8fc7\u8c03\u8bd5 Gradle \u8fdb\u7a0b\u7684\u65b9\u5f0f\u6765\u8c03\u8bd5\u6574\u4e2a\u7f16\u8bd1\u6d41\u7a0b\u3002\u8c03\u8bd5 Gradle \u65f6\u6211\u4eec\u53ef\u4ee5\u5bf9 Gradle \u81ea\u8eab\u548c Gradle \u63d2\u4ef6\u8fdb\u884c\u5355\u6b65\u8c03\u8bd5\u3002</p> <p>\u5728 IntelliJ IDEA \u5f53\u4e2d\u8c03\u8bd5 Gradle \u975e\u5e38\u7b80\u5355\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728\u76f8\u5e94\u7684\u6e90\u7801\u5f53\u4e2d\u6253\u597d\u65ad\u70b9\uff0c\u7136\u540e\u9009\u62e9\u597d\u5408\u9002\u7684 Gradle \u4efb\u52a1\uff0c\u70b9\u51fb\u8c03\u8bd5\u8fd0\u884c\u6309\u94ae\u5373\u53ef\u3002</p> <p>Java \u7f16\u8bd1\u5668\u4e5f\u8fd0\u884c\u5728 Gradle \u7684\u8fdb\u7a0b\u5f53\u4e2d\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728 Java \u7f16\u8bd1\u5668\u7684\u6e90\u7801\u5f53\u4e2d\u6253\u65ad\u70b9\u5bf9 Java \u7f16\u8bd1\u5668\u8fdb\u884c\u5355\u6b65\u8c03\u8bd5</p> <p>\u4e0d\u8fc7\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u5bf9 Kotlin \u7f16\u8bd1\u5668\u8fdb\u884c\u5355\u6b65\u8c03\u8bd5\uff0c\u56e0\u4e3a Kotlin \u7f16\u8bd1\u5668\u9ed8\u8ba4\u8fd0\u884c\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u8fdb\u7a0b\u5f53\u4e2d\u3002\u4e0d\u8fc7\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5c06 Kotlin \u7f16\u8bd1\u5668\u7684\u8fd0\u884c\u7b56\u7565\u914d\u7f6e\u4e3a In process\uff0c\u95ee\u9898\u5c31\u53ef\u4ee5\u5f97\u5230\u89e3\u51b3\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-programming-debug/#kotlin_1","title":"Kotlin \u7f16\u8bd1\u5668\u7684\u65e5\u5fd7\u8f93\u51fa","text":"<p>\u5728\u9ed8\u8ba4\u7684 Kotlin \u7f16\u8bd1\u5668\u8fd0\u884c\u7b56\u7565\u4e0b\uff0c\u9664\u4e86\u65e0\u6cd5\u5355\u6b65\u8c03\u8bd5\u4ee5\u5916\uff0c\u901a\u8fc7 println(...) \u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\u6d41\u7684\u5185\u5bb9\u4e5f\u4e0d\u4f1a\u51fa\u73b0\u5728 Gradle \u7684\u8fd0\u884c\u8f93\u51fa\u5f53\u4e2d\u3002</p> <p>\u8fd9\u5176\u5b9e\u4e5f\u4e0d\u96be\u7406\u89e3\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b println(...) \u4f1a\u5c06\u5185\u5bb9\u6253\u5370\u5230 Kotlin \u7f16\u8bd1\u5668\u5b88\u62a4\u8fdb\u7a0b\u7684\u6807\u51c6\u8f93\u51fa\u6d41\uff0c\u6211\u4eec\u81ea\u7136\u65e0\u6cd5\u5728 Gradle \u7684\u8fd0\u884c\u8f93\u51fa\u5f53\u4e2d\u770b\u5230\u5b83\u4eec\u3002\u5728\u5c06 Kotlin \u7684\u7f16\u8bd1 \u5668\u8fd0\u884c\u7b56\u7565\u4fee\u6539\u4e3a In process \u4e4b\u540e\uff0c\u95ee\u9898\u4e5f\u5c31\u53ef\u4ee5\u5f97\u5230\u6682\u65f6\u7684\u89e3\u51b3\u3002</p> <p>\u4e0d\u8fc7\uff0c\u4fee\u6539 Kotlin \u7f16\u8bd1\u5668\u8fd0\u884c\u7b56\u7565\u7684\u65b9\u6cd5\u53ea\u9002\u7528\u4e8e\u5f00\u53d1\u8c03\u8bd5\u65f6\u3002\u5f53\u6211\u4eec\u5c06\u7b26\u53f7\u5904\u7406\u5668\u6216\u8005\u7f16\u8bd1\u5668\u63d2\u4ef6\u53d1\u5e03\u4e4b\u540e\uff0cKotlin \u7f16\u8bd1\u5668\u7684\u8fd0\u884c\u7b56\u7565\u7531\u63a5\u5165\u65b9\u51b3\u5b9a\uff0c\u5982\u679c\u6211\u4eec\u5e0c\u671b\u8f93\u51fa\u4e00\u4e9b\u65e5\u5fd7 \u65b9\u4fbf\u63a5\u5165\u65b9\u67e5\u770b\u7b26\u53f7\u5904\u7406\u5668\u6216\u8005\u7f16\u8bd1\u5668\u63d2\u4ef6\u7684\u8fd0\u884c\u72b6\u6001\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u5bf9\u5e94\u7684\u65e5\u5fd7\u6536\u96c6\u5668\u4e86\u3002</p>"},{"location":"foundation/kotlin-meta-programming/meta-programming-debug/#_4","title":"\u672c\u7ae0\u5c0f\u7ed3","text":"<p>\u672c\u7ae0\u4ecb\u7ecd\u4e86\u5982\u4f55\u4e3a\u5143\u7a0b\u5e8f\u7f16\u5199\u5355\u5143\u6d4b\u8bd5\u4ee5\u53ca\u5982\u4f55\u5bf9\u5143\u7a0b\u5e8f\u8fdb\u884c\u8c03\u8bd5\u3002\u5143\u7f16\u7a0b\u7684\u573a\u666f\u901a\u5e38\u8f83\u4e3a\u62bd\u8c61\uff0c\u638c\u63e1\u4fbf\u6377\u7684\u9014\u5f84\u5bf9\u7a0b\u5e8f\u7684\u7ed3\u679c\u8fdb\u884c\u6709\u6548\u7684\u9a8c\u8bc1\uff0c\u5f80\u5f80\u53ef\u4ee5\u4ea7\u751f\u4e8b\u534a\u529f\u500d\u7684\u6548\u679c\u3002</p>"},{"location":"foundation/kotlin-meta-programming/runtime-reflect/","title":"\u8fd0\u884c\u65f6\u7684\u53cd\u5c04","text":"<p>\u672c\u6587\u4e3a\u300a\u6df1\u5165\u5b9e\u8df5 kotlin \u5143\u7f16\u7a0b\u300b\u8bfb\u4e66\u7b14\u8bb0\uff0c\u60f3\u8981\u6df1\u5165\u4e86\u89e3 kotlin \u5143\u7f16\u7a0b\u7684\u540c\u5b66\u53ef\u4ee5\u9605\u8bfb\u539f\u4e66\u3002</p> <p>\u53cd\u5c04\u662f\u6307\u7a0b\u5e8f\u53ef\u4ee5\u5206\u6790\u3001\u4fee\u6539\u81ea\u8eab\u6570\u636e\u7ed3\u6784\u7684\u80fd\u529b\u3002</p> <p>\u53cd\u5c04\u4e3a\u9759\u6001\u8bed\u8a00\u63d0\u4f9b\u4e86\u52a8\u6001\u80fd\u529b\u7684\u8865\u5145\uff0c\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7c7b\u540d\u3001\u51fd\u6570\u540d\u3001\u5b57\u6bb5\u540d\u5c31\u53ef\u4ee5\u83b7\u5f97\u64cd\u4f5c\u7c7b\u3001\u51fd\u6570\u3001\u5b57\u6bb5\u7684\u5bf9\u8c61\uff0c\u8fdb\u800c\u5b9e\u73b0\u5bf9\u8fd9\u4e9b\u7a0b\u5e8f\u7ed3\u6784\u7684\u8bbf\u95ee\u548c\u4fee\u6539\u3002\u53cd\u5c04\u5e7f\u6cdb\u5e94\u7528\u4e8e\u6570\u636e\u5e8f \u5217\u5316\u3001\u8f6f\u4ef6\u6d4b\u8bd5\u7b49\u573a\u666f\u5f53\u4e2d\u3002</p>"},{"location":"foundation/kotlin-meta-programming/runtime-reflect/#java","title":"Java \u53cd\u5c04","text":"<p>Java \u53cd\u5c04\u662f\u4e13\u95e8\u8bbe\u8ba1\u7528\u6765\u652f\u6301 Java \u8fd0\u884c\u65f6\u5143\u7f16\u7a0b\u7684\u7279\u6027\u7684\u3002</p>"},{"location":"foundation/kotlin-meta-programming/runtime-reflect/#_2","title":"\u57fa\u672c\u529f\u80fd","text":"<p>Java 1.1 \u5f15\u5165\u53cd\u5c04\uff0c\u63d0\u4f9b\u4e86\u7edd\u5927\u591a\u6570\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u7528\u5230\u7684\u53cd\u5c04 API\uff0c\u5305\u62ec Class\u3001 Method\u3001Field \u8fd9\u4e9b\u6838\u5fc3\u7c7b\u578b\u4ee5\u53ca\u5176\u6210\u5458\uff0c\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53cd\u5c04\u6765\u5b9e\u73b0\u51e0\u4e4e\u6240\u6709\u901a\u8fc7\u7f16\u7801\u6765 \u5b9e\u73b0\u7684\u7a0b\u5e8f\u529f\u80fd\u3002</p>"},{"location":"foundation/kotlin-meta-programming/runtime-reflect/#_3","title":"\u89e3\u9664\u8bbf\u95ee\u9650\u5236","text":"<p>Java 1.2 \u4e2d\u5f15\u5165\u4e86 AccessibleObject \u4f5c\u4e3a Method \u548c Field \u7b49\u7c7b\u578b\u7684\u7236\u7c7b(\u8fd9 \u4e9b\u7c7b\u5728 Java 1.2 \u4e4b\u524d\u76f4\u63a5\u7ee7\u627f\u81ea Object \u7c7b)\u3002\u5982\u6b64\u4e00\u6765\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7 setAccessible \u6765\u89e3\u9664 Java \u7c7b\u7684\u79c1\u6709\u6210\u5458\u7684\u8bbf\u95ee\u9650\u5236\u3002\u8fd9\u6b21\u66f4\u65b0\u4f7f\u5f97\u53cd\u5c04\u7684\u80fd\u529b\u5f97\u5230\u4e86 \u201c\u53f2\u8bd7\u7ea7\u201d\u589e\u5f3a\uff0c\u4e5f\u4f7f\u5f97\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u4efb\u610f\u4f4d\u7f6e\u8bbf\u95ee\u51e0\u4e4e\u4efb\u610f\u7c7b\u578b\u7684\u79c1\u6709\u6210\u5458\u3002</p>"},{"location":"foundation/kotlin-meta-programming/runtime-reflect/#_4","title":"\u52a8\u6001\u4ee3\u7406","text":"<p>Java 1.3 \u5f15\u5165\u4e86 Proxy \u7c7b\u578b\uff0c\u652f\u6301\u4e86\u8fd0\u884c\u65f6\u52a8\u6001\u4ee3\u7406\u3002\u5c06\u52a8\u6001\u4ee3\u7406\u4e0e\u53cd\u5c04\u914d\u5408\u4f7f\u7528\uff0c \u6211\u4eec\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u5b9e\u73b0 Java \u63a5\u53e3\uff0c\u4f7f\u7a0b\u5e8f\u7684\u7075\u6d3b\u6027\u5f97\u5230\u5927\u5927\u5730\u63d0\u5347\u3002\u52a8\u6001\u4ee3\u7406\u53ef\u4ee5\u7528\u4e8e \u5b9e\u73b0 AOP(\u9762\u5411\u5207\u9762\u7f16\u7a0b)\u3001\u6a21\u62df\u63a5\u53e3\u3001\u62e6\u622a\u65b9\u6cd5\u8c03\u7528\u7b49\u7528\u9014\u3002</p>"},{"location":"foundation/kotlin-meta-programming/runtime-reflect/#_5","title":"\u5bf9\u6ce8\u89e3\u7684\u652f\u6301","text":"<p>Java 5 \u5f15\u5165\u4e86\u6ce8\u89e3\uff0c\u540c\u65f6\u4e5f\u5728\u53cd\u5c04\u4e2d\u589e\u52a0\u4e86\u5904\u7406\u6ce8\u89e3\u7684 API\u3002\u6ce8\u89e3\u53ef\u4ee5\u4e3a\u6e90\u4ee3\u7801\u63d0\u4f9b\u5143\u4fe1\u606f\uff0c\u6211\u4eec\u65e2\u53ef\u4ee5\u5728\u7f16\u8bd1\u65f6\u89e3\u6790\u6ce8\u89e3\uff0c\u4e5f\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u4f7f\u7528\u53cd\u5c04\u8bbf\u95ee\u6ce8\u89e3\u3002</p>"},{"location":"foundation/kotlin-meta-programming/runtime-reflect/#_6","title":"\u5bf9\u65b9\u6cd5\u53c2\u6570\u540d\u7684\u652f\u6301","text":"<p>Java 8 \u4ee5\u524d\uff0cJava \u7f16\u8bd1\u5668\u4e0d\u4f1a\u5c06 Java \u65b9\u6cd5\u7684\u53c2\u6570\u540d\u7f16\u8bd1\u5230 JVM \u5b57\u8282\u7801\u5f53\u4e2d\uff0c\u56e0\u800c \u6211\u4eec\u4e5f\u65e0\u6cd5\u4f7f\u7528\u53cd\u5c04\u8bbf\u95ee\u5230\u53c2\u6570\u7684\u540d\u5b57\u3002\u5bf9\u4e8e\u8fd9\u6837\u7684\u573a\u666f\uff0c\u5e7f\u5927\u6846\u67b6\u8bbe\u8ba1\u8005\u5e38\u7528\u7684\u529e\u6cd5\u5c31\u662f\u4f7f\u7528 \u6ce8\u89e3\u5c06\u53c2\u6570\u540d\u6dfb\u52a0\u5230\u65b9\u6cd5\u53c2\u6570\u4e0a\uff0c\u5728\u8fd0\u884c\u65f6\u8bfb\u53d6\u6ce8\u89e3\u7684\u503c\u6765\u83b7\u53d6\u53c2\u6570\u540d\u3002</p> <p>Java 8 \u4e3a\u7f16\u8bd1\u5668\u589e\u52a0\u4e86\u53c2\u6570 -parameters\uff0c\u4ee5\u53ca Parameter \u7c7b\u6765\u83b7\u53d6\u65b9\u6cd5\u53c2\u6570\u540d\u3002</p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u65e0\u987b\u501f\u52a9\u6ce8\u89e3\u4e5f\u53ef\u4ee5\u8bfb\u53d6\u5230\u65b9\u6cd5\u7684\u53c2\u6570\u540d\u3002</p>"},{"location":"foundation/kotlin-meta-programming/runtime-reflect/#kotlin","title":"\u8bbf\u95ee Kotlin \u4ee3\u7801","text":"<p>\u5728 Kotlin JVM \u7a0b\u5e8f\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 Java \u53cd\u5c04\u6765\u8bbf\u95ee Kotlin \u7c7b\u578b\u3002\u53ea\u4e0d\u8fc7 Java \u53cd \u5c04\u5bf9 Kotlin \u7684\u8bed\u6cd5\u7279\u6027\u4e00\u65e0\u6240\u77e5\uff0c\u5b83\u53ea\u80fd\u4ee5 Java \u7684\u89c6\u89d2\u6765\u89c2\u5bdf Kotlin \u8bed\u6cd5\uff0c\u56e0\u6b64\u4f7f\u7528 Java \u53cd\u5c04\u8bbf\u95ee Kotlin \u7684\u7c7b\u578b\u53ca\u5176\u6210\u5458\u65f6\uff0c\u672c\u8d28\u4e0a\u662f\u5728\u8bbf\u95ee Kotlin \u4ee3\u7801\u7f16\u8bd1\u751f\u6210\u7684\u5b57\u8282\u7801\u6240\u5bf9\u5e94\u7684 Java \u7c7b\u578b\u3002</p>"},{"location":"foundation/kotlin-meta-programming/runtime-reflect/#kotlin_1","title":"Kotlin \u53cd\u5c04","text":"<p>Kotlin \u53cd\u5c04\u662f\u4e13\u95e8\u4e3a Kotlin \u7684\u8bed\u6cd5\u7279\u6027\u8bbe\u8ba1\u5b9e\u73b0\u7684\u8fd0\u884c\u65f6\u5143\u7f16\u7a0b\u6280\u672f\uff0c\u5b83\u7684\u51fa\u73b0\u89e3\u51b3\u4e86 Java \u53cd\u5c04\u65e0\u6cd5\u8bc6\u522b Kotlin \u8bed\u6cd5\u7279\u6027\u7684\u95ee\u9898\u3002</p>"},{"location":"foundation/kotlin-meta-programming/runtime-reflect/#_7","title":"\u57fa\u672c\u529f\u80fd","text":"<p>Kotlin \u53cd\u5c04\u7684\u8bbe\u8ba1\u4e0e Java \u53cd\u5c04\u5982\u51fa\u4e00\u8f99\u3002KClass \u5728\u516c\u5171\u6807\u51c6\u5e93\u4e2d\u7684\u5b9a\u4e49\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u6709\u4e09\u4e2a\u6210\u5458\u3002Kotlin JS \u548c Kotlin Native \u5f53\u4e2d\u7684\u5b9e\u73b0\u4e5f\u662f\u5982\u6b64\uff0c\u8fd9\u610f\u5473\u7740 Kotlin \u5728\u9664\u4e86 JVM \u4ee5\u5916\u7684\u6240\u6709\u5e73\u53f0\u4e0a\u63d0\u4f9b\u7684\u53cd\u5c04\u80fd\u529b\u90fd\u6781\u5176\u6709\u9650\u3002</p> <p>\u4e5f\u6b63\u662f\u56e0\u4e3a\u5982\u6b64\uff0c\u901a\u5e38\u6211\u4eec\u63d0\u5230 Kotlin \u53cd\u5c04\uff0c\u90fd\u662f\u7279\u6307 Kotlin JVM \u4e0a\u7684\u53cd\u5c04\u3002</p>"},{"location":"foundation/kotlin-meta-programming/runtime-reflect/#_8","title":"\u5c5e\u6027\u5f15\u7528\u548c\u51fd\u6570\u5f15\u7528","text":"<p>\u5c5e\u6027\u5f15\u7528\u548c\u51fd\u6570\u5f15\u7528\u53ef\u4ee5\u5206\u522b\u901a\u8fc7\u7c7b\u540d::\u5c5e\u6027\u548c\u7c7b\u540d::\u51fd\u6570\u540d\u7684\u8bed\u6cd5\u83b7\u53d6\uff0c\u5176\u4e2d\u7c7b\u540d\u90e8\u5206\u5728\u5c5e\u6027\u548c\u51fd\u6570\u662f\u9876\u7ea7\u58f0\u660e\u7684\u60c5\u51b5\u4e0b\u7f3a\u7701\u3002</p> <p>\u901a\u8fc7\u7c7b\u540d\u83b7\u53d6\u7684\u5f15\u7528\u662f\u6ca1\u6709\u7ed1\u5b9a receiver \u7684\uff0c\u56e0\u6b64\u5728\u8c03\u7528\u65f6\u9700\u8981\u4f20\u5165\u5bf9\u5e94\u7c7b\u578b\u7684\u5b9e\u4f8b\u3002</p> <p>\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5b9e\u4f8b\u76f4\u63a5\u83b7\u53d6\u5f15\u7528\uff0c\u8bed\u6cd5\u4e3a\u5b9e\u4f8b::\u5c5e\u6027\u540d\u548c\u5b9e\u4f8b::\u51fd\u6570\u540d\uff0c\u901a\u8fc7\u5b9e\u4f8b\u83b7\u53d6\u7684\u5f15\u7528\u662f\u7ed1\u5b9a\u4e86 receiver \u7684\u5f15\u7528\u3002</p>"},{"location":"foundation/kotlin-meta-programming/runtime-reflect/#typeof","title":"typeOf","text":"<p>typeOf \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u8c03\u7528\u65f6\uff0c\u5b83\u4f1a\u8fd4\u56de\u5177\u4f53\u5316(reified)\u4e4b\u540e\u7684\u7c7b\u578b T \u5bf9\u5e94\u7684 KType \u5b9e\u4f8b\u3002</p> <p>\u6709\u8bfb\u8005\u53ef\u80fd\u4f1a\u6709\u7591\u95ee\uff0cT \u4e0d\u662f\u5df2\u7ecf\u5177\u4f53\u5316\u4e86\u5417?\u6211\u4eec\u4e3a\u4ec0\u4e48\u4e0d\u76f4\u63a5\u4f7f\u7528 T::class \u6765\u83b7\u53d6 KClass \u5b9e\u4f8b\u5462?\u663e\u7136\uff0cKClass \u548c KType \u8fd8\u662f\u6709\u5f88\u5927\u7684\u5dee\u5f02\u7684\uff0c\u524d\u8005\u662f\u6cdb\u578b\u64e6\u9664\u4e4b\u540e\u7684\u8fd0\u884c\u65f6\u7c7b\u578b\u8868\u793a\uff0c\u540e\u8005\u5219\u5305\u542b\u4e86\u6cdb\u578b\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528\u4e8e\u5e8f\u5217\u5316\u6216\u8005\u53cd\u5e8f\u5217\u5316\u7b49\u573a\u666f\u3002</p> <p>typeOf \u4e3b\u8981\u5e94\u5bf9\u7684\u5c31\u662f\u9700\u8981\u83b7\u53d6 KType \u6216\u8005\u5728 JVM \u4e0a\u83b7\u53d6 Type \u7684\u573a\u666f\uff0c \u4e5f\u7ecf\u5e38\u4e0e inline \u548c reified \u4e00\u8d77\u4f7f\u7528\u6765\u7f16\u5199\u5e93\u51fd\u6570\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/","title":"\u7f16\u8bd1\u65f6\u7684\u7b26\u53f7\u5904\u7406","text":"<p>\u672c\u6587\u4e3a\u300a\u6df1\u5165\u5b9e\u8df5 kotlin \u5143\u7f16\u7a0b\u300b\u8bfb\u4e66\u7b14\u8bb0\uff0c\u60f3\u8981\u6df1\u5165\u4e86\u89e3 kotlin \u5143\u7f16\u7a0b\u7684\u540c\u5b66\u53ef\u4ee5\u9605\u8bfb\u539f\u4e66\u3002</p> <p>\u9664\u4e86\u76f4\u63a5\u751f\u6210\u6e90\u4ee3\u7801\uff0c\u6211\u4eec\u6709\u65f6\u8fd8\u4f1a\u9762\u4e34\u4e00\u79cd\u66f4\u52a0\u590d\u6742\u7684\u573a\u666f\uff0c\u5373\u5982\u4f55\u57fa\u4e8e\u4eba\u5de5\u7f16\u5199\u7684\u6e90\u4ee3\u7801\u6765\u751f\u6210\u4ee3\u7801\uff0c\u751a\u81f3\u8fd8\u53ef\u4ee5\u8ba9\u4e8c\u8005\u76f8\u4e92\u8c03\u7528\u3002</p> <p>\u4e3a\u4e86\u5e94\u5bf9\u8fd9\u79cd\u9700\u6c42\u573a\u666f\uff0cJava \u548c Kotlin \u7f16\u8bd1\u5668\u5747\u63d0\u4f9b\u4e86\u76f8\u5e94\u7684\u6269\u5c55\u652f\u6301\uff0c\u5141\u8bb8\u6211\u4eec\u7f16\u5199\u4e00\u4e9b\u7279\u5b9a\u7684\u7a0b\u5e8f\u6765\u8bbf\u95ee\u6e90\u4ee3\u7801\u5f53\u4e2d\u7279\u5b9a\u7684\u8bed\u6cd5\u7ed3\u6784\uff0c\u5e76\u5b8c\u6210\u4ee3\u7801\u7684\u751f\u6210\u3002\u8fd9\u5c31\u662f\u7f16\u8bd1\u65f6\u7684\u7b26\u53f7\u5904\u7406\u3002</p> <p></p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_2","title":"\u7b26\u53f7\u7684\u57fa\u672c\u6982\u5ff5","text":""},{"location":"foundation/kotlin-meta-programming/symbol-process/#java","title":"Java \u7684\u7b26\u53f7","text":"<p>Java \u7684\u7b26\u53f7\u5305\u62ec\u53d8\u91cf(VarSymbol)\u3001\u65b9\u6cd5(MethodSymbol)\u3001 \u7c7b(ClassSymbol)\u3001\u5305(PackageSymbol)\u7b49\u7b49</p> <p>Java \u7f16\u8bd1\u5668\u63d0\u4f9b\u4e86\u4e00\u5957\u5b8c\u5584\u7684\u7b26\u53f7\u5904\u7406\u7684\u673a\u5236\uff0c\u5373APT(Annotation Processing Tool\uff0c\u6ce8\u89e3\u5904\u7406\u5668)\u3002\u4e0d\u8fc7\uff0cAPT \u7684\u516c\u5f00 API \u5f53\u4e2d\u5e76\u6ca1\u6709\u63d0\u5230 Symbol\uff0c\u8fd9\u662f\u600e\u4e48\u56de\u4e8b\u5462?</p> <p>\u8fd9\u662f\u56e0\u4e3a Java \u7f16\u8bd1\u5668\u7684\u8bbe\u8ba1\u8005\u4e0d\u5e0c\u671b\u66b4\u9732\u8fc7\u591a\u7f16\u8bd1\u5668\u5185\u90e8\u7684\u7ec6\u8282\uff0c\u57fa\u4e8e\u7b26\u53f7\u7684\u5b9e\u73b0\u62bd\u8c61\u51fa\u4e86\u4ee5 Element \u7c7b\u578b\u4e3a\u57fa\u7840\u7684\u516c\u5f00 API\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cJava \u7b26\u53f7\u5e76\u4e0d\u7b49\u540c\u4e8e Java \u62bd\u8c61\u8bed\u6cd5\u6811(Abstract Syntax Tree\uff0c \u7f29\u5199\u4e3a AST)\u8282\u70b9\uff0cJava \u8bed\u6cd5\u6811\u7684\u8282\u70b9\u7c7b\u90fd\u662f JCTree \u7684\u5b50\u7c7b\uff0c\u5176\u4e2d JC \u4ee3\u8868 Javac\u3002\u4e0e Symbol \u548c Type \u76f8\u540c\uff0cJCTree \u4e5f\u662f Java \u7f16\u8bd1\u5668\u7684\u5185\u90e8\u5b9e\u73b0\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6e05\u695a Java \u7b26 \u53f7\u662f\u57fa\u4e8e Java \u8bed\u6cd5\u6811\u521b\u5efa\u51fa\u6765\u7684\uff0c\u5b83\u53ea\u5305\u542b\u8bed\u6cd5\u6811\u7ed3\u6784\u5f53\u4e2d\u7684\u7c7b\u3001\u65b9\u6cd5\u3001\u53d8\u91cf\u7b49\u7ed3\u6784\uff0c\u4f46\u4e0d\u5305\u542b\u51fd\u6570\u4f53\u3001\u8868\u8fbe\u5f0f\u5185\u5bb9\u7b49\u4fe1\u606f\u5373\u53ef\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#kotlin","title":"Kotlin \u7684\u7b26\u53f7","text":"<p>Kotlin \u7684\u7b26\u53f7\u5728 Google \u7684\u5f00\u6e90\u9879\u76ee KSP(Kotlin Symbol Processing\uff0cKotlin \u7b26\u53f7\u5904\u7406)\u5f53\u4e2d\u7ed9\u51fa\uff0c\u8be5\u9879\u76ee\u76ee\u524d\u5df2\u7ecf\u6210\u4e3a Kotlin \u5b98\u65b9\u63a8\u8350\u7684\u7b26\u53f7\u5904\u7406\u65b9\u6848\u3002</p> <p>Kotlin \u76ee\u524d\u5b58\u5728\u4e24\u5957\u8bed\u6cd5\u6811\u5b9e\u73b0\uff0c\u5373 FE1.0 \u7684 PSI \u548c K2 \u7f16\u8bd1\u5668\u5f53 \u4e2d\u7684 FIR\u3002\u4e0e Java \u4e0d\u540c\uff0cKotlin \u7684\u8bed\u6cd5\u6811\u7684 API \u5e76\u4e0d\u7b97\u662f\u4e25\u683c\u610f\u4e49\u7684 \u5185\u90e8 API\uff0c\u56e0\u4e3a\u8fd9\u4e9b API \u5df2\u7ecf\u88ab\u5927\u91cf\u5e94\u7528\u5728\u7f16\u8bd1\u5668\u63d2\u4ef6\u548c IntelliJ \u63d2\u4ef6\u7684\u5b9e\u73b0\u5f53\u4e2d\u4e86\u3002\u4e0d\u8fc7\uff0c\u7531\u4e8e Kotlin \u7f16\u8bd1\u5668\u8fd8\u5728\u4e0d\u65ad\u5730\u91cd\u5199\u8fc7\u7a0b\u4e2d\uff0c\u56e0\u6b64\u62bd\u8c61\u51fa Kotlin \u7b26\u53f7\u7684\u6982\u5ff5\u6765\u5c4f\u853d Kotlin \u7f16\u8bd1\u5668\u7684\u5185\u90e8\u5b9e\u73b0\u663e\u7136\u662f\u4e00\u4e2a\u66f4\u597d\u7684\u9009\u62e9\uff0c\u8fd9\u4e0e APT \u7684\u5b9e\u73b0\u5982\u51fa\u4e00\u8f99\u3002</p> <p>Kotlin \u7b26\u53f7\u7684\u5b9e\u73b0\u4f9d\u8d56\u4e8e\u8bed\u6cd5\u6811\u7684\u5b9e\u73b0\uff0c\u4e8c\u8005\u4ece\u547d\u540d\u548c\u7528\u6cd5\u4e0a\u4e5f\u6709\u7740\u975e\u5e38\u63a5\u8fd1\u7684\u5730\u65b9\u3002Kotlin \u7684\u7b26\u53f7\u7c7b\u578b\u90fd\u5b9e\u73b0\u81ea KSNode \u63a5\u53e3\uff0c\u4f8b\u5982\u7c7b\u7b26\u53f7 KSClassDeclaration\uff0c\u51fd\u6570\u7b26\u53f7KSFunction\uff0c\u7b49\u7b49\uff0c\u8fd9\u4e9b\u5bf9\u5e94\u4e8e APT \u5f53\u4e2d\u7684 Element \u63a5\u53e3\u53ca\u5176\u5b9e\u73b0\u7c7b\u3002</p> <p>\u4e0e Java \u7b26\u53f7\u76f8\u540c\uff0cKotlin \u7684\u7b26\u53f7\u4e5f\u662f\u57fa\u4e8e\u8bed\u6cd5\u6811\u8282\u70b9\u6784\u9020\u51fa\u6765\u7684\uff0c\u53ea\u5305\u542b\u7c7b\u3001\u51fd\u6570\u3001 \u53d8\u91cf\u8fd9\u6837\u7684\u7b26\u53f7\u4fe1\u606f\uff0c\u800c\u4e0d\u5305\u542b\u51fd\u6570\u4f53\u3001\u8bed\u53e5\u3001\u8868\u8fbe\u5f0f\u5185\u5bb9\u7b49\u7b49\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_3","title":"\u7b26\u53f7\u4e0e\u8bed\u6cd5\u6811\u8282\u70b9\u7684\u5173\u7cfb\u548c\u533a\u522b","text":"<p>\u524d\u9762\u5df2\u7ecf\u63d0\u5230\uff0c\u7b26\u53f7\u662f\u57fa\u4e8e\u8bed\u6cd5\u6811\u6784\u9020\u51fa\u6765\u7684\uff0c\u5b83\u53ea\u5305\u542b\u8bed\u6cd5\u6811\u5f53\u4e2d\u7684\u90e8\u5206\u4fe1\u606f\u3002\u786e\u5207\u5730\u8bf4\uff0c\u7b26\u53f7\u53ea\u5305\u542b\u7a0b\u5e8f\u7684 ABI(Application Binary Interface\uff0c\u4e8c\u8fdb\u5236\u63a5\u53e3)\u4fe1\u606f\u3002</p> <p>\u5982\u679c\u6211\u4eec\u5e0c\u671b\u68c0\u67e5\u51fd\u6570\u7684\u547d\u540d\u662f\u5426\u7b26\u5408\u4ee3\u7801\u89c4\u8303\uff0c\u53ef\u4ee5\u57fa\u4e8e\u5bf9\u7b26\u53f7\u7684\u5904\u7406\u8bbe\u8ba1\u5b9e\u73b0\u65b9\u6848\u3002\u4f46\u5982\u679c\u6211\u4eec\u5e0c\u671b\u68c0\u67e5\u7684\u662f\u5c40\u90e8\u53d8\u91cf\uff0c\u90a3\u4e48\u53ea\u5904\u7406\u7b26\u53f7\u53ef\u80fd\u5c31\u6709\u4e9b\u529b\u4e0d\u4ece\u5fc3\u4e86\uff0c\u56e0\u4e3a\u7b26\u53f7\u5f53\u4e2d\u53ea\u5305\u542b \u7c7b\u7684\u6210\u5458\u53d8\u91cf\u800c\u4e0d\u5305\u542b\u5c40\u90e8\u53d8\u91cf\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_4","title":"\u5904\u7406\u5668\u7684\u57fa\u672c\u7ed3\u6784","text":""},{"location":"foundation/kotlin-meta-programming/symbol-process/#apt","title":"APT \u7684\u57fa\u672c\u7ed3\u6784","text":"<ul> <li>\u521d\u59cb\u5316</li> <li>\u58f0\u660e\u548c\u914d\u7f6e\u5904\u7406\u5668\u53c2\u6570</li> <li>\u58f0\u660e\u5904\u7406\u5668\u652f\u6301\u7684\u6ce8\u89e3\u7c7b\u578b</li> <li>\u58f0\u660e\u5904\u7406\u5668\u652f\u6301\u7684 Java \u6e90\u7801\u7248\u672c</li> <li>\u6838\u5fc3\u5904\u7406\u65b9\u6cd5</li> </ul>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#ksp","title":"KSP \u7684\u57fa\u672c\u7ed3\u6784","text":"<p>KSP \u7684\u5904\u7406\u5668\u53ea\u6709\u4e09\u4e2a\u51fd\u6570:</p> <ul> <li>finish: \u5728\u5904\u7406\u5668\u6267\u884c\u5b8c\u6210\u65f6\u8c03\u7528\u3002\u5982\u679c\u6709\u9700\u8981\u5173\u95ed\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u5728\u8fd9\u91cc\u5904\u7406\u3002</li> <li>onError: \u5904\u7406\u5668\u6267\u884c\u8fc7\u7a0b\u4e2d\u9047\u5230\u9519\u8bef\uff0c\u5728\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\u8c03\u7528\u3002</li> <li>process: \u63d0\u4f9b\u5904\u7406\u5668\u7684\u6838\u5fc3\u5b9e\u73b0\uff0c\u901a\u8fc7\u8bfb\u53d6\u7b26\u53f7\u4fe1\u606f\uff0c\u5904\u7406\u4ee3\u7801\u5206\u6790\u6216\u8005\u6587\u4ef6\u751f\u6210\u7b49\u903b\u8f91\u3002</li> </ul>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#apt-ksp","title":"APT \u4e0e KSP \u7684\u5904\u7406\u5668\u7684\u7ed3\u6784\u5dee\u5f02","text":"<p>KSP \u6ca1\u6709\u50cf APT \u90a3\u6837\u8981\u6c42\u5904\u7406\u5668\u660e\u786e\u7ed9\u51fa\u652f\u6301\u7684\u6e90\u7801\u7248\u672c\u3001\u6ce8\u89e3\u7c7b\u578b\u548c\u53c2\u6570\u3002KSP \u7684\u7248\u672c\u662f\u4e0e Kotlin \u7f16\u8bd1\u5668\u7684\u7248\u672c\u7ed1\u5b9a\u7684\uff0c\u5176\u4e2d\u9690\u542b\u4e86\u652f\u6301\u7684\u6700\u65b0\u7684 Kotlin \u6e90\u7801\u7248\u672c\u3002</p> <p>APT \u9700\u8981\u5728\u5904\u7406\u5668\u5b9e\u73b0\u5f53\u4e2d\u58f0\u660e\u652f\u6301\u7684\u6ce8\u89e3\u7c7b\u578b\uff0cJava \u7f16\u8bd1\u5668\u4f1a\u5728\u8c03\u7528\u5904\u7406\u5668\u4e4b\u524d\u6839\u636e\u6e90 \u7801\u7684\u5b9e\u9645\u60c5\u51b5\u6765\u51b3\u5b9a\u662f\u5426\u8c03\u7528\u8be5\u5904\u7406\u5668\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0cKSP \u4f3c\u4e4e\u5e76\u6ca1\u6709\u6253\u7b97\u628a\u81ea\u5df1\u9650\u5236\u4e8e\u5bf9\u6ce8\u89e3\u7684 \u5904\u7406\u8303\u56f4\u4e4b\u5185\u3002\u5c3d\u7ba1\u5b83\u63d0\u4f9b\u4e86\u5f88\u591a\u4e0e APT \u76f8\u4f3c\u7684 API\uff0c\u4f46\u5728 KSP \u5f53\u4e2d\u76f4\u63a5\u83b7\u53d6\u6240\u6709\u7684\u7b26\u53f7\u8fdb\u884c\u5206\u6790\u5904\u7406\u4f3c\u4e4e\u662f\u987a\u7406\u6210\u7ae0\u7684\u3002</p> <p>APT \u8981\u6c42\u5728\u5904\u7406\u5668\u5f53\u4e2d\u58f0\u660e\u9700\u8981\u7684\u53c2\u6570\uff0c\u8fd9\u6837\u4f7f\u7528\u8005\u5c31\u80fd\u66f4\u6e05\u695a\u5730\u77e5\u9053\u5904\u7406\u5668\u9700\u8981\u54ea\u4e9b\u53c2\u6570\u3002 \u7136\u800c\uff0cAPT \u6ca1\u6709\u5bf9\u53c2\u6570\u7684\u4f20\u9012\u505a\u5f3a\u5236\u8981\u6c42\uff0c\u56e0\u6b64\u4e0d\u80fd\u5bf9\u4f7f\u7528\u8005\u5f62\u6210\u6709\u6548\u7684\u5f15\u5bfc\u548c\u7ea6\u675f\u3002KSP \u5e72 \u8106\u4e0d\u8981\u6c42\u5904\u7406\u5668\u5bf9\u53c2\u6570\u505a\u58f0\u660e\uff0c\u5904\u7406\u5668\u7684\u5f00\u53d1\u8005\u53ea\u9700\u8981\u5728\u6587\u6863\u5f53\u4e2d\u5bf9\u53c2\u6570\u505a\u597d\u8bf4\u660e\u5e76\u5728\u5904\u7406\u5668\u5f53\u4e2d\u5904\u7406\u597d\u53c2\u6570\u7f3a\u7701\u7684\u60c5\u51b5\u5373\u53ef\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_5","title":"\u5904\u7406\u5668\u7684\u914d\u7f6e\u6587\u4ef6","text":"<p>\u5728\u4e86\u89e3\u4e86\u5904\u7406\u5668\u7684\u57fa\u672c\u7ed3\u6784\u4e4b\u540e\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u5c06\u5904\u7406\u5668\u63a5\u5165\u5230\u7f16\u8bd1\u6d41\u7a0b\u5f53\u4e2d\uff0c \u8ba9\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u65f6\u53ef\u4ee5\u52a0\u8f7d\u5e76\u6267\u884c\u5b83\u4eec\u3002\u7531\u4e8e Java \u548c Kotlin \u7f16\u8bd1\u5668\u90fd\u662f JVM \u7a0b\u5e8f\uff0c\u56e0\u6b64\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u653e\u5230\u7f16\u8bd1\u5668\u8fd0\u884c\u65f6\u7684 classpath \u5f53\u4e2d\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_6","title":"\u6df1\u5165\u7b26\u53f7\u548c\u7c7b\u578b","text":"<p>\u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u83b7\u53d6\u7b26\u53f7\u5f53\u4e2d\u7684\u4fe1\u606f\uff0c\u8fd9\u4e5f\u662f\u7b26\u53f7\u5904\u7406\u8fc7\u7a0b\u5f53\u4e2d\u6700\u6838\u5fc3\u7684\u5185\u5bb9\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_7","title":"\u83b7\u53d6\u4fee\u9970\u7b26","text":"<p>\u83b7\u53d6\u7b26\u53f7\u7684\u4fee\u9970\u7b26\uff0c\u5728 APT \u5f53\u4e2d\u53ef\u4ee5\u4f7f\u7528 Element#getModifiers()\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u9002\u7528\u4e8e\u6240\u6709\u7b26\u53f7\uff0c\u56e0\u6b64\u5982\u679c\u6211\u4eec\u5e0c\u671b\u5224\u65ad\u4e00\u4e2a\u7c7b\u662f\u4e0d\u662f\u516c\u6709\u7684\uff0c\u53ea\u9700\u8981\u5224\u65ad\u5b83\u7684\u4fee \u9970\u7b26\u96c6\u5408\u5f53\u4e2d\u662f\u5426\u5305\u542b PUBLIC\u3002</p> <p>\u5728 KSP \u5f53\u4e2d\u540c\u6837\u6709\u7c7b\u4f3c\u7684 API\uff0c\u5373 KSModifierListOwner#modifiers\uff0c\u7528\u6cd5\u4e0e APT \u7c7b\u4f3c\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_8","title":"\u901a\u8fc7\u540d\u79f0\u83b7\u53d6\u76f8\u5e94\u7684\u7b26\u53f7","text":"<p>\u5728 APT \u5f53\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Elements#getTypeElement(CharSequence) \u83b7\u53d6\u53c2\u6570\u5bf9\u5e94\u7684\u7b26\u53f7\uff0c\u5176\u4e2d Elements \u7684\u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7 ProcessingEnvironment \u83b7\u53d6\u3002</p> <p>\u5728 KSP \u5f53\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 Resolver#getClassDeclarationByName(String) \u6765\u83b7\u53d6\u7c7b\u7b26\u53f7\uff0c\u53c2\u6570\u4e5f\u53ef\u4ee5\u662f KSName \u7c7b\u578b\u3002</p> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528 Resolver#getFunctionDeclarationsByName(String, Boolean) \u83b7\u53d6\u51fd\u6570\u7b26\u53f7\uff0c\u4f7f\u7528Resolver#getPropertyDeclarationByName(String, Boolean) \u6765\u83b7\u53d6\u5c5e\u6027\u7b26\u53f7\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_9","title":"\u83b7\u53d6\u7b26\u53f7\u7684\u7c7b\u578b","text":"<p>\u5728 APT \u5f53\u4e2d\uff0c\u4efb\u4f55\u7b26\u53f7\u90fd\u53ef\u4ee5\u901a\u8fc7 Element#asType() \u65b9\u6cd5\u6765\u83b7\u53d6\u5b83\u7684\u7c7b\u578b\uff0c\u8fd4\u56de\u503c\u7c7b\u578b\u4e3a TypeMirror\u3002</p> <p>\u5728 KSP \u5f53\u4e2d\u83b7\u53d6\u7b26\u53f7\u7684\u7c7b\u578b\u4e5f\u5f88\u5bb9\u6613\u3002\u4e3b\u8981\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u4e00\u79cd\u662f\u901a\u8fc7\u7c7b\u7b26\u53f7\u76f4\u63a5\u83b7\u53d6\u7c7b\u578b\uff0c\u53e6\u4e00\u79cd\u662f\u901a\u8fc7\u7c7b\u578b\u5f15\u7528\u7b26\u53f7\u89e3\u6790\u7c7b\u578b\u3002</p> <p>\u90a3\u4e48\uff0cKSP \u4e3a\u4ec0\u4e48\u8981\u8fd9\u4e48\u8bbe\u8ba1\u5462?</p> <p>\u56e0\u4e3a\u7c7b\u578b\u5f15\u7528\u7b26\u53f7\u4e0e\u5176\u4ed6\u7b26\u53f7\u4e00\u6837\uff0c\u662f\u6e90\u4ee3\u7801\u7684\u76f4\u63a5\u8868\u793a\uff0c\u65e0\u9700\u901a\u8fc7\u8bed\u4e49\u5206\u6790\u5c31\u53ef\u4ee5\u83b7\u53d6\u5230; \u800c\u89e3\u6790\u7c7b\u578b\u5f15\u7528\u7b26\u53f7\u662f\u5728\u6240\u6709\u7c7b\u578b\u4e2d\u67e5\u627e\u6240\u5f15\u7528\u7684\u7c7b\u578b\u7684\u8fc7\u7a0b\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u9700\u8981\u4f9d\u8d56\u8bed\u4e49\u5206\u6790\u7684\u7ed3\u679c\uff0c\u6709\u4e00\u5b9a\u7684\u5f00\u9500\u3002KSP \u5f53\u4e2d\u5f15\u5165\u7c7b\u578b\u5f15\u7528\u7b26\u53f7\uff0c\u4f7f\u5f97\u7c7b\u578b\u7684\u89e3\u6790\u5ef6\u8fdf\u5230\u4f7f\u7528\u65f6\uff0c\u4e5f\u662f\u4e00\u79cd\u6027\u80fd \u4e0a\u7684\u4f18\u5316\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_10","title":"\u901a\u8fc7\u7c7b\u578b\u83b7\u53d6\u7b26\u53f7","text":"<p>\u4e00\u4e2a\u7c7b\u578b\u53ea\u6709\u5728\u4ee3\u7801\u5f53\u4e2d\u5b9a\u4e49\u4e4b\u540e\u624d\u4f1a\u51fa\u73b0\u5728\u7c7b\u578b\u7cfb\u7edf\u5f53\u4e2d\uff0c\u56e0\u800c\u4efb\u4f55\u7c7b\u578b\u90fd\u53ef\u4ee5\u627e\u5230\u5b83\u5bf9\u5e94\u7684\u7b26\u53f7\u3002</p> <p>\u5728 APT \u5f53\u4e2d\uff0c\u60f3\u8981\u901a\u8fc7 TypeMirror \u83b7\u53d6\u5b83\u5bf9\u5e94\u7684 Element\uff0c\u9700\u8981\u501f\u52a9 Types#asElement() \u65b9\u6cd5\uff0c\u5176\u4e2d Types \u7684\u5b9e\u4f8b\u53ef\u4ee5\u5728\u5904\u7406\u5668\u7684 init \u65b9\u6cd5\u5f53\u4e2d\u901a\u8fc7 ProcessingEnvironment \u83b7\u53d6\u3002</p> <p>\u5728 KSP \u5f53\u4e2d\uff0c\u83b7\u53d6\u7c7b\u578b\u5bf9\u5e94\u7684\u7b26\u53f7\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 KSType#declaration\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_11","title":"\u5224\u65ad\u7c7b\u578b\u4e4b\u95f4\u7684\u5173\u7cfb","text":"<p>\u7c7b\u578b\u4e4b\u95f4\u5b58\u5728\u76f8\u540c(Same)\u3001\u53ef\u8d4b\u503c(Assignable)\u3001\u5b50\u7c7b\u578b(Subtype)\u7b49\u5173\u7cfb\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_12","title":"\u76f8\u540c\u7c7b\u578b","text":"<p>\u76f8\u540c\u7c7b\u578b\u5f88\u5bb9\u6613\u7406\u89e3\uff0c\u5728 APT \u5f53\u4e2d\u53ef\u4ee5\u4f7f\u7528 Types#isSameType(TypeMirror,TypeMirror) \u6765\u5224\u65ad\u4e24\u4e2a TypeMirror \u5b9e\u4f8b\u662f\u5426\u662f\u76f8\u540c\u7684\u7c7b\u578b\u3002</p> <p>\u5728 KSP \u5f53\u4e2d\uff0c\u5224\u65ad\u4e24\u4e2a\u7c7b\u578b\u662f\u5426\u76f8\u540c\u975e\u5e38\u76f4\u63a5\uff0c\u4f7f\u7528 equals \u8fd0\u7b97\u7b26\u5373\u53ef\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_13","title":"\u53ef\u8d4b\u503c\u7c7b\u578b\u548c\u5b50\u7c7b\u578b","text":"<p>\u53ef\u8d4b\u503c\u7c7b\u578b\u548c\u5b50\u7c7b\u578b\u7684\u8868\u8ff0\u5728 Kotlin \u5f53\u4e2d\u6ca1\u6709\u5b9e\u8d28\u7684\u533a\u522b\uff0c\u5373\u5728 Kotlin \u5f53\u4e2d\u5982\u679c\u7c7b \u578b A \u7684\u5b9e\u4f8b\u53ef\u4ee5\u8d4b\u503c\u7ed9\u7c7b\u578b B \u7684\u53d8\u91cf\uff0c\u90a3\u4e48 A \u7c7b\u578b\u5c31\u662f B \u7c7b\u578b\u7684\u5b50\u7c7b\u578b\u3002</p> <p>\u4e0d\u8fc7\u5728 Java \u5f53\u4e2d\uff0c\u53ef\u8d4b\u503c\u7c7b\u578b\u548c\u5b50\u7c7b\u578b\u5374\u4e0d\u5b8c\u5168\u76f8\u540c\u3002\u5c3d\u7ba1\u6211\u4eec\u4e5f\u7ecf\u5e38\u901a\u8fc7\u4e24\u4e2a\u7c7b\u578b\u662f \u5426\u53ef\u8d4b\u503c\u6765\u5224\u65ad\u4e8c\u8005\u4e4b\u95f4\u662f\u5426\u5b58\u5728\u5b50\u7c7b\u578b\u5173\u7cfb\uff0c\u4e0d\u8fc7\u5728 Java \u5f53\u4e2d\u8fd9\u5e76\u4e0d\u662f\u7edd\u5bf9\u7684\u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230 APT \u5f53\u4e2d\uff0cTypes \u63d0\u4f9b\u4e86 isAssignable \u6765\u5224\u65ad\u7c7b\u578b\u7684\u53ef\u8d4b\u503c\u5173 \u7cfb\uff0c\u4ee5\u53ca isSubtype \u6765\u5224\u65ad\u7c7b\u578b\u7684\u7236\u5b50\u5173\u7cfb\u3002\u800c\u5728 KSP \u5f53\u4e2d\u5c31\u6bd4\u8f83\u7b80\u5355\u4e86\uff0cKSType \u53ea\u6709\u4e00\u4e2a isAssignableFrom \u6765\u5224\u65ad\u7c7b\u578b\u7684\u53ef\u8d4b\u503c\u5173\u7cfb\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_14","title":"\u83b7\u53d6\u6ce8\u89e3\u53ca\u5176\u53c2\u6570\u503c","text":"<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7b26\u53f7\u83b7\u53d6\u5230\u6807\u6ce8\u4e8e\u5b83\u4e4b\u4e0a\u7684\u6ce8\u89e3\uff0c\u5e76\u8fdb\u800c\u83b7\u53d6\u5230\u5176\u4e2d\u7684\u503c\u3002</p> <p>\u5982\u679c\u4f7f\u7528 APT \u6765\u5904\u7406\u8fd9\u6bb5\u4ee3\u7801\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 RoundEnvironment \u548c\u6ce8\u89e3\u7b26\u53f7\u76f4\u63a5\u83b7\u53d6\u5230\u88ab\u6ce8\u89e3\u6807\u6ce8\u7684\u7b26\u53f7\uff0c\u901a\u8fc7\u8fd9\u4e9b\u7b26\u53f7\u518d\u83b7\u53d6\u6ce8\u89e3\u7684\u53c2\u6570\u3002\u5982\u679c\u6ce8\u89e3\u5904\u7406\u5668\u7684\u8fd0\u884c\u65f6\u53ef\u89c1\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 getElementsAnnotatedWith \u6765\u83b7\u53d6\u6ce8\u89e3\u7684\u53c2\u6570\u3002</p> <p>KSP \u5f53\u4e2d\u540c\u6837\u4e5f\u5b58\u5728\u8fd9\u4e24\u79cd\u76f8\u4f3c\u7684\u505a\u6cd5\u3002\u5982\u679c\u6ce8\u89e3\u5728\u5904\u7406\u5668\u8fd0\u884c\u65f6\u4e0d\u53ef\u89c1\uff0c\u6211\u4eec\u540c\u6837\u9700\u8981\u901a\u8fc7\u5904\u7406\u7b26\u53f7\u6765\u83b7\u53d6\u6ce8\u89e3\u7684\u4fe1\u606f\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_15","title":"\u6df1\u5165\u7406\u89e3\u7b26\u53f7\u5904\u7406\u5668","text":""},{"location":"foundation/kotlin-meta-programming/symbol-process/#apt-kotlin","title":"\u5982\u4f55\u4f7f\u7528 APT \u5904\u7406 Kotlin \u7b26\u53f7","text":"<p>\u5728 KSP \u53d1\u5e03\u4e4b\u524d\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u4f7f\u7528 APT \u6765\u5b9e\u73b0 Kotlin \u7684\u7b26\u53f7\u5904\u7406\u9700\u6c42\u3002Kotlin \u7f16\u8bd1\u5668\u63d0\u4f9b\u4e00\u4e2a\u4e13\u95e8\u7684\u63d2\u4ef6\u6765\u5b9e\u73b0\u8fd9\u4e2a\u9700\u6c42\uff0c\u5373 KAPT\uff08Kotlin Annotation Processing Tool\uff09</p> <p>Kotlin \u7f16\u8bd1\u5668\u4f1a\u5148\u5c06 Kotlin \u7684\u6e90\u7801\u8f6c\u6210 Java \u7f16\u8bd1\u5668\u53ef\u4ee5\u5904\u7406\u7684 Java \u5b58\u6839\uff0c\u518d\u7531 Java \u7f16\u8bd1\u5668\u6267\u884c\u539f\u672c\u7684\u7b26\u53f7\u5904\u7406\u903b\u8f91\u3002</p> <p>\u5f53\u7136 Java \u5b58\u6839\u4e2d\u4f1a\u4e22\u5931\u5f88\u591a Kotlin \u7684\u8bed\u6cd5\u7279\u6027\uff0c\u8fd9\u79cd\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u5c31\u9700\u8981\u501f\u52a9 Metadata \u6ce8\u89e3\u7684\u4fe1\u606f\u6765\u5b9e\u73b0 Kotlin \u7b26\u53f7\u7684\u8fd8\u539f\u4e86</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_16","title":"\u5904\u7406\u5668\u7684\u8f6e\u6b21\u548c\u7b26\u53f7\u7684\u5ef6\u8fdf\u5904\u7406","text":"<p>\u7b26\u53f7\u5904\u7406\u5668\u4f1a\u88ab\u8c03\u7528\u591a\u6b21\uff0c\u8fd9\u4e3b\u8981\u662f\u56e0\u4e3a\u5904\u7406\u5668\u8c03\u7528\u65f6\u901a\u5e38\u4f1a\u6709\u65b0\u7684\u6e90\u7801\u4ea7\u751f\uff0c\u8fd9\u4e9b\u6e90\u7801\u4e5f\u9700\u8981\u7ecf\u8fc7\u5904\u7406\u5668\u5904\u7406\u3002</p> <p>\u5728 APT \u5f53\u4e2d\uff0c\u5904\u7406\u5668\u7684\u6267\u884c\u6709\u4e24\u4e2a\u6761\u4ef6\uff0c\u6ee1\u8db3\u5176\u4e00\u5c31\u4f1a\u88ab\u6267\u884c\uff1a</p> <ol> <li>\u5f53\u524d\u8f6e\u6b21\u7684\u6e90\u7801\u5f53\u4e2d\u5b58\u5728\u88ab\u8be5\u5904\u7406\u5668\u58f0\u660e\u7684\u6ce8\u89e3\u6240\u6807\u6ce8\u7684\u7b26\u53f7\u3002</li> <li>\u8be5\u5904\u7406\u5668\u5728\u4e4b\u524d\u7684\u8f6e\u6b21\u5f53\u4e2d\u5df2\u7ecf\u88ab\u6267\u884c\u8fc7\u3002</li> </ol> <p>AP \u5904\u7406\u5668\u6267\u884c\u65f6\uff0cprocess \u65b9\u6cd5\u7684\u53c2\u6570 roundEnv \u5305\u542b\u4e86\u5f53\u524d\u8f6e\u6b21\u6240\u9700\u8981\u5904\u7406\u7684\u7b26\u53f7\u4fe1\u606f\uff0c\u8fd9\u4e9b\u7b26\u53f7\u4fe1\u606f\u6e90\u81ea\u4e8e\u7f16\u8bd1\u5668\u7684\u8f93\u5165\uff08\u9996\u8f6e\u6267\u884c\u5904\u7406\u5668\uff09\u6216\u8005\u4e0a\u4e00\u8f6e\u6b21\u751f\u6210\u7684\u6e90\u4ee3\u7801\u6216\u8005\u4e8c\u8fdb\u5236\u7c7b \u6587\u4ef6\uff08\u540e\u7eed\u6267\u884c\u5904\u7406\u5668\uff09\u3002</p> <p>\u5728 KSP \u5f53\u4e2d\uff0c\u5904\u7406\u5668\u7684 process \u65b9\u6cd5\u5728\u6bcf\u4e2a\u8f6e\u6b21\u90fd\u4f1a\u88ab\u6267\u884c\u3002KSP \u9ed8\u8ba4\u5c31\u5bf9\u7b26\u53f7\u9a8c\u8bc1\u548c\u5ef6\u8fdf\u5904\u7406\u5f53\u524d\u65e0\u6cd5\u89e3\u6790\u7684\u7b26\u53f7\u505a\u4e86\u652f\u6301\uff0c\u8fd9\u4f7f\u5f97\u7b26\u53f7\u5904\u7406\u7684\u903b\u8f91\u53d8\u5f97\u66f4\u52a0\u7b80\u5355\u76f4\u63a5\u3002\u4e0e APT \u4e0d\u540c\uff0cKSP \u7684 process \u7684\u8fd4\u56de\u503c\u5c31\u662f\u9700\u8981\u5ef6\u8fdf\u5904\u7406\u7684\u7b26\u53f7\uff0c\u56e0\u6b64\u5982\u679c\u9047\u5230\u65e0\u6cd5\u901a\u8fc7\u9a8c\u8bc1\u7684\u7b26\u53f7\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5c06\u5176\u4f5c\u4e3a\u8fd4\u56de\u503c\u8fd4\u56de\u5373\u53ef\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_17","title":"\u5904\u7406\u5668\u5bf9\u589e\u91cf\u7f16\u8bd1\u7684\u652f\u6301","text":"<p>\u589e\u91cf\u7f16\u8bd1\u8981\u6c42\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u5c3d\u53ef\u80fd\u7684\u51cf\u5c11\u5bf9\u6e90\u6587\u4ef6\u7684\u5904\u7406\u3002\u751f\u6210\u7684\u76ee\u6807\u6587\u4ef6\u4e0e\u6e90\u6587\u4ef6\u4e4b\u95f4\u7684\u5173\u7cfb\u53ef\u4ee5\u5206\u4e3a\u4e24\u79cd\uff1a</p> <ol> <li>\u76ee\u6807\u6587\u4ef6\u53ea\u4f9d\u8d56\u4e8e\u82e5\u5e72\u7279\u5b9a\u7684\u6e90\u6587\u4ef6\uff0c\u9664\u4e86\u8fd9\u4e9b\u6e90\u6587\u4ef6\u4e4b\u5916\u7684\u5176\u4ed6\u53d8\u52a8\u4e0d\u4f1a\u5f71\u54cd\u76ee\u6807\u6587\u4ef6\u7684\u751f\u6210\uff0c\u7b80\u79f0\u4e3a\u4e00\u5bf9\u4e00\u6216\u7279\u5b9a\u591a\u5bf9\u4e00\u3002</li> <li>\u76ee\u6807\u6587\u4ef6\u4f9d\u8d56\u4e8e\u591a\u4e2a\u6e90\u6587\u4ef6\uff0c\u65b0\u7684\u6e90\u6587\u4ef6\u6216\u8005\u5176\u4ed6\u6e90\u6587\u4ef6\u7684\u6539\u52a8\u90fd\u53ef\u80fd\u4f1a\u5f71\u54cd\u5230\u76ee\u6807\u6587\u4ef6\u7684\u751f\u6210\uff0c\u7b80\u79f0\u4e3a\u4e0d\u5b9a\u591a\u5bf9\u4e00\u3002</li> </ol> <p>APT \u652f\u6301\u4ee5\u4e0b\u51e0\u79cd\u5904\u7406\u5668\u7684\u589e\u91cf\u7f16\u8bd1\u6a21\u5f0f\uff1a </p> <ol> <li>\u9694\u79bb\u6a21\u5f0f\uff08Isolating\uff09\uff1a\u8be5\u6a21\u5f0f\u4e0b\u6bcf\u4e00\u4e2a\u88ab\u6ce8\u89e3\u6807\u6ce8\u7684\u7b26\u53f7\u5fc5\u987b\u72ec\u7acb\u5730\u751f\u6210\u76ee\u6807\u6587\u4ef6\uff0c\u5904\u7406\u8fc7\u7a0b\u5f53\u4e2d\u53ea\u80fd\u8bbf\u95ee\u4e0e\u8be5\u7b26\u53f7\u6709\u5173\u7684\u5176\u4ed6\u7b26\u53f7\u548c\u7c7b\u578b\uff0c\u5305\u62ec\u7236\u7c7b\u578b\u3001\u6210\u5458\u7b26\u53f7\u548c\u7c7b\u578b\u7b49\u7b49\u3002\u8be5\u6a21\u5f0f\u8981\u6c42\u6e90\u6587\u4ef6\u4e0e\u76ee\u6807\u6587\u4ef6\u4e4b\u95f4\u9075\u4ece\u4e00\u5bf9\u4e00\u7684\u5bf9\u5e94\u5173\u7cfb\u3002 </li> <li>\u805a\u5408\u6a21\u5f0f\uff08Aggregating\uff09\uff1a\u5728\u8be5\u6a21\u5f0f\u4e0b\uff0cGradle \u5c06\u603b\u662f\u91cd\u65b0\u8c03\u7528\u8be5\u5904\u7406\u5668\u5bf9\u76f8\u5e94\u7684\u7b26\u53f7\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u4e14\u5bf9\u751f\u6210\u7684\u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\uff0c\u5373\u4e0d\u5b9a\u591a\u5bf9\u4e00\u3002</li> </ol> <p>\u663e\u7136\uff0c\u9694\u79bb\u6a21\u5f0f\u7684\u9650\u5236\u66f4\u591a\uff0c\u4f46\u66f4\u5bb9\u6613\u5b9e\u73b0\u589e\u91cf\u7f16\u8bd1\uff1b\u805a\u5408\u6a21\u5f0f\u9650\u5236\u8f83\u5c11\uff0c\u4f46\u5f80\u5f80\u4f1a\u5f71\u54cd\u7f16\u8bd1\u901f\u5ea6\u3002</p> <p>KSP \u5f53\u4e2d\u5b58\u5728\u7c7b\u4f3c\u7684\u8bbe\u8ba1\u3002KSP \u7684\u589e\u91cf\u7f16\u8bd1\u9ed8\u8ba4\u662f\u5f00\u542f\u7684\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728\u521b\u5efa\u76ee\u6807\u6587\u4ef6\u65f6\u660e\u786e\u6e90\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6\u7684\u5173\u7cfb\u5373\u53ef\u3002</p> <p>\u5f53 Dependencies \u7684 aggregating \u4e3a true \u65f6\uff0c\u76ee\u6807\u6587\u4ef6\u4e0e\u6e90\u6587\u4ef6\u4e4b\u95f4\u662f\u805a\u5408\u7684\u591a\u5bf9\u4e00\u5173\u7cfb\u3002\u5728 Dependencies \u5f53\u4e2d\u7684\u6587\u4ef6\u53d8\u66f4\u4ee5\u53ca\u6709\u65b0\u589e\u6587\u4ef6\u65f6\uff0c\u5904\u7406\u5668\u4f1a\u88ab\u91cd\u65b0\u6267\u884c\uff0c\u8fd9\u79cd \u60c5\u51b5\u4e0e APT \u7684\u805a\u5408\u6a21\u5f0f\u7c7b\u4f3c\u3002</p> <p>\u5982\u679c aggregating \u4e3a false\uff0c\u5219\u53ea\u6709 Dependencies \u5f53\u4e2d\u5305\u542b\u7684\u6587\u4ef6\u53d8\u66f4\u65f6\u5904\u7406\u5668\u624d\u4f1a\u88ab\u91cd\u65b0\u6267\u884c\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0e APT \u7684\u9694\u79bb\u6a21\u5f0f\u7c7b\u4f3c\u3002\u6b64\u65f6\uff0cKSP \u5141\u8bb8\u591a\u4e2a\u786e\u5b9a\u7684\u6e90\u6587\u4ef6\u5bf9\u5e94\u5230 \u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u4e0a\uff0c\u9664\u4e86\u8fd9\u4e9b\u6e90\u6587\u4ef6\u4e4b\u5916\u7684\u4efb\u4f55\u53d8\u66f4\u90fd\u4e0d\u4f1a\u5f15\u8d77\u5bf9\u5e94\u7684\u5904\u7406\u5668\u7684\u6267\u884c\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6e90\u6587\u4ef6\u4e0e\u76ee\u6807\u6587\u4ef6\u662f\u4e00\u5bf9\u4e00\u6216\u8005\u7279\u5b9a\u591a\u5bf9\u4e00\u7684\u5173\u7cfb\u3002</p> <p>\u5c3d\u7ba1\u5de5\u4f5c\u673a\u5236\u7c7b\u4f3c\uff0c\u4f46 KSP \u6bd4 APT \u7684\u589e\u91cf\u652f\u6301\u505a\u5f97\u66f4\u7cbe\u7ec6\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a Kotlin \u7b26\u53f7\u5904\u7406\u5668\u5f53\u4e2d\u4e3a\u4e0d\u540c\u7684\u76ee\u6807\u6587\u4ef6\u914d\u7f6e\u4e0d\u540c\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4f46 APT \u7684\u6bcf\u4e00\u4e2a\u5904\u7406\u5668\u5374\u53ea\u80fd\u914d\u7f6e\u4e00 \u79cd\u589e\u91cf\u7f16\u8bd1\u7684\u6a21\u5f0f\u3002</p>"},{"location":"foundation/kotlin-meta-programming/symbol-process/#_18","title":"\u591a\u6a21\u5757\u7684\u7b26\u53f7\u5904\u7406","text":"<p>\u5982\u679c\u6e90\u6587\u4ef6\u5230\u76ee\u6807\u6587\u4ef6\u7684\u6620\u5c04\u5173\u7cfb\u662f\u4e00\u5bf9\u4e00\u6216\u8005\u7279\u5b9a\u591a\u5bf9\u4e00\u7684\u9694\u79bb\u6a21\u5f0f\uff0c\u90a3\u4e48\u591a\u6a21\u5757\u4e0e\u5355\u6a21\u5757\u5728\u7b26\u53f7\u5904\u7406\u65f6\u6ca1\u6709\u4efb\u4f55\u533a\u522b\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5404\u4e2a\u6a21\u5757\u5355\u72ec\u5904\u7406\u5404\u81ea\u7684\u7b26\u53f7\uff0c\u6a21\u5757\u4e4b\u95f4\u4e0d\u4f1a\u4ea7\u751f\u5f71\u54cd\u3002</p> <p>\u4f46\u5982\u679c\u6e90\u6587\u4ef6\u5230\u76ee\u6807\u6587\u4ef6\u7684\u6620\u5c04\u5173\u7cfb\u662f\u4e0d\u5b9a\u591a\u5bf9\u4e00\u7684\u805a\u5408\u6a21\u5f0f\uff0c\u90a3\u4e48\u60c5\u51b5\u5c31\u53ef\u80fd\u4f1a\u53d8\u5f97\u590d\u6742\u3002</p> <p>\u7531\u4e8e\u88ab\u6807\u6ce8\u7684\u7b26\u53f7\u53ef\u80fd\u5206\u6563\u5728\u5404\u4e2a\u6a21\u5757\u5f53\u4e2d\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u5355\u4e2a\u6a21\u5757\u7f16\u8bd1\u65f6\u65e0\u6cd5\u76f4\u63a5\u751f\u6210\u76ee\u6807\u6587\u4ef6\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u9700\u8981\u5f15\u5165\u4e3b\u4ece\u6a21\u5757\u7684\u6982\u5ff5\uff0c\u4e3b\u6a21\u5757\u548c\u4ece\u6a21\u5757\u5f53\u4e2d\u90fd\u53ef\u80fd\u4f1a\u5b58\u5728\u88ab\u6807\u6ce8\u7684\u7b26\u53f7\uff0c\u4f46\u6700\u7ec8\u7684\u76ee\u6807\u6587\u4ef6\u751f\u6210\u5728\u4e3b\u6a21\u5757\u5f53\u4e2d\u7edf\u4e00\u5b8c\u6210\u3002</p> <p>\u4e3b\u6a21\u5757\u5b8c\u6210\u6700\u7ec8\u7684\u76ee\u6807\u6587\u4ef6\u751f\u6210\uff0c\u90a3\u4e48\u4ece\u6a21\u5757\u4f3c\u4e4e\u4ec0\u4e48\u90fd\u4e0d\u7528\u505a\uff0c\u662f\u8fd9\u6837\u5417\uff1f\u5f53\u7136\u4e0d\u662f\u3002\u4e0d\u7ba1\u662f APT \u8fd8\u662f KSP\uff0c\u90fd\u53ea\u80fd\u76f4\u63a5\u83b7\u53d6\u5230\u5f53\u524d\u8f6e\u6b21\u9700\u8981\u7f16\u8bd1\u7684\u6e90\u4ee3\u7801\u5f53\u4e2d\u88ab\u6ce8\u89e3\u6807\u6ce8\u7684\u7b26\u53f7\uff0c\u8fd9\u610f\u5473\u7740\u5728\u4e3b\u6a21\u5757\u7f16\u8bd1\u65f6\uff0c\u5b83\u4f9d\u8d56\u7684\u4ece\u6a21\u5757\u5f53\u4e2d\u88ab\u6ce8\u89e3\u6807\u6ce8\u7684\u7b26\u53f7\u4e0d\u80fd\u88ab\u76f4\u63a5\u83b7\u53d6\u5230\u7684\u3002\u4e3a\u4e86\u89e3\u51b3\u4e3b\u6a21\u5757\u83b7\u53d6\u4ece\u6a21\u5757\u7b26\u53f7\u7684\u95ee\u9898\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u5728\u4ece\u6a21\u5757\u5f53\u4e2d\u751f\u6210\u4e00\u4e2a\u5305\u542b\u4ece\u6a21\u5757\u5f53\u4e2d\u88ab\u6ce8\u89e3\u6807\u6ce8\u7684\u7b26\u53f7\u4fe1\u606f\u7684\u6587\u4ef6\uff0c\u79f0\u4e3a\u5143\u4fe1\u606f\u6587\u4ef6\u3002</p> <p>\u901a\u5e38\u60c5\u51b5\u4e0b\u6211\u4eec\u4f1a\u628a\u8fd9\u4e2a\u5143\u4fe1\u606f\u6587\u4ef6\u751f\u6210\u5230\u4e00\u4e2a\u7279\u5b9a\u7684\u5305\u540d\u4e0b\uff0c\u8fd9\u6837\u5728\u4e3b\u6a21\u5757\u7684\u5904\u7406\u5668\u5f53\u4e2d\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u5305\u540d\u6765\u83b7\u53d6\u6240\u6709\u7684\u5143\u4fe1\u606f\u7c7b\u3002</p>"},{"location":"foundation/nand-to-tetris/bool-arithmetic/","title":"\u5e03\u5c14\u8fd0\u7b97","text":"<p>\u672c\u7ae0\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5982\u4f55\u57fa\u4e8e\u4e0a\u4e00\u7ae0\u6784\u5efa\u7684\u903b\u8f91\u95e8\u7535\u8def\u6784\u5efa\u51fa ALU(Arithmetic Logic Unit/\u7b97\u672f\u903b\u8f91\u5355\u5143)</p> <p>ALU \u662f\u6838\u5fc3\u7684\u5355\u5143\uff0c\u5b83\u6267\u884c\u6240\u6709\u7684\u7b97\u672f\u548c\u903b\u8f91\u64cd\u4f5c\u3002\u56e0\u6b64\uff0c\u8981\u7406\u89e3\u4e2d\u592e\u5904\u7406\u5668\uff08Central Processing Unit, CPU\uff09\u4ee5\u53ca\u6574\u4e2a\u8ba1\u7b97\u673a\u7684\u5de5\u4f5c\u65b9\u5f0f\uff0c\u6784\u5efa ALU \u529f\u80fd \u6a21\u5757\u662f\u5f88\u91cd\u8981\u7684\u4e00\u6b65\u3002</p> <p></p>"},{"location":"foundation/nand-to-tetris/bool-arithmetic/#_2","title":"\u57fa\u7840\u77e5\u8bc6","text":""},{"location":"foundation/nand-to-tetris/bool-arithmetic/#_3","title":"\u4e8c\u8fdb\u5236\u6570","text":"<p>\u8ba1\u7b97\u673a\u662f\u57fa\u4e8e\u4e8c\u8fdb\u5236\u7cfb\u7edf\u7684\uff0c\u7528\u4e8e\u4e24\u4e2a n \u4f4d\u6570\u5b57\u4e8c\u8fdb\u5236\u52a0\u6cd5\u7684\u8ba1\u7b97\u673a\u786c\u4ef6\u53ef\u4ee5\u7531\u4e09\u4f4d\uff08\u4e24\u4e2a\u8ba1\u7b97\u4f4d\u52a0\u4e0a\u4e00\u4e2a\u8fdb\u4f4d\uff09\u52a0\u6cd5\u7684\u903b\u8f91\u95e8\u6784\u5efa\u800c\u6210\u3002</p>"},{"location":"foundation/nand-to-tetris/bool-arithmetic/#_4","title":"\u6709\u7b26\u53f7\u4e8c\u8fdb\u5236\u6570","text":"<p>n \u4f4d\u4e8c\u8fdb\u5236\u7cfb\u7edf\u53ef\u4ee5\u4ea7\u751f2\u7684n\u6b21\u65b9\u4e2a\u4e0d\u540c\u7684\u7ec4\u5408\u3002\u5982\u679c\u5fc5\u987b\u7528\u4e8c\u8fdb\u5236\u7801\u8868\u793a\u6709\u7b26\u53f7\u6570\uff0c\u6709\u4e2a\u7b80\u5355\u7684\u65b9\u6cd5\u5c31\u662f\uff0c\u5c06\u8fd9\u4e2a\u7a7a\u95f4\u5206\u6210\u4e24\u4e2a\u76f8\u540c\u7684\u5b50\u96c6\uff0c\u4e00\u4e2a\u5b50\u96c6\u7528\u6765\u8868\u793a\u6b63\u6570\uff0c\u53e6\u4e00\u4e2a\u8868\u793a\u8d1f\u6570\u3002\u4ece\u7406\u60f3\u7684\u89d2\u5ea6\u6765\u8bf4\uff0c\u7f16\u7801\u89c4\u5219\u5e94\u8be5\u6309\u7167\u5982\u4e0b\u539f\u5219\u6765\u8fdb\u884c\uff1a\u6709\u7b26\u53f7\u6570\u7684\u5f15\u5165\u5e94\u8be5\u4f7f\u786c\u4ef6\u5b9e\u73b0\u7684\u590d\u6742\u7a0b\u5ea6\u5c3d\u53ef\u80fd\u5c0f\u3002</p> <p>\u6709\u7b26\u53f7\u6570\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u4fc3\u8fdb\u4e86\u5f88\u591a\u7f16\u7801\u4f53\u7cfb\u7684\u53d1\u5c55\u3002\u5982\u4eca\u51e0\u4e4e\u6240\u6709\u8ba1\u7b97\u673a\u90fd\u91c7\u7528\u79f0\u4e3a 2-\u8865\u7801\uff082's complement\uff09\u7684\u7f16\u7801\u65b9\u5f0f\uff0c\u4e5f\u79f0\u4e3a\u57fa\u8865\u7801\uff08radix complement\uff09\u3002\u5728n\u4f4d\u7684\u4e8c\u8fdb \u5236\u7cfb\u7edf\u4e2d\uff0c\u6570x\u7684\u8865\u7801\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <pre><code>if (x != 0){\n    return 2^n-x\n} else {\n    return 0\n}\n</code></pre> <p>\u8fd9\u79cd\u8868\u793a\u6cd5\u6709\u4e2a\u7279\u522b\u6709\u5438\u5f15\u529b\u7684\u7279\u5f81\uff1a\u4efb\u4f55\u4e24\u4e2a\u7528\u8865\u7801\u8868\u793a\u7684\u6709\u7b26\u53f7\u6570\u7684\u52a0\u6cd5\u548c\u4e0e\u6b63\u6570\u7684\u52a0\u6cd5\u5b8c\u5168\u76f8\u540c\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u6211\u4eec\u53d1\u73b0\u8865\u7801\u8868\u793a\u6cd5\u53ef\u4ee5\u5b9e\u73b0\u4efb\u4f55\u4e24\u4e2a\u6709\u7b26\u53f7\u6570\u7684\u52a0\u6cd5\u800c\u4e0d\u9700\u8981\u7279\u6b8a\u7684\u786c\u4ef6\u3002\u90a3\u4e48\u51cf\u6cd5\u662f\u600e\u6837\u7684\u5462\uff1f\u524d\u9762\u8bf4\u8fc7\uff0c\u5728\u8865\u7801\u8868\u793a\u91cc\u9762\uff0c\u5bf9\u6709\u7b26\u53f7\u6570x\u7684\u53d6\u53cd\uff0c\u4e5f\u5c31\u662f\u8ba1\u7b97 -x\uff0c\u8981\u5c06 x \u7684\u6240\u6709\u4f4d\u53d6\u53cd\u7136\u540e\u518d\u52a0 1\u3002\u56e0\u6b64\uff0c\u51cf\u6cd5\u53ef\u4ee5\u88ab\u770b\u6210 x\u4e00y = x \uff0b\uff08\u4e00y\uff09\u3002\u8fd9\u6837\uff0c\u786c\u4ef6\u7684\u590d\u6742\u5ea6\u4e5f\u4fdd\u6301\u5728\u6700\u5c0f\u3002</p> <p>\u8fd9\u4e9b\u7406\u8bba\u7ed3\u679c\u7684\u5b9e\u9645\u542b\u4e49\u662f\u5f88\u91cd\u8981\u7684\u3002\u57fa\u672c\u4e0a\uff0c\u5b83\u4eec\u610f\u5473\u7740\u80fd\u7528\u5355\u4e00\u82af\u7247\uff08\u79f0\u4e3a\u7b97\u672f\u903b\u8f91\u5355\u5143\uff0cALU \u5373 Arithmetic Logical Unit\uff09\u5c06\u786c\u4ef6\u6267\u884c\u7684\u6240\u6709\u57fa\u672c\u7b97\u672f\u64cd\u4f5c\u548c\u903b\u8f91\u64cd\u4f5c\u90fd\u5c01\u88c5\u8d77\u6765\u3002</p>"},{"location":"foundation/nand-to-tetris/bool-arithmetic/#_5","title":"\u89c4\u8303\u8be6\u8ff0","text":""},{"location":"foundation/nand-to-tetris/bool-arithmetic/#_6","title":"\u52a0\u6cd5\u5668","text":"<p>\u6211\u4eec\u4ecb\u7ecd\u4e09\u4e2a\u52a0\u6cd5\u5668\uff0c\u5e76\u7531\u6b64\u5f15\u51fa\u591a\u4f4d\u52a0\u6cd5\u5668\u82af\u7247\uff1a - \u534a\u52a0\u5668\uff08Half-adder\uff09\uff1a\u7528\u6765\u8fdb\u884c\u4e24\u4f4d\u52a0\u6cd5\u3002 - \u5168\u52a0\u5668\uff08Full-adder\uff09\uff1a\u7528\u6765\u8fdb\u884c\u4e09\u4f4d\u52a0\u6cd5\u3002 - \u52a0\u6cd5\u5668\uff08Adder\uff09\uff1a\u7528\u6765\u8fdb\u884c\u4e24\u4e2an\u4f4d\u52a0\u6cd5\u3002</p> <p>\u6211\u4eec\u4e5f\u4ecb\u7ecd\u4e86\u4e00\u79cd\u7279\u6b8a\u7684\u52a0\u6cd5\u5668\uff0c\u79f0\u4e3a\u589e\u91cf\u5668\uff08incrementer\uff09\uff0c\u7528\u6765\u5bf9\u6307\u5b9a\u7684\u6570\u5b57\u52a01\u3002</p> <ul> <li>\u534a\u52a0\u5668\uff1a\u8fdb\u884c\u4e8c\u8fdb\u5236\u6570\u52a0\u6cd5\u7684\u7b2c\u4e00\u6b65\u5c31\u662f\u8981\u80fd\u591f\u5bf9\u4e24\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u8fdb\u884c\u76f8\u52a0\u3002\u6211\u4eec\u628a\u7ed3\u679c\u7684LSB(Least Significant Bits \u6700\u53f3\u8fb9\u7684\u4e00\u4f4d) \u4f4d\u79f0\u4e3asum\uff0cMSB(Most Significant Bits \u6700\u5de6\u8fb9\u7684\u4e00\u4f4d) \u4f4d\u79f0\u4e3a carry\u3002\u56fe</li> <li>\u5168\u52a0\u5668\uff1a\u73b0\u5728\u5df2\u7ecf\u77e5\u9053\u4e86\u5982\u4f55\u5bf9\u4e24\u4e2a\u4f4d\u8fdb\u884c\u76f8\u52a0\uff0c\u5168\u52a0\u5668\u5c31\u662f\u652f\u6301\u8fdb\u4f4d\u8fd0\u7b97\u7684\u534a\u52a0\u5668\uff0c\u7528\u6765\u5bf9\u4e09\u4e2a\u4f4d\u76f8\u52a0\u3002\u8ddf\u534a\u52a0\u5668\u4e00\u6837\uff0c\u5168\u52a0\u5668\u7535\u8def\u4e5f\u4f1a\u4ea7\u751f\u4e24\u4e2a\u8f93\u51fa\uff1a\u52a0\u6cd5\u7684LSB\u4f4d\u548c\u8fdb\u4f4d\u3002</li> <li>\u52a0\u6cd5\u5668\uff1a\u5b58\u50a8\u5668\u548c\u5bc4\u5b58\u5668\u7535\u8def\u7528n-\u4f4d\u7684\u5f62\u5f0f\u6765\u8868\u793a\u6574\u6570\uff0cn\u53ef\u4ee5\u662f16\u300132\u300164\u7b49\u7b49\u3002\u8fdb\u884cn-\u4f4d\u52a0\u6cd5\u7684\u82af\u7247\u79f0\u4e3a\u591a\u4f4d\u52a0\u6cd5\u5668\uff08multi-bit adder\uff09\uff0c\u6216\u8005\u7b80\u79f0\u4e3a\u52a0\u6cd5\u5668\u3002</li> <li>\u589e\u91cf\u5668\uff1a\u4e13\u95e8\u6784\u5efa\u4e00\u4e2a\u201c\u5bf9\u6307\u5b9a\u6570\u5b57\u52a01\u201d\u7684\u7535\u8def\uff0c\u8fd9\u6837\u505a\u4f1a\u5e26\u6765\u5f88\u591a\u4fbf\u5229\u3002</li> </ul>"},{"location":"foundation/nand-to-tetris/bool-arithmetic/#alu","title":"\u7b97\u672f\u903b\u8f91\u5355\u5143(ALU)","text":"<p>\u63a5\u4e0b\u6765\u5c31\u662f\u6784\u5efa Hack \u8ba1\u7b97\u7684 ALU \u6a21\u5757\u4e86</p> <p></p> <p>Hack \u7684ALU \u8ba1\u7b97\u4e00\u7ec4\u56fa\u5b9a\u7684\u51fd\u6570out=f\uff08\uff0cy\uff09\uff0c\u8fd9\u91ccx\u548cy\u662f\u82af\u7247\u7684\u4e24\u4e2a 16-\u4f4d\u8f93\u5165\uff0cout\u662f\u82af\u7247\u768416-\u4f4d\u8f93\u51fa\uff0cf\u662f\u4f4d\u4e8e\u4e00\u4e2a\u51fd\u6570\u8868\u4e2d\u7684\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u8868\u753118\u4e2a\u56fa\u5b9a\u51fd\u6570\u7ec4\u6210\u3002</p> <p>\u6211\u4eec\u901a\u8fc7\u8bbe\u7f6e\u516d\u4e2a\u79f0\u4e3a\u63a7\u5236\u4f4d\uff08control bits\uff09\u7684\u8f93\u5165\u4f4d\u6765\u544a\u8bc9 ALU \u7528\u54ea\u4e00\u4e2a\u51fd\u6570\u6765\u8fdb\u884c\u4f55\u79cd\u51fd\u6570\u8ba1\u7b97\u3002\u4e0b\u56fe\u7ed9\u51fa\u4e86\u7528\u4f2a\u4ee3\u7801\u8868\u793a\u7684\u8be6\u7ec6\u7684\u8f93\u5165/\u8f93\u51fa\u89c4\u8303\u3002</p> <p>\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd96\u4e2a\u63a7\u5236\u4f4d\u7684\u6bcf\u4e00\u4f4d\u6307\u793aALU \u6765\u6267\u884c\u67d0\u4e2a\u57fa\u672c\u64cd\u4f5c\u3002\u8fd9\u4e9b\u64cd\u4f5c\u7684\u5404\u79cd\u7ec4\u5408\u53ef\u4ee5\u8ba9 ALU \u8ba1\u7b97\u591a\u79cd\u6709\u7528\u7684\u51fd\u6570\u3002\u56e0\u4e3a\u5168\u90e8\u64cd\u4f5c\u90fd\u662f\u75316\u4e2a\u63a7\u5236\u4f4d\u5f15\u8d77\u7684\uff0c\u90a3\u4e48 ALU \u53ef\u4ee5\u5bf9 2^6=64\u4e2a\u4e0d\u540c\u7684\u51fd\u6570\u8fdb\u884c\u64cd\u4f5c\u3002\u4e0b\u56fe\u5217\u51fa\u4e86\u8fd9\u4e9b\u51fd\u6570\u4e2d\u768418\u79cd\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u662f\u901a\u8fc7\u5c066\u4e2a\u63a7\u5236\u4f4d\u8bbe\u7f6e\u6210\u51fd\u6570f\uff08x\uff0cy\uff09\u6240\u5bf9\u5e94\u7684\u7f16\u7801\uff0c\u6765\u6307\u793a ALU \u8ba1\u7b97\u8be5\u51fd\u6570\u3002\u4ece\u8fd9\u70b9\u6765\u770b\uff0c\u4e0b\u9762\u63cf\u8ff0\u7684ALU \u5185\u90e8\u903b\u8f91\u5e94\u8be5\u4ea7\u751f\u5982\u56fe\u4e2d\u5217\u51fa\u7684f\uff08x,y\uff09\u7684 \u8f93\u51fa\u503c\u3002\u5f53\u7136\uff0c\u8fd9\u4e0d\u662f\u78b0\u5de7\u4ea7\u751f\u7684\uff0c\u800c\u662f\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u7ed3\u679c\uff01</p> <p></p> <p></p> <p>\u5bf9\u8fd9\u4e2a\u7279\u6b8aALU \u7684\u8bbe\u8ba1\u8fc7\u7a0b\u7684\u63cf\u8ff0\u662f\u5f88\u6709\u542f\u53d1\u610f\u4e49\u7684\u3002\u9996\u5148\uff0c\u6211\u4eec\u5236\u4f5c\u4e86\u4e00\u5f20\u51fd\u6570\u5217\u8868\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u6240\u6709\u6211\u4eec\u5e0c\u671b\u8ba1\u7b97\u673a\u80fd\u591f\u6267\u884c\u7684\u539f\u59cb\u51fd\u6570\u3002\u63a5\u7740\uff0c\u5e94\u7528\u5012\u63a8\u6cd5\u5f97\u51fa\u5982\u4f55 \u5728\u4e8c\u8fdb\u5236\u6a21\u5f0f\u4e0b\u64cd\u4f5cx\uff0cy\u6765\u5b9e\u73b0\u671f\u671b\u7684\u64cd\u4f5c\u3002\u8fd9\u4e9b\u5904\u7406\u8981\u6c42\u4ee5\u53ca\u201c\u4f7fALU \u903b\u8f91\u5c3d\u53ef\u80fd\u7b80\u5355\u201d\u7684\u76ee\u6807\uff0c\u5bfc\u81f4\u6211\u4eec\u7684\u5728\u8bbe\u8ba1\u4e2d\u4f7f\u75286\u4e2a\u63a7\u5236\u4f4d\uff0c\u6bcf\u4e00\u4f4d\u90fd\u76f4\u63a5\u5bf9\u5e94\u4e00\u4e2a\u7b80\u5355\u7684\u4e8c\u8fdb\u5236 \u64cd\u4f5c\u3002\u8fd9\u6837\u7684 ALU \u6784\u9020\u7b80\u5355\u4e14\u7ed3\u6784\u826f\u597d\u3002\u4ece\u786c\u4ef6\u7684\u89d2\u5ea6\u6765\u8bf4\uff0c\u7b80\u5355\u7684\u3001\u826f\u597d\u7684\u7ed3\u6784\u610f\u5473\u7740\u4fbf\u5b9c\u4f46\u529f\u80fd\u5f3a\u5927\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u3002</p>"},{"location":"foundation/nand-to-tetris/bool-arithmetic/#_7","title":"\u9879\u76ee","text":""},{"location":"foundation/nand-to-tetris/bool-arithmetic/#halfadder","title":"HalfAdder","text":"<pre><code>CHIP HalfAdder {\n    IN a, b;    // 1-bit inputs\n    OUT sum,    // Right bit of a + b \n        carry;  // Left bit of a + b\n\n    PARTS:\n    Xor(a = a, b = b, out = sum);\n    And(a = a, b = b, out = carry);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-arithmetic/#fulladder","title":"FullAdder","text":"<pre><code>CHIP FullAdder {\n    IN a, b, c;  // 1-bit inputs\n    OUT sum,     // Right bit of a + b + c\n        carry;   // Left bit of a + b + c\n\n    PARTS:\n    HalfAdder(a = a, b = b, sum = s1, carry = c1);\n    HalfAdder(a = s1, b = c, sum = sum, carry = c2);\n    Xor(a = c1, b = c2, out = carry);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-arithmetic/#add16","title":"Add16","text":"<pre><code>CHIP Add16 {\n    IN a[16], b[16];\n    OUT out[16];\n\n    PARTS:\n    HalfAdder(a = a[0], b = b[0], sum = out[0], carry = c0);\n    FullAdder(a = a[1], b = b[1], c = c0, sum = out[1], carry = c1);\n    FullAdder(a = a[2], b = b[2], c = c1, sum = out[2], carry = c2);\n    FullAdder(a = a[3], b = b[3], c = c2, sum = out[3], carry = c3);\n    FullAdder(a = a[4], b = b[4], c = c3, sum = out[4], carry = c4);\n    FullAdder(a = a[5], b = b[5], c = c4, sum = out[5], carry = c5);\n    FullAdder(a = a[6], b = b[6], c = c5, sum = out[6], carry = c6);\n    FullAdder(a = a[7], b = b[7], c = c6, sum = out[7], carry = c7);\n    FullAdder(a = a[8], b = b[8], c = c7, sum = out[8], carry = c8);\n    FullAdder(a = a[9], b = b[9], c = c8, sum = out[9], carry = c9);\n    FullAdder(a = a[10], b = b[10], c = c9, sum = out[10], carry = c10);\n    FullAdder(a = a[11], b = b[11], c = c10, sum = out[11], carry = c11);\n    FullAdder(a = a[12], b = b[12], c = c11, sum = out[12], carry = c12);\n    FullAdder(a = a[13], b = b[13], c = c12, sum = out[13], carry = c13);\n    FullAdder(a = a[14], b = b[14], c = c13, sum = out[14], carry = c14);\n    FullAdder(a = a[15], b = b[15], c = c14, sum = out[15], carry = c15);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-arithmetic/#inc16","title":"Inc16","text":"<pre><code>CHIP Inc16 {\n    IN in[16];\n    OUT out[16];\n\n    PARTS:\n    Add16(a = in, b[0] = true, b[1..15] = false, out = out);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-arithmetic/#aul","title":"AUL","text":"<pre><code>/**\n * ALU (Arithmetic Logic Unit):\n * Computes out = one of the following functions:\n *                0, 1, -1,\n *                x, y, !x, !y, -x, -y,\n *                x + 1, y + 1, x - 1, y - 1,\n *                x + y, x - y, y - x,\n *                x &amp; y, x | y\n * on the 16-bit inputs x, y,\n * according to the input bits zx, nx, zy, ny, f, no.\n * In addition, computes the two output bits:\n * if (out == 0) zr = 1, else zr = 0\n * if (out &lt; 0)  ng = 1, else ng = 0\n */\n// Implementation: Manipulates the x and y inputs\n// and operates on the resulting values, as follows:\n// if (zx == 1) sets x = 0        // 16-bit constant\n// if (nx == 1) sets x = !x       // bitwise not\n// if (zy == 1) sets y = 0        // 16-bit constant\n// if (ny == 1) sets y = !y       // bitwise not\n// if (f == 1)  sets out = x + y  // integer 2's complement addition\n// if (f == 0)  sets out = x &amp; y  // bitwise and\n// if (no == 1) sets out = !out   // bitwise not\nCHIP ALU {\n    IN  \n        x[16], y[16],  // 16-bit inputs        \n        zx, // zero the x input?\n        nx, // negate the x input?\n        zy, // zero the y input?\n        ny, // negate the y input?\n        f,  // compute (out = x + y) or (out = x &amp; y)?\n        no; // negate the out output?\n    OUT \n        out[16], // 16-bit output\n        zr,      // if (out == 0) equals 1, else 0\n        ng;      // if (out &lt; 0)  equals 1, else 0\n\n    PARTS:\n     // zx\n    Mux16(a = x, b = false, sel = zx, out = x1);\n\n    // nx\n    Not16(in = x1, out = x2);\n    Mux16(a = x1, b = x2, sel = nx, out = x3);\n\n    // zy\n    Mux16(a = y, b = false, sel = zy, out = y1);\n\n    // ny\n    Not16(in = y1, out = y2);\n    Mux16(a = y1, b = y2, sel = ny, out = y3);\n\n    // f\n    And16(a = x3, b = y3, out = f1);\n    Add16(a = x3, b = y3, out = f2);\n    Mux16(a = f1, b = f2, sel = f, out = o1);\n\n    // no\n    Not16(in = o1, out = o2);\n    Mux16(a = o1, b = o2,sel = no, out=out, out[0..7]=outlow, out[8..15]=outhigh, out[15]=ng);\n\n    // zr    outno = 0\u65f6\uff0czr = 1\n    Or8Way(in = outlow,out = outor8waylow);\n    Or8Way(in = outhigh,out = outor8wayhigh);\n    Or(a = outor8waylow,b = outor8wayhigh, out = nzr);\n    Not(in = nzr,out = zr);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/","title":"\u5e03\u5c14\u903b\u8f91","text":"<p>\u6bcf\u79cd\u6570\u5b57\u8bbe\u5907\u2014\u2014\u6bd4\u5982\u4e2a\u4eba\u7535\u8111\u3001\u624b\u673a\u6216\u8005\u7f51\u7edc\u8def\u7531\u5668\u2014\u90fd\u662f\u57fa\u4e8e\u4e00\u7ec4\u7528\u4e8e\u50a8\u5b58\u548c\u5904\u7406\u4fe1\u606f\u7684\u82af\u7247\u6784\u5efa\u800c\u6210\u7684\u3002\u867d\u7136\u8fd9\u4e9b\u82af\u7247\u5728\u5916\u5f62\u4e0a\u3001\u6784\u6210\u4e0a\u4e0d\u5c3d\u76f8\u540c\uff0c\u4f46\u662f\u5b83\u4eec\u90fd\u662f\u7531\u76f8\u540c\u7684\u6784\u9020\u6a21\u5757\u5236\u9020\u800c\u6210\u7684\uff1a\u57fa\u672c\u7684\u903b\u8f91\u95e8 \uff08logic gates\uff09\u3002\u8fd9\u4e9b\u903b\u8f91\u95e8\u53ef\u80fd\u4f1a\u7531\u5f88\u591a\u4e0d\u540c\u7684\u539f\u6750\u6599\u548c\u5236\u9020\u5de5\u827a\u6765\u5b9e\u73b0\uff0c\u4f46\u662f\u5176\u903b\u8f91\u884c\u4e3a\u5728\u6240\u6709\u7684\u8ba1\u7b97\u673a\u4e2d\u90fd\u662f\u4e00\u81f4\u7684\u3002</p> <p>\u5728\u672c\u7ae0\u4e2d\uff0c\u6211\u4eec\u4ece\u539f\u59cb\u7684\u903b\u8f91\u95e8\u201c\u4e0e\u975e\u95e8\u201d\u51fa\u53d1\uff0c\u4ee5\u6b64\u6765\u6784\u5efa\u5176\u4ed6\u903b\u8f91\u95e8\u3002\u5f97\u5230\u7684\u662f\u4e00\u7ec4\u76f8\u5f53\u6807\u51c6\u7684\u903b\u8f91\u95e8\uff0c\u8fd9\u4e9b\u903b\u8f91\u95e8\u5728\u540e\u9762\u5c06\u4f1a\u88ab\u7528\u6765\u6784\u5efa\u8ba1\u7b97\u673a\u7684\u5904\u7406\u548c\u5b58\u50a8\u82af\u7247\u3002</p>"},{"location":"foundation/nand-to-tetris/bool-logic/#_2","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"foundation/nand-to-tetris/bool-logic/#_3","title":"\u5e03\u5c14\u4ee3\u6570","text":"<p>\u5e03\u5c14\u4ee3\u6570\u5904\u7406\u5e03\u5c14\u578b\uff08\u4e5f\u79f0\u4e8c\u8fdb\u5236\u578b\uff09\u6570\u503c\uff0c\u6bd4\u8f83\u5178\u578b\u7684\u6709 true/false\u30011/0\u3001yes/no\u3001on/off \u7b49\u7b49\u3002\u5728\u8fd9\u91cc\u6211\u4eec\u4f7f\u75281 \u548c0\u3002</p> <p>\u5e03\u5c14\u578b\u51fd\u6570\uff08Boolean function\uff09\u662f\u6307\u8f93\u5165\u8f93\u51fa\u6570\u503c\u5747\u4e3a\u5e03\u5c14\u578b\u6570\u503c\u7684\u51fd\u6570\u3002\u56e0\u4e3a\u8ba1\u7b97\u673a\u786c\u4ef6\u57fa\u4e8e\u4e8c\u8fdb\u5236\u6570\u636e\u7684\u8868\u793a\u548c\u5904\u7406\uff0c\u6240\u4ee5\u5e03\u5c14\u51fd\u6570\u5728\u786c\u4ef6\u4f53\u7cfb\u7ed3\u6784\u7684\u63cf\u8ff0\u3001\u6784\u5efa\u548c\u4f18\u5316\u8fc7\u7a0b\u4e2d\u626e\u6f14\u7740\u5341\u5206\u91cd\u8981\u7684\u89d2\u8272\u3002\u90a3\u4e48\u6b63\u786e\u5730\u8868\u8fbe\u548c\u5206\u6790\u5e03\u5c14\u51fd\u6570\u662f\u8fc8\u5411\u6784\u5efa\u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784\u7684\u7b2c\u4e00\u6b65\u3002</p> <p>\u4e24\u4e2a\u4e8c\u8fdb\u5236\u53d8\u91cfx\u548cy\u53ef\u4ee5\u6784\u6210\u7684\u5e03\u5c14\u51fd\u6570\u5171\u670916\u79cd\u3002\u8fd9\u662f\u56e0\u4e3a\u6bcf\u4e2a\u53d8\u91cf\u53ef\u4ee5\u53d60\u62161\uff0c\u6240\u4ee5\u4e24\u4e2a\u53d8\u91cf\u7ec4\u5408\u8d77\u6765\u53ef\u4ee5\u5f62\u62104\u79cd\u4e0d\u540c\u7684\u8f93\u5165(00, 01, 10, 11)\u3002\u5bf9\u4e8e\u6bcf\u79cd\u8f93\u5165\uff0c\u51fd\u6570\u7684\u8f93\u51fa\u53ef\u4ee5\u662f0\u62161\uff0c\u56e0\u6b64\u5bf9\u4e8e\u6bcf\u79cd\u8f93\u5165\u90fd\u6709\u4e24\u79cd\u53ef\u80fd\u7684\u8f93\u51fa\u3002\u5176\u4e2d\u6700\u57fa\u7840\u7684\u6709 AND\u3001OR\u3001NOT\u3001NAND\u3001NOR \u7b49\u51fd\u6570\u3002</p> <p>Nand \u51fd\u6570\u4ee5\u53ca Nor \u51fd\u6570\u5728\u7406\u8bba\u4e0a\u8fd8\u6709\u4e2a\u6709\u8da3\u7684\u7279\u5f81\uff1aAnd/Or/Not \u7b97\u5b50\u90fd\u53ef\u4ee5\u53ea\u7528Nand \u6216 Nor \u51fd\u6570\u6765\u5efa\u6784\uff0c\uff08\u6bd4\u5982\uff0cx Ory=\uff08x Nand x\uff09 Nand \uff08y Nand y\uff09\uff09\u3002</p> <p>\u65e2\u7136\u6bcf\u4e2a\u5e03\u5c14\u51fd\u6570\u90fd\u80fd\u591f\u901a\u8fc7\u89c4\u8303\u8868\u793a\u6cd5\u7531 And\u3001Or \u548c Not \u6784\u6210\uff0c\u90a3\u4e48\u6bcf\u4e2a\u5e03\u5c14\u51fd\u6570\u4e5f\u80fd\u4ec5\u4f7f\u7528 Nand\u51fd\u6570\u6765\u6784\u6210\uff0c\u5373\u6240\u6709\u7684 16 \u79cd\u5e03\u5c14\u51fd\u6570\u90fd\u53ef\u4ee5\u901a\u8fc7 Nand \u6784\u6210\u3002</p> <p>\u8fd9\u4e2a\u7ed3\u8bba\u6709\u6bd4\u8f83\u6df1\u8fdc\u7684\u5b9e\u9645\u610f\u4e49\uff1a\u4e00\u65e6\u5728\u7269\u7406\u4e0a\u5b9e\u73b0\u4e86 Nand \u529f\u80fd\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u5f88\u591a\u8fd9\u6837\u7684\u7269\u7406\u8bbe\u5907\uff0c\u901a\u8fc7\u7279\u5b9a\u7684\u8fde\u63a5\u65b9\u5f0f\u6765\u6784\u5efa\u4efb\u4f55\u5e03\u5c14\u51fd\u6570\u7684\u786c\u4ef6\u5b9e\u73b0\u3002</p> <p>\u8fd9\u4e5f\u662f\u300a\u4ece Nand \u5230\u4fc4\u7f57\u65af\u65b9\u5757\u300b\u4e66\u540d\u7684\u7531\u6765\uff0cNand \u5c31\u662f\u6700\u5e95\u5c42\u7684\u903b\u8f91\u95e8\u3002</p>"},{"location":"foundation/nand-to-tetris/bool-logic/#_4","title":"\u95e8\u903b\u8f91","text":"<p>\u95e8\uff08gate\uff09\u662f\u7528\u6765\u5b9e\u73b0\u5e03\u5c14\u51fd\u6570\u7684\u7269\u7406\u8bbe\u5907\uff0c\u5b83\u7684\u5185\u90e8\u7ed3\u6784\u5c31\u662f\u95e8\u7684\u903b\u8f91\u3002</p> <p>\u597d\u6bd4\u590d\u6742\u7684\u5e03\u5c14\u51fd\u6570\u80fd\u591f\u901a\u8fc7\u76f8\u5bf9\u7b80\u5355\u7684\u51fd\u6570\u6765\u8868\u8fbe\u4e00\u6837\uff0c\u590d\u6742\u7684\u95e8\u7535\u8def\u4e5f\u662f\u7531\u5f88\u591a\u57fa\u672c\u7684\u95e8\u7ec4\u6210\u7684\u3002\u6700\u7b80\u5355\u7684\u95e8\u662f\u7531\u5fae\u5c0f\u7684\u5f00\u5173\u8bbe\u5907\uff08\u79f0\u4e3a\u6676\u4f53\u7ba1\uff0ctransistors\uff09\u6784\u6210\uff0c\u8fd9\u4e9b\u5fae\u5c0f\u5f00\u5173\u8bbe\u5907\u6309\u7167\u8bbe\u8ba1\u7684\u62d3\u6251\u7ed3\u6784\u8fdb\u884c\u8fde\u63a5\uff0c\u6765\u5b9e\u73b0\u6574\u4e2a\u95e8\u7684\u529f\u80fd\u3002</p> <p>\u8ba1\u7b97\u673a\u5f00\u53d1\u8005\u4e0d\u9700\u8981\u5173\u5fc3\u95e8\u7535\u8def\u7269\u7406\u4e0a\u7684\u7ec6\u8282\u4e0e\u5185\u90e8\u7ed3\u6784\uff0c\u539f\u59cb\u7684\u95e8\u7535\u8def\uff08primitive gate\uff09\u80fd\u591f\u88ab\u770b\u6210\u9ed1\u7bb1\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u5e94\u7528\u8fd9\u4e9b\u9ed1\u7bb1\u5b50\u6765\u5b9e\u73b0\u903b\u8f91\u64cd\u4f5c\uff1b\u81f3\u4e8e\u9ed1\u7bb1\u5b50\u5185\u90e8\u7684\u5b9e\u73b0\uff0c\u6211\u4eec\u5e76\u4e0d\u5173\u5fc3\u3002\u786c\u4ef6\u8bbe\u8ba1\u4eba\u5458\u4ece\u8fd9\u4e9b\u57fa\u672c\u7684\u95e8\u5f00\u59cb\uff0c\u5c06\u5b83\u4eec\u8fdb\u884c\u8fde\u63a5\uff0c\u6765\u5b9e\u73b0\u529f\u80fd\u66f4\u590d\u6742\u7684\u590d\u5408\uff08composite\uff09\u95e8\u7535\u8def\u3002</p>"},{"location":"foundation/nand-to-tetris/bool-logic/#hdl","title":"\u786c\u4ef6\u63cf\u8ff0\u8bed\u8a00\uff08HDL\uff09","text":"<p>\u4eca\u5929\uff0c\u786c\u4ef6\u8bbe\u8ba1\u8005\u518d\u4e5f\u4e0d\u4f1a\u7528\u4ed6\u4eec\u7684\u90a3\u53cc\u624b\u6765\u5236\u9020\u786c\u4ef6\u4e86\u3002\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\uff0c\u4ed6\u4eec\u5728\u8ba1\u7b97\u673a\u5de5\u4f5c\u7ad9\u4e0a\u8bbe\u8ba1\u548c\u4f18\u5316\u82af\u7247\u7ed3\u6784\uff0c\u4f7f\u7528\u7ed3\u6784\u5316\u7684\u5efa\u6a21\u5f62\u5f0f\u6bd4\u5982\u786c\u4ef6\u63cf\u8ff0\u8bed\u8a00\uff08Hardroare Description Language\uff09\uff0c\u6216HDL\u3002</p> <p>\u8bbe\u8ba1\u8005\u901a\u8fc7\u7f16\u5199 HDL \u7a0b\u5e8f\u6765\u63cf\u8ff0\u82af\u7247\u7684\u7ed3\u6784\uff0c\u8be5\u7a0b\u5e8f\u5c06\u63a5\u53d7\u4e25\u683c\u7684\u6d4b\u8bd5\u3002\u8be5\u6d4b\u8bd5\u662f\u865a\u62df\u7684\uff0c\u4f7f\u7528\u8ba1\u7b97\u673a\u8fdb\u884c\u4eff\u771f\u7684\u865a\u62df\u6d4b\u8bd5\uff1a\u6709\u4e2a\u7279\u6b8a\u7684\u8f6f\u4ef6\u5de5\u5177\u79f0\u4e3a\u786c\u4ef6\u4eff\u771f\u5668\uff08hardware simulator\uff09\uff0c\u5b83\u63a5\u53d7\u8f93\u5165\u7684HDL \u7a0b\u5e8f\uff0c\u5728\u8ba1\u7b97\u673a\u5185\u5b58\u4e2d\u6784\u5efa\u8be5\u865a\u62df\u82af\u7247\u7684\u5185\u5b58\u6620\u50cf\u3002\u7136\u540e\uff0c\u8bbe\u8ba1\u8005\u5c31\u53ef\u4ee5\u8ba9\u4eff\u771f\u5668\u6765\u6d4b\u8bd5\u82af\u7247\uff0c\u901a\u8fc7\u8f93\u5165\u53d8\u91cf\u7684\u4e0d\u540c\u7ec4\u5408\u4ea7\u751f\u4eff\u771f\u7684\u82af\u7247\u7684\u8f93\u51fa\u3002\u5c06 \u8fd9\u4e9b\u4eff\u771f\u7684\u8f93\u51fa\u7ed3\u679c\u4e0e\u9884\u671f\u7684\u503c\u8fdb\u884c\u6bd4\u8f83\uff0c\u6765\u9a8c\u8bc1\u6211\u4eec\u7684\u8bbe\u8ba1\u662f\u5426\u6b63\u786e\uff0c\u662f\u5426\u6ee1\u8db3\u5ba2\u6237\u7684\u8981\u6c42\u3002</p>"},{"location":"foundation/nand-to-tetris/bool-logic/#_5","title":"\u89c4\u8303\u8be6\u8ff0","text":"<p>\u8fd9\u4e00\u7ae0\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u5178\u578b\u7684\u95e8\u7535\u8def</p> <ul> <li>Nand \u95e8</li> <li>\u57fa\u672c\u903b\u8f91\u95e8\uff1aNot,Aand,Or,Xor,Multiplexor,Demultiplexor</li> <li>\u591a\u4f4d\u57fa\u672c\u95e8\uff1a\u591a\u4f4d Not,\u591a\u4f4d And,\u591a\u4f4d Or,\u591a\u4f4d Multiplexor</li> <li>\u591a\u901a\u9053\u903b\u8f91\u95e8\uff1a\u591a\u901a\u9053 Or,\u591a\u901a\u9053 Multiplexor,\u591a\u901a\u9053 Demultiplexor</li> </ul>"},{"location":"foundation/nand-to-tetris/bool-logic/#_6","title":"\u9879\u76ee","text":""},{"location":"foundation/nand-to-tetris/bool-logic/#not","title":"Not","text":"<pre><code>CHIP Not {\n  IN in;\n  OUT out;\n  PARTS:\n  Nand(a = in, b = in, out = out);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#and","title":"And","text":"<pre><code>CHIP And {\n    IN a, b;\n    OUT out;\n\n    PARTS:\n    Nand(a = a, b = b, out = o1);\n    Nand(a = a, b = b, out = o2);\n    Nand(a = o1, b = o2, out = out);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#or","title":"Or","text":"<pre><code>CHIP Or {\n    IN a, b;\n    OUT out;\n\n    PARTS:\n    Not(in = a, out = o1);\n    Not(in = b, out = o2);\n    Nand(a = o1, b = o2, out = out);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#xor","title":"Xor","text":"<pre><code>CHIP Xor {\n    IN a, b;\n    OUT out;\n\n    PARTS:\n    Not(in = b, out = n0);\n    And(a = a, b = n0, out = a0);\n    Not(in = a, out = n1);\n    And(a = n1, b = b, out = a1);\n    Or(a = a0, b = a1, out = out);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#mux","title":"Mux","text":"<pre><code>/** \n * Multiplexor:\n * if (sel = 0) out = a, else out = b\n */\n\nCHIP Mux {\n    IN a, b, sel;\n    OUT out;\n\n    PARTS:\n    And(a = b, b = sel, out = o1);\n\n    Not(in = sel, out = notSel);\n    And(a = a, b = notSel, out = o2);\n\n    Or(a = o1, b = o2, out = out);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#dmux","title":"DMux","text":"<pre><code>CHIP DMux {\n    IN in, sel;\n    OUT a, b;\n\n    PARTS:\n    Not(in = sel, out = n1);\n    And(a = in, b = n1, out = a);\n    And(a = in, b = sel, out = b);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#not16","title":"Not16","text":"<pre><code>CHIP Not16 {\n    IN in[16];\n    OUT out[16];\n\n    PARTS:\n    Not(in = in[0], out = out[0]);\n    Not(in = in[1], out = out[1]);\n    Not(in = in[2], out = out[2]);\n    Not(in = in[3], out = out[3]);\n    Not(in = in[4], out = out[4]);\n    Not(in = in[5], out = out[5]);\n    Not(in = in[6], out = out[6]);\n    Not(in = in[7], out = out[7]);\n    Not(in = in[8], out = out[8]);\n    Not(in = in[9], out = out[9]);\n    Not(in = in[10], out = out[10]);\n    Not(in = in[11], out = out[11]);\n    Not(in = in[12], out = out[12]);\n    Not(in = in[13], out = out[13]);\n    Not(in = in[14], out = out[14]);\n    Not(in = in[15], out = out[15]);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#and16","title":"And16","text":"<pre><code>CHIP And16 {\n    IN a[16], b[16];\n    OUT out[16];\n\n    PARTS:\n    And(a = a[0], b = b[0], out = out[0]);\n    And(a = a[1], b = b[1], out = out[1]);\n    And(a = a[2], b = b[2], out = out[2]);\n    And(a = a[3], b = b[3], out = out[3]);\n    And(a = a[4], b = b[4], out = out[4]);\n    And(a = a[5], b = b[5], out = out[5]);\n    And(a = a[6], b = b[6], out = out[6]);\n    And(a = a[7], b = b[7], out = out[7]);\n    And(a = a[8], b = b[8], out = out[8]);\n    And(a = a[9], b = b[9], out = out[9]);\n    And(a = a[10], b = b[10], out = out[10]);\n    And(a = a[11], b = b[11], out = out[11]);\n    And(a = a[12], b = b[12], out = out[12]);\n    And(a = a[13], b = b[13], out = out[13]);\n    And(a = a[14], b = b[14], out = out[14]);\n    And(a = a[15], b = b[15], out = out[15]);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#or16","title":"Or16","text":"<pre><code>CHIP Or16 {\n    IN a[16], b[16];\n    OUT out[16];\n\n    PARTS:\n    Or(a = a[0], b = b[0], out = out[0]);\n    Or(a = a[1], b = b[1], out = out[1]);\n    Or(a = a[2], b = b[2], out = out[2]);\n    Or(a = a[3], b = b[3], out = out[3]);\n    Or(a = a[4], b = b[4], out = out[4]);\n    Or(a = a[5], b = b[5], out = out[5]);\n    Or(a = a[6], b = b[6], out = out[6]);\n    Or(a = a[7], b = b[7], out = out[7]);\n    Or(a = a[8], b = b[8], out = out[8]);\n    Or(a = a[9], b = b[9], out = out[9]);\n    Or(a = a[10], b = b[10], out = out[10]);\n    Or(a = a[11], b = b[11], out = out[11]);\n    Or(a = a[12], b = b[12], out = out[12]);\n    Or(a = a[13], b = b[13], out = out[13]);\n    Or(a = a[14], b = b[14], out = out[14]);\n    Or(a = a[15], b = b[15], out = out[15]);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#mux16","title":"Mux16","text":"<pre><code>CHIP Mux16 {\n    IN a[16], b[16], sel;\n    OUT out[16];\n\n    PARTS:\n    Mux(a = a[0], b = b[0], sel = sel, out = out[0]);\n    Mux(a = a[1], b = b[1], sel = sel, out = out[1]);\n    Mux(a = a[2], b = b[2], sel = sel, out = out[2]);\n    Mux(a = a[3], b = b[3], sel = sel, out = out[3]);\n    Mux(a = a[4], b = b[4], sel = sel, out = out[4]);\n    Mux(a = a[5], b = b[5], sel = sel, out = out[5]);\n    Mux(a = a[6], b = b[6], sel = sel, out = out[6]);\n    Mux(a = a[7], b = b[7], sel = sel, out = out[7]);\n    Mux(a = a[8], b = b[8], sel = sel, out = out[8]);\n    Mux(a = a[9], b = b[9], sel = sel, out = out[9]);\n    Mux(a = a[10], b = b[10], sel = sel, out = out[10]);\n    Mux(a = a[11], b = b[11], sel = sel, out = out[11]);\n    Mux(a = a[12], b = b[12], sel = sel, out = out[12]);\n    Mux(a = a[13], b = b[13], sel = sel, out = out[13]);\n    Mux(a = a[14], b = b[14], sel = sel, out = out[14]);\n    Mux(a = a[15], b = b[15], sel = sel, out = out[15]);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#or8way","title":"Or8Way","text":"<pre><code>CHIP Or8Way {\n    IN in[8];\n    OUT out;\n\n    PARTS:\n    Or(a = in[0], b = in[1], out = o1);\n    Or(a = o1, b = in[2], out = o2);\n    Or(a = o2, b = in[3], out = o3);\n    Or(a = o3, b = in[4], out = o4);\n    Or(a = o4, b = in[5], out = o5);\n    Or(a = o5, b = in[6], out = o6);\n    Or(a = o6, b = in[7], out = out);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#mux4way16","title":"Mux4Way16","text":"<pre><code>CHIP Mux4Way16 {\n    IN a[16], b[16], c[16], d[16], sel[2];\n    OUT out[16];\n\n    PARTS:\n    Mux16(a = a, b = b, sel = sel[0], out = o1);\n    Mux16(a = c, b = d, sel = sel[0], out = o2);\n\n    Mux16(a = o1, b = o2, sel = sel[1], out = out);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#mux8way16","title":"Mux8Way16","text":"<pre><code>CHIP Mux8Way16 {\n    IN a[16], b[16], c[16], d[16],\n       e[16], f[16], g[16], h[16],\n       sel[3];\n    OUT out[16];\n\n    PARTS:\n    Mux4Way16(a = a, b = b, c = c, d = d, sel = sel[0..1], out = o1);\n    Mux4Way16(a = e, b = f, c = g, d = h, sel = sel[0..1], out = o2);\n\n    Mux16(a = o1, b = o2, sel = sel[2], out = out);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#dmux4way","title":"DMux4Way","text":"<pre><code>CHIP DMux4Way {\n    IN in, sel[2];\n    OUT a, b, c, d;\n\n    PARTS:\n    DMux(in = in, sel = sel[1], a = o1, b = o2);\n\n    DMux(in = o1, sel = sel[0], a = a, b = b);\n    DMux(in = o2, sel = sel[0], a = c, b = d);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/bool-logic/#dmux8way","title":"DMux8Way","text":"<pre><code>CHIP DMux8Way {\n    IN in, sel[3];\n    OUT a, b, c, d, e, f, g, h;\n\n    PARTS:\n    DMux4Way(in = in, sel = sel[1..2], a = o1, b = o2, c = o3, d = o4);\n    DMux(in = o1, sel = sel[0], a = a, b = b);\n    DMux(in = o2, sel = sel[0], a = c, b = d);\n    DMux(in = o3, sel = sel[0], a = e, b = f);\n    DMux(in = o4, sel = sel[0], a = g, b = h);\n}\n</code></pre>"},{"location":"foundation/nand-to-tetris/introduction/","title":"\u524d\u8a00","text":"<p>\u672c\u7cfb\u5217\u662f\u300a\u8ba1\u7b97\u673a\u7cfb\u7edf\u8981\u7d20\u300b\u7684\u8bfb\u4e66\u7b14\u8bb0\uff0c\u4e5f\u662f Nand2Tetris \u8bfe\u7a0b\u7684\u914d\u7f6e\u6559\u6750\u3002</p> <p>Nand2Tetris \u5373\u4ece\u4e0e\u975e\u95e8\u5230\u4fc4\u7f57\u65af\u65b9\u5757\uff0c\u672c\u4e66\u5c06\u544a\u8bc9\u4f60\uff0c\u5982\u4f55\u4ece\u4e0e\u975e\u95e8\u5f00\u59cb\u4e00\u6b65\u4e00\u6b65\u6784\u5efa\u8ba1\u7b97\u673a\uff0c\u5982\u4f55\u5b9e\u73b0\u4e00\u95e8\u8bed\u8a00\u548c\u76f8\u5e94\u7684\u8bed\u8a00\u6807\u51c6\u5e93\uff0c\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684\u7f16\u8bd1\u5668\uff0c\u5982\u4f55\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u8fd9\u6837\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u5f00\u53d1\u5e94\u7528\u8f6f\u4ef6\uff0c\u6bd4\u5982\u4fc4\u7f57\u65af\u65b9\u5757\u3002</p> <p></p>"},{"location":"foundation/nand-to-tetris/introduction/#_2","title":"\u914d\u5957\u8d44\u6599","text":"<ul> <li>\u4ece\u7b2c\u4e00\u539f\u7406\u6784\u5efa\u73b0\u4ee3\u8ba1\u7b97\u673a\uff1a\u4ece Nand \u5230\u4fc4\u7f57\u65af\u65b9\u5757</li> <li>\u8bfe\u7a0b\u5b98\u7f51</li> <li>\u5728\u7ebf IDE</li> <li>https://github.com/woai3c/nand2tetris</li> <li>https://reionchan.github.io/2015/08/27/the-elements-of-computing-systems/</li> </ul>"},{"location":"foundation/pointers-on-c/advanced-pointer/","title":"\u9ad8\u7ea7\u6307\u9488\u8bdd\u9898","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p>"},{"location":"foundation/pointers-on-c/advanced-pointer/#_2","title":"\u51fd\u6570\u6307\u9488","text":"<p>\u4f60\u4e0d\u4f1a\u6bcf\u5929\u90fd\u4f7f\u7528\u51fd\u6570\u6307\u9488\u3002\u4f46\u662f\uff0c\u5b83\u4eec\u786e\u6709\u7528\u6b66\u4e4b\u5730\uff0c\u6700\u5e38\u89c1\u7684\u4e24\u4e2a\u7528\u9014\u662f\u8f6c\u6362\u8868(jump table)\u548c\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u53e6\u4e00\u4e2a\u51fd\u6570\u3002</p> <pre><code>int\u3000\u3000f( int );\nint\u3000\u3000(*pf)( int ) = &amp;f;\n</code></pre> <p>\u521d\u59cb\u5316\u8868\u8fbe\u5f0f\u4e2d\u7684&amp;\u64cd\u4f5c\u7b26\u662f\u53ef\u9009\u7684\uff0c\u56e0\u4e3a\u51fd\u6570\u540d \u88ab\u4f7f\u7528\u65f6\u603b\u662f\u7531\u7f16\u8bd1\u5668\u628a\u5b83\u8f6c\u6362\u4e3a\u51fd\u6570\u6307\u9488 \u3002&amp;\u64cd\u4f5c\u7b26\u53ea\u662f\u663e\u5f0f\u5730\u8bf4\u660e\u4e86\u7f16\u8bd1\u5668\u5c06\u9690\u5f0f\u6267\u884c\u7684\u4efb\u52a1\u3002</p>"},{"location":"foundation/pointers-on-c/advanced-pointer/#_3","title":"\u547d\u4ee4\u884c\u53c2\u6570","text":"<p>\u5904\u7406\u547d\u4ee4\u884c\u53c2\u6570\u662f\u6307\u5411\u6307\u9488\u7684\u6307\u9488\u7684\u53e6\u4e00\u4e2a\u7528\u6b66\u4e4b\u5730\u3002\u6709\u4e9b\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5305\u62ecUNIX\u548cMS-DOS\uff0c\u8ba9\u7528\u6237\u5728\u547d\u4ee4\u884c\u4e2d\u7f16\u5199\u53c2\u6570\u6765\u542f\u52a8\u4e00\u4e2a\u7a0b\u5e8f\u7684\u6267\u884c\u3002\u8fd9\u4e9b\u53c2\u6570\u88ab\u4f20\u9012\u7ed9\u7a0b\u5e8f\uff0c\u7a0b\u5e8f\u6309\u7167\u5b83\u8ba4\u4e3a\u5408\u9002\u7684\u4efb\u4f55\u65b9\u5f0f\u5bf9\u5b83\u4eec\u8fdb\u884c\u5904\u7406\u3002</p>"},{"location":"foundation/pointers-on-c/advanced-pointer/#_4","title":"\u603b\u7ed3","text":"<p>\u5982\u679c\u58f0\u660e\u5f97\u5f53\uff0c\u4e00\u4e2a\u6307\u9488\u53d8\u91cf\u53ef\u4ee5\u6307\u5411\u53e6\u4e00\u4e2a\u6307\u9488\u53d8\u91cf\u3002\u548c\u5176\u4ed6\u7684\u6307\u9488\u53d8\u91cf\u4e00\u6837\uff0c\u4e00\u4e2a\u6307\u5411\u6307\u9488\u7684\u6307\u9488\u5728\u5b83\u4f7f\u7528\u4e4b\u524d\u5fc5\u987b\u8fdb\u884c\u521d\u59cb\u5316\u3002\u4e3a\u4e86\u53d6\u5f97\u76ee\u6807\u5bf9\u8c61\uff0c\u5fc5\u987b\u5bf9\u6307\u9488\u7684\u6307\u9488\u6267\u884c\u53cc\u91cd\u7684\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u3002\u66f4\u591a\u5c42\u7684\u95f4\u63a5\u8bbf\u95ee\u4e5f\u662f\u5141\u8bb8\u7684\uff08\u6bd4\u5982\u4e00\u4e2a\u6307\u5411\u6574\u578b\u7684\u6307\u9488\u7684\u6307\u9488\u7684\u6307\u9488\uff09\uff0c\u4f46\u5b83\u4eec\u4e0e\u7b80\u5355\u7684\u6307\u9488\u76f8\u6bd4\u7528\u7684\u8f83\u5c11\u3002\u4f60\u4e5f\u53ef\u4ee5\u521b\u5efa\u6307\u5411\u51fd\u6570\u548c\u6570\u7ec4\u7684\u6307\u9488\uff0c\u8fd8\u53ef\u4ee5\u521b\u5efa\u5305\u542b\u8fd9\u7c7b\u6307\u9488\u7684\u6570\u7ec4\u3002</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570\u6307\u9488\u6765\u5b9e\u73b0\u56de\u8c03\u51fd\u6570\u3002\u4e00\u4e2a\u6307\u5411\u56de\u8c03\u51fd\u6570\u7684\u6307\u9488\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u53e6\u4e00\u4e2a\u51fd\u6570\uff0c\u540e\u8005\u4f7f\u7528\u8fd9\u4e2a\u6307\u9488\u8c03\u7528\u56de\u8c03\u51fd\u6570\u3002\u4f7f\u7528\u8fd9\u79cd\u6280\u5de7\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u901a\u7528\u578b\u51fd\u6570\uff0c\u7528\u4e8e\u6267\u884c\u666e\u901a\u7684\u64cd\u4f5c\u5982\u5728\u4e00\u4e2a\u94fe\u8868\u4e2d\u67e5\u627e\u3002\u4efb\u4f55\u7279\u5b9a\u95ee\u9898\u7684\u67d0\u4e2a\u5b9e\u4f8b\u7684\u5de5\u4f5c\uff0c\u5982\u5728\u94fe\u8868\u4e2d\u8fdb\u884c\u503c\u7684\u6bd4\u8f83\uff0c\u7531\u5ba2\u6237\u63d0\u4f9b\u7684\u56de\u8c03\u51fd\u6570\u6267\u884c\u3002</p> <p>\u8f6c\u79fb\u8868\u4e5f\u4f7f\u7528\u51fd\u6570\u6307\u9488\u3002\u8f6c\u79fb\u8868\u50cfswitch\u8bed\u53e5\u4e00\u6837\u6267\u884c\u9009\u62e9\u3002\u8f6c\u79fb\u8868\u7531\u4e00\u4e2a\u51fd\u6570\u6307\u9488\u6570\u7ec4\u7ec4\u6210\uff08\u8fd9\u4e9b\u51fd\u6570\u5fc5\u987b\u5177\u6709\u76f8\u540c\u7684\u539f\u578b\uff09\u3002\u51fd\u6570\u901a\u8fc7\u4e0b\u6807\u9009\u62e9\u67d0\u4e2a\u6307\u9488\uff0c\u518d\u901a\u8fc7\u6307\u9488\u8c03\u7528\u5bf9\u5e94\u7684\u51fd\u6570\u3002\u4f60\u5fc5\u987b\u59cb\u7ec8\u4fdd\u8bc1\u4e0b\u6807\u503c\u5904\u4e8e\u9002\u5f53\u7684\u8303\u56f4\u4e4b\u5185\uff0c\u56e0\u4e3a\u5728\u8f6c\u79fb\u8868\u4e2d\u8c03\u8bd5\u9519\u8bef\u662f\u975e\u5e38\u56f0\u96be\u7684\u3002</p> <p>\u5982\u679c\u67d0\u4e2a\u6267\u884c\u73af\u5883\u5b9e\u73b0\u4e86\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u8fd9\u4e9b\u53c2\u6570\u662f\u901a\u8fc7\u4e24\u4e2a\u5f62\u53c2\u4f20\u9012\u7ed9main\u51fd\u6570\u7684\u3002\u8fd9\u4e24\u4e2a\u5f62\u53c2\u901a\u5e38\u79f0\u4e3aargc\u548cargv\u3002argc\u662f\u4e00\u4e2a\u6574\u6570\uff0c\u7528\u4e8e\u8868\u793a\u53c2\u6570\u7684\u6570\u91cf\u3002argv\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u5b83\u6307\u5411\u4e00\u4e2a\u5e8f\u5217\u7684\u5b57\u7b26\u578b\u6307\u9488\u3002\u8be5\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u6307\u9488\u6307\u5411\u4e00\u4e2a\u547d\u4ee4\u884c\u53c2\u6570\u3002\u8be5\u5e8f\u5217\u4ee5\u4e00\u4e2aNULL\u6307\u9488\u4f5c\u4e3a\u7ed3\u675f\u6807\u5fd7\u3002\u5176\u4e2d\u7b2c1\u4e2a\u53c2\u6570\u5c31\u662f\u7a0b\u5e8f\u7684\u540d\u5b57\u3002\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u5bf9argv\u4f7f\u7528\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u6765\u8bbf\u95ee\u547d\u4ee4\u884c\u53c2\u6570\u3002</p> <p>\u51fa\u73b0\u5728\u8868\u8fbe\u5f0f\u4e2d\u7684\u5b57\u7b26\u4e32\u5e38\u91cf\u7684\u503c\u662f\u4e00\u4e2a\u5e38\u91cf\u6307\u9488\uff0c\u5b83\u6307\u5411\u5b57\u7b26\u4e32\u7684\u7b2c1\u4e2a\u5b57\u7b26\u3002\u548c\u6570\u7ec4\u540d\u4e00\u6837\uff0c\u4f60\u65e2\u53ef\u4ee5\u7528\u6307\u9488\u8868\u8fbe\u5f0f\u4e5f\u53ef\u4ee5\u7528\u4e0b\u6807\u6765\u4f7f\u7528\u5b57\u7b26\u4e32\u5e38\u91cf\u3002</p>"},{"location":"foundation/pointers-on-c/advanced-pointer/#_5","title":"\u7f16\u7a0b\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/advanced-pointer/#1","title":"\u7ec3\u4e60 1","text":"<p>\u7f16\u5199\u4e00\u4e2a\u901a\u7528\u76ee\u7684\u7684\u51fd\u6570\uff0c\u904d\u5386\u4e00\u4e2a\u5355\u94fe\u8868\u3002\u5b83\u5e94\u8be5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a\u4e00\u4e2a\u6307\u5411\u94fe\u8868\u7b2c1\u4e2a\u8282\u70b9\u7684\u6307\u9488\u548c\u4e00\u4e2a\u6307\u5411\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u7684\u6307\u9488\u3002\u56de\u8c03\u51fd\u6570\u5e94\u8be5\u63a5\u53d7\u5355\u4e2a\u53c2\u6570\uff0c\u4e5f\u5c31\u662f\u6307\u5411\u4e00\u4e2a\u94fe\u8868\u8282\u70b9\u7684\u6307\u9488\u3002\u5bf9\u4e8e\u94fe\u8868\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\uff0c\u90fd\u5e94\u8be5\u8c03\u7528\u4e00\u6b21\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\u3002\u8fd9\u4e2a\u51fd\u6570\u9700\u8981\u77e5\u9053\u94fe\u8868\u8282\u70b9\u7684\u4ec0\u4e48\u4fe1\u606f\uff1f</p> <pre><code>typedef void (*callback_fn)(NODE *);\n\nvoid traverse_list(NODE *head, callback_fn callback) {\n    NODE *current = head;  // \u4ece\u94fe\u8868\u5934\u5f00\u59cb\u904d\u5386\n\n    while (current != NULL) {\n        callback(current);  // \u5bf9\u5f53\u524d\u8282\u70b9\u8c03\u7528\u56de\u8c03\u51fd\u6570\n        current = current-&gt;next;  // \u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\n    }\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/advanced-pointer/#2","title":"\u7ec3\u4e60 2","text":"<p>\u8f6c\u6362\u4e0b\u9762\u7684\u4ee3\u7801\u6bb5\uff0c\u4f7f\u5b83\u6539\u7528\u8f6c\u79fb\u8868\u800c\u4e0d\u662fswitch\u8bed\u53e5</p> <pre><code>void add_new_trans(Node *list, Transaction *transaction);\nvoid delete_trans(Node *list, Transaction *transaction);\nvoid forward_trans(Node *list, Transaction *transaction);\nvoid backward_trans(Node *list, Transaction *transaction);\nvoid search_trans(Node *list, Transaction *transaction);\nvoid edit_trans(Node *list, Transaction *transaction);\n\nvoid (*trans_table[])(Node *, Transaction *) = {\n    add_new_trans,\n    delete_trans,\n    forward_trans,\n    backward_trans,\n    search_trans,\n    edit_trans\n};\n\n// \u5047\u8bbetransaction-&gt;type\u662fTrans_type\u679a\u4e3e\u4e2d\u7684\u4e00\u4e2a\u6709\u6548\u503c\ntrans_table[transaction-&gt;type](list, transaction);\n</code></pre>"},{"location":"foundation/pointers-on-c/advanced-pointer/#3","title":"\u7ec3\u4e60 3","text":"<p>\u7f16\u5199\u4e00\u4e2a\u540d\u53ebsort\u7684\u51fd\u6570\uff0c\u5b83\u7528\u4e8e\u5bf9\u4e00\u4e2a\u4efb\u4f55\u7c7b\u578b\u7684\u6570\u7ec4\u8fdb\u884c\u6392\u5e8f\u3002\u4e3a\u4e86\u4f7f\u51fd\u6570\u66f4\u4e3a\u901a\u7528\uff0c\u5b83\u7684\u5176\u4e2d\u4e00\u4e2a\u53c2\u6570\u5fc5\u987b\u662f\u4e00\u4e2a\u6307\u5411\u6bd4\u8f83\u56de\u8c03\u51fd\u6570\u7684\u6307\u9488\uff0c\u8be5\u56de\u8c03\u51fd\u6570\u7531\u8c03\u7528\u7a0b\u5e8f\u63d0\u4f9b\u3002\u6bd4\u8f83\u51fd\u6570\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u4e5f\u5c31\u662f\u4e24\u4e2a\u6307\u5411\u9700\u8981\u8fdb\u884c\u6bd4\u8f83\u7684\u503c\u7684\u6307\u9488\u3002\u5982\u679c\u4e24\u4e2a\u503c\u76f8\u7b49\uff0c\u51fd\u6570\u8fd4\u56de\u96f6\uff1b\u5982\u679c\u7b2c1\u4e2a\u503c\u5c0f\u4e8e\u7b2c2\u4e2a\uff0c\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5c0f\u4e8e\u96f6\u7684\u6574\u6570\uff1b\u5982\u679c\u7b2c1\u4e2a\u503c\u5927\u4e8e\u7b2c2\u4e2a\uff0c\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5927\u4e8e\u96f6\u7684\u6574\u6570\u3002</p> <pre><code>// \u6bd4\u8f83\u56de\u8c03\u51fd\u6570\u7684\u7c7b\u578b\u5b9a\u4e49\ntypedef int (*compare_fn)(const void *, const void *);\n\n#include &lt;stdlib.h&gt;\n\n// \u901a\u7528\u7684\u6392\u5e8f\u51fd\u6570\nvoid sort(void *array, size_t nitems, size_t size, compare_fn cmp) {\n    // \u7528\u4e00\u4e2a\u4e34\u65f6\u53d8\u91cf\u6765\u4fdd\u5b58\u5143\u7d20\uff0c\u4ee5\u8fdb\u884c\u4ea4\u6362\n    void *temp = malloc(size);\n    if (temp == NULL) {\n        // \u5904\u7406\u5185\u5b58\u5206\u914d\u5931\u8d25\u7684\u60c5\u51b5\n        return;\n    }\n\n    for (size_t i = 0; i &lt; nitems - 1; ++i) {\n        for (size_t j = 0; j &lt; nitems - i - 1; ++j) {\n            // \u8ba1\u7b97\u6570\u7ec4\u4e2d\u5f53\u524d\u5143\u7d20\u548c\u4e0b\u4e00\u4e2a\u5143\u7d20\u7684\u6307\u9488\n            void *current = (char*)array + j * size;\n            void *next = (char*)array + (j + 1) * size;\n\n            // \u4f7f\u7528\u63d0\u4f9b\u7684\u6bd4\u8f83\u51fd\u6570\u8fdb\u884c\u6bd4\u8f83\n            if (cmp(current, next) &gt; 0) {\n                // \u5982\u679ccurrent &gt; next\uff0c\u5219\u4ea4\u6362\u5b83\u4eec\n                memcpy(temp, current, size);\n                memcpy(current, next, size);\n                memcpy(next, temp, size);\n            }\n        }\n    }\n\n    free(temp); // \u91ca\u653e\u7528\u4e8e\u4ea4\u6362\u7684\u4e34\u65f6\u5185\u5b58\n}\n\n#include &lt;stdio.h&gt;\n\n// \u6574\u6570\u6bd4\u8f83\u51fd\u6570\nint compare_ints(const void *a, const void *b) {\n    return (*(int*)a - *(int*)b);\n}\n\nint main() {\n    int arr[] = {5, 3, 2, 4, 1};\n    size_t n = sizeof(arr) / sizeof(arr[0]);\n\n    sort(arr, n, sizeof(arr[0]), compare_ints);\n\n    // \u6253\u5370\u6392\u5e8f\u540e\u7684\u6570\u7ec4\n    for (size_t i = 0; i &lt; n; i++) {\n        printf(\"%d \", arr[i]);\n    }\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/array/","title":"\u6570\u7ec4","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p>"},{"location":"foundation/pointers-on-c/array/#_2","title":"\u4e00\u7ef4\u6570\u7ec4","text":""},{"location":"foundation/pointers-on-c/array/#_3","title":"\u6570\u7ec4\u540d","text":"<pre><code>int\u3000a;\nint\u3000b[10];\n</code></pre> <p>\u6211\u4eec\u628a\u53d8\u91cfa\u79f0\u4e3a\u6807\u91cf\uff0c\u56e0\u4e3a\u5b83\u662f\u4e2a\u5355\u4e00\u7684\u503c\uff0c\u8fd9\u4e2a\u53d8\u91cf\u7684\u7c7b\u578b\u662f\u4e00\u4e2a\u6574\u6570\u3002\u6211\u4eec\u628a\u53d8\u91cfb\u79f0\u4e3a\u6570\u7ec4\uff0c\u56e0\u4e3a\u5b83\u662f\u4e00\u4e9b\u503c\u7684\u96c6\u5408\u3002\u4e0b\u6807\u548c\u6570\u7ec4\u540d\u4e00\u8d77\u4f7f\u7528\uff0c\u7528\u4e8e\u6807\u8bc6\u8be5\u96c6\u5408\u4e2d\u67d0\u4e2a\u7279\u5b9a\u7684\u503c\u3002\u4f8b\u5982\uff0cb[0]\u8868\u793a\u6570\u7ec4b\u7684\u7b2c1\u4e2a\u503c\uff0cb[4]\u8868\u793a\u7b2c5\u4e2a\u503c\u3002\u6bcf\u4e2a\u7279\u5b9a\u503c\u90fd\u662f\u4e00\u4e2a\u6807\u91cf\uff0c\u53ef\u4ee5\u7528\u4e8e\u4efb\u4f55\u53ef\u4ee5\u4f7f\u7528\u6807\u91cf\u6570\u636e\u7684\u4e0a\u4e0b\u6587\u73af\u5883\u4e2d\u3002</p> <p>b[4]\u7684\u7c7b\u578b\u662f\u6574\u578b\uff0c\u4f46b\u7684\u7c7b\u578b\u53c8\u662f\u4ec0\u4e48\uff1f\u5b83\u6240\u8868\u793a\u7684\u53c8\u662f\u4ec0\u4e48\uff1f\u4e00\u4e2a\u5408\u4e4e\u903b\u8f91\u7684\u7b54\u6848\u662f\u5b83\u8868\u793a\u6574\u4e2a\u6570\u7ec4\uff0c\u4f46\u4e8b\u5b9e\u5e76\u975e\u5982\u6b64\u3002\u5728C\u4e2d\uff0c\u5728\u51e0\u4e4e\u6240\u6709\u4f7f\u7528\u6570\u7ec4\u540d\u7684\u8868\u8fbe\u5f0f\u4e2d\uff0c\u6570\u7ec4\u540d\u7684\u503c\u662f\u4e00\u4e2a\u6307\u9488\u5e38\u91cf\uff0c\u4e5f\u5c31\u662f\u6570\u7ec4\u7b2c1\u4e2a\u5143\u7d20\u7684\u5730\u5740\u3002\u5b83\u7684\u7c7b\u578b\u53d6\u51b3\u4e8e\u6570\u7ec4\u5143\u7d20\u7684\u7c7b\u578b\uff1a\u5982\u679c\u5b83\u4eec\u662fint\u7c7b\u578b\uff0c\u90a3\u4e48\u6570\u7ec4\u540d\u7684\u7c7b\u578b\u5c31\u662f\u201c\u6307\u5411int\u7684\u5e38\u91cf\u6307\u9488\u201d\uff1b\u5982\u679c\u5b83\u4eec\u662f\u5176\u4ed6\u7c7b\u578b \uff0c\u90a3\u4e48\u6570\u7ec4\u540d\u7684\u7c7b\u578b\u5c31\u662f\u201c\u6307\u5411\u5176\u4ed6\u7c7b\u578b \u7684\u5e38\u91cf\u6307\u9488\u201d\u3002</p> <p>\u8bf7\u4e0d\u8981\u6839\u636e\u8fd9\u4e2a\u4e8b\u5b9e\u5f97\u51fa\u6570\u7ec4\u548c\u6307\u9488\u662f\u76f8\u540c\u7684\u7ed3\u8bba\u3002\u6570\u7ec4\u5177\u6709\u4e00\u4e9b\u548c\u6307\u9488\u5b8c\u5168\u4e0d\u540c\u7684\u7279\u5f81\u3002\u4f8b\u5982\uff0c\u6570\u7ec4\u5177\u6709\u786e\u5b9a\u6570\u91cf\u7684\u5143\u7d20\uff0c\u800c\u6307\u9488\u53ea\u662f\u4e00\u4e2a\u6807\u91cf\u503c\u3002\u7f16\u8bd1\u5668\u7528\u6570\u7ec4\u540d\u6765\u8bb0\u4f4f\u8fd9\u4e9b\u5c5e\u6027\u3002\u53ea\u6709\u5f53\u6570\u7ec4\u540d\u5728\u8868\u8fbe\u5f0f\u4e2d\u4f7f\u7528\u65f6\uff0c\u7f16\u8bd1\u5668\u624d\u4f1a\u4e3a\u5b83\u4ea7\u751f\u4e00\u4e2a\u6307\u9488\u5e38\u91cf\u3002</p> <p>\u6ce8\u610f\u8fd9\u4e2a\u503c\u662f\u6307\u9488\u5e38\u91cf\uff0c\u800c\u4e0d\u662f\u6307\u9488\u53d8\u91cf\u3002\u4f60\u4e0d\u80fd\u4fee\u6539\u5e38\u91cf\u7684\u503c\u3002\u4f60\u53ea\u8981\u7a0d\u5fae\u56de\u60f3\u4e00\u4e0b\uff0c\u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u4e2a\u9650\u5236\u662f\u5408\u7406\u7684\uff1a\u6307\u9488\u5e38\u91cf\u6240\u6307\u5411\u7684\u662f\u5185\u5b58\u4e2d\u6570\u7ec4\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u5982\u679c\u4fee\u6539\u8fd9\u4e2a\u6307\u9488\u5e38\u91cf\uff0c\u552f\u4e00\u53ef\u884c\u7684\u64cd\u4f5c\u5c31\u662f\u628a\u6574\u4e2a\u6570\u7ec4\u79fb\u52a8\u5230\u5185\u5b58\u7684\u5176\u4ed6\u4f4d\u7f6e\u3002\u4f46\u662f\uff0c\u5728\u7a0b\u5e8f\u5b8c\u6210\u94fe\u63a5\u4e4b\u540e\uff0c\u5185\u5b58\u4e2d\u6570\u7ec4\u7684\u4f4d\u7f6e\u662f\u56fa\u5b9a\u7684\uff0c\u6240\u4ee5\u5f53\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u518d\u60f3\u79fb\u52a8\u6570\u7ec4\u5c31\u4e3a\u65f6\u5df2\u665a\u4e86\u3002\u56e0\u6b64\uff0c\u6570\u7ec4\u540d\u7684\u503c\u662f\u4e00\u4e2a\u6307\u9488\u5e38\u91cf\u3002</p> <p>\u53ea\u6709\u5728\u4e24\u79cd\u573a\u5408\u4e0b\uff0c\u6570\u7ec4\u540d\u5e76\u4e0d\u7528\u6307\u9488\u5e38\u91cf\u6765\u8868\u793a\u2014\u2014\u5c31\u662f\u5f53\u6570\u7ec4\u540d\u4f5c\u4e3asizeof\u64cd\u4f5c\u7b26\u6216\u5355\u76ee\u64cd\u4f5c\u7b26&amp;\u7684\u64cd\u4f5c\u6570\u65f6\u3002sizeof\u8fd4\u56de\u6574\u4e2a\u6570\u7ec4\u7684\u957f\u5ea6\uff0c\u800c\u4e0d\u662f\u6307\u5411\u6570\u7ec4\u7684\u6307\u9488\u7684\u957f\u5ea6\u3002\u53d6\u4e00\u4e2a\u6570\u7ec4\u540d\u7684\u5730\u5740\u6240\u4ea7\u751f\u7684\u662f\u4e00\u4e2a\u6307\u5411\u6570\u7ec4\u7684\u6307\u9488\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u6307\u5411\u67d0\u4e2a\u6307\u9488\u5e38\u91cf\u503c\u7684\u6307\u9488\u3002</p> <p>\u4f60\u4e0d\u80fd\u4f7f\u7528\u8d4b\u503c\u7b26\u628a\u4e00\u4e2a\u6570\u7ec4\u7684\u6240\u6709\u5143\u7d20\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u6570\u7ec4\u3002\u4f60\u5fc5\u987b\u4f7f\u7528\u4e00\u4e2a\u5faa\u73af\uff0c\u6bcf\u6b21\u590d\u5236\u4e00\u4e2a\u5143\u7d20\u3002 </p>"},{"location":"foundation/pointers-on-c/array/#_4","title":"\u6307\u9488\u4e0e\u4e0b\u6807","text":"<p>\u5982\u679c\u4f60\u53ef\u4ee5\u4e92\u6362\u5730\u4f7f\u7528\u6307\u9488\u8868\u8fbe\u5f0f\u548c\u4e0b\u6807\u8868\u8fbe\u5f0f\uff0c\u90a3\u4e48\u4f60\u5e94\u8be5\u4f7f\u7528\u54ea\u4e00\u4e2a\u5462\uff1f\u548c\u5f80\u5e38\u4e00\u6837\uff0c\u8fd9\u91cc\u5e76\u6ca1\u6709\u4e00\u4e2a\u7b80\u660e\u7b54\u6848\u3002\u5bf9\u4e8e\u7edd\u5927\u591a\u6570\u4eba\u800c\u8a00\uff0c\u4e0b\u6807\u66f4\u5bb9\u6613\u7406\u89e3\uff0c\u5c24\u5176\u662f\u5728\u591a\u7ef4\u6570\u7ec4\u4e2d\u3002\u6240\u4ee5\uff0c\u5728\u53ef\u8bfb\u6027\u65b9\u9762\uff0c\u4e0b\u6807\u6709\u4e00\u5b9a\u7684\u4f18\u52bf\u3002\u4f46\u5728\u53e6\u4e00\u65b9\u9762\uff0c\u8fd9\u4e2a\u9009\u62e9\u53ef\u80fd\u4f1a\u5f71\u54cd\u8fd0\u884c\u65f6\u6548\u7387\u3002</p> <p>\u5047\u5b9a\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u662f\u6b63\u786e\u7684\uff0c\u4e0b\u6807\u7edd\u4e0d\u4f1a\u6bd4\u6307\u9488\u66f4\u6709\u6548\u7387\uff0c\u4f46\u6307\u9488\u6709\u65f6\u4f1a\u6bd4\u4e0b\u6807\u66f4\u6709\u6548\u7387\u3002</p>"},{"location":"foundation/pointers-on-c/array/#_5","title":"\u6570\u7ec4\u548c\u6307\u9488","text":"<p>\u6307\u9488\u548c\u6570\u7ec4\u5e76\u4e0d\u662f\u76f8\u7b49\u7684\u3002</p> <pre><code>int  a[5];\nint   *b;\n</code></pre> <p>a\u548cb\u80fd\u591f\u4e92\u6362\u4f7f\u7528\u5417\uff1f\u5b83\u4eec\u90fd\u5177\u6709\u6307\u9488\u503c\uff0c\u5b83\u4eec\u90fd\u53ef\u4ee5\u8fdb\u884c\u95f4\u63a5\u8bbf\u95ee\u548c\u4e0b\u6807\u5f15\u7528\u64cd\u4f5c\u3002\u4f46\u662f\uff0c\u5b83\u4eec\u8fd8\u662f\u5b58\u5728\u76f8\u5f53\u5927\u7684\u533a\u522b\u3002</p> <p>\u58f0\u660e\u4e00\u4e2a\u6570\u7ec4\u65f6\uff0c\u7f16\u8bd1\u5668\u5c06\u6839\u636e\u58f0\u660e\u6240\u6307\u5b9a\u7684\u5143\u7d20\u6570\u91cf\u4e3a\u6570\u7ec4\u4fdd\u7559\u5185\u5b58\u7a7a\u95f4\uff0c\u7136\u540e\u518d\u521b\u5efa\u6570\u7ec4\u540d\uff0c\u5b83\u7684\u503c\u662f\u4e00\u4e2a\u5e38\u91cf\uff0c\u6307\u5411\u8fd9\u6bb5\u7a7a\u95f4\u7684\u8d77\u59cb\u4f4d\u7f6e\u3002\u58f0\u660e\u4e00\u4e2a\u6307\u9488\u53d8\u91cf\u65f6\uff0c\u7f16\u8bd1\u5668\u53ea\u4e3a\u6307\u9488\u672c\u8eab\u4fdd\u7559\u5185\u5b58\u7a7a\u95f4\uff0c\u5b83\u5e76\u4e0d\u4e3a\u4efb\u4f55\u6574\u578b\u503c\u5206\u914d\u5185\u5b58\u7a7a\u95f4\u3002\u800c\u4e14\uff0c\u6307\u9488\u53d8\u91cf\u5e76\u672a\u88ab\u521d\u59cb\u5316\u4e3a\u6307\u5411\u4efb\u4f55\u73b0\u6709\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5982\u679c\u5b83\u662f\u4e00\u4e2a\u81ea\u52a8\u53d8\u91cf\uff0c\u5b83\u751a\u81f3\u6839\u672c\u4e0d\u4f1a\u88ab\u521d\u59cb\u5316\u3002</p> <p>\u56e0\u6b64\uff0c\u4e0a\u8ff0\u58f0\u660e\u4e4b\u540e\uff0c\u8868\u8fbe\u5f0fa\u662f\u5b8c\u5168\u5408\u6cd5\u7684\uff0c\u4f46\u8868\u8fbe\u5f0fb\u5374\u662f\u975e\u6cd5\u7684\u3002*b\u5c06\u8bbf\u95ee\u5185\u5b58\u4e2d\u67d0\u4e2a\u4e0d\u786e\u5b9a\u7684\u4f4d\u7f6e\uff0c\u6216\u8005\u5bfc\u81f4\u7a0b\u5e8f\u7ec8\u6b62\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u8868\u8fbe\u5f0fb++\u53ef\u4ee5\u901a\u8fc7\u7f16\u8bd1\uff0c\u4f46a++\u5374\u4e0d\u884c\uff0c\u56e0\u4e3aa\u7684\u503c\u662f\u4e2a\u5e38\u91cf\u3002</p>"},{"location":"foundation/pointers-on-c/array/#_6","title":"\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u7684\u6570\u7ec4\u540d","text":"<p>\u5f53\u4e00\u4e2a\u6570\u7ec4\u540d\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u4e00\u4e2a\u51fd\u6570\u65f6\u4f1a\u53d1\u751f\u4ec0\u4e48\u60c5\u51b5\u5462\uff1f\u4f60\u73b0\u5728\u5df2\u7ecf\u77e5\u9053\u6570\u7ec4\u540d\u7684\u503c\u5c31\u662f\u4e00\u4e2a\u6307\u5411\u6570\u7ec4\u7b2c1\u4e2a\u5143\u7d20\u7684\u6307\u9488\uff0c\u6240\u4ee5\u5f88\u5bb9\u6613\u660e\u767d\u6b64\u65f6\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u662f\u4e00\u4efd\u8be5\u6307\u9488\u7684\u62f7\u8d1d\u3002\u51fd\u6570\u5982\u679c\u6267\u884c\u4e86\u4e0b\u6807\u5f15\u7528\uff0c\u5b9e\u9645\u4e0a\u662f\u5bf9\u8fd9\u4e2a\u6307\u9488\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\uff0c\u5e76\u4e14\u901a\u8fc7\u8fd9\u79cd\u95f4\u63a5\u8bbf\u95ee\uff0c\u51fd\u6570\u53ef\u4ee5\u8bbf\u95ee\u548c\u4fee\u6539\u8c03\u7528\u7a0b\u5e8f\u7684\u6570\u7ec4\u5143\u7d20\u3002</p> <p>\u73b0\u5728\u6211\u53ef\u4ee5\u89e3\u91caC\u5173\u4e8e\u53c2\u6570\u4f20\u9012\u7684\u8868\u9762\u4e0a\u7684\u77db\u76fe\u4e4b\u5904\u3002\u6211\u65e9\u5148\u66fe\u8bf4\u8fc7\u6240\u6709\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u53c2\u6570\u90fd\u662f\u901a\u8fc7\u4f20\u503c\u65b9\u5f0f\u8fdb\u884c\u7684\uff0c\u4f46\u6570\u7ec4\u540d\u53c2\u6570\u7684\u884c\u4e3a\u5374\u4eff\u4f5b\u5b83\u662f\u901a\u8fc7\u4f20\u5740\u8c03\u7528\u4f20\u9012\u7684\u3002\u4f20\u5740\u8c03\u7528\u662f\u901a\u8fc7\u4f20\u9012\u4e00\u4e2a\u6307\u5411\u6240\u9700\u5143\u7d20\u7684\u6307\u9488\uff0c\u7136\u540e\u5728\u51fd\u6570\u4e2d\u5bf9\u8be5\u6307\u9488\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u5b9e\u73b0\u5bf9\u6570\u636e\u7684\u8bbf\u95ee\u3002\u4f5c\u4e3a\u53c2\u6570\u7684\u6570\u7ec4\u540d\u662f\u4e2a\u6307\u9488\uff0c\u4e0b\u6807\u5f15\u7528\u5b9e\u9645\u6267\u884c\u7684\u5c31\u662f\u95f4\u63a5\u8bbf\u95ee\u3002</p> <p>\u90a3\u4e48\u6570\u7ec4\u7684\u4f20\u503c\u8c03\u7528\u884c\u4e3a\u53c8\u662f\u8868\u73b0\u5728\u4ec0\u4e48\u5730\u65b9\u5462\uff1f\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u662f\u53c2\u6570\u7684\u4e00\u4efd\u62f7\u8d1d\uff08\u6307\u5411\u6570\u7ec4\u8d77\u59cb\u4f4d\u7f6e\u7684\u6307\u9488\u7684\u62f7\u8d1d\uff09\uff0c\u6240\u4ee5\u51fd\u6570\u53ef\u4ee5\u81ea\u7531\u5730\u64cd\u4f5c\u5b83\u7684\u6307\u9488\u5f62\u53c2\uff0c\u800c\u4e0d\u5fc5\u62c5\u5fc3\u4f1a\u4fee\u6539\u5bf9\u5e94\u7684\u4f5c\u4e3a\u5b9e\u53c2\u7684\u6307\u9488\u3002</p> <p>\u6240\u4ee5\uff0c\u6b64\u5904\u5e76\u4e0d\u5b58\u5728\u77db\u76fe\uff1a\u6240\u6709\u7684\u53c2\u6570\u90fd\u662f\u901a\u8fc7\u4f20\u503c\u65b9\u5f0f\u4f20\u9012\u7684\u3002\u5f53\u7136\uff0c\u5982\u679c\u4f60\u4f20\u9012\u4e86\u4e00\u4e2a\u6307\u5411\u67d0\u4e2a\u53d8\u91cf\u7684\u6307\u9488\uff0c\u800c\u51fd\u6570\u5bf9\u8be5\u6307\u9488\u6267\u884c\u4e86\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\uff0c\u90a3\u4e48\u51fd\u6570\u5c31\u53ef\u4ee5\u4fee\u6539\u90a3\u4e2a\u53d8\u91cf\u3002\u5c3d\u7ba1\u521d\u770b\u4e0a\u53bb\u5e76\u4e0d\u660e\u663e\uff0c\u4f46\u6570\u7ec4\u540d\u4f5c\u4e3a\u53c2\u6570\u65f6\u6240\u53d1\u751f\u7684\u6b63\u662f\u8fd9\u79cd\u60c5\u51b5\u3002\u8fd9\u4e2a\u53c2\u6570\uff08\u6307\u9488\uff09\u5b9e\u9645\u4e0a\u662f\u901a\u8fc7\u4f20\u503c\u65b9\u5f0f\u4f20\u9012\u7684\uff0c\u51fd\u6570\u5f97\u5230\u7684\u662f\u8be5\u6307\u9488\u7684\u4e00\u4efd\u62f7\u8d1d\uff0c\u5b83\u53ef\u4ee5\u88ab\u4fee\u6539\uff0c\u4f46\u8c03\u7528\u7a0b\u5e8f\u6240\u4f20\u9012\u7684\u5b9e\u53c2\u5e76\u4e0d\u53d7\u5f71\u54cd\u3002</p>"},{"location":"foundation/pointers-on-c/array/#_7","title":"\u58f0\u660e\u6570\u7ec4\u53c2\u6570","text":"<p>\u8fd9\u91cc\u6709\u4e00\u4e2a\u6709\u8da3\u7684\u95ee\u9898\u3002\u5982\u679c\u4f60\u60f3\u628a\u4e00\u4e2a\u6570\u7ec4\u540d\u53c2\u6570\u4f20\u9012\u7ed9\u51fd\u6570\uff0c\u6b63\u786e\u7684\u51fd\u6570\u5f62\u53c2\u5e94\u8be5\u662f\u600e\u6837\u7684\uff1f\u5b83\u662f\u5e94\u8be5\u58f0\u660e\u4e3a\u4e00\u4e2a\u6307\u9488\u8fd8\u662f\u4e00\u4e2a\u6570\u7ec4\uff1f</p> <p>\u6b63\u5982\u4f60\u6240\u770b\u5230\u7684\u90a3\u6837\uff0c\u8c03\u7528\u51fd\u6570\u65f6\u5b9e\u9645\u4f20\u9012\u7684\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6240\u4ee5\u51fd\u6570\u7684\u5f62\u53c2\u5b9e\u9645\u4e0a\u662f\u4e2a\u6307\u9488\u3002\u4f46\u4e3a\u4e86\u4f7f\u7a0b\u5e8f\u5458\u65b0\u624b\u66f4\u5bb9\u6613\u4e0a\u624b\u4e00\u4e9b\uff0c\u7f16\u8bd1\u5668\u4e5f\u63a5\u53d7\u6570\u7ec4\u5f62\u5f0f\u7684\u51fd\u6570\u5f62\u53c2\u3002\u56e0\u6b64\uff0c\u4e0b\u9762\u4e24\u4e2a\u51fd\u6570\u539f\u578b\u662f\u76f8\u7b49\u7684\uff1a</p> <pre><code>int\u3000strlen( char *string );\nint\u3000strlen( char string[] );\n</code></pre> <p>\u8fd9\u4e2a\u76f8\u7b49\u6027\u6697\u793a\u6307\u9488\u548c\u6570\u7ec4\u540d\u5b9e\u9645\u4e0a\u662f\u76f8\u7b49\u7684\uff0c\u4f46\u5343\u4e07\u4e0d\u8981\u88ab\u5b83\u7cca\u5f04\u4e86\uff01\u8fd9\u4e24\u4e2a\u58f0\u660e\u786e\u5b9e\u76f8\u7b49\uff0c\u4f46\u53ea\u662f\u5728\u5f53\u524d\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u73af\u5883\u4e2d \u3002\u5982\u679c\u5b83\u4eec\u51fa\u73b0\u5728\u522b\u5904\uff0c\u5c31\u53ef\u80fd\u5b8c\u5168\u4e0d\u540c\uff0c\u5c31\u50cf\u524d\u9762\u8ba8\u8bba\u7684\u90a3\u6837\u3002\u4f46\u5bf9\u4e8e\u6570\u7ec4\u5f62\u53c2\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u4e00\u79cd\u5f62\u5f0f\u7684\u58f0\u660e\u3002</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u4e00\u79cd\u58f0\u660e\uff0c\u4f46\u54ea\u4e2a\u201c\u66f4\u52a0\u51c6\u786e\u201d\u5462\uff1f\u7b54\u6848\u662f\u6307\u9488\u3002\u56e0\u4e3a\u5b9e\u53c2\u5b9e\u9645\u4e0a\u662f\u4e2a\u6307\u9488\uff0c\u800c\u4e0d\u662f\u6570\u7ec4\u3002\u540c\u6837\uff0c\u8868\u8fbe\u5f0fsizeof string\u7684\u503c\u662f\u6307\u5411\u5b57\u7b26\u7684\u6307\u9488\u7684\u957f\u5ea6\uff0c\u800c\u4e0d\u662f\u6570\u7ec4\u7684\u957f\u5ea6\u3002</p>"},{"location":"foundation/pointers-on-c/array/#_8","title":"\u603b\u7ed3","text":"<p>\u5728\u7edd\u5927\u591a\u6570\u8868\u8fbe\u5f0f\u4e2d\uff0c\u6570\u7ec4\u540d\u7684\u503c\u662f\u6307\u5411\u6570\u7ec4\u7b2c1\u4e2a\u5143\u7d20\u7684\u6307\u9488\u3002\u8fd9\u4e2a\u89c4\u5219\u53ea\u6709\u4e24\u4e2a\u4f8b\u5916\u3002sizeof\u8fd4\u56de\u6574\u4e2a\u6570\u7ec4\u6240\u5360\u7528\u7684\u5b57\u8282\u800c\u4e0d\u662f\u4e00\u4e2a\u6307\u9488\u6240\u5360\u7528\u7684\u5b57\u8282\u3002\u5355\u76ee\u64cd\u4f5c\u7b26&amp;\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u6570\u7ec4\u7684\u6307\u9488\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u6307\u5411\u6570\u7ec4\u7b2c1\u4e2a\u5143\u7d20\u7684\u6307\u9488\u7684\u6307\u9488\u3002</p> <p>\u9664\u4e86\u4f18\u5148\u7ea7\u4e0d\u540c\u4ee5\u5916\uff0c\u4e0b\u6807\u8868\u8fbe\u5f0farray[value]\u548c\u95f4\u63a5\u8bbf\u95ee\u8868\u8fbe\u5f0f*(array+(value))\u662f\u4e00\u6837\u7684\u3002\u56e0\u6b64\uff0c\u4e0b\u6807\u4e0d\u4ec5\u53ef\u4ee5\u7528\u4e8e\u6570\u7ec4\u540d\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6307\u9488\u8868\u8fbe\u5f0f\u4e2d\u3002\u4e0d\u8fc7\u8fd9\u6837\u4e00\u6765\uff0c\u7f16\u8bd1\u5668\u5c31\u5f88\u96be\u68c0\u67e5\u4e0b\u6807\u7684\u6709\u6548\u6027\u3002\u6307\u9488\u8868\u8fbe\u5f0f\u53ef\u80fd\u6bd4\u4e0b\u6807\u8868\u8fbe\u5f0f\u6548\u7387\u66f4\u9ad8\uff0c\u4f46\u4e0b\u6807\u8868\u8fbe\u5f0f\u7edd\u4e0d\u53ef\u80fd\u6bd4\u6307\u9488\u8868\u8fbe\u5f0f\u6548\u7387\u66f4\u9ad8\u3002\u4f46\u662f\uff0c\u4ee5\u727a\u7272\u7a0b\u5e8f\u7684\u53ef\u7ef4\u62a4\u6027\u4e3a\u4ee3\u4ef7\u83b7\u5f97\u7a0b\u5e8f\u7684\u8fd0\u884c\u65f6\u6548\u7387\u7684\u63d0\u9ad8\u53ef\u4e0d\u662f\u4e2a\u597d\u4e3b\u610f\u3002</p> <p>\u6307\u9488\u548c\u6570\u7ec4\u5e76\u4e0d\u76f8\u7b49\u3002\u6570\u7ec4\u7684\u5c5e\u6027\u548c\u6307\u9488\u7684\u5c5e\u6027\u5927\u76f8\u5f84\u5ead\u3002\u5f53\u6211\u4eec\u58f0\u660e\u4e00\u4e2a\u6570\u7ec4\u65f6\uff0c\u5b83\u540c\u65f6\u4e5f\u5206\u914d\u4e86\u4e00\u4e9b\u5185\u5b58\u7a7a\u95f4\uff0c\u7528\u4e8e\u5bb9\u7eb3\u6570\u7ec4\u5143\u7d20\u3002\u4f46\u662f\uff0c\u5f53\u6211\u4eec\u58f0\u660e\u4e00\u4e2a\u6307\u9488\u65f6\uff0c\u5b83\u53ea\u5206\u914d\u4e86\u7528\u4e8e\u5bb9\u7eb3\u6307\u9488\u672c\u8eab\u7684\u7a7a\u95f4\u3002</p> <p>\u5f53\u6570\u7ec4\u540d\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u4f20\u9012\u65f6\uff0c\u5b9e\u9645\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u662f\u4e00\u4e2a\u6307\u5411\u6570\u7ec4\u7b2c1\u4e2a\u5143\u7d20\u7684\u6307\u9488\u3002\u51fd\u6570\u6240\u63a5\u6536\u5230\u7684\u53c2\u6570\u5b9e\u9645\u4e0a\u662f\u539f\u53c2\u6570\u7684\u4e00\u4efd\u62f7\u8d1d\uff0c\u6240\u4ee5\u51fd\u6570\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u64cd\u7eb5\u800c\u4e0d\u4f1a\u5f71\u54cd\u5b9e\u9645\u7684\u53c2\u6570\u3002\u4f46\u662f\uff0c\u5bf9\u6307\u9488\u53c2\u6570\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u5141\u8bb8\u51fd\u6570\u4fee\u6539\u539f\u5148\u7684\u6570\u7ec4\u5143\u7d20\u3002\u6570\u7ec4\u5f62\u53c2\u65e2\u53ef\u4ee5\u58f0\u660e\u4e3a\u6570\u7ec4\uff0c\u4e5f\u53ef\u4ee5\u58f0\u660e\u4e3a\u6307\u9488\u3002\u8fd9\u4e24\u79cd\u58f0\u660e\u5f62\u5f0f\u53ea\u6709\u5f53\u5b83\u4eec\u4f5c\u4e3a\u51fd\u6570\u7684\u5f62\u53c2\u65f6 \u624d\u662f\u76f8\u7b49\u7684\u3002</p> <p>\u6570\u7ec4\u4e5f\u53ef\u4ee5\u7528\u521d\u59cb\u503c\u5217\u8868\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u521d\u59cb\u503c\u5217\u8868\u5c31\u662f\u7531\u4e00\u5bf9\u82b1\u62ec\u53f7\u5305\u56f4\u7684\u4e00\u7ec4\u503c\u3002\u9759\u6001\u53d8\u91cf\uff08\u5305\u62ec\u6570\u7ec4\uff09\u5728\u7a0b\u5e8f\u8f7d\u5165\u5230\u5185\u5b58\u65f6\u5f97\u5230\u521d\u59cb\u503c\u3002\u81ea\u52a8\u53d8\u91cf\uff08\u5305\u62ec\u6570\u7ec4\uff09\u6bcf\u6b21\u5f53\u6267\u884c\u6d41\u8fdb\u5165\u5b83\u4eec\u58f0\u660e\u6240\u5728\u7684\u4ee3\u7801\u5757\u65f6\u90fd\u8981\u4f7f\u7528\u9690\u5f0f\u7684\u8d4b\u503c\u8bed\u53e5\u91cd\u65b0\u8fdb\u884c\u521d\u59cb\u5316\u3002\u5982\u679c\u521d\u59cb\u503c\u5217\u8868\u5305\u542b\u7684\u503c\u7684\u4e2a\u6570\u5c11\u4e8e\u6570\u7ec4\u5143\u7d20\u7684\u4e2a\u6570\uff0c\u6570\u7ec4\u6700\u540e\u51e0\u4e2a\u5143\u7d20\u5c31\u7528\u7f3a\u7701\u503c\u8fdb\u884c\u521d\u59cb\u5316\u3002\u5982\u679c\u4e00\u4e2a\u88ab\u521d\u59cb\u5316\u7684\u6570\u7ec4\u7684\u957f\u5ea6\u5728\u58f0\u660e\u4e2d\u672a\u7ed9\u51fa\uff0c\u7f16\u8bd1\u5668\u5c06\u4f7f\u8fd9\u4e2a\u6570\u7ec4\u7684\u957f\u5ea6\u8bbe\u7f6e\u4e3a\u521a\u597d\u80fd\u5bb9\u7eb3\u521d\u59cb\u503c\u5217\u8868\u4e2d\u6240\u6709\u503c\u7684\u957f\u5ea6\u3002\u5b57\u7b26\u6570\u7ec4\u4e5f\u53ef\u4ee5\u7528\u4e00\u79cd\u5f88\u50cf\u5b57\u7b26\u4e32\u5e38\u91cf\u7684\u5feb\u901f\u65b9\u6cd5\u8fdb\u884c\u521d\u59cb\u5316\u3002</p> <p>\u591a\u7ef4\u6570\u7ec4\u5b9e\u9645\u4e0a\u662f\u4e00\u7ef4\u6570\u7ec4\u7684\u4e00\u79cd\u7279\u578b\uff0c\u5c31\u662f\u5b83\u7684\u6bcf\u4e2a\u5143\u7d20\u672c\u8eab\u4e5f\u662f\u4e00\u4e2a\u6570\u7ec4\u3002\u591a\u7ef4\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u6839\u636e\u884c\u4e3b\u5e8f\u8fdb\u884c\u5b58\u50a8\uff0c\u4e5f\u5c31\u662f\u6700\u53f3\u8fb9\u7684\u4e0b\u6807\u7387\u5148\u53d8\u5316\u3002\u591a\u7ef4\u6570\u7ec4\u540d\u7684\u503c\u662f\u4e00\u4e2a\u6307\u5411\u5b83\u7b2c1\u4e2a\u5143\u7d20\u7684\u6307\u9488\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u6307\u5411\u6570\u7ec4\u7684\u6307\u9488\u3002\u5bf9\u8be5\u6307\u9488\u8fdb\u884c\u8fd0\u7b97\u5c06\u6839\u636e\u5b83\u6240\u6307\u5411\u6570\u7ec4\u7684\u957f\u5ea6\u5bf9\u64cd\u4f5c\u6570\u8fdb\u884c\u8c03\u6574\u3002\u591a\u7ef4\u6570\u7ec4\u7684\u4e0b\u6807\u5f15\u7528\u4e5f\u662f\u6307\u9488\u8868\u8fbe\u5f0f\u3002\u5f53\u4e00\u4e2a\u591a\u7ef4\u6570\u7ec4\u540d\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u4e00\u4e2a\u51fd\u6570\u65f6\uff0c\u5b83\u6240\u5bf9\u5e94\u7684\u51fd\u6570\u5f62\u53c2\u7684\u58f0\u660e\u4e2d\u5fc5\u987b\u663e\u5f0f\u6307\u660e\u7b2c2\u7ef4\uff08\u548c\u63a5\u4e0b\u53bb\u6240\u6709\u7ef4\uff09\u7684\u957f\u5ea6\u3002\u7531\u4e8e\u591a\u7ef4\u6570\u7ec4\u5b9e\u9645\u4e0a\u662f\u590d\u6742\u5143\u7d20\u7684\u4e00\u7ef4\u6570\u7ec4\uff0c\u4e00\u4e2a\u591a\u7ef4\u6570\u7ec4\u7684\u521d\u59cb\u5316\u5217\u8868\u5c31\u5305\u542b\u4e86\u8fd9\u4e9b\u590d\u6742\u5143\u7d20\u7684\u503c\u3002\u8fd9\u4e9b\u503c\u7684\u6bcf\u4e00\u4e2a\u90fd\u53ef\u80fd\u5305\u542b\u5d4c\u5957\u7684\u521d\u59cb\u503c\u5217\u8868\uff0c\u7531\u6570\u7ec4\u5404\u7ef4\u7684\u957f\u5ea6\u51b3\u5b9a\u3002\u5982\u679c\u591a\u7ef4\u6570\u7ec4\u7684\u521d\u59cb\u5316\u5217\u8868\u662f\u5b8c\u6574\u7684\uff0c\u5b83\u7684\u5185\u5c42\u82b1\u62ec\u53f7\u53ef\u4ee5\u7701\u7565\u3002\u5728\u591a\u7ef4\u6570\u7ec4\u7684\u521d\u59cb\u503c\u5217\u8868\u4e2d\uff0c\u53ea\u6709\u7b2c1\u7ef4\u7684\u957f\u5ea6\u4f1a\u88ab\u81ea\u52a8\u8ba1\u7b97\u51fa\u6765\u3002</p> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u521b\u5efa\u6307\u9488\u6570\u7ec4\u3002\u5b57\u7b26\u4e32\u7684\u5217\u8868\u53ef\u4ee5\u4ee5\u77e9\u9635\u7684\u5f62\u5f0f\u5b58\u50a8\uff0c\u4e5f\u53ef\u4ee5\u4ee5\u6307\u5411\u5b57\u7b26\u4e32\u5e38\u91cf\u7684\u6307\u9488\u6570\u7ec4\u5f62\u5f0f\u5b58\u50a8\u3002\u5728\u77e9\u9635\u4e2d\uff0c\u6bcf\u884c\u5fc5\u987b\u4e0e\u6700\u957f\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u4e00\u6837\u957f\uff0c\u4f46\u5b83\u4e0d\u9700\u8981\u4efb\u4f55\u6307\u9488\u3002\u6307\u9488\u6570\u7ec4\u672c\u8eab\u8981\u5360\u7528\u7a7a\u95f4\uff0c\u4f46\u6bcf\u4e2a\u6307\u9488\u6240\u6307\u5411\u7684\u5b57\u7b26\u4e32\u6240\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u5c31\u662f\u5b57\u7b26\u4e32\u672c\u8eab\u7684\u957f\u5ea6\u3002</p>"},{"location":"foundation/pointers-on-c/array/#_9","title":"\u7f16\u7a0b\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/array/#1","title":"\u7ec3\u4e60 1","text":"<p>\u5355\u4f4d\u77e9\u9635(identity matrix)\u5c31\u662f\u4e00\u4e2a\u6b63\u65b9\u5f62\u77e9\u9635\uff0c\u5b83\u9664\u4e86\u4e3b\u5bf9\u89d2\u7ebf\u7684\u5143\u7d20\u503c\u4e3a1\u4ee5\u540e\uff0c\u5176\u4f59\u5143\u7d20\u7684\u503c\u5747\u4e3a0\u3002\u7f16\u5199\u4e00\u4e2a\u540d\u53ebidentity_matrix\u7684\u51fd\u6570\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a10\u00d710\u6574\u578b\u77e9\u9635\u4e3a\u53c2\u6570\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u63d0\u793a\u8be5\u77e9\u9635\u662f\u5426\u4e3a\u5355\u4f4d\u77e9\u9635\u3002</p> <pre><code>#include &lt;stdbool.h&gt; // \u5f15\u5165stdbool.h\u4ee5\u4f7f\u7528\u5e03\u5c14\u7c7b\u578b(bool)\n#include &lt;stdio.h&gt;\n\n// \u51fd\u6570\u58f0\u660e\nbool identity_matrix(int matrix[10][10]);\n\n// \u4e3b\u51fd\u6570\uff0c\u793a\u4f8b\u7528\u9014\nint main() {\n    // \u5b9a\u4e49\u4e00\u4e2a10x10\u7684\u5355\u4f4d\u77e9\u9635\n    int matrix[10][10] = {\n        {1, 0, 0, 0, 0, 0, 0, 0, 0, 0},\n        {0, 1, 0, 0, 0, 0, 0, 0, 0, 0},\n        {0, 0, 1, 0, 0, 0, 0, 0, 0, 0},\n        {0, 0, 0, 1, 0, 0, 0, 0, 0, 0},\n        {0, 0, 0, 0, 1, 0, 0, 0, 0, 0},\n        {0, 0, 0, 0, 0, 1, 0, 0, 0, 0},\n        {0, 0, 0, 0, 0, 0, 1, 0, 0, 0},\n        {0, 0, 0, 0, 0, 0, 0, 1, 0, 0},\n        {0, 0, 0, 0, 0, 0, 0, 0, 1, 0},\n        {0, 0, 0, 0, 0, 0, 0, 0, 0, 1}\n    };\n\n    // \u68c0\u67e5\u77e9\u9635\u662f\u5426\u4e3a\u5355\u4f4d\u77e9\u9635\n    if (identity_matrix(matrix)) {\n        printf(\"The matrix is an identity matrix.\\n\");\n    } else {\n        printf(\"The matrix is not an identity matrix.\\n\");\n    }\n\n    return 0;\n}\n\n// identity_matrix\u51fd\u6570\u5b9a\u4e49\nbool identity_matrix(int matrix[10][10]) {\n    for (int i = 0; i &lt; 10; i++) {\n        for (int j = 0; j &lt; 10; j++) {\n            // \u5982\u679c\u5728\u4e3b\u5bf9\u89d2\u7ebf\u4e0a\uff0c\u68c0\u67e5\u5143\u7d20\u662f\u5426\u4e3a1\n            if (i == j &amp;&amp; matrix[i][j] != 1) {\n                return false;\n            }\n            // \u5982\u679c\u4e0d\u5728\u4e3b\u5bf9\u89d2\u7ebf\u4e0a\uff0c\u68c0\u67e5\u5143\u7d20\u662f\u5426\u4e3a0\n            else if (i != j &amp;&amp; matrix[i][j] != 0) {\n                return false;\n            }\n        }\n    }\n    // \u5982\u679c\u6240\u6709\u68c0\u67e5\u90fd\u901a\u8fc7\u4e86\uff0c\u5219\u662f\u5355\u4f4d\u77e9\u9635\n    return true;\n}\n\n</code></pre>"},{"location":"foundation/pointers-on-c/array/#2","title":"\u7ec3\u4e60 2","text":"<p>\u4fee\u6539\u524d\u4e00\u4e2a\u95ee\u9898\u4e2d\u7684identity_matrix\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u5bf9\u6570\u7ec4\u8fdb\u884c\u6269\u5c55\uff0c\u4ece\u800c\u80fd\u591f\u63a5\u53d7\u4efb\u610f\u5927\u5c0f\u7684\u77e9\u9635\u53c2\u6570\u3002\u51fd\u6570\u7684\u7b2c1\u4e2a\u53c2\u6570\u5e94\u8be5\u662f\u4e00\u4e2a\u6574\u578b\u6307\u9488\uff0c\u4f60\u9700\u8981\u7b2c2\u4e2a\u53c2\u6570\uff0c\u7528\u4e8e\u6307\u5b9a\u77e9\u9635\u7684\u5927\u5c0f\u3002</p> <pre><code>#include &lt;stdbool.h&gt; // \u5f15\u5165stdbool.h\u4ee5\u4f7f\u7528\u5e03\u5c14\u7c7b\u578b(bool)\n#include &lt;stdio.h&gt;  // \u5f15\u5165\u6807\u51c6\u8f93\u5165\u8f93\u51fa\u5e93\u4ee5\u4f7f\u7528printf\u51fd\u6570\n\n// \u51fd\u6570\u58f0\u660e\nbool identity_matrix(int* matrix, int size);\n\n// \u4e3b\u51fd\u6570\uff0c\u793a\u4f8b\u7528\u9014\nint main() {\n    // \u5b9a\u4e49\u4e00\u4e2a5x5\u7684\u5355\u4f4d\u77e9\u9635\n    int matrix[5][5] = {\n        {1, 0, 0, 0, 0},\n        {0, 1, 0, 0, 0},\n        {0, 0, 1, 0, 0},\n        {0, 0, 0, 1, 0},\n        {0, 0, 0, 0, 1}\n    };\n\n    // \u68c0\u67e5\u77e9\u9635\u662f\u5426\u4e3a\u5355\u4f4d\u77e9\u9635\n    if(identity_matrix((int*)matrix, 5)) {\n        printf(\"The matrix is an identity matrix.\\n\");\n    } else {\n        printf(\"The matrix is not an identity matrix.\\n\");\n    }\n\n    return 0;\n}\n\n// identity_matrix\u51fd\u6570\u5b9a\u4e49\nbool identity_matrix(int* matrix, int size) {\n    for (int i = 0; i &lt; size; i++) {\n        for (int j = 0; j &lt; size; j++) {\n            // \u83b7\u53d6\u5f53\u524d\u5143\u7d20\n            int elem = *(matrix + i*size + j);\n            // \u5982\u679c\u5728\u4e3b\u5bf9\u89d2\u7ebf\u4e0a\uff0c\u68c0\u67e5\u5143\u7d20\u662f\u5426\u4e3a1\n            if (i == j &amp;&amp; elem != 1) {\n                return false;\n            }\n            // \u5982\u679c\u4e0d\u5728\u4e3b\u5bf9\u89d2\u7ebf\u4e0a\uff0c\u68c0\u67e5\u5143\u7d20\u662f\u5426\u4e3a0\n            else if (i != j &amp;&amp; elem != 0) {\n                return false;\n            }\n        }\n    }\n    // \u5982\u679c\u6240\u6709\u68c0\u67e5\u90fd\u901a\u8fc7\u4e86\uff0c\u5219\u662f\u5355\u4f4d\u77e9\u9635\n    return true;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/array/#3","title":"\u7ec3\u4e60 3","text":"<p>\u7687\u540e\u662f\u56fd\u9645\u8c61\u68cb\u4e2d\u5a01\u529b\u6700\u5927\u7684\u68cb\u5b50\u3002\u7687\u540e\u53ef\u4ee5\u653b\u51fb\u4f4d\u4e8e\u7bad\u5934\u6240\u8986\u76d6\u4f4d\u7f6e\u7684\u6240\u6709\u68cb\u5b50\u3002</p> <p>\u6211\u4eec\u80fd\u4e0d\u80fd\u628a8\u4e2a\u7687\u540e\u653e\u5728\u68cb\u76d8\u4e0a\uff0c\u5b83\u4eec\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u90fd\u65e0\u6cd5\u653b\u51fb\u5176\u4f59\u7684\u7687\u540e\uff1f\u8fd9\u4e2a\u95ee\u9898\u88ab\u79f0\u4e3a\u516b\u7687\u540e\u95ee\u9898\u3002\u4f60\u7684\u4efb\u52a1\u662f\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u627e\u5230\u516b\u7687\u540e\u95ee\u9898\u7684\u6240\u6709\u7b54\u6848\uff0c\u770b\u770b\u4e00\u5171\u6709\u591a\u5c11\u79cd\u7b54\u6848\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define N 8\n\n// \u7528\u6765\u8bb0\u5f55\u6bcf\u4e2a\u7b54\u6848\u7684\u6570\u91cf\nint solutions = 0;\n\n// \u7528\u6765\u68c0\u67e5\u5f53\u524d\u4f4d\u7f6e\u662f\u5426\u5b89\u5168\nint isSafe(int board[N][N], int row, int col) {\n    int i, j;\n\n    // \u68c0\u67e5\u8fd9\u4e00\u884c\u7684\u5de6\u8fb9\n    for (i = 0; i &lt; col; i++)\n        if (board[row][i])\n            return 0;\n\n    // \u68c0\u67e5\u5de6\u4e0a\u5bf9\u89d2\u7ebf\n    for (i = row, j = col; i &gt;= 0 &amp;&amp; j &gt;= 0; i--, j--)\n        if (board[i][j])\n            return 0;\n\n    // \u68c0\u67e5\u5de6\u4e0b\u5bf9\u89d2\u7ebf\n    for (i = row, j = col; j &gt;= 0 &amp;&amp; i &lt; N; i++, j--)\n        if (board[i][j])\n            return 0;\n\n    return 1;\n}\n\n// \u9012\u5f52\u51fd\u6570\u6765\u89e3\u51b3\u516b\u7687\u540e\u95ee\u9898\nint solveNQUtil(int board[N][N], int col) {\n    // \u5982\u679c\u6240\u6709\u7687\u540e\u90fd\u88ab\u653e\u7f6e\u597d\u4e86\n    if (col &gt;= N) {\n        solutions++;\n        printf(\"Solution %d:\\n\", solutions);\n        for (int i = 0; i &lt; N; i++) {\n            for (int j = 0; j &lt; N; j++)\n                printf(\" %d \", board[i][j]);\n            printf(\"\\n\");\n        }\n        printf(\"\\n\\n\");\n        return 1; \n    }\n\n    int res = 0;\n    for (int i = 0; i &lt; N; i++) {\n        // \u68c0\u67e5\u653e\u7687\u540e\u5728[i, col]\u662f\u5426\u5b89\u5168\n        if ( isSafe(board, i, col) ) {\n            // \u653e\u7f6e\u7687\u540e\n            board[i][col] = 1;\n\n            // \u9012\u5f52\u5230\u4e0b\u4e00\u5217\n            res = solveNQUtil(board, col + 1) || res;\n\n            // \u5982\u679c\u653e\u7f6e\u7687\u540e\u5728[i,col]\u5bfc\u81f4\u6ca1\u6709\u89e3\u51b3\u65b9\u6848\uff0c\u5c31\u79fb\u9664\u5b83\n            board[i][col] = 0; // BACKTRACK\n        }\n    }\n\n    // \u5982\u679c\u8fd9\u4e00\u5217\u7684\u6240\u6709\u884c\u90fd\u6ca1\u6709\u627e\u5230\u89e3\u51b3\u65b9\u6848\uff0c\u5219\u8fd4\u56de0\n    return res;\n}\n\n// \u89e3\u51b3\u516b\u7687\u540e\u95ee\u9898\u7684\u51fd\u6570\nvoid solveNQ() {\n    int board[N][N];\n    // \u521d\u59cb\u5316\u68cb\u76d8\n    for(int i = 0; i &lt; N; i++)\n        for(int j = 0; j &lt; N; j++)\n            board[i][j] = 0;\n\n    if (!solveNQUtil(board, 0)) {\n        printf(\"Solution does not exist\");\n        return;\n    }\n\n    printf(\"Found %d solutions.\\n\", solutions);\n}\n\n// \u4e3b\u51fd\u6570\nint main() {\n    solveNQ();\n    return 0;\n}\n\n</code></pre>"},{"location":"foundation/pointers-on-c/basic-concept/","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p> <p>\u6beb\u65e0\u7591\u95ee\uff0c\u5b66\u4e60\u4e00\u95e8\u7f16\u7a0b\u8bed\u8a00\u7684\u57fa\u7840\u77e5\u8bc6\u4e0d\u5982\u7f16\u5199\u7a0b\u5e8f\u6709\u8da3\u3002\u4f46\u662f\uff0c\u4e0d\u77e5\u9053\u8bed\u8a00\u7684\u57fa\u7840\u77e5\u8bc6\u4f1a\u4f7f\u4f60\u5728\u7f16\u5199\u7a0b\u5e8f\u65f6\u7f3a\u5c11\u4e50\u8da3\u3002</p>"},{"location":"foundation/pointers-on-c/basic-concept/#_2","title":"\u73af\u5883","text":"<p>\u5728ANSI C\u7684\u4efb\u4f55\u4e00\u79cd\u5b9e\u73b0\u4e2d\uff0c\u5b58\u5728\u4e24\u79cd\u4e0d\u540c\u7684\u73af\u5883\uff0c\u4e00\u79cd\u662f\u7f16\u8bd1\u73af\u5883\uff0c\u4e00\u79cd\u662f\u6267\u884c\u73af\u5883</p>"},{"location":"foundation/pointers-on-c/basic-concept/#_3","title":"\u7f16\u8bd1","text":"<p>\u7f16\u8bd1\u9636\u6bb5\u7531\u51e0\u4e2a\u6b65\u9aa4\u7ec4\u6210\uff0c\u7ec4\u6210\u4e00\u4e2a\u7a0b\u5e8f\u7684\u6bcf\u4e2a\uff08\u6709\u53ef\u80fd\u6709\u591a\u4e2a\uff09\u6e90\u6587\u4ef6\u901a\u8fc7\u7f16\u8bd1\u8fc7\u7a0b\u5206\u522b\u8f6c\u6362\u4e3a\u76ee\u6807\u4ee3\u7801 (object code)\u3002\u7136\u540e\uff0c\u5404\u4e2a\u76ee\u6807\u6587\u4ef6\u7531\u94fe\u63a5\u5668 (linker)\u6346\u7ed1\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u4e00\u4e2a\u5355\u4e00\u800c\u5b8c\u6574\u7684\u53ef\u6267\u884c\u7a0b\u5e8f\u3002\u94fe\u63a5\u5668\u540c\u65f6\u4e5f\u4f1a\u5f15\u5165\u6807\u51c6C\u51fd\u6570\u5e93\u4e2d\u4efb\u4f55\u88ab\u8be5\u7a0b\u5e8f\u6240\u7528\u5230\u7684\u51fd\u6570\uff0c\u800c\u4e14\u5b83\u4e5f\u53ef\u4ee5\u641c\u7d22\u7a0b\u5e8f\u5458\u4e2a\u4eba\u7684\u7a0b\u5e8f\u5e93\uff0c\u5c06\u5176\u4e2d\u9700\u8981\u4f7f\u7528\u7684\u51fd\u6570\u4e5f\u94fe\u63a5\u5230\u7a0b\u5e8f\u4e2d\u3002</p> <p></p> <p>\u7f16\u8bd1\u8fc7\u7a0b\u5177\u4f53\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u9636\u6bb5\uff1a</p> <ul> <li>\u9884\u5904\u7406\u5668 (preprocessor)\u5904\u7406</li> <li>\u7136\u540e\uff0c\u6e90\u4ee3\u7801\u7ecf\u8fc7\u89e3\u6790 (parse)\uff0c\u5224\u65ad\u5b83\u7684\u8bed\u53e5\u7684\u610f\u601d</li> <li>\u968f\u540e\uff0c\u4fbf\u4ea7\u751f\u76ee\u6807\u4ee3\u7801</li> <li>\u5982\u679c\u5728\u7f16\u8bd1\u65f6\u52a0\u5165\u4f18\u5316\u76f8\u5173\u547d\u4ee4\uff0c\u4f18\u5316\u5668 (optimizer)\u5c31\u4f1a\u5bf9\u76ee\u6807\u4ee3\u7801\u8fdb\u4e00\u6b65\u8fdb\u884c\u5904\u7406\uff0c\u4f7f\u5b83\u6548\u7387\u66f4\u9ad8</li> </ul>"},{"location":"foundation/pointers-on-c/basic-concept/#_4","title":"\u6267\u884c","text":"<p>\u7a0b\u5e8f\u7684\u6267\u884c\u8fc7\u7a0b\u4e5f\u9700\u8981\u7ecf\u5386\u51e0\u4e2a\u9636\u6bb5\u3002</p> <ul> <li>\u9996\u5148\uff0c\u7a0b\u5e8f\u5fc5\u987b\u8f7d\u5165\u5230\u5185\u5b58\u4e2d\uff0c\u8fd9\u4e2a\u4efb\u52a1\u7531\u64cd\u4f5c\u7cfb\u7edf\u5b8c\u6210\u3002</li> <li>\u7136\u540e\uff0c\u7a0b\u5e8f\u7684\u6267\u884c\u4fbf\u5f00\u59cb\u3002\u901a\u5e38\u4e00\u4e2a\u5c0f\u578b\u7684\u542f\u52a8\u7a0b\u5e8f\u4f1a\u4e0e\u7a0b\u5e8f\u94fe\u63a5\u5728\u4e00\u8d77\u3002\u5b83\u8d1f\u8d23\u5904\u7406\u4e00\u7cfb\u5217\u65e5\u5e38\u4e8b\u52a1\uff0c\u5982\u6536\u96c6\u547d\u540d\u884c\u53c2\u6570\u4ee5\u4fbf\u4f7f\u7a0b\u5e8f\u80fd\u591f\u8bbf\u95ee\u5b83\u4eec\u3002\u63a5\u7740\uff0c\u4fbf\u8c03\u7528main\u51fd\u6570\u3002</li> <li>\u73b0\u5728\uff0c\u4fbf\u5f00\u59cb\u6267\u884c\u7a0b\u5e8f\u4ee3\u7801\u3002\u5728\u7edd\u5927\u591a\u6570\u673a\u5668\u91cc\uff0c\u7a0b\u5e8f\u5c06\u4f7f\u7528\u4e00\u4e2a\u8fd0\u884c\u65f6\u5806\u6808 (stack)\uff0c\u5b83\u7528\u4e8e\u5b58\u50a8\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\u548c\u8fd4\u56de\u5730\u5740\u3002\u7a0b\u5e8f\u540c\u65f6\u4e5f\u53ef\u4ee5\u4f7f\u7528\u9759\u6001 (static)\u5185\u5b58\uff0c\u5b58\u50a8\u4e8e\u9759\u6001\u5185\u5b58\u4e2d\u7684\u53d8\u91cf\u5728\u7a0b\u5e8f\u7684\u6574\u4e2a\u6267\u884c\u8fc7\u7a0b\u4e2d\u5c06\u4e00\u76f4\u4fdd\u7559\u5b83\u4eec\u7684\u503c\u3002</li> <li>\u7a0b\u5e8f\u6267\u884c\u7684\u6700\u540e\u4e00\u4e2a\u9636\u6bb5\u5c31\u662f\u7a0b\u5e8f\u7684\u7ec8\u6b62\uff0c\u5b83\u53ef\u4ee5\u7531\u591a\u79cd\u4e0d\u540c\u7684\u539f\u56e0\u5f15\u8d77\u3002</li> </ul>"},{"location":"foundation/pointers-on-c/basic-concept/#_5","title":"\u8bcd\u6cd5\u89c4\u5219","text":"<p>\u8bcd\u6cd5\u89c4\u5219\u5c31\u50cf\u82f1\u8bed\u4e2d\u7684\u62fc\u5199\u89c4\u5219\uff0c\u51b3\u5b9a\u4f60\u5728\u6e90\u7a0b\u5e8f\u4e2d\u5982\u4f55\u5f62\u6210\u5355\u72ec\u7684\u5b57\u7b26\u7247\u6bb5\uff0c\u4e5f\u5c31\u662f\u6807\u8bb0 (token)\u3002</p> <p>\u4e00\u4e2a ANSI C \u7a0b\u5e8f\u7531\u58f0\u660e\u548c\u51fd\u6570\u7ec4\u6210\uff1a</p> <ul> <li>\u51fd\u6570\u5b9a\u4e49\u4e86\u9700\u8981\u6267\u884c\u7684\u5de5\u4f5c</li> <li>\u800c\u58f0\u660e\u5219\u63cf\u8ff0\u4e86\u51fd\u6570\u548c\uff08\u6216\uff09\u51fd\u6570\u5c06\u8981\u64cd\u4f5c\u7684\u6570\u636e\u7c7b\u578b\uff08\u6709\u65f6\u5019\u662f\u6570\u636e\u672c\u8eab\uff09\u3002</li> </ul>"},{"location":"foundation/pointers-on-c/basic-concept/#_6","title":"\u6ce8\u91ca","text":"<p>C\u8bed\u8a00\u7684\u6ce8\u91ca\u4ee5\u5b57\u7b26/\u5f00\u59cb\uff0c\u4ee5\u5b57\u7b26/\u7ed3\u675f\uff0c\u4e2d\u95f4\u53ef\u4ee5\u5305\u542b\u9664/\u4e4b\u5916\u7684\u4efb\u4f55\u5b57\u7b26\u3002\u5728\u6e90\u4ee3\u7801\u4e2d\uff0c\u4e00\u4e2a\u6ce8\u91ca\u53ef\u80fd\u8de8\u8d8a\u591a\u884c\uff0c\u4f46\u5b83\u4e0d\u80fd\u5d4c\u5957\u4e8e\u53e6\u4e00\u4e2a\u6ce8\u91ca\u4e2d\u3002\u6ce8\u610f\uff0c/\u6216*/\u5982\u679c\u51fa\u73b0\u5728\u5b57\u7b26\u4e32\u5b57\u9762\u503c\u5185\u90e8\uff0c\u5c31\u4e0d\u518d\u8d77\u6ce8\u91ca\u5b9a\u754c\u7b26\u7684\u4f5c\u7528\u3002</p> <p>\u6240\u6709\u7684\u6ce8\u91ca\u90fd\u4f1a\u88ab\u9884\u5904\u7406\u5668\u62ff\u6389\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\u4e00\u4e2a\u7a7a\u683c\u3002\u56e0\u6b64\uff0c\u6ce8\u91ca\u53ef\u4ee5\u51fa\u73b0\u4e8e\u4efb\u4f55\u7a7a\u683c\u53ef\u4ee5\u51fa\u73b0\u7684\u5730\u65b9\u3002</p>"},{"location":"foundation/pointers-on-c/basic-concept/#_7","title":"\u81ea\u7531\u5f62\u5f0f\u7684\u6e90\u4ee3\u7801","text":"<p>C \u662f\u4e00\u79cd\u81ea\u7531\u5f62\u5f0f\u7684\u8bed\u8a00\uff0c\u4e5f\u5c31\u662f\u8bf4\u5e76\u6ca1\u6709\u89c4\u5219\u89c4\u5b9a\u4ec0\u4e48\u5730\u65b9\u53ef\u4ee5\u4e66\u5199\u8bed\u53e5\uff0c\u4e00\u884c\u4e2d\u53ef\u4ee5\u51fa\u73b0\u591a\u5c11\u6761\u8bed\u53e5\uff0c\u4ec0\u4e48\u5730\u65b9\u5e94\u8be5\u7559\u4e0b\u7a7a\u767d\u4ee5\u53ca\u5e94\u8be5\u51fa\u73b0\u591a\u5c11\u7a7a\u767d\u7b49 \u3002</p> <p>\u552f\u4e00\u7684\u89c4\u5219\u5c31\u662f\u76f8\u90bb\u7684\u6807\u8bb0\u4e4b\u95f4\u5fc5\u987b\u51fa\u73b0\u4e00\u81f3\u591a\u4e2a\u7a7a\u767d\u5b57\u7b26(\u6216\u6ce8\u91ca)\uff0c\u4e0d\u7136\u5b83\u4eec\u53ef\u80fd\u88ab\u89e3\u91ca\u4e3a\u5355\u4e2a\u6807\u8bb0\u3002</p>"},{"location":"foundation/pointers-on-c/basic-concept/#_8","title":"\u6807\u8bc6\u7b26","text":"<p>\u6807\u8bc6\u7b26(identifier)\u5c31\u662f\u53d8\u91cf\u3001\u51fd\u6570\u3001\u7c7b\u578b\u7b49\u7684\u540d\u5b57\u3002\u5b83\u4eec\u7531\u5927\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4f46\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u3002</p> <p>C\u662f\u4e00\u79cd\u5927\u5c0f\u5199\u654f\u611f\u7684\u8bed\u8a00\uff0c\u6240\u4ee5abc\u3001Abc\u3001abC\u548cABC\u662f4\u4e2a\u4e0d\u540c\u7684\u6807\u8bc6\u7b26\u3002\u6807\u8bc6\u7b26\u7684\u957f\u5ea6\u6ca1\u6709\u9650\u5236\uff0c\u4f46\u6807\u51c6\u5141\u8bb8\u7f16\u8bd1\u5668\u5ffd\u7565\u7b2c31\u4e2a\u5b57\u7b26\u4ee5\u540e\u7684\u5b57\u7b26\u3002\u6807\u51c6\u540c\u65f6\u5141\u8bb8\u7f16\u8bd1\u5668\u5bf9\u7528\u4e8e\u8868\u793a\u5916\u90e8\u540d\u5b57\uff08\u4e5f\u5c31\u662f\u7531\u94fe\u63a5\u5668\u64cd\u7eb5\u7684\u540d\u5b57\uff09\u7684\u6807\u8bc6\u7b26\u8fdb\u884c\u9650\u5236\uff0c\u53ea\u8bc6\u522b\u524d\u516d\u4f4d\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u5b57\u7b26\u3002</p>"},{"location":"foundation/pointers-on-c/basic-concept/#_9","title":"\u7a0b\u5e8f\u7684\u5f62\u5f0f","text":"<p>\u4e00\u4e2aC\u7a0b\u5e8f\u53ef\u80fd\u4fdd\u5b58\u4e8e\u4e00\u4e2a\u6216\u591a\u4e2a\u6e90\u6587\u4ef6\u4e2d\u3002\u867d\u7136\u4e00\u4e2a\u6e90\u6587\u4ef6\u53ef\u4ee5\u5305\u542b\u8d85\u8fc7\u4e00\u4e2a\u7684\u51fd\u6570\uff0c\u4f46\u6bcf\u4e2a\u51fd\u6570\u90fd\u5fc5\u987b\u5b8c\u6574\u5730\u51fa\u73b0\u4e8e\u540c\u4e00\u4e2a\u6e90\u6587\u4ef6\u4e2d\u3002</p>"},{"location":"foundation/pointers-on-c/basic-concept/#_10","title":"\u5c0f\u7ed3","text":"<p>\u4e00\u4e2aC\u7a0b\u5e8f\u7684\u6e90\u4ee3\u7801\u4fdd\u5b58\u5728\u4e00\u4e2a\u6216\u591a\u4e2a\u6e90\u6587\u4ef6\u4e2d\uff0c\u4f46\u4e00\u4e2a\u51fd\u6570\u53ea\u80fd\u5b8c\u6574\u5730\u51fa\u73b0\u5728\u540c\u4e00\u4e2a\u6e90\u6587\u4ef6\u4e2d\u3002\u628a\u76f8\u5173\u7684\u51fd\u6570\u653e\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u5185\u662f\u4e00\u79cd\u597d\u7b56\u7565\u3002\u6bcf\u4e2a\u6e90\u6587\u4ef6\u90fd\u5206\u522b\u7f16\u8bd1\uff0c\u4ea7\u751f\u5bf9\u5e94\u7684\u76ee\u6807\u6587\u4ef6\u3002\u7136\u540e\uff0c\u76ee\u6807\u6587\u4ef6\u88ab\u94fe\u63a5\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u53ef\u6267\u884c\u7a0b\u5e8f\u3002\u7f16\u8bd1\u548c\u6700\u7ec8\u8fd0\u884c\u7a0b\u5e8f\u7684\u673a\u5668\u6709\u53ef\u80fd\u76f8\u540c\uff0c\u4e5f\u53ef\u80fd\u4e0d\u540c\u3002</p> <p>\u7a0b\u5e8f\u5fc5\u987b\u8f7d\u5165\u5230\u5185\u5b58\u4e2d\u624d\u80fd\u6267\u884c\u3002\u5728\u5bbf\u4e3b\u5f0f\u73af\u5883\u4e2d\uff0c\u8fd9\u4e2a\u4efb\u52a1\u7531\u64cd\u4f5c\u7cfb\u7edf\u5b8c\u6210\u3002\u5728\u81ea\u7531\u5f0f\u73af\u5883\u4e2d\uff0c\u7a0b\u5e8f\u5e38\u5e38\u6c38\u4e45\u5b58\u50a8\u4e8eROM\u4e2d\u3002\u7ecf\u8fc7\u521d\u59cb\u5316\u7684\u9759\u6001\u53d8\u91cf\u5728\u7a0b\u5e8f\u6267\u884c\u524d\u80fd\u83b7\u5f97\u5b83\u4eec\u7684\u503c\u3002\u4f60\u7684\u7a0b\u5e8f\u6267\u884c\u7684\u8d77\u70b9\u662fmain\u51fd\u6570\u3002\u7edd\u5927\u591a\u6570\u73af\u5883\u4f7f\u7528\u5806\u6808\u6765\u5b58\u50a8\u5c40\u90e8\u53d8\u91cf\u548c\u5176\u4ed6\u6570\u636e\u3002</p> <p>C\u7f16\u8bd1\u5668\u6240\u4f7f\u7528\u7684\u5b57\u7b26\u96c6\u5fc5\u987b\u5305\u62ec\u67d0\u4e9b\u7279\u5b9a\u7684\u5b57\u7b26\u3002\u5982\u679c\u4f60\u4f7f\u7528\u7684\u5b57\u7b26\u96c6\u7f3a\u5c11\u67d0\u4e9b\u5b57\u7b26\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e09\u5b57\u6bcd\u8bcd\u6765\u4ee3\u66ff\u3002\u8f6c\u4e49\u5e8f\u5217\u4f7f\u67d0\u4e9b\u65e0\u6cd5\u6253\u5370\u7684\u5b57\u7b26\u5f97\u4ee5\u8868\u8fbe\uff0c\u4f8b\u5982\u5728\u7a0b\u5e8f\u4e2d\u5305\u542b\u67d0\u4e9b\u7a7a\u767d\u5b57\u7b26\u3002</p> <p>\u6ce8\u91ca\u4ee5/\u5f00\u59cb\uff0c\u4ee5/\u7ed3\u675f\uff0c\u5b83\u4e0d\u5141\u8bb8\u5d4c\u5957\u3002\u6ce8\u91ca\u5c06\u88ab\u9884\u5904\u7406\u5668\u53bb\u9664\u3002\u6807\u8bc6\u7b26\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4f46\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u3002\u5728\u6807\u8bc6\u7b26\u4e2d\uff0c\u5927\u5199\u5b57\u6bcd\u548c\u5c0f\u5199\u5b57\u6bcd\u662f\u4e0d\u4e00\u6837\u7684\u3002\u5173\u952e\u5b57\u7531\u7cfb\u7edf\u4fdd\u7559\uff0c\u4e0d\u80fd\u4f5c\u4e3a\u6807\u8bc6\u7b26\u4f7f\u7528\u3002C\u662f\u4e00\u79cd\u81ea\u7531\u5f62\u5f0f\u7684\u8bed\u8a00\u3002\u4f46\u662f\uff0c\u7528\u6e05\u695a\u7684\u98ce\u683c\u6765\u7f16\u5199\u7a0b\u5e8f\u6709\u52a9\u4e8e\u7a0b\u5e8f\u7684\u9605\u8bfb\u548c\u7ef4\u62a4</p>"},{"location":"foundation/pointers-on-c/basic-concept/#_11","title":"\u7f16\u7a0b\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/basic-concept/#1","title":"\u7ec3\u4e60 1","text":"<p>\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u5b83\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6C\u6e90\u4ee3\u7801\uff0c\u5e76\u9a8c\u8bc1\u6240\u6709\u7684\u82b1\u62ec\u53f7\u90fd\u6b63\u786e\u5730\u6210\u5bf9\u51fa\u73b0\u3002\u6ce8\u610f\uff1a\u4f60\u4e0d\u5fc5\u62c5\u5fc3\u6ce8\u91ca\u5185\u90e8\u3001\u5b57\u7b26\u4e32\u5e38\u91cf\u5185\u90e8\u548c\u5b57\u7b26\u5e38\u91cf\u5f62\u5f0f\u7684\u82b1\u62ec\u53f7\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int c, braceCount = 0;\n\n    while ((c = getchar()) != EOF) {\n        if (c == '{') {\n            ++braceCount;\n        } else if (c == '}') {\n            --braceCount;\n            if (braceCount &lt; 0) {\n                // \u66f4\u591a\u7684\u53f3\u82b1\u62ec\u53f7\u800c\u4e0d\u662f\u5de6\u82b1\u62ec\u53f7\n                printf(\"\u9519\u8bef\uff1a\u591a\u4f59\u7684\u53f3\u82b1\u62ec\u53f7\\n\");\n                return 1;\n            }\n        }\n    }\n\n    if (braceCount &gt; 0) {\n        // \u66f4\u591a\u7684\u5de6\u82b1\u62ec\u53f7\u800c\u4e0d\u662f\u53f3\u82b1\u62ec\u53f7\n        printf(\"\u9519\u8bef\uff1a\u672a\u95ed\u5408\u7684\u5de6\u82b1\u62ec\u53f7\\n\");\n    } else {\n        printf(\"\u6240\u6709\u82b1\u62ec\u53f7\u6b63\u786e\u6210\u5bf9\u51fa\u73b0\u3002\\n\");\n    }\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/char-and-string/","title":"\u5b57\u7b26\u4e32\u3001\u5b57\u7b26\u548c\u5b57\u8282","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p> <p>\u5b57\u7b26\u4e32\u662f\u4e00\u79cd\u91cd\u8981\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4f46\u662fC\u8bed\u8a00\u5e76\u6ca1\u6709\u663e\u5f0f\u7684\u5b57\u7b26\u4e32\u6570\u636e\u7c7b\u578b\uff0c\u56e0\u4e3a\u5b57\u7b26\u4e32\u4ee5\u5b57\u7b26\u4e32\u5e38\u91cf\u7684\u5f62\u5f0f\u51fa\u73b0\u6216\u8005\u5b58\u50a8\u4e8e\u5b57\u7b26\u6570\u7ec4\u4e2d\u3002</p>"},{"location":"foundation/pointers-on-c/char-and-string/#_2","title":"\u5b57\u7b26\u4e32\u57fa\u7840","text":"<p>\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u56de\u987e\u4e00\u4e0b\u5b57\u7b26\u4e32\u7684\u57fa\u7840\u77e5\u8bc6\u3002\u5b57\u7b26\u4e32\u5c31\u662f\u4e00\u4e32\u96f6\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26\uff0c\u5e76\u4e14\u4ee5\u4e00\u4e2a\u4f4d\u6a21\u5f0f\u4e3a\u51680\u7684NUL\u5b57\u8282\u7ed3\u5c3e\u3002\u56e0\u6b64\uff0c\u5b57\u7b26\u4e32\u6240\u5305\u542b\u7684\u5b57\u7b26\u5185\u90e8\u4e0d\u80fd\u51fa\u73b0NUL\u5b57\u8282\u3002\u8fd9\u4e2a\u9650\u5236\u5f88\u5c11\u4f1a\u5f15\u8d77\u95ee\u9898\uff0c\u56e0\u4e3aNUL\u5b57\u8282\u5e76\u4e0d\u5b58\u5728\u4e0e\u5b83\u76f8\u5173\u8054\u7684\u53ef\u6253\u5370\u5b57\u7b26\uff0c\u8fd9\u4e5f\u662f\u5b83\u88ab\u9009\u4e3a\u7ec8\u6b62\u7b26\u7684\u539f\u56e0\u3002NUL\u5b57\u8282\u662f\u5b57\u7b26\u4e32\u7684\u7ec8\u6b62\u7b26\uff0c\u4f46\u5b83\u672c\u8eab\u5e76\u4e0d\u662f\u5b57\u7b26\u4e32\u7684\u4e00\u90e8\u5206\uff0c\u6240\u4ee5\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u5e76\u4e0d\u5305\u62ecNUL\u5b57\u8282\u3002</p>"},{"location":"foundation/pointers-on-c/char-and-string/#_3","title":"\u5b57\u7b26\u4e32\u67e5\u627e\u57fa\u7840","text":""},{"location":"foundation/pointers-on-c/char-and-string/#_4","title":"\u67e5\u627e\u4e00\u4e2a\u5b57\u7b26","text":"<p>\u5728\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u67e5\u627e\u4e00\u4e2a\u7279\u5b9a\u5b57\u7b26\u6700\u5bb9\u6613\u7684\u65b9\u6cd5\u662f\u4f7f\u7528strchr\u548cstrrchr\u51fd\u6570</p>"},{"location":"foundation/pointers-on-c/char-and-string/#_5","title":"\u67e5\u627e\u4efb\u4f55\u51e0\u4e2a\u5b57\u7b26","text":"<p>strpbrk\u662f\u4e2a\u66f4\u4e3a\u5e38\u89c1\u7684\u51fd\u6570\u3002\u5b83\u5e76\u4e0d\u662f\u67e5\u627e\u67d0\u4e2a\u7279\u5b9a\u7684\u5b57\u7b26\uff0c\u800c\u662f\u67e5\u627e\u4efb\u4f55\u4e00\u7ec4\u5b57\u7b26\u7b2c1\u6b21\u5728\u5b57\u7b26\u4e32\u4e2d\u51fa\u73b0\u7684\u4f4d\u7f6e</p>"},{"location":"foundation/pointers-on-c/char-and-string/#_6","title":"\u67e5\u627e\u4e00\u4e2a\u5b50\u4e32","text":"<p>\u4e3a\u4e86\u5728\u5b57\u7b26\u4e32\u4e2d\u67e5\u627e\u4e00\u4e2a\u5b50\u4e32\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528strstr\u51fd\u6570</p>"},{"location":"foundation/pointers-on-c/char-and-string/#_7","title":"\u9ad8\u7ea7\u5b57\u7b26\u4e32\u67e5\u627e","text":""},{"location":"foundation/pointers-on-c/char-and-string/#_8","title":"\u67e5\u627e\u4e00\u4e2a\u5b57\u7b26\u4e32\u524d\u7f00","text":"<p>strspn\u548cstrcspn\u51fd\u6570\u7528\u4e8e\u5728\u5b57\u7b26\u4e32\u7684\u8d77\u59cb\u4f4d\u7f6e\u5bf9\u5b57\u7b26\u8ba1\u6570</p>"},{"location":"foundation/pointers-on-c/char-and-string/#_9","title":"\u67e5\u627e\u6807\u8bb0","text":"<p>\u4e00\u4e2a\u5b57\u7b26\u4e32\u5e38\u5e38\u5305\u542b\u51e0\u4e2a\u5355\u72ec\u7684\u90e8\u5206\uff0c\u5b83\u4eec\u5f7c\u6b64\u88ab\u5206\u9694\u5f00\u6765\u3002\u6bcf\u6b21\u4e3a\u4e86\u5904\u7406\u8fd9\u4e9b\u90e8\u5206\uff0c\u4f60\u9996\u5148\u5fc5\u987b\u628a\u5b83\u4eec\u4ece\u5b57\u7b26\u4e32\u4e2d\u62bd\u53d6\u51fa\u6765\u3002</p> <p>\u8fd9\u4e2a\u4efb\u52a1\u6b63\u662fstrtok\u51fd\u6570\u6240\u5b9e\u73b0\u7684\u529f\u80fd\u3002\u5b83\u4ece\u5b57\u7b26\u4e32\u4e2d\u9694\u79bb\u5404\u4e2a\u5355\u72ec\u7684\u79f0\u4e3a\u6807\u8bb0(token)\u7684\u90e8\u5206\uff0c\u5e76\u4e22\u5f03\u5206\u9694\u7b26</p>"},{"location":"foundation/pointers-on-c/char-and-string/#_10","title":"\u5185\u5b58\u64cd\u4f5c","text":"<p>\u6839\u636e\u5b9a\u4e49\uff0c\u5b57\u7b26\u4e32\u7531\u4e00\u4e2aNUL\u5b57\u8282\u7ed3\u5c3e\uff0c\u6240\u4ee5\u5b57\u7b26\u4e32\u5185\u90e8\u4e0d\u80fd\u5305\u542b\u4efb\u4f55NUL\u5b57\u7b26\u3002\u4f46\u662f\uff0c\u975e\u5b57\u7b26\u4e32\u6570\u636e\u5185\u90e8\u5305\u542b\u96f6\u503c\u7684\u60c5\u51b5\u5e76\u4e0d\u7f55\u89c1\u3002\u4f60\u65e0\u6cd5\u4f7f\u7528\u5b57\u7b26\u4e32\u51fd\u6570\u6765\u5904\u7406\u8fd9\u79cd\u7c7b\u578b\u7684\u6570\u636e\uff0c\u56e0\u4e3a\u5f53\u5b83\u4eec\u9047\u5230\u7b2c1\u4e2aNUL\u5b57\u8282\u65f6\u5c06\u505c\u6b62\u5de5\u4f5c\u3002</p> <p>\u4e0d\u8fc7\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53e6\u5916\u4e00\u7ec4\u76f8\u5173\u7684\u51fd\u6570\uff0c\u5b83\u4eec\u7684\u64cd\u4f5c\u4e0e\u5b57\u7b26\u4e32\u51fd\u6570\u7c7b\u4f3c\uff0c\u4f46\u8fd9\u4e9b\u51fd\u6570\u80fd\u591f\u5904\u7406\u4efb\u610f\u7684\u5b57\u8282\u5e8f\u5217\u3002</p>"},{"location":"foundation/pointers-on-c/char-and-string/#_11","title":"\u603b\u7ed3","text":"<p>\u5b57\u7b26\u4e32\u5c31\u662f\u96f6\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26\u7684\u5e8f\u5217\uff0c\u8be5\u5e8f\u5217\u4ee5\u4e00\u4e2aNUL\u5b57\u8282\u7ed3\u5c3e\u3002\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u5c31\u662f\u5b83\u6240\u5305\u542b\u7684\u5b57\u7b26\u7684\u6570\u76ee\u3002\u6807\u51c6\u5e93\u63d0\u4f9b\u4e86\u4e00\u4e9b\u51fd\u6570\u7528\u4e8e\u5904\u7406\u5b57\u7b26\u4e32\uff0c\u5b83\u4eec\u7684\u539f\u578b\u4f4d\u4e8e\u5934\u6587\u4ef6string.h\u4e2d\u3002</p> <p>strlen\u51fd\u6570\u7528\u4e8e\u8ba1\u7b97\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5b83\u7684\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u6240\u4ee5\u628a\u5b83\u7528\u4e8e\u8868\u8fbe\u5f0f\u65f6\u5e94\u8be5\u5c0f\u5fc3\u3002strcpy\u51fd\u6570\u628a\u4e00\u4e2a\u5b57\u7b26\u4e32\u4ece\u4e00\u4e2a\u4f4d\u7f6e\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u800cstrcat\u51fd\u6570\u628a\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u4e00\u4efd\u62f7\u8d1d\u6dfb\u52a0\u5230\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u540e\u9762\u3002\u8fd9\u4e24\u4e2a\u51fd\u6570\u90fd\u5047\u5b9a\u5b83\u4eec\u7684\u53c2\u6570\u662f\u6709\u6548\u7684\u5b57\u7b26\u4e32\uff0c\u800c\u4e14\u5982\u679c\u6e90\u5b57\u7b26\u4e32\u548c\u76ee\u6807\u5b57\u7b26\u4e32\u51fa\u73b0\u91cd\u53e0\uff0c\u51fd\u6570\u7684\u7ed3\u679c\u662f\u672a\u5b9a\u4e49\u7684\u3002strcmp\u5bf9\u4e24\u4e2a\u5b57\u7b26\u4e32\u8fdb\u884c\u8bcd\u5178\u5e8f\u7684\u6bd4\u8f83\u3002\u5b83\u7684\u8fd4\u56de\u503c\u63d0\u793a\u7b2c1\u4e2a\u5b57\u7b26\u4e32\u662f\u5927\u4e8e\u3001\u5c0f\u4e8e\u8fd8\u662f\u7b49\u4e8e\u7b2c2\u4e2a\u5b57\u7b26\u4e32\u3002</p> <p>\u957f\u5ea6\u53d7\u9650\u7684\u51fd\u6570strncpy\u3001strncat\u548cstrncmp\u90fd\u7c7b\u4f3c\u5b83\u4eec\u5bf9\u5e94\u7684\u4e0d\u53d7\u9650\u5236\u7248\u672c\u3002\u533a\u522b\u5728\u4e8e\u8fd9\u4e9b\u51fd\u6570\u8fd8\u63a5\u53d7\u4e00\u4e2a\u957f\u5ea6\u53c2\u6570\u3002\u5728strncpy\u4e2d\uff0c\u957f\u5ea6\u6307\u5b9a\u4e86\u591a\u5c11\u4e2a\u5b57\u7b26\u5c06\u88ab\u5199\u5165\u5230\u76ee\u6807\u5b57\u7b26\u6570\u7ec4\u4e2d\u3002\u5982\u679c\u6e90\u5b57\u7b26\u4e32\u6bd4\u6307\u5b9a\u957f\u5ea6\u66f4\u957f\uff0c\u7ed3\u679c\u5b57\u7b26\u4e32\u5c06\u4e0d\u4f1a\u4ee5NUL\u5b57\u8282\u7ed3\u5c3e\u3002strncat\u51fd\u6570\u7684\u957f\u5ea6\u53c2\u6570\u6307\u5b9a\u4ece\u6e90\u5b57\u7b26\u4e32\u590d\u5236\u8fc7\u6765\u7684\u5b57\u7b26\u7684\u6700\u5927\u6570\u76ee\uff0c\u4f46\u5b83\u7684\u7ed3\u679c\u59cb\u7ec8\u4ee5\u4e00\u4e2aNUL\u5b57\u8282\u7ed3\u5c3e\u3002strcmp\u51fd\u6570\u7684\u957f\u5ea6\u53c2\u6570\u7528\u4e8e\u9650\u5b9a\u5b57\u7b26\u6bd4\u8f83\u7684\u6570\u76ee\u3002\u5982\u679c\u4e24\u4e2a\u5b57\u7b26\u4e32\u5728\u6307\u5b9a\u7684\u6570\u76ee\u91cc\u4e0d\u5b58\u5728\u533a\u522b\uff0c\u5b83\u4eec\u4fbf\u88ab\u8ba4\u4e3a\u662f\u76f8\u7b49\u7684\u3002</p> <p>\u7528\u4e8e\u67e5\u627e\u5b57\u7b26\u4e32\u7684\u51fd\u6570\u6709\u597d\u51e0\u4e2a\u3002strchr\u51fd\u6570\u67e5\u627e\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u67d0\u4e2a\u5b57\u7b26\u7b2c1\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\u3002strrchr\u51fd\u6570\u67e5\u627e\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u67d0\u4e2a\u5b57\u7b26\u6700\u540e\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\u3002strpbrk\u5728\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u67e5\u627e\u4e00\u4e2a\u6307\u5b9a\u5b57\u7b26\u96c6\u4e2d\u4efb\u610f\u5b57\u7b26\u7b2c1\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\u3002strstr\u51fd\u6570\u5728\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u67e5\u627e\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u7b2c1\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\u3002</p> <p>\u6807\u51c6\u5e93\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u66f4\u52a0\u9ad8\u7ea7\u7684\u5b57\u7b26\u4e32\u67e5\u627e\u51fd\u6570\u3002strspn\u51fd\u6570\u8ba1\u7b97\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u8d77\u59cb\u90e8\u5206\u5339\u914d\u4e00\u4e2a\u6307\u5b9a\u5b57\u7b26\u96c6\u4e2d\u4efb\u610f\u5b57\u7b26\u7684\u5b57\u7b26\u6570\u91cf\u3002strcspn\u51fd\u6570\u8ba1\u7b97\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u8d77\u59cb\u90e8\u5206\u4e0d\u5339\u914d\u4e00\u4e2a\u6307\u5b9a\u5b57\u7b26\u96c6\u4e2d\u4efb\u610f\u5b57\u7b26\u7684\u5b57\u7b26\u6570\u91cf\u3002strtok\u51fd\u6570\u628a\u4e00\u4e2a\u5b57\u7b26\u4e32\u5206\u5272\u6210\u51e0\u4e2a\u6807\u8bb0\u3002\u6bcf\u6b21\u5f53\u5b83\u8c03\u7528\u65f6\uff0c\u90fd\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u5b57\u7b26\u4e32\u4e2d\u4e0b\u4e00\u4e2a\u6807\u8bb0\u4f4d\u7f6e\u7684\u6307\u9488\u3002\u8fd9\u4e9b\u6807\u8bb0\u7531\u4e00\u4e2a\u6307\u5b9a\u5b57\u7b26\u96c6\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26\u5206\u9694\u3002</p> <p>strerror\u628a\u4e00\u4e2a\u9519\u8bef\u4ee3\u7801\u4f5c\u4e3a\u5b83\u7684\u53c2\u6570\u3002\u5b83\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u5b57\u7b26\u4e32\u7684\u6307\u9488\uff0c\u8be5\u5b57\u7b26\u4e32\u7528\u4e8e\u63cf\u8ff0\u8fd9\u4e2a\u9519\u8bef\u3002</p> <p>\u6807\u51c6\u5e93\u8fd8\u63d0\u4f9b\u4e86\u5404\u79cd\u7528\u4e8e\u6d4b\u8bd5\u548c\u8f6c\u6362\u5b57\u7b26\u7684\u51fd\u6570\u3002\u4f7f\u7528\u8fd9\u4e9b\u51fd\u6570\u7684\u7a0b\u5e8f\u6bd4\u90a3\u4e9b\u81ea\u5df1\u6267\u884c\u5b57\u7b26\u6d4b\u8bd5\u548c\u8f6c\u6362\u7684\u7a0b\u5e8f\u66f4\u5177\u79fb\u690d\u6027\u3002toupper\u51fd\u6570\u628a\u4e00\u4e2a\u5c0f\u5199\u5b57\u6bcd\u5b57\u7b26\u8f6c\u6362\u4e3a\u5927\u5199\u5f62\u5f0f\uff0ctolower\u51fd\u6570\u5219\u6267\u884c\u76f8\u53cd\u7684\u4efb\u52a1\u3002iscntrl\u51fd\u6570\u68c0\u67e5\u5b83\u7684\u53c2\u6570\u662f\u4e0d\u662f\u4e00\u4e2a\u63a7\u5236\u5b57\u7b26\uff0cisspace\u51fd\u6570\u6d4b\u8bd5\u5b83\u7684\u53c2\u6570\u662f\u5426\u4e3a\u7a7a\u767d\u5b57\u7b26\u3002isdigit\u51fd\u6570\u7528\u4e8e\u6d4b\u8bd5\u5b83\u7684\u53c2\u6570\u662f\u5426\u4e3a\u4e00\u4e2a\u5341\u8fdb\u5236\u6570\u5b57\u5b57\u7b26\uff0cisxdigit\u51fd\u6570\u5219\u68c0\u67e5\u5b83\u7684\u53c2\u6570\u662f\u5426\u4e3a\u4e00\u4e2a\u5341\u516d\u8fdb\u5236\u6570\u5b57\u5b57\u7b26\u3002islower\u548cisupper\u51fd\u6570\u5206\u522b\u68c0\u67e5\u5b83\u4eec\u7684\u53c2\u6570\u662f\u5426\u4e3a\u5927\u5199\u548c\u5c0f\u5199\u5b57\u6bcd\u3002isalpha\u51fd\u6570\u68c0\u67e5\u5b83\u7684\u53c2\u6570\u662f\u5426\u4e3a\u5b57\u6bcd\u5b57\u7b26\uff0cisalnum\u51fd\u6570\u68c0\u67e5\u5b83\u7684\u53c2\u6570\u662f\u5426\u4e3a\u5b57\u6bcd\u6216\u6570\u5b57\u5b57\u7b26\uff0cispunct\u51fd\u6570\u68c0\u67e5\u5b83\u7684\u53c2\u6570\u662f\u5426\u4e3a\u6807\u70b9\u7b26\u53f7\u5b57\u7b26\u3002\u6700\u540e\uff0cisgraph\u51fd\u6570\u68c0\u67e5\u5b83\u7684\u53c2\u6570\u662f\u5426\u4e3a\u56fe\u5f62\u5b57\u7b26\uff0cisprint\u51fd\u6570\u68c0\u67e5\u5b83\u7684\u53c2\u6570\u662f\u5426\u4e3a\u56fe\u5f62\u5b57\u7b26\u6216\u7a7a\u767d\u5b57\u7b26\u3002</p> <p>memxxx\u51fd\u6570\u63d0\u4f9b\u4e86\u7c7b\u4f3c\u5b57\u7b26\u4e32\u51fd\u6570\u7684\u80fd\u529b\uff0c\u4f46\u5b83\u4eec\u53ef\u4ee5\u5904\u7406\u5305\u62ecNUL\u5b57\u8282\u5728\u5185\u7684\u4efb\u610f\u5b57\u8282\u3002\u8fd9\u4e9b\u51fd\u6570\u90fd\u63a5\u53d7\u4e00\u4e2a\u957f\u5ea6\u53c2\u6570\u3002memcpy\u4ece\u6e90\u53c2\u6570\u5411\u76ee\u6807\u53c2\u6570\u590d\u5236\u7531\u957f\u5ea6\u53c2\u6570\u6307\u5b9a\u7684\u5b57\u8282\u6570\u3002memmove\u51fd\u6570\u6267\u884c\u76f8\u540c\u7684\u529f\u80fd\uff0c\u4f46\u5b83\u80fd\u591f\u6b63\u786e\u5904\u7406\u6e90\u53c2\u6570\u548c\u76ee\u6807\u53c2\u6570\u51fa\u73b0\u91cd\u7b2c9\u7ae0\u3000\u5b57\u7b26\u4e32\u3001\u5b57\u7b26\u548c\u5b57\u8282 \u5b57\u7b26\u4e32\u662f\u4e00\u79cd\u91cd\u8981\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4f46\u662fC\u8bed\u8a00\u5e76\u6ca1\u6709\u663e\u5f0f\u7684\u5b57\u7b26\u4e32\u6570\u636e\u7c7b\u578b\uff0c\u56e0\u4e3a\u5b57\u7b26\u4e32\u4ee5\u5b57\u7b26\u4e32\u5e38\u91cf\u7684\u5f62\u5f0f\u51fa\u73b0\u6216\u8005\u5b58\u50a8\u4e8e\u5b57\u7b26\u6570\u7ec4\u4e2d\u3002\u5b57\u7b26\u4e32\u5e38\u91cf\u5f88\u9002\u7528\u4e8e\u90a3\u4e9b\u7a0b\u5e8f\u4e0d\u4f1a\u5bf9\u5b83\u4eec\u8fdb\u884c\u4fee\u6539\u7684\u5b57\u7b26\u4e32\u3002\u6240\u6709\u5176\u4ed6\u5b57\u7b26\u4e32\u90fd\u5fc5\u987b\u5b58\u50a8\u4e8e\u5b57\u7b26\u6570\u7ec4\u6216\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u4e2d\uff08\u89c1\u7b2c11\u7ae0\uff09\u3002\u672c\u7ae0\u63cf\u8ff0\u5904\u7406\u5b57\u7b26\u4e32\u548c\u5b57\u7b26\u7684\u5e93\u51fd\u6570\uff0c\u4ee5\u53ca\u4e00\u7ec4\u76f8\u5173\u7684\uff0c\u5177\u6709\u7c7b\u4f3c\u80fd\u529b\u7684\uff0c\u65e2\u53ef\u4ee5\u5904\u7406\u5b57\u7b26\u4e32\u4e5f\u53ef\u4ee5\u5904\u7406\u975e\u5b57\u7b26\u4e32\u6570\u636e\u7684\u51fd\u6570\u3002</p>"},{"location":"foundation/pointers-on-c/char-and-string/#_12","title":"\u7f16\u7a0b\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/char-and-string/#1","title":"\u7ec3\u4e60 1","text":"<p>\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u4e00\u4e9b\u5b57\u7b26\uff0c\u5e76\u7edf\u8ba1\u4e0b\u5217\u5404\u7c7b\u5b57\u7b26\u6240\u5360\u7684\u767e\u5206\u6bd4\u3002</p> <p>\u63a7\u5236\u5b57\u7b26 \u7a7a\u767d\u5b57\u7b26 \u6570\u5b57 \u5c0f\u5199\u5b57\u6bcd \u5927\u5199\u5b57\u6bcd \u6807\u70b9\u7b26\u53f7 \u4e0d\u53ef\u6253\u5370\u7684\u5b57\u7b26</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main() {\n    int control = 0, space = 0, digit = 0, lower = 0, upper = 0, punct = 0, nonprint = 0, total = 0;\n    int ch;\n\n    // \u8bfb\u53d6\u5b57\u7b26\u76f4\u5230\u9047\u5230EOF\n    while ((ch = getchar()) != EOF) {\n        total++;\n\n        if (iscntrl(ch)) control++;\n        if (isspace(ch)) space++;\n        if (isdigit(ch)) digit++;\n        if (islower(ch)) lower++;\n        if (isupper(ch)) upper++;\n        if (ispunct(ch)) punct++;\n        if (ch &gt; 127) nonprint++; // \u975eASCII\u5b57\u7b26\n    }\n\n    // \u6253\u5370\u7edf\u8ba1\u7ed3\u679c\n    printf(\"\u603b\u5b57\u7b26\u6570: %d\\n\", total);\n    printf(\"\u63a7\u5236\u5b57\u7b26: %.2f%%\\n\", (double)control/total*100);\n    printf(\"\u7a7a\u767d\u5b57\u7b26: %.2f%%\\n\", (double)space/total*100);\n    printf(\"\u6570\u5b57: %.2f%%\\n\", (double)digit/total*100);\n    printf(\"\u5c0f\u5199\u5b57\u6bcd: %.2f%%\\n\", (double)lower/total*100);\n    printf(\"\u5927\u5199\u5b57\u6bcd: %.2f%%\\n\", (double)upper/total*100);\n    printf(\"\u6807\u70b9\u7b26\u53f7: %.2f%%\\n\", (double)punct/total*100);\n    printf(\"\u4e0d\u53ef\u6253\u5370\u7684\u5b57\u7b26: %.2f%%\\n\", (double)nonprint/total*100);\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/char-and-string/#2","title":"\u7ec3\u4e60 2","text":"<p>\u7f16\u5199\u4e00\u4e2a\u540d\u53ebmy_strcpy\u7684\u51fd\u6570\u3002\u5b83\u7c7b\u4f3c\u4e8estrcpy\u51fd\u6570\uff0c\u4f46\u5b83\u4e0d\u4f1a\u6ea2\u51fa\u76ee\u6807\u6570\u7ec4\u3002\u590d\u5236\u7684\u7ed3\u679c\u5fc5\u987b\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u5b57\u7b26\u4e32\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n\n// my_strcpy \u51fd\u6570\u7684\u58f0\u660e\nvoid my_strcpy(char *dest, const char *src, size_t destSize);\n\nint main() {\n    char dest[10];\n    const char *src = \"HelloWorld\";\n\n    // \u4f7f\u7528 my_strcpy \u590d\u5236\u5b57\u7b26\u4e32\uff0c\u786e\u4fdd\u4e0d\u53d1\u751f\u6ea2\u51fa\n    my_strcpy(dest, src, sizeof(dest));\n\n    printf(\"Copied string: %s\\n\", dest);\n    return 0;\n}\n\n// my_strcpy \u51fd\u6570\u7684\u5b9a\u4e49\nvoid my_strcpy(char *dest, const char *src, size_t destSize) {\n    if (destSize == 0) return; // \u5982\u679c\u76ee\u6807\u6570\u7ec4\u7684\u5927\u5c0f\u4e3a0\uff0c\u5219\u65e0\u6cd5\u8fdb\u884c\u590d\u5236\n\n    size_t i;\n    for (i = 0; i &lt; destSize - 1 &amp;&amp; src[i] != '\\0'; i++) {\n        dest[i] = src[i];\n    }\n    dest[i] = '\\0'; // \u786e\u4fdd\u5b57\u7b26\u4e32\u4ee5\u7a7a\u5b57\u7b26\u7ed3\u5c3e\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/char-and-string/#3","title":"\u7ec3\u4e60 3","text":"<p>\u7f16\u5199\u4e00\u4e2a\u540d\u53ebmy_strcat\u7684\u51fd\u6570\u3002\u5b83\u7c7b\u4f3c\u4e8estrcat\u51fd\u6570\uff0c\u4f46\u5b83\u4e0d\u4f1a\u6ea2\u51fa\u76ee\u6807\u6570\u7ec4\u3002\u5b83\u7684\u7ed3\u679c\u5fc5\u987b\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u5b57\u7b26\u4e32\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n\n// my_strcat \u51fd\u6570\u7684\u58f0\u660e\nvoid my_strcat(char *dest, const char *src, size_t destSize);\n\nint main() {\n    char dest[20] = \"Hello, \";\n    const char *src = \"World!\";\n\n    // \u4f7f\u7528 my_strcat \u8fde\u63a5\u4e24\u4e2a\u5b57\u7b26\u4e32\uff0c\u786e\u4fdd\u4e0d\u53d1\u751f\u6ea2\u51fa\n    my_strcat(dest, src, sizeof(dest));\n\n    printf(\"Concatenated string: %s\\n\", dest);\n    return 0;\n}\n\n// my_strcat \u51fd\u6570\u7684\u5b9a\u4e49\nvoid my_strcat(char *dest, const char *src, size_t destSize) {\n    size_t destLen = 0;\n    while (destLen &lt; destSize &amp;&amp; dest[destLen] != '\\0') {\n        destLen++; // \u8ba1\u7b97\u73b0\u6709\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff08\u4e0d\u5305\u62ec\u7ed3\u5c3e\u7684'\\0'\uff09\n    }\n\n    if (destLen == destSize) {\n        return; // \u5982\u679c\u76ee\u6807\u5b57\u7b26\u4e32\u5df2\u7ecf\u5360\u6ee1\u4e86\u6574\u4e2a\u6570\u7ec4\uff0c\u5219\u65e0\u6cd5\u6dfb\u52a0\u66f4\u591a\u5b57\u7b26\n    }\n\n    // \u590d\u5236\u6e90\u5b57\u7b26\u4e32\u5230\u76ee\u6807\u5b57\u7b26\u4e32\u7684\u672b\u7aef\uff0c\u76f4\u5230\u6e90\u5b57\u7b26\u4e32\u7ed3\u675f\u6216\u76ee\u6807\u6570\u7ec4\u88ab\u586b\u6ee1\n    size_t i;\n    for (i = 0; destLen + i &lt; destSize - 1 &amp;&amp; src[i] != '\\0'; i++) {\n        dest[destLen + i] = src[i];\n    }\n    dest[destLen + i] = '\\0'; // \u786e\u4fdd\u5b57\u7b26\u4e32\u4ee5'\\0'\u7ed3\u5c3e\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/char-and-string/#4","title":"\u7ec3\u4e60 4","text":"<p>\u7f16\u5199\u51fd\u6570</p> <pre><code>int palindrome( char *string );\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u5b57\u7b26\u4e32\u662f\u4e2a\u56de\u6587\uff0c\u51fd\u6570\u5c31\u8fd4\u56de\u771f\uff0c\u5426\u5219\u5c31\u8fd4\u56de\u5047\u3002\u56de\u6587\u5c31\u662f\u6307\u4e00\u4e2a\u5b57\u7b26\u4e32\u4ece\u5de6\u5411\u53f3\u8bfb\u548c\u4ece\u53f3\u5411\u5de6\u8bfb\u662f\u4e00\u6837\u7684 \u3002\u51fd\u6570\u5e94\u8be5\u5ffd\u7565\u6240\u6709\u7684\u975e\u5b57\u6bcd\u5b57\u7b26\uff0c\u800c\u4e14\u5728\u8fdb\u884c\u5b57\u7b26\u6bd4\u8f83\u65f6\u4e0d\u7528\u533a\u5206\u5927\u5c0f\u5199\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt; // \u5f15\u5165ctype.h\u4ee5\u4f7f\u7528isalpha\u548ctolower\u51fd\u6570\n\n// \u51fd\u6570\u58f0\u660e\nint palindrome(char *string);\n\nint main() {\n    char testString[] = \"A man, a plan, a canal: Panama\";\n\n    if (palindrome(testString)) {\n        printf(\"\\\"%s\\\" is a palindrome.\\n\", testString);\n    } else {\n        printf(\"\\\"%s\\\" is not a palindrome.\\n\", testString);\n    }\n\n    return 0;\n}\n\n// \u5224\u65ad\u5b57\u7b26\u4e32\u662f\u5426\u662f\u56de\u6587\u7684\u51fd\u6570\u5b9e\u73b0\nint palindrome(char *string) {\n    // \u9996\u5148\u786e\u5b9a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\n    int length = 0;\n    while (string[length] != '\\0') {\n        length++;\n    }\n\n    // \u4f7f\u7528\u53cc\u6307\u9488\u6280\u672f\uff0c\u4e00\u4e2a\u4ece\u524d\u5f80\u540e\uff0c\u4e00\u4e2a\u4ece\u540e\u5f80\u524d\n    int left = 0, right = length - 1;\n    while (left &lt; right) {\n        // \u5982\u679c\u5de6\u8fb9\u5b57\u7b26\u4e0d\u662f\u5b57\u6bcd\uff0c\u5219\u5de6\u6307\u9488\u53f3\u79fb\n        if (!isalpha((unsigned char)string[left])) {\n            left++;\n            continue;\n        }\n        // \u5982\u679c\u53f3\u8fb9\u5b57\u7b26\u4e0d\u662f\u5b57\u6bcd\uff0c\u5219\u53f3\u6307\u9488\u5de6\u79fb\n        if (!isalpha((unsigned char)string[right])) {\n            right--;\n            continue;\n        }\n        // \u6bd4\u8f83\u4e24\u8fb9\u7684\u5b57\u7b26\u662f\u5426\u76f8\u7b49\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\n        if (tolower((unsigned char)string[left]) != tolower((unsigned char)string[right])) {\n            return 0; // \u5982\u679c\u4e0d\u76f8\u7b49\uff0c\u8fd4\u56de0\n        }\n        // \u5982\u679c\u76f8\u7b49\uff0c\u7ee7\u7eed\u6bd4\u8f83\n        left++;\n        right--;\n    }\n    return 1; // \u5b57\u7b26\u4e32\u662f\u56de\u6587\uff0c\u8fd4\u56de1\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/data-type/","title":"\u6570\u636e\u7c7b\u578b","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p> <p>\u7a0b\u5e8f\u5bf9\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\uff0c\u672c\u7ae0\u5c06\u5bf9\u6570\u636e\u8fdb\u884c\u63cf\u8ff0\u3002\u63cf\u8ff0\u5b83\u7684\u5404\u79cd\u7c7b\u578b\uff0c\u63cf\u8ff0\u5b83\u7684\u7279\u70b9\u4ee5\u53ca\u5982\u4f55\u58f0\u660e\u5b83\u3002</p> <p>\u672c\u7ae0\u8fd8\u5c06\u63cf\u8ff0\u53d8\u91cf\u7684\u4e09\u4e2a\u5c5e\u6027\u2014\u2014\u4f5c\u7528\u57df\u3001\u94fe\u63a5\u5c5e\u6027\u548c\u5b58\u50a8\u7c7b\u578b\u3002\u8fd9\u4e09\u4e2a\u5c5e\u6027\u51b3\u5b9a\u4e86\u4e00\u4e2a\u53d8\u91cf\u7684\u201c\u53ef\u89c6\u6027\u201d\uff08\u4e5f\u5c31\u662f\u5b83\u53ef\u4ee5\u5728\u4ec0\u4e48\u5730\u65b9\u4f7f\u7528\uff09\u548c\u201c\u751f\u547d\u671f\u201d\uff08\u5b83\u7684\u503c\u5c06\u4fdd\u6301\u591a\u4e45\uff09\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_2","title":"\u57fa\u672c\u6570\u636e\u7c7b\u578b","text":"<p>\u5728C\u8bed\u8a00\u4e2d\uff0c\u4ec5\u67094\u79cd\u57fa\u672c\u6570\u636e\u7c7b\u578b\u2014\u2014\u6574\u578b\u3001\u6d6e\u70b9\u578b\u3001\u6307\u9488\u548c\u805a\u5408\u7c7b\u578b\uff08\u5982\u6570\u7ec4\u548c\u7ed3\u6784\u7b49\uff09\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_3","title":"\u6574\u578b\u5bb6\u65cf","text":"<p>\u6574\u578b\u5bb6\u65cf\u5305\u62ec\u5b57\u7b26\u3001\u77ed\u6574\u578b\u3001\u6574\u578b\u548c\u957f\u6574\u578b\uff0c\u5b83\u4eec\u90fd\u5206\u4e3a\u6709\u7b26\u53f7 (singed)\u548c\u65e0\u7b26\u53f7 (unsigned)\u4e24\u79cd\u7248\u672c\u3002</p> <p>\u542c\u4e0a\u53bb\u201c\u957f\u6574\u578b\u201d\u6240\u80fd\u8868\u793a\u7684\u503c\u5e94\u8be5\u6bd4\u201c\u77ed\u6574\u578b\u201d\u6240\u80fd\u8868\u793a\u7684\u503c\u8981\u5927\uff0c\u4f46\u8fd9\u4e2a\u5047\u8bbe\u5e76\u4e0d\u4e00\u5b9a\u6b63\u786e\u3002\u89c4\u5b9a\u6574\u578b\u503c\u76f8\u4e92\u4e4b\u95f4\u5927\u5c0f\u7684\u89c4\u5219\u5f88\u7b80\u5355\uff1a</p> <p>\u957f\u6574\u578b\u81f3\u5c11\u5e94\u8be5\u548c\u6574\u578b\u4e00\u6837\u957f\uff0c\u800c\u6574\u578b\u81f3\u5c11\u5e94\u8be5\u548c\u77ed\u6574\u578b\u4e00\u6837\u957f\u3002</p> <p>short int\u81f3\u5c1116\u4f4d\uff0clong int\u81f3\u5c1132\u4f4d\u3002\u81f3\u4e8e\u7f3a\u7701\u7684int\u7a76\u7adf\u662f16\u4f4d\u8fd8\u662f32\u4f4d\uff0c\u6216\u8005\u662f\u5176\u4ed6\u503c\uff0c\u5219\u7531\u7f16\u8bd1\u5668\u8bbe\u8ba1\u8005\u51b3\u5b9a\u3002</p> <p>\u540c\u65f6\u4f60\u8fd8\u5e94\u8be5\u6ce8\u610f\u5230\u6807\u51c6\u4e5f\u6ca1\u6709\u89c4\u5b9a\u8fd93\u4e2a\u503c\u5fc5\u987b\u4e0d\u4e00\u6837\u3002\u5982\u679c\u67d0\u79cd\u673a\u5668\u7684\u73af\u5883\u7684\u5b57\u957f\u662f32\u4f4d\uff0c\u800c\u4e14\u6ca1\u6709\u4ec0\u4e48\u6307\u4ee4\u80fd\u591f\u66f4\u6709\u6548\u5730\u5904\u7406\u66f4\u77ed\u7684\u6574\u578b\u503c\uff0c\u5b83\u53ef\u80fd\u628a\u8fd93\u4e2a\u6574\u578b\u503c\u90fd\u8bbe\u5b9a\u4e3a32\u4f4d\u3002</p> <p>\u5c3d\u7ba1\u8bbe\u8ba1char\u7c7b\u578b\u53d8\u91cf\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u8ba9\u5b83\u4eec\u5bb9\u7eb3\u5b57\u7b26\u578b\u503c\uff0c\u4f46\u5b57\u7b26\u5728\u672c\u8d28\u4e0a\u662f\u5c0f\u6574\u578b\u503c\u3002\u7f3a\u7701\u7684char\u8981\u4e48\u662fsigned char\uff0c\u8981\u4e48\u662funsigned char\uff0c\u8fd9\u53d6\u51b3\u4e8e\u7f16\u8bd1\u5668\u3002</p> <p>\u8fd9\u4e2a\u4e8b\u5b9e\u610f\u5473\u7740\u4e0d\u540c\u673a\u5668\u4e0a\u7684char\u53ef\u80fd\u62e5\u6709\u4e0d\u540c\u8303\u56f4\u7684\u503c\u3002\u6240\u4ee5\uff0c\u53ea\u6709\u5f53\u7a0b\u5e8f\u6240\u4f7f\u7528\u7684char\u578b\u53d8\u91cf\u7684\u503c\u4f4d\u4e8esigned char\u548cunsigned char\u7684\u4ea4\u96c6\u4e2d\uff0c\u8fd9\u4e2a\u7a0b\u5e8f\u624d\u662f\u53ef\u79fb\u690d\u7684\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_4","title":"\u6574\u578b\u5b57\u9762\u503c","text":"<p>\u5b57\u9762\u503c (literal) \u8fd9\u4e2a\u672f\u8bed\u662f\u5b57\u9762\u503c\u5e38\u91cf\u7684\u7f29\u5199\u2014\u2014\u8fd9\u662f\u4e00\u79cd\u5b9e\u4f53\uff0c\u6307\u5b9a\u4e86\u81ea\u8eab\u7684\u503c\uff0c\u5e76\u4e14\u4e0d\u5141\u8bb8\u53d1\u751f\u6539\u53d8\u3002</p> <p>\u5341\u8fdb\u5236\u6574\u578b\u5b57\u9762\u503c\u53ef\u80fd\u662fint\u3001long\u6216unsigned long\u3002\u5728\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u5b83\u662f\u6700\u77ed\u7c7b\u578b\u4f46\u80fd\u5b8c\u6574\u5bb9\u7eb3\u8fd9\u4e2a\u503c\u3002</p> <p>\u6574\u6570\u4e5f\u53ef\u4ee5\u7528\u516b\u8fdb\u5236\u6765\u8868\u793a\uff0c\u53ea\u8981\u5728\u6570\u503c\u524d\u9762\u4ee50\u5f00\u5934\u3002\u6574\u6570\u4e5f\u53ef\u4ee5\u7528\u5341\u516d\u8fdb\u5236\u6765\u8868\u793a\uff0c\u5b83\u4ee50x\u5f00\u5934\u3002</p> <p>\u516b\u8fdb\u5236\u548c\u5341\u516d\u8fdb\u5236\u5b57\u9762\u503c\u53ef\u80fd\u7684\u7c7b\u578b\u662fint\u3001unsigned int\u3001long\u6216unsigned long\u3002\u5728\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u5b57\u9762\u503c\u7684\u7c7b\u578b\u5c31\u662f\u4e0a\u8ff0\u7c7b\u578b\u4e2d\u6700\u77ed\u4f46\u8db3\u4ee5\u5bb9\u7eb3\u6574\u4e2a\u503c\u7684\u7c7b\u578b\u3002</p> <p>\u53e6\u5916\u8fd8\u6709\u5b57\u7b26\u5e38\u91cf\u3002\u5b83\u4eec\u7684\u7c7b\u578b\u603b\u662fint\u3002\u4f60\u4e0d\u80fd\u5728\u5b83\u4eec\u540e\u9762\u6dfb\u52a0unsigned\u6216long\u540e\u7f00\u3002\u5b57\u7b26\u5e38\u91cf\u5c31\u662f\u4e00\u4e2a\u7528\u5355\u5f15\u53f7\u5305\u56f4\u8d77\u6765\u7684\u5355\u4e2a\u5b57\u7b26\uff08\u6216\u5b57\u7b26\u8f6c\u4e49\u5e8f\u5217\u6216\u4e09\u5b57\u6bcd\u8bcd\uff09\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_5","title":"\u679a\u4e3e\u7c7b\u578b","text":"<p>\u679a\u4e3e (enumerated)\u7c7b\u578b\u5c31\u662f\u6307\u5b83\u7684\u503c\u4e3a\u7b26\u53f7\u5e38\u91cf\u800c\u4e0d\u662f\u5b57\u9762\u503c\u7684\u7c7b\u578b\uff0c\u5b83\u4eec\u4ee5\u4e0b\u9762\u8fd9\u79cd\u5f62\u5f0f\u58f0\u660e\uff1a</p> <pre><code>enum Jar_Type { CUP, PINT, QUART, HALF_GALLON, GALLON };\n</code></pre> <p>\u8fd9\u79cd\u7c7b\u578b\u7684\u53d8\u91cf\u5b9e\u9645\u4e0a\u4ee5\u6574\u578b\u7684\u65b9\u5f0f\u5b58\u50a8\uff0c\u8fd9\u4e9b\u7b26\u53f7\u540d\u7684\u5b9e\u9645\u503c\u90fd\u662f\u6574\u578b\u503c\u3002\u8fd9\u91ccCUP\u662f0\uff0cPINT\u662f1\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u9002\u5f53\u7684\u65f6\u5019\uff0c\u4f60\u53ef\u4ee5\u4e3a\u8fd9\u4e9b\u7b26\u53f7\u540d\u6307\u5b9a\u7279\u5b9a\u7684\u6574\u578b\u503c\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>enum Jar_Type { CUP = 8, PINT = 16, QUART = 32,\n\u3000\u3000\u3000\u3000\u3000HALF_GALLON = 64, GALLON = 128 };\n</code></pre>"},{"location":"foundation/pointers-on-c/data-type/#_6","title":"\u6d6e\u70b9\u7c7b\u578b","text":"<p>\u8bf8\u59823.14159\u548c6.0231023 \u8fd9\u6837\u7684\u6570\u503c\u65e0\u6cd5\u6309\u7167\u6574\u6570\u5b58\u50a8\u3002\u7b2c\u4e00\u4e2a\u6570\u5e76\u975e\u6574\u6570\uff0c\u800c\u7b2c\u4e8c\u4e2a\u6570\u8fdc\u8fdc\u8d85\u51fa\u4e86\u8ba1\u7b97\u673a\u6574\u6570\u6240\u80fd\u8868\u8fbe\u7684\u8303\u56f4\u3002\u4f46\u662f\uff0c\u5b83\u4eec\u53ef\u4ee5\u7528\u6d6e\u70b9\u6570\u7684\u5f62\u5f0f\u5b58\u50a8\u3002\u5b83\u4eec\u901a\u5e38\u4ee5\u4e00\u4e2a\u5c0f\u6570\u4ee5\u53ca\u4e00\u4e2a\u4ee5\u67d0\u4e2a\u5047\u5b9a\u6570\u4e3a\u57fa\u6570\u7684\u6307\u6570\u7ec4\u6210</p> <p>\u6d6e\u70b9\u6570\u5bb6\u65cf\u5305\u62ecfloat\u3001double\u548clong double\u7c7b\u578b\u3002\u901a\u5e38\uff0c\u8fd9\u4e9b\u7c7b\u578b\u5206\u522b\u63d0\u4f9b\u5355\u7cbe\u5ea6\u3001\u53cc\u7cbe\u5ea6\u4ee5\u53ca\u5728\u67d0\u4e9b\u652f\u6301\u6269\u5c55\u7cbe\u5ea6\u7684\u673a\u5668\u4e0a\u63d0\u4f9b\u6269\u5c55\u7cbe\u5ea6\u3002ANSI\u6807\u51c6\u4ec5\u4ec5\u89c4\u5b9along double\u81f3\u5c11\u548cdouble\u4e00\u6837\u957f\uff0c\u800cdouble\u81f3\u5c11\u548cfloat\u4e00\u6837\u957f\u3002\u6807\u51c6\u540c\u65f6\u89c4\u5b9a\u4e86\u4e00\u4e2a\u6700\u5c0f\u8303\u56f4\uff1a\u6240\u6709\u6d6e\u70b9\u7c7b\u578b\u81f3\u5c11\u80fd\u591f\u5bb9\u7eb3\u4ece10- 37 \u52301037 \u4e4b\u95f4\u7684\u4efb\u4f55\u503c\u3002</p> <p>\u6d6e\u70b9\u6570\u5b57\u9762\u503c\u5728\u7f3a\u7701\u60c5\u51b5\u4e0b\u90fd\u662fdouble\u7c7b\u578b\u7684\uff0c\u9664\u975e\u5b83\u7684\u540e\u9762\u8ddf\u4e00\u4e2aL\u6216l\u8868\u793a\u5b83\u662f\u4e00\u4e2along double\u7c7b\u578b\u7684\u503c\uff0c\u6216\u8005\u8ddf\u4e00\u4e2aF\u6216f\u8868\u793a\u5b83\u662f\u4e00\u4e2afloat\u7c7b\u578b\u7684\u503c\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_7","title":"\u6307\u9488","text":"<p>\u6307\u9488\u662f C \u8bed\u8a00\u4e3a\u4ec0\u4e48\u5982\u6b64\u6d41\u884c\u7684\u4e00\u4e2a\u91cd\u8981\u539f\u56e0\u3002\u6307\u9488\u53ef\u4ee5\u6709\u6548\u5730\u5b9e\u73b0\u8bf8\u5982 tree\u548clist \u8fd9\u7c7b\u9ad8\u7ea7\u6570\u636e\u7ed3\u6784\u3002\u7528C\u8bed\u8a00\u53ef\u4ee5\u6bd4\u4f7f\u7528\u5176\u4ed6\u8bed\u8a00\u7f16\u5199\u51fa\u66f4\u4e3a\u7d27\u51d1\u548c\u6709\u6548\u7684\u7a0b\u5e8f\uff0c\u4f46\u540c\u65f6 C \u5bf9\u6307\u9488\u4f7f\u7528\u7684\u4e0d\u52a0\u9650\u5236\u6b63\u662f\u8bb8\u591a\u4ee4\u4eba\u6b32\u54ed\u65e0\u6cea\u548c\u54ac\u7259\u5207\u9f7f\u7684\u9519\u8bef\u7684\u6839\u6e90\u3002</p> <p>\u53d8\u91cf\u7684\u503c\u5b58\u50a8\u4e8e\u8ba1\u7b97\u673a\u7684\u5185\u5b58\u4e2d\uff0c\u6bcf\u4e2a\u53d8\u91cf\u90fd\u5360\u636e\u4e00\u4e2a\u7279\u5b9a\u7684\u4f4d\u7f6e\u3002\u6bcf\u4e2a\u5185\u5b58\u4f4d\u7f6e\u90fd\u7531\u5730\u5740 \u552f\u4e00\u786e\u5b9a\u5e76\u5f15\u7528\uff0c\u5c31\u50cf\u4e00\u6761\u8857\u9053\u4e0a\u7684\u623f\u5b50\u7531\u5b83\u4eec\u7684\u95e8\u724c\u53f7\u7801\u6807\u8bc6\u4e00\u6837\u3002\u6307\u9488\u53ea\u662f\u5730\u5740\u7684\u53e6\u4e00\u4e2a\u540d\u5b57\u7f62\u4e86\u3002\u6307\u9488\u53d8\u91cf\u5c31\u662f\u4e00\u4e2a\u5176\u503c\u4e3a\u53e6\u5916\u4e00\u4e2a\uff08\u4e00\u4e9b\uff09\u5185\u5b58\u5730\u5740\u7684\u53d8\u91cf\u3002C\u8bed\u8a00\u62e5\u6709\u4e00\u4e9b\u64cd\u4f5c\u7b26\uff0c\u4f60\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e2a\u53d8\u91cf\u7684\u5730\u5740\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u6307\u9488\u53d8\u91cf\u53d6\u5f97\u5b83\u6240\u6307\u5411\u7684\u503c\u6216\u6570\u636e\u7ed3\u6784\u3002</p> <p>\u901a\u8fc7\u5730\u5740\u800c\u4e0d\u662f\u540d\u5b57\u6765\u8bbf\u95ee\u6570\u636e\u7684\u60f3\u6cd5\u5e38\u5e38\u4f1a\u5f15\u8d77\u6df7\u6dc6\u3002\u4e8b\u5b9e\u4e0a\u4f60\u4e0d\u8be5\u88ab\u641e\u6df7\uff0c\u56e0\u4e3a\u5728\u65e5\u5e38\u751f\u6d3b\u4e2d\uff0c\u6709\u5f88\u591a\u4e1c\u897f\u90fd\u662f\u8fd9\u6837\u7684\u3002\u6bd4\u5982\u7528\u95e8\u724c\u53f7\u7801\u6765\u6807\u8bc6\u4e00\u6761\u8857\u9053\u4e0a\u7684\u623f\u5b50\u5c31\u662f\u5982\u6b64\uff0c\u6ca1\u6709\u4eba\u4f1a\u628a\u623f\u5b50\u7684\u95e8\u724c\u53f7\u7801\u548c\u623f\u5b50\u91cc\u9762\u7684\u4e1c\u897f\u641e\u6df7\u3002</p> <p>\u6307\u9488\u4e5f\u5b8c\u5168\u4e00\u6837\u3002\u4f60\u53ef\u4ee5\u628a\u8ba1\u7b97\u673a\u7684\u5185\u5b58\u60f3\u8c61\u6210\u4e00\u6761\u957f\u8857\u4e0a\u7684\u4e00\u95f4\u95f4\u623f\u5b50\uff0c\u6bcf\u95f4\u623f\u5b50\u90fd\u7528\u4e00\u4e2a\u552f\u4e00\u7684\u53f7\u7801\u8fdb\u884c\u6807\u8bc6\u3002\u6bcf\u4e2a\u4f4d\u7f6e\u5305\u542b\u4e00\u4e2a\u503c\uff0c\u8fd9\u548c\u5b83\u7684\u5730\u5740\u662f\u72ec\u7acb\u4e14\u663e\u8457\u4e0d\u540c\u7684\uff0c\u5373\u4f7f\u5b83\u4eec\u90fd\u662f\u6570\u5b57\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_8","title":"\u6307\u9488\u5e38\u91cf","text":"<p>\u6307\u9488\u5e38\u91cf\u4e0e\u975e\u6307\u9488\u5e38\u91cf\u5728\u672c\u8d28\u4e0a\u662f\u4e0d\u540c\u7684\uff0c\u56e0\u4e3a\u7f16\u8bd1\u5668\u8d1f\u8d23\u628a\u53d8\u91cf\u8d4b\u503c\u7ed9\u8ba1\u7b97\u673a\u5185\u5b58\u4e2d\u7684\u4f4d\u7f6e\uff0c\u7a0b\u5e8f\u5458\u4e8b\u5148\u65e0\u6cd5\u77e5\u9053\u67d0\u4e2a\u7279\u5b9a\u7684\u53d8\u91cf\u5c06\u5b58\u50a8\u5230\u5185\u5b58\u4e2d\u7684\u54ea\u4e2a\u4f4d\u7f6e\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u5f53\u4e00\u4e2a\u51fd\u6570\u6bcf\u6b21\u88ab\u8c03\u7528\u65f6\uff0c\u5b83\u7684\u81ea\u52a8\u53d8\u91cf\uff08\u5c40\u90e8\u53d8\u91cf\uff09\u53ef\u80fd\u6bcf\u6b21\u5206\u914d\u7684\u5185\u5b58\u4f4d\u7f6e\u90fd\u4e0d\u76f8\u540c\u3002\u56e0\u6b64\uff0c\u628a\u6307\u9488\u5e38\u91cf\u8868\u8fbe\u4e3a\u6570\u503c\u5b57\u9762\u503c\u7684\u5f62\u5f0f\u51e0\u4e4e\u6ca1\u6709\u7528\u5904\uff0c\u6240\u4ee5C\u8bed\u8a00\u5185\u90e8\u5e76\u6ca1\u6709\u7279\u5730\u5b9a\u4e49\u8fd9\u4e2a\u6982\u5ff5</p>"},{"location":"foundation/pointers-on-c/data-type/#_9","title":"\u5b57\u7b26\u4e32\u5e38\u91cf","text":"<p>\u8bb8\u591a\u4eba\u5bf9C\u8bed\u8a00\u4e0d\u5b58\u5728\u5b57\u7b26\u4e32\u7c7b\u578b\u611f\u5230\u5947\u602a\uff0c\u4e0d\u8fc7C\u8bed\u8a00\u63d0\u4f9b\u4e86\u5b57\u7b26\u4e32\u5e38\u91cf\u3002\u4e8b\u5b9e\u4e0a\uff0cC\u8bed\u8a00\u5b58\u5728\u5b57\u7b26\u4e32\u7684\u6982\u5ff5\uff1a\u5b83\u5c31\u662f\u4e00\u4e32\u4ee5NUL\u5b57\u8282\u7ed3\u5c3e\u7684\u96f6\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26\u3002\u5b57\u7b26\u4e32\u901a\u5e38\u5b58\u50a8\u5728\u5b57\u7b26\u6570\u7ec4\u4e2d\uff0c\u8fd9\u4e5f\u662fC\u8bed\u8a00\u6ca1\u6709\u663e\u5f0f\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u539f\u56e0\u3002\u7531\u4e8eNUL\u5b57\u8282\u662f\u7528\u4e8e\u7ec8\u7ed3\u5b57\u7b26\u4e32\u7684\uff0c\u6240\u4ee5\u5728\u5b57\u7b26\u4e32\u5185\u90e8\u4e0d\u80fd\u6709NUL\u5b57\u8282\u3002\u4e0d\u8fc7\uff0c\u5728\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u9650\u5236\u5e76\u4e0d\u4f1a\u9020\u6210\u95ee\u9898\u3002\u4e4b\u6240\u4ee5\u9009\u62e9NUL\u4f5c\u4e3a\u5b57\u7b26\u4e32\u7684\u7ec8\u6b62\u7b26\uff0c\u662f\u56e0\u4e3a\u5b83\u4e0d\u662f\u4e00\u4e2a\u53ef\u6253\u5370\u7684\u5b57\u7b26\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_10","title":"\u57fa\u672c\u58f0\u660e","text":"<p>\u53ea\u77e5\u9053\u57fa\u672c\u7684\u6570\u636e\u7c7b\u578b\u8fd8\u8fdc\u8fdc\u4e0d\u591f\uff0c\u4f60\u8fd8\u5e94\u8be5\u77e5\u9053\u600e\u6837\u58f0\u660e\u53d8\u91cf\u3002\u53d8\u91cf\u58f0\u660e\u7684\u57fa\u672c\u5f62\u5f0f\u662f\uff1a</p> <pre><code>\u8bf4\u660e\u7b26\uff08\u4e00\u4e2a\u6216\u591a\u4e2a\uff09\u3000\u58f0\u660e\u8868\u8fbe\u5f0f\u5217\u8868\n\nint\u3000i;\nchar\u3000j, k, l;\n</code></pre>"},{"location":"foundation/pointers-on-c/data-type/#_11","title":"\u58f0\u660e\u6307\u9488","text":"<pre><code>int\u3000\u3000*a;\n</code></pre> <p>\u8fd9\u6761\u8bed\u53e5\u8868\u793a\u8868\u8fbe\u5f0f a\u4ea7\u751f\u7684\u7ed3\u679c\u7c7b\u578b\u662fint\u3002\u77e5\u9053\u4e86 \u64cd\u4f5c\u7b26\u6267\u884c\u7684\u662f\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u4ee5\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u63a8\u65ada\u80af\u5b9a\u662f\u4e00\u4e2a\u6307\u5411int\u7684\u6307\u9488\u3002</p> <p>C\u5728\u672c\u8d28\u4e0a\u662f\u4e00\u79cd\u81ea\u7531\u5f62\u5f0f\u7684\u8bed\u8a00\uff0c\u8fd9\u5f88\u5bb9\u6613\u8bf1\u4f7f\u4f60\u628a\u661f\u53f7\u5199\u5728\u9760\u8fd1\u7c7b\u578b\u7684\u4e00\u4fa7\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>int*\u3000a;\n</code></pre> <p>\u8fd9\u4e2a\u58f0\u660e\u4e0e\u524d\u9762\u4e00\u4e2a\u58f0\u660e\u5177\u6709\u76f8\u540c\u7684\u610f\u601d\uff0c\u800c\u4e14\u770b\u4e0a\u53bb\u66f4\u4e3a\u6e05\u695a\uff0ca\u88ab\u58f0\u660e\u4e3a\u7c7b\u578b\u4e3aint*\u7684\u6307\u9488\u3002\u4f46\u662f\uff0c\u8fd9\u5e76\u4e0d\u662f\u4e00\u4e2a\u597d\u6280\u5de7\uff0c\u539f\u56e0\u5982\u4e0b\uff1a</p> <pre><code>int*\u3000b, c, d;\n</code></pre> <p>\u4eba\u4eec\u5f88\u81ea\u7136\u5730\u4ee5\u4e3a\u8fd9\u6761\u8bed\u53e5\u628a\u6240\u6709\u4e09\u4e2a\u53d8\u91cf\u58f0\u660e\u4e3a\u6307\u5411\u6574\u578b\u7684\u6307\u9488\uff0c\u4f46\u4e8b\u5b9e\u4e0a\u5e76\u975e\u5982\u6b64\u3002\u6211\u4eec\u88ab\u5b83\u7684\u5f62\u5f0f\u611a\u5f04\u4e86\u3002\u661f\u53f7\u5b9e\u9645\u4e0a\u662f\u8868\u8fbe\u5f0f*b\u7684\u4e00\u90e8\u5206\uff0c\u53ea\u5bf9\u8fd9\u4e2a\u6807\u8bc6\u7b26\u6709\u7528\u3002b\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u4f46\u5176\u4f59\u4e24\u4e2a\u53d8\u91cf\u53ea\u662f\u666e\u901a\u7684\u6574\u578b\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_12","title":"\u9690\u5f0f\u58f0\u660e","text":"<p>C\u8bed\u8a00\u4e2d\u6709\u51e0\u79cd\u58f0\u660e\uff0c\u5b83\u7684\u7c7b\u578b\u540d\u53ef\u4ee5\u7701\u7565\u3002\u4f8b\u5982\uff0c\u51fd\u6570\u5982\u679c\u4e0d\u663e\u5f0f\u5730\u58f0\u660e\u8fd4\u56de\u503c\u7684\u7c7b\u578b\uff0c\u5b83\u5c31\u9ed8\u8ba4\u8fd4\u56de\u6574\u578b\u3002\u5f53\u4f60\u4f7f\u7528\u65e7\u98ce\u683c\u58f0\u660e\u51fd\u6570\u7684\u5f62\u5f0f\u53c2\u6570\u65f6\uff0c\u5982\u679c\u7701\u7565\u4e86\u53c2\u6570\u7684\u7c7b\u578b\uff0c\u7f16\u8bd1\u5668\u5c31\u4f1a\u9ed8\u8ba4\u5b83\u4eec\u4e3a\u6574\u578b\u3002\u6700\u540e\uff0c\u5982\u679c\u7f16\u8bd1\u5668\u53ef\u4ee5\u5f97\u5230\u5145\u8db3\u7684\u4fe1\u606f\uff0c\u63a8\u65ad\u51fa\u4e00\u6761\u8bed\u53e5\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u58f0\u660e\u65f6\uff0c\u5982\u679c\u5b83\u7f3a\u5c11\u7c7b\u578b\u540d\uff0c\u7f16\u8bd1\u5668\u4f1a\u5047\u5b9a\u5b83\u4e3a\u6574\u578b\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#typedef","title":"typedef","text":"<p>C\u8bed\u8a00\u652f\u6301\u4e00\u79cd\u53eb\u4f5ctypedef\u7684\u673a\u5236\uff0c\u5b83\u5141\u8bb8\u4f60\u4e3a\u5404\u79cd\u6570\u636e\u7c7b\u578b\u5b9a\u4e49\u65b0\u540d\u5b57\u3002typedef\u58f0\u660e\u7684\u5199\u6cd5\u548c\u666e\u901a\u7684\u58f0\u660e\u57fa\u672c\u76f8\u540c\uff0c\u53ea\u662f\u628atypedef\u8fd9\u4e2a\u5173\u952e\u5b57\u51fa\u73b0\u5728\u58f0\u660e\u7684\u524d\u9762\u3002\u4f8b\u5982\uff0c\u4e0b\u9762\u8fd9\u4e2a\u58f0\u660e\uff1a</p> <pre><code>typedef char\u3000*ptr_to_char;\n</code></pre> <p>\u8fd9\u4e2a\u58f0\u660e\u628a\u6807\u8bc6\u7b26ptr_to_char\u4f5c\u4e3a\u6307\u5411\u5b57\u7b26\u7684\u6307\u9488\u7c7b\u578b\u7684\u65b0\u540d\u5b57\u3002\u4f60\u53ef\u4ee5\u50cf\u4f7f\u7528\u4efb\u4f55\u9884\u5b9a\u4e49\u540d\u5b57\u4e00\u6837\u5728\u4e0b\u9762\u7684\u58f0\u660e\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u65b0\u540d\u5b57\u3002\u4f8b\u5982\uff1a</p> <pre><code>ptr_to_char\u3000\u3000\u3000a;\n</code></pre> <p>\u58f0\u660ea\u662f\u4e00\u4e2a\u6307\u5411\u5b57\u7b26\u7684\u6307\u9488\u3002</p> <p>\u4f7f\u7528typedef\u58f0\u660e\u7c7b\u578b\u53ef\u4ee5\u51cf\u5c11\u4f7f\u58f0\u660e\u53d8\u5f97\u53c8\u81ed\u53c8\u957f\u7684\u5371\u9669\uff0c\u5c24\u5176\u662f\u90a3\u4e9b\u590d\u6742\u7684\u58f0\u660e\u3002\u800c\u4e14\uff0c\u5982\u679c\u4f60\u4ee5\u540e\u89c9\u5f97\u5e94\u8be5\u4fee\u6539\u7a0b\u5e8f\u6240\u4f7f\u7528\u7684\u4e00\u4e9b\u6570\u636e\u7684\u7c7b\u578b\u65f6\uff0c\u4fee\u6539\u4e00\u4e2atypedef\u58f0\u660e\u6bd4\u4fee\u6539\u7a0b\u5e8f\u4e2d\u4e0e\u8fd9\u79cd\u7c7b\u578b\u6709\u5173\u7684\u6240\u6709\u53d8\u91cf\uff08\u548c\u51fd\u6570\uff09\u7684\u6240\u6709\u58f0\u660e\u8981\u5bb9\u6613\u5f97\u591a\u3002</p> <p>\u4f60\u5e94\u8be5\u4f7f\u7528typedef\u800c\u4e0d\u662f#define\u6765\u521b\u5efa\u65b0\u7684\u7c7b\u578b\u540d\uff0c\u56e0\u4e3a\u540e\u8005\u65e0\u6cd5\u6b63\u786e\u5730\u5904\u7406\u6307\u9488\u7c7b\u578b</p>"},{"location":"foundation/pointers-on-c/data-type/#_13","title":"\u5e38\u91cf","text":"<p>ANSI C\u5141\u8bb8\u4f60\u58f0\u660e\u5e38\u91cf\uff0c\u5e38\u91cf\u7684\u6837\u5b50\u548c\u53d8\u91cf\u5b8c\u5168\u4e00\u6837\uff0c\u53ea\u662f\u5b83\u4eec\u7684\u503c\u4e0d\u80fd\u4fee\u6539\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528const\u5173\u952e\u5b57\u6765\u58f0\u660e\u5e38\u91cf\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>int\u3000\u3000\u3000\u3000const\u3000\u3000a;\nconst\u3000\u3000\u3000\u3000int\u3000\u3000a;\n</code></pre> <p>\u8fd9\u4e24\u6761\u8bed\u53e5\u90fd\u628aa\u58f0\u660e\u4e3a\u4e00\u4e2a\u6574\u6570\uff0c\u5b83\u7684\u503c\u4e0d\u80fd\u88ab\u4fee\u6539\u3002\u4f60\u53ef\u4ee5\u9009\u62e9\u81ea\u5df1\u89c9\u5f97\u5bb9\u6613\u7406\u89e3\u7684\u4e00\u79cd\uff0c\u5e76\u4e00\u76f4\u575a\u6301\u4f7f\u7528\u540c\u4e00\u79cd\u5f62\u5f0f\u3002</p> <p>\u5f53\u7136\uff0c\u7531\u4e8ea\u7684\u503c\u65e0\u6cd5\u88ab\u4fee\u6539\uff0c\u6240\u4ee5\u4f60\u65e0\u6cd5\u628a\u4efb\u4f55\u4e1c\u897f\u8d4b\u503c\u7ed9\u5b83\u3002\u5982\u6b64\u4e00\u6765\uff0c\u4f60\u600e\u6837\u624d\u80fd\u8ba9\u5b83\u5728\u4e00\u5f00\u59cb\u62e5\u6709\u4e00\u4e2a\u503c\u5462\uff1f\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a\u9996\u5148\uff0c\u4f60\u53ef\u4ee5\u5728\u58f0\u660e\u65f6\u65f6\u5bf9\u5b83\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u5176\u6b21\uff0c\u5728\u51fd\u6570\u4e2d\u58f0\u660e\u4e3aconst\u7684\u5f62\u53c2\u5728\u51fd\u6570\u88ab\u8c03\u7528\u65f6\u4f1a\u5f97\u5230\u5b9e\u53c2\u7684\u503c\u3002</p> <p>define\u6307\u4ee4\u662f\u53e6\u4e00\u79cd\u521b\u5efa\u540d\u5b57\u5e38\u91cf\u7684\u673a\u5236\u3002\u4f8b\u5982\uff0c\u4e0b\u9762\u8fd9\u4e24\u4e2a\u58f0\u660e\u90fd\u4e3a50\u8fd9\u4e2a\u503c\u521b\u5efa\u4e86\u540d\u5b57\u5e38\u91cf\u3002</p> <pre><code>#define\u3000\u3000\u3000MAX_ELEMENTS\u3000 50\nint\u3000\u3000\u3000\u3000  const\u3000 max_eleemnts = 50;\n</code></pre> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528#define\u6bd4\u4f7f\u7528cosnt\u53d8\u91cf\u66f4\u597d\u3002\u56e0\u4e3a\u53ea\u8981\u5141\u8bb8\u4f7f\u7528\u5b57\u9762\u503c\u5e38\u91cf\u7684\u5730\u65b9\u90fd\u53ef\u4ee5\u4f7f\u7528\u524d\u8005\uff0c\u6bd4\u5982\u58f0\u660e\u6570\u7ec4\u7684\u957f\u5ea6\u3002const\u53d8\u91cf\u53ea\u80fd\u7528\u4e8e\u5141\u8bb8\u4f7f\u7528\u53d8\u91cf\u7684\u5730\u65b9\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_14","title":"\u4f5c\u7528\u57df","text":"<p>\u5f53\u53d8\u91cf\u5728\u7a0b\u5e8f\u7684\u67d0\u4e2a\u90e8\u5206\u88ab\u58f0\u660e\u65f6\uff0c\u5b83\u53ea\u6709\u5728\u7a0b\u5e8f\u7684\u4e00\u5b9a\u533a\u57df\u624d\u80fd\u88ab\u8bbf\u95ee\u3002\u8fd9\u4e2a\u533a\u57df\u7531\u6807\u8bc6\u7b26\u7684\u4f5c\u7528\u57df\uff08scope\uff09\u51b3\u5b9a\u3002\u6807\u8bc6\u7b26\u7684\u4f5c\u7528\u57df\u5c31\u662f\u7a0b\u5e8f\u4e2d\u8be5\u6807\u8bc6\u7b26\u53ef\u4ee5\u88ab\u4f7f\u7528\u7684\u533a\u57df\u3002</p> <p>\u4f8b\u5982\uff0c\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u5c40\u9650\u4e8e\u8be5\u51fd\u6570\u7684\u51fd\u6570\u4f53\u3002\u8fd9\u4e2a\u89c4\u5219\u610f\u5473\u7740\u4e24\u70b9\u3002\u9996\u5148\uff0c\u5176\u4ed6\u51fd\u6570\u90fd\u65e0\u6cd5\u901a\u8fc7\u8fd9\u4e9b\u53d8\u91cf\u7684\u540d\u5b57\u8bbf\u95ee\u5b83\u4eec\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u53d8\u91cf\u5728\u5b83\u4eec\u7684\u4f5c\u7528\u57df\u4e4b\u5916\u4fbf\u4e0d\u518d\u6709\u6548\u3002\u5176\u6b21\uff0c\u53ea\u8981\u5206\u5c5e\u4e0d\u540c\u7684\u4f5c\u7528\u57df\uff0c\u4f60\u53ef\u4ee5\u7ed9\u4e0d\u540c\u7684\u53d8\u91cf\u8d77\u540c\u4e00\u4e2a\u540d\u5b57\u3002</p> <p>\u7f16\u8bd1\u5668\u53ef\u4ee5\u786e\u8ba44\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u4f5c\u7528\u57df\u2014\u2014\u6587\u4ef6\u4f5c\u7528\u57df\u3001\u51fd\u6570\u4f5c\u7528\u57df\u3001\u4ee3\u7801\u5757\u4f5c\u7528\u57df\u548c\u539f\u578b\u4f5c\u7528\u57df\u3002\u6807\u8bc6\u7b26\u58f0\u660e\u7684\u4f4d\u7f6e\u51b3\u5b9a\u5b83\u7684\u4f5c\u7528\u57df\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_15","title":"\u4ee3\u7801\u5757\u4f5c\u7528\u57df","text":"<p>\u4f4d\u4e8e\u4e00\u5bf9\u82b1\u62ec\u53f7\u4e4b\u95f4\u7684\u6240\u6709\u8bed\u53e5\u79f0\u4e3a\u4e00\u4e2a\u4ee3\u7801\u5757\u3002\u4efb\u4f55\u5728\u4ee3\u7801\u5757\u7684\u5f00\u59cb\u4f4d\u7f6e\u58f0\u660e\u7684\u6807\u8bc6\u7b26\u90fd\u5177\u6709\u4ee3\u7801\u5757\u4f5c\u7528\u57df (block scope)\uff0c\u8868\u793a\u5b83\u4eec\u53ef\u4ee5\u88ab\u8fd9\u4e2a\u4ee3\u7801\u5757\u4e2d\u7684\u6240\u6709\u8bed\u53e5\u8bbf\u95ee\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_16","title":"\u6587\u4ef6\u4f5c\u7528\u57df","text":"<p>\u4efb\u4f55\u5728\u6240\u6709\u4ee3\u7801\u5757\u4e4b\u5916\u58f0\u660e\u7684\u6807\u8bc6\u7b26\u90fd\u5177\u6709\u6587\u4ef6\u4f5c\u7528\u57df (file scope)\uff0c\u5b83\u8868\u793a\u8fd9\u4e9b\u6807\u8bc6\u7b26\u4ece\u5b83\u4eec\u7684\u58f0\u660e\u4e4b\u5904\u76f4\u5230\u5b83\u6240\u5728\u7684\u6e90\u6587\u4ef6\u7ed3\u5c3e\u5904\u90fd\u662f\u53ef\u4ee5\u8bbf\u95ee\u7684\u3002</p> <p>\u5728\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u51fd\u6570\u540d\u4e5f\u5177\u6709\u6587\u4ef6\u4f5c\u7528\u57df\uff0c\u56e0\u4e3a\u51fd\u6570\u540d\u672c\u8eab\u5e76\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u4ee3\u7801\u5757\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_17","title":"\u539f\u578b\u4f5c\u7528\u57df","text":"<p>\u539f\u578b\u4f5c\u7528\u57df (prototype scope)\u53ea\u9002\u7528\u4e8e\u5728\u51fd\u6570\u539f\u578b\u4e2d\u58f0\u660e\u7684\u53c2\u6570\u540d\u3002\u5728\u539f\u578b\u4e2d\uff08\u4e0e\u51fd\u6570\u7684\u5b9a\u4e49\u4e0d\u540c\uff09\uff0c\u53c2\u6570\u7684\u540d\u5b57\u5e76\u975e\u5fc5\u9700\u3002\u4f46\u662f\uff0c\u5982\u679c\u51fa\u73b0\u53c2\u6570\u540d\uff0c\u4f60\u53ef\u4ee5\u968f\u4f60\u6240\u613f\u7ed9\u5b83\u4eec\u53d6\u4efb\u4f55\u540d\u5b57\uff0c\u5b83\u4eec\u4e0d\u5fc5\u4e0e\u51fd\u6570\u5b9a\u4e49\u4e2d\u7684\u5f62\u53c2\u540d\u5339\u914d\uff0c\u4e5f\u4e0d\u5fc5\u4e0e\u51fd\u6570\u5b9e\u9645\u8c03\u7528\u65f6\u6240\u4f20\u9012\u7684\u5b9e\u53c2\u5339\u914d\u3002</p> <p>\u539f\u578b\u4f5c\u7528\u57df\u9632\u6b62\u8fd9\u4e9b\u53c2\u6570\u540d\u4e0e\u7a0b\u5e8f\u5176\u4ed6\u90e8\u5206\u7684\u540d\u5b57\u51b2\u7a81\u3002\u4e8b\u5b9e\u4e0a\uff0c\u552f\u4e00\u53ef\u80fd\u51fa\u73b0\u7684\u51b2\u7a81\u5c31\u662f\u5728\u540c\u4e00\u4e2a\u539f\u578b\u4e2d\u4e0d\u6b62\u4e00\u6b21\u5730\u4f7f\u7528\u540c\u4e00\u4e2a\u540d\u5b57\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_18","title":"\u51fd\u6570\u4f5c\u7528\u57df","text":"<p>\u6700\u540e\u4e00\u79cd\u4f5c\u7528\u57df\u7684\u7c7b\u578b\u662f\u51fd\u6570\u4f5c\u7528\u57df (function scope)\u3002\u5b83\u53ea\u9002\u7528\u4e8e\u8bed\u53e5\u6807\u7b7e\uff0c\u8bed\u53e5\u6807\u7b7e\u7528\u4e8egoto\u8bed\u53e5\u3002\u57fa\u672c\u4e0a\uff0c\u51fd\u6570\u4f5c\u7528\u57df\u53ef\u4ee5\u7b80\u5316\u4e3a\u4e00\u6761\u89c4\u5219\u2014\u2014\u4e00\u4e2a\u51fd\u6570\u4e2d\u7684\u6240\u6709\u8bed\u53e5\u6807\u7b7e\u5fc5\u987b\u552f\u4e00\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_19","title":"\u94fe\u63a5\u5c5e\u6027","text":"<p>\u5f53\u7ec4\u6210\u4e00\u4e2a\u7a0b\u5e8f\u7684\u5404\u4e2a\u6e90\u6587\u4ef6\u5206\u522b\u88ab\u7f16\u8bd1\u4e4b\u540e\uff0c\u6240\u6709\u7684\u76ee\u6807\u6587\u4ef6\u4ee5\u53ca\u90a3\u4e9b\u4ece\u4e00\u4e2a\u6216\u591a\u4e2a\u51fd\u6570\u5e93\u4e2d\u5f15\u7528\u7684\u51fd\u6570\u94fe\u63a5\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u53ef\u6267\u884c\u7a0b\u5e8f\u3002</p> <p>\u7136\u800c\uff0c\u5982\u679c\u76f8\u540c\u7684\u6807\u8bc6\u7b26\u51fa\u73b0\u5728\u51e0\u4e2a\u4e0d\u540c\u7684\u6e90\u6587\u4ef6\u4e2d\u65f6\uff0c\u5b83\u4eec\u662f\u50cfPascal\u90a3\u6837\u8868\u793a\u540c\u4e00\u4e2a\u5b9e\u4f53\uff1f\u8fd8\u662f\u8868\u793a\u4e0d\u540c\u7684\u5b9e\u4f53\uff1f\u6807\u8bc6\u7b26\u7684\u94fe\u63a5\u5c5e\u6027 (linkage)\u51b3\u5b9a\u5982\u4f55\u5904\u7406\u5728\u4e0d\u540c\u6587\u4ef6\u4e2d\u51fa\u73b0\u7684\u6807\u8bc6\u7b26\u3002\u6807\u8bc6\u7b26\u7684\u4f5c\u7528\u57df\u4e0e\u5b83\u7684\u94fe\u63a5\u5c5e\u6027\u6709\u5173\uff0c\u4f46\u8fd9\u4e24\u4e2a\u5c5e\u6027\u5e76\u4e0d\u76f8\u540c\u3002</p> <p>\u94fe\u63a5\u5c5e\u6027\u4e00\u5171\u67093\u79cd\u2014\u2014external\uff08\u5916\u90e8\uff09\u3001internal\uff08\u5185\u90e8\uff09\u548cnone\uff08\u65e0\uff09\u3002</p> <ul> <li>\u6ca1\u6709\u94fe\u63a5\u5c5e\u6027\u7684\u6807\u8bc6\u7b26(none)\u603b\u662f\u88ab\u5f53\u4f5c\u5355\u72ec\u7684\u4e2a\u4f53\uff0c\u4e5f\u5c31\u662f\u8bf4\u8be5\u6807\u8bc6\u7b26\u7684\u591a\u4e2a\u58f0\u660e\u88ab\u5f53\u4f5c\u72ec\u7acb\u4e0d\u540c\u7684\u5b9e\u4f53\u3002</li> <li>\u5c5e\u4e8einternal\u94fe\u63a5\u5c5e\u6027\u7684\u6807\u8bc6\u7b26\u5728\u540c\u4e00\u4e2a\u6e90\u6587\u4ef6\u5185\u7684\u6240\u6709\u58f0\u660e\u4e2d\u90fd\u6307\u540c\u4e00\u4e2a\u5b9e\u4f53\uff0c\u4f46\u4f4d\u4e8e\u4e0d\u540c\u6e90\u6587\u4ef6\u7684\u591a\u4e2a\u58f0\u660e\u5219\u5206\u5c5e\u4e0d\u540c\u7684\u5b9e\u4f53\u3002</li> <li>\u6700\u540e\uff0c\u5c5e\u4e8eexternal\u94fe\u63a5\u5c5e\u6027\u7684\u6807\u8bc6\u7b26\u4e0d\u8bba\u58f0\u660e\u591a\u5c11\u6b21\u3001\u4f4d\u4e8e\u51e0\u4e2a\u6e90\u6587\u4ef6\u90fd\u8868\u793a\u540c\u4e00\u4e2a\u5b9e\u4f53\u3002</li> </ul> <p>\u5173\u952e\u5b57extern\u548cstatic\u7528\u4e8e\u5728\u58f0\u660e\u4e2d\u4fee\u6539\u6807\u8bc6\u7b26\u7684\u94fe\u63a5\u5c5e\u6027\u3002\u5982\u679c\u67d0\u4e2a\u58f0\u660e\u5728\u6b63\u5e38\u60c5\u51b5\u4e0b\u5177\u6709external\u94fe\u63a5\u5c5e\u6027\uff0c\u5728\u5b83\u524d\u9762\u52a0\u4e0astatic\u5173\u952e\u5b57\u53ef\u4ee5\u4f7f\u5b83\u7684\u94fe\u63a5\u5c5e\u6027\u53d8\u4e3ainternal\u3002</p> <pre><code>static\u3000\u3000int\u3000\u3000\u3000\u3000b;\n</code></pre> <p>\u5982\u4e0a\u6240\u793a\uff0c\u53d8\u91cfb\u5c31\u5c06\u4e3a\u8fd9\u4e2a\u6e90\u6587\u4ef6\u6240\u79c1\u6709\u3002\u5728\u5176\u4ed6\u6e90\u6587\u4ef6\u4e2d\uff0c\u5982\u679c\u4e5f\u94fe\u63a5\u5230\u4e00\u4e2a\u53eb\u505ab\u7684\u53d8\u91cf\uff0c\u90a3\u4e48\u5b83\u6240\u5f15\u7528\u7684\u662f\u53e6\u4e00\u4e2a\u4e0d\u540c\u7684\u53d8\u91cf\u3002\u7c7b\u4f3c\uff0c\u4f60\u4e5f\u53ef\u4ee5\u628a\u51fd\u6570\u58f0\u660e\u4e3astatic\uff0c\u8fd9\u53ef\u4ee5\u9632\u6b62\u5b83\u88ab\u5176\u4ed6\u6e90\u6587\u4ef6\u8c03\u7528\u3002</p> <p>extern\u5173\u952e\u5b57\u7684\u89c4\u5219\u66f4\u4e3a\u590d\u6742\u3002\u4e00\u822c\u800c\u8a00\uff0c\u5b83\u4e3a\u4e00\u4e2a\u6807\u8bc6\u7b26\u6307\u5b9aexternal\u94fe\u63a5\u5c5e\u6027\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u8bbf\u95ee\u5728\u5176\u4ed6\u4efb\u4f55\u4f4d\u7f6e\u5b9a\u4e49\u7684\u8fd9\u4e2a\u5b9e\u4f53\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5f53extern\u5173\u952e\u5b57\u7528\u4e8e\u6e90\u6587\u4ef6\u4e2d\u4e00\u4e2a\u6807\u8bc6\u7b26\u7684\u7b2c1\u6b21\u58f0\u660e\u65f6\uff0c\u5b83\u6307\u5b9a\u8be5\u6807\u8bc6\u7b26\u5177\u6709external\u94fe\u63a5\u5c5e\u6027\u3002\u4f46\u662f\uff0c\u5982\u679c\u5b83\u7528\u4e8e\u8be5\u6807\u8bc6\u7b26\u7684\u7b2c2\u6b21\u6216\u4ee5\u540e\u7684\u58f0\u660e\u65f6\uff0c\u5b83\u5e76\u4e0d\u4f1a\u66f4\u6539\u7531\u7b2c1\u6b21\u58f0\u660e\u6240\u6307\u5b9a\u7684\u94fe\u63a5\u5c5e\u6027</p>"},{"location":"foundation/pointers-on-c/data-type/#_20","title":"\u5b58\u50a8\u7c7b\u578b","text":"<p>\u53d8\u91cf\u7684\u5b58\u50a8\u7c7b\u578b(storage class)\u662f\u6307\u5b58\u50a8\u53d8\u91cf\u503c\u7684\u5185\u5b58\u7c7b\u578b\u3002\u53d8\u91cf\u7684\u5b58\u50a8\u7c7b\u578b\u51b3\u5b9a\u53d8\u91cf\u4f55\u65f6\u521b\u5efa\u3001\u4f55\u65f6\u9500\u6bc1\u4ee5\u53ca\u5b83\u7684\u503c\u5c06\u4fdd\u6301\u591a\u4e45\u3002</p> <p>\u6709\u4e09\u4e2a\u5730\u65b9\u53ef\u4ee5\u7528\u4e8e\u5b58\u50a8\u53d8\u91cf\uff1a\u666e\u901a\u5185\u5b58\u3001\u8fd0\u884c\u65f6\u5806\u6808\u3001\u786c\u4ef6\u5bc4\u5b58\u5668\u3002\u5728\u8fd9\u4e09\u4e2a\u5730\u65b9\u5b58\u50a8\u7684\u53d8\u91cf\u5177\u6709\u4e0d\u540c\u7684\u7279\u6027\u3002</p> <p>\u53d8\u91cf\u7684\u7f3a\u7701\u5b58\u50a8\u7c7b\u578b\u53d6\u51b3\u4e8e\u5b83\u7684\u58f0\u660e\u4f4d\u7f6e\u3002\u51e1\u662f\u5728\u4efb\u4f55\u4ee3\u7801\u5757\u4e4b\u5916\u58f0\u660e\u7684\u53d8\u91cf\u603b\u662f\u5b58\u50a8\u4e8e\u9759\u6001\u5185\u5b58\u4e2d\uff0c\u4e5f\u5c31\u662f\u4e0d\u5c5e\u4e8e\u5806\u6808\u7684\u5185\u5b58\uff0c\u8fd9\u7c7b\u53d8\u91cf\u79f0\u4e3a\u9759\u6001(static)\u53d8\u91cf\u3002\u5bf9\u4e8e\u8fd9\u7c7b\u53d8\u91cf\uff0c\u4f60\u65e0\u6cd5\u4e3a\u5b83\u4eec\u6307\u5b9a\u5176\u4ed6\u5b58\u50a8\u7c7b\u578b\u3002\u9759\u6001\u53d8\u91cf\u5728\u7a0b\u5e8f\u8fd0\u884c\u4e4b\u524d\u521b\u5efa\uff0c\u5728\u7a0b\u5e8f\u7684\u6574\u4e2a\u6267\u884c\u671f\u95f4\u59cb\u7ec8\u5b58\u5728\u3002\u5b83\u59cb\u7ec8\u4fdd\u6301\u539f\u5148\u7684\u503c\uff0c\u9664\u975e\u7ed9\u5b83\u8d4b\u4e00\u4e2a\u4e0d\u540c\u7684\u503c\u6216\u8005\u7a0b\u5e8f\u7ed3\u675f\u3002</p> <p>\u5728\u4ee3\u7801\u5757\u5185\u90e8\u58f0\u660e\u7684\u53d8\u91cf\u7684\u7f3a\u7701\u5b58\u50a8\u7c7b\u578b\u662f\u81ea\u52a8\u7684(automatic)\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u5b58\u50a8\u4e8e\u5806\u6808\u4e2d\uff0c\u79f0\u4e3a\u81ea\u52a8(auto)\u53d8\u91cf\u3002\u6709\u4e00\u4e2a\u5173\u952e\u5b57auto\u5c31\u662f\u7528\u4e8e\u4fee\u9970\u8fd9\u79cd\u5b58\u50a8\u7c7b\u578b\u7684\uff0c\u4f46\u5b83\u6781\u5c11\u4f7f\u7528\uff0c\u56e0\u4e3a\u4ee3\u7801\u5757\u4e2d\u7684\u53d8\u91cf\u5728\u7f3a\u7701\u60c5\u51b5\u4e0b\u5c31\u662f\u81ea\u52a8\u53d8\u91cf\u3002</p> <p>\u5728\u7a0b\u5e8f\u6267\u884c\u5230\u58f0\u660e\u81ea\u52a8\u53d8\u91cf\u7684\u4ee3\u7801\u5757\u65f6\uff0c\u81ea\u52a8\u53d8\u91cf\u624d\u88ab\u521b\u5efa\uff0c\u5f53\u7a0b\u5e8f\u7684\u6267\u884c\u6d41\u79bb\u5f00\u8be5\u4ee3\u7801\u5757\u65f6\uff0c\u8fd9\u4e9b\u81ea\u52a8\u53d8\u91cf\u4fbf\u81ea\u884c\u9500\u6bc1\u3002\u5982\u679c\u8be5\u4ee3\u7801\u5757\u88ab\u6570\u6b21\u6267\u884c\uff0c\u4f8b\u5982\u4e00\u4e2a\u51fd\u6570\u88ab\u53cd\u590d\u8c03\u7528\uff0c\u8fd9\u4e9b\u81ea\u52a8\u53d8\u91cf\u6bcf\u6b21\u90fd\u5c06\u91cd\u65b0\u521b\u5efa\u3002\u5728\u4ee3\u7801\u5757\u518d\u6b21\u6267\u884c\u65f6\uff0c\u8fd9\u4e9b\u81ea\u52a8\u53d8\u91cf\u5728\u5806\u6808\u4e2d\u6240\u5360\u636e\u7684\u5185\u5b58\u4f4d\u7f6e\u6709\u53ef\u80fd\u548c\u539f\u5148\u7684\u4f4d\u7f6e\u76f8\u540c\uff0c\u4e5f\u53ef\u80fd\u4e0d\u540c\u3002\u5373\u4f7f\u5b83\u4eec\u6240\u5360\u636e\u7684\u4f4d\u7f6e\u76f8\u540c\uff0c\u4f60\u4e5f\u4e0d\u80fd\u4fdd\u8bc1\u8fd9\u5757\u5185\u5b58\u540c\u65f6\u4e0d\u4f1a\u6709\u5176\u4ed6\u7684\u7528\u9014\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u8bf4\u81ea\u52a8\u53d8\u91cf\u5728\u4ee3\u7801\u5757\u6267\u884c\u5b8c\u6bd5\u540e\u5c31\u6d88\u5931\u3002\u5f53\u4ee3\u7801\u5757\u518d\u6b21\u6267\u884c\u65f6\uff0c\u5b83\u4eec\u7684\u503c\u4e00\u822c\u5e76\u4e0d\u662f\u4e0a\u6b21\u6267\u884c\u65f6\u7684\u503c\u3002</p> <p>\u5bf9\u4e8e\u5728\u4ee3\u7801\u5757\u5185\u90e8\u58f0\u660e\u7684\u53d8\u91cf\uff0c\u5982\u679c\u7ed9\u5b83\u52a0\u4e0a\u5173\u952e\u5b57static\uff0c\u53ef\u4ee5\u4f7f\u5b83\u7684\u5b58\u50a8\u7c7b\u578b\u4ece\u81ea\u52a8\u53d8\u4e3a\u9759\u6001\u3002\u5177\u6709\u9759\u6001\u5b58\u50a8\u7c7b\u578b\u7684\u53d8\u91cf\u5728\u6574\u4e2a\u7a0b\u5e8f\u6267\u884c\u8fc7\u7a0b\u4e2d\u4e00\u76f4\u5b58\u5728\uff0c\u800c\u4e0d\u4ec5\u4ec5\u5728\u58f0\u660e\u5b83\u7684\u4ee3\u7801\u5757\u7684\u6267\u884c\u65f6\u5b58\u5728\u3002\u6ce8\u610f\uff0c\u4fee\u6539\u53d8\u91cf\u7684\u5b58\u50a8\u7c7b\u578b\u5e76\u4e0d\u8868\u793a\u4fee\u6539\u8be5\u53d8\u91cf\u7684\u4f5c\u7528\u57df\uff0c\u5b83\u4ecd\u7136\u53ea\u80fd\u5728\u8be5\u4ee3\u7801\u5757\u5185\u90e8\u6309\u540d\u5b57\u8bbf\u95ee\u3002\u51fd\u6570\u7684\u5f62\u5f0f\u53c2\u6570\u4e0d\u80fd\u58f0\u660e\u4e3a\u9759\u6001\uff0c\u56e0\u4e3a\u5b9e\u53c2\u603b\u662f\u5728\u5806\u6808\u4e2d\u4f20\u9012\u7ed9\u51fd\u6570\uff0c\u7528\u4e8e\u652f\u6301\u9012\u5f52\u3002</p> <p>\u6700\u540e\uff0c\u5173\u952e\u5b57register\u53ef\u4ee5\u7528\u4e8e\u81ea\u52a8\u53d8\u91cf\u7684\u58f0\u660e\uff0c\u63d0\u793a\u5b83\u4eec\u5e94\u8be5\u5b58\u50a8\u4e8e\u673a\u5668\u7684\u786c\u4ef6\u5bc4\u5b58\u5668\u800c\u4e0d\u662f\u5185\u5b58\u4e2d\uff0c\u8fd9\u7c7b\u53d8\u91cf\u79f0\u4e3a\u5bc4\u5b58\u5668\u53d8\u91cf\u3002\u901a\u5e38\uff0c\u5bc4\u5b58\u5668\u53d8\u91cf\u6bd4\u5b58\u50a8\u4e8e\u5185\u5b58\u7684\u53d8\u91cf\u8bbf\u95ee\u8d77\u6765\u6548\u7387\u66f4\u9ad8\u3002\u4f46\u662f\uff0c\u7f16\u8bd1\u5668\u5e76\u4e0d\u4e00\u5b9a\u8981\u7406\u776cregister\u5173\u952e\u5b57\uff0c\u5982\u679c\u6709\u592a\u591a\u7684\u53d8\u91cf\u88ab\u58f0\u660e\u4e3aregister\uff0c\u5b83\u53ea\u9009\u53d6\u524d\u51e0\u4e2a\u5b9e\u9645\u5b58\u50a8\u4e8e\u5bc4\u5b58\u5668\u4e2d\uff0c\u5176\u4f59\u7684\u5c31\u6309\u666e\u901a\u81ea\u52a8\u53d8\u91cf\u5904\u7406\u3002\u5982\u679c\u4e00\u4e2a\u7f16\u8bd1\u5668\u81ea\u5df1\u5177\u6709\u4e00\u5957\u5bc4\u5b58\u5668\u4f18\u5316\u65b9\u6cd5\uff0c\u5b83\u4e5f\u53ef\u80fd\u5ffd\u7565register\u5173\u952e\u5b57\uff0c\u5176\u4f9d\u636e\u662f\u7531\u7f16\u8bd1\u5668\u51b3\u5b9a\u54ea\u4e9b\u53d8\u91cf\u5b58\u50a8\u4e8e\u5bc4\u5b58\u5668\u4e2d\u6bd4\u4eba\u8111\u7684\u51b3\u5b9a\u66f4\u4e3a\u5408\u7406\u4e00\u4e9b\u3002</p> <p>\u5728\u5178\u578b\u60c5\u51b5\u4e0b\uff0c\u4f60\u5e0c\u671b\u628a\u4f7f\u7528\u9891\u7387\u6700\u9ad8\u7684\u90a3\u4e9b\u53d8\u91cf\u58f0\u660e\u4e3a\u5bc4\u5b58\u5668\u53d8\u91cf\u3002\u5728\u6709\u4e9b\u8ba1\u7b97\u673a\u4e2d\uff0c\u5982\u679c\u628a\u6307\u9488\u58f0\u660e\u4e3a\u5bc4\u5b58\u5668\u53d8\u91cf\uff0c\u7a0b\u5e8f\u7684\u6548\u7387\u5c06\u80fd\u5f97\u5230\u63d0\u9ad8\uff0c\u5c24\u5176\u662f\u90a3\u4e9b\u9891\u7e41\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u7684\u6307\u9488\u3002\u4f60\u53ef\u4ee5\u628a\u51fd\u6570\u7684\u5f62\u5f0f\u53c2\u6570\u58f0\u660e\u4e3a\u5bc4\u5b58\u5668\u53d8\u91cf\uff0c\u7f16\u8bd1\u5668\u4f1a\u5728\u51fd\u6570\u7684\u8d77\u59cb\u4f4d\u7f6e\u751f\u6210\u6307\u4ee4\uff0c\u628a\u8fd9\u4e9b\u503c\u4ece\u5806\u6808\u590d\u5236\u5230\u5bc4\u5b58\u5668\u4e2d\u3002\u4f46\u662f\uff0c\u5b8c\u5168\u6709\u53ef\u80fd\uff0c\u8fd9\u4e2a\u4f18\u5316\u63aa\u65bd\u6240\u8282\u7701\u7684\u65f6\u95f4\u548c\u7a7a\u95f4\u7684\u5f00\u9500\u8fd8\u62b5\u4e0d\u4e0a\u590d\u5236\u8fd9\u51e0\u4e2a\u503c\u6240\u7528\u7684\u5f00\u9500\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#static","title":"static\u5173\u952e\u5b57","text":"<p>\u5f53\u7528\u4e8e\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u73af\u5883\u65f6\uff0cstatic\u5173\u952e\u5b57\u5177\u6709\u4e0d\u540c\u7684\u610f\u601d\u3002</p> <p>\u5f53\u5b83\u7528\u4e8e\u51fd\u6570\u5b9a\u4e49\u65f6\uff0c\u6216\u7528\u4e8e\u4ee3\u7801\u5757\u4e4b\u5916\u7684\u53d8\u91cf\u58f0\u660e\u65f6\uff0cstatic\u5173\u952e\u5b57\u7528\u4e8e\u4fee\u6539\u6807\u8bc6\u7b26\u7684\u94fe\u63a5\u5c5e\u6027\uff0c\u4eceexternal\u6539\u4e3ainternal\uff0c\u4f46\u6807\u8bc6\u7b26\u7684\u5b58\u50a8\u7c7b\u578b\u548c\u4f5c\u7528\u57df\u4e0d\u53d7\u5f71\u54cd\u3002\u7528\u8fd9\u79cd\u65b9\u5f0f\u58f0\u660e\u7684\u51fd\u6570\u6216\u53d8\u91cf\u53ea\u80fd\u5728\u58f0\u660e\u5b83\u4eec\u7684\u6e90\u6587\u4ef6\u4e2d\u8bbf\u95ee\u3002</p> <p>\u5f53\u5b83\u7528\u4e8e\u4ee3\u7801\u5757\u5185\u90e8\u7684\u53d8\u91cf\u58f0\u660e\u65f6\uff0cstatic\u5173\u952e\u5b57\u7528\u4e8e\u4fee\u6539\u53d8\u91cf\u7684\u5b58\u50a8\u7c7b\u578b\uff0c\u4ece\u81ea\u52a8\u53d8\u91cf\u4fee\u6539\u4e3a\u9759\u6001\u53d8\u91cf\uff0c\u4f46\u53d8\u91cf\u7684\u94fe\u63a5\u5c5e\u6027\u548c\u4f5c\u7528\u57df\u4e0d\u53d7\u5f71\u54cd\u3002\u7528\u8fd9\u79cd\u65b9\u5f0f\u58f0\u660e\u7684\u53d8\u91cf\u5728\u7a0b\u5e8f\u6267\u884c\u4e4b\u524d\u521b\u5efa\uff0c\u5e76\u5728\u7a0b\u5e8f\u7684\u6574\u4e2a\u6267\u884c\u671f\u95f4\u4e00\u76f4\u5b58\u5728\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u5728\u4ee3\u7801\u5757\u5f00\u59cb\u6267\u884c\u65f6\u521b\u5efa\uff0c\u5728\u4ee3\u7801\u5757\u6267\u884c\u5b8c\u6bd5\u540e\u9500\u6bc1\u3002</p>"},{"location":"foundation/pointers-on-c/data-type/#_21","title":"\u603b\u7ed3","text":"<p>\u5177\u6709external\u94fe\u63a5\u5c5e\u6027\u7684\u5b9e\u4f53\u5728\u5176\u4ed6\u8bed\u8a00\u7684\u672f\u8bed\u91cc\u79f0\u4e3a\u5168\u5c40(global)\u5b9e\u4f53\uff0c\u6240\u6709\u6e90\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u51fd\u6570\u5747\u53ef\u4ee5\u8bbf\u95ee\u5b83\u3002\u53ea\u8981\u53d8\u91cf\u5e76\u975e\u58f0\u660e\u4e8e\u4ee3\u7801\u5757\u6216\u51fd\u6570\u5b9a\u4e49\u5185\u90e8\uff0c\u5b83\u5728\u7f3a\u7701\u60c5\u51b5\u4e0b\u7684\u94fe\u63a5\u5c5e\u6027\u5373\u4e3aexternal\u3002\u5982\u679c\u4e00\u4e2a\u53d8\u91cf\u58f0\u660e\u4e8e\u4ee3\u7801\u5757\u5185\u90e8\uff0c\u5728\u5b83\u524d\u9762\u6dfb\u52a0extern\u5173\u952e\u5b57\u5c06\u4f7f\u5b83\u6240\u5f15\u7528\u7684\u662f\u5168\u5c40\u53d8\u91cf\u800c\u975e\u5c40\u90e8\u53d8\u91cf\u3002</p> <p>\u5177\u6709external\u94fe\u63a5\u5c5e\u6027\u7684\u5b9e\u4f53\u603b\u662f\u5177\u6709\u9759\u6001\u5b58\u50a8\u7c7b\u578b\u3002\u5168\u5c40\u53d8\u91cf\u5728\u7a0b\u5e8f\u5f00\u59cb\u6267\u884c\u524d\u521b\u5efa\uff0c\u5e76\u5728\u7a0b\u5e8f\u6574\u4e2a\u6267\u884c\u8fc7\u7a0b\u4e2d\u59cb\u7ec8\u5b58\u5728\u3002\u4ece\u5c5e\u4e8e\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\u5728\u51fd\u6570\u5f00\u59cb\u6267\u884c\u65f6\u521b\u5efa\uff0c\u5728\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\u9500\u6bc1\uff0c\u4f46\u7528\u4e8e\u6267\u884c\u51fd\u6570\u7684\u673a\u5668\u6307\u4ee4\u5728\u7a0b\u5e8f\u7684\u751f\u547d\u671f\u5185\u4e00\u76f4\u5b58\u5728\u3002</p> <p>\u5c40\u90e8\u53d8\u91cf\u7531\u51fd\u6570\u5185\u90e8\u4f7f\u7528\uff0c\u4e0d\u80fd\u88ab\u5176\u4ed6\u51fd\u6570\u901a\u8fc7\u540d\u5b57\u5f15\u7528\u3002\u5b83\u5728\u7f3a\u7701\u60c5\u51b5\u4e0b\u7684\u5b58\u50a8\u7c7b\u578b\u4e3a\u81ea\u52a8\uff0c\u8fd9\u662f\u57fa\u4e8e\u4e24\u4e2a\u539f\u56e0\uff1a\u5176\u4e00\uff0c\u5f53\u8fd9\u4e9b\u53d8\u91cf\u9700\u8981\u65f6\u624d\u4e3a\u5b83\u4eec\u5206\u914d\u5b58\u50a8\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u5185\u5b58\u7684\u603b\u9700\u6c42\u91cf\u3002\u5176\u4e8c\uff0c\u5728\u5806\u6808\u4e0a\u4e3a\u5b83\u4eec\u5206\u914d\u5b58\u50a8\u53ef\u4ee5\u6709\u6548\u5730\u5b9e\u73b0\u9012\u5f52\u3002\u5982\u679c\u4f60\u89c9\u5f97\u8ba9\u53d8\u91cf\u7684\u503c\u5728\u51fd\u6570\u7684\u591a\u6b21\u8c03\u7528\u4e2d\u59cb\u7ec8\u4fdd\u6301\u539f\u5148\u7684\u503c\u975e\u5e38\u91cd\u8981\u7684\u8bdd\uff0c\u4f60\u53ef\u4ee5\u4fee\u6539\u5b83\u7684\u5b58\u50a8\u7c7b\u578b\uff0c\u628a\u5b83\u4ece\u81ea\u52a8\u53d8\u91cf\u6539\u4e3a\u9759\u6001\u53d8\u91cf\u3002</p> <p></p>"},{"location":"foundation/pointers-on-c/dynamic-memory/","title":"\u52a8\u6001\u5185\u5b58\u5206\u914d","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p> <p>\u6570\u7ec4\u7684\u5143\u7d20\u5b58\u50a8\u4e8e\u5185\u5b58\u4e2d\u8fde\u7eed\u7684\u4f4d\u7f6e\u4e0a\u3002\u5f53\u4e00\u4e2a\u6570\u7ec4\u88ab\u58f0\u660e\u65f6\uff0c\u5b83\u6240\u9700\u8981\u7684\u5185\u5b58\u5728\u7f16\u8bd1\u65f6\u5c31\u88ab\u5206\u914d\u3002\u4f46\u662f\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u52a8\u6001\u5185\u5b58\u5206\u914d\u5728\u8fd0\u884c\u65f6\u4e3a\u5b83\u5206\u914d\u5185\u5b58\u3002</p>"},{"location":"foundation/pointers-on-c/dynamic-memory/#_2","title":"\u4e3a\u4ec0\u4e48\u4f7f\u7528\u52a8\u6001\u5185\u5b58\u5206\u914d","text":"<p>\u5f53\u4f60\u58f0\u660e\u6570\u7ec4\u65f6\uff0c\u4f60\u5fc5\u987b\u7528\u4e00\u4e2a\u7f16\u8bd1\u65f6\u5e38\u91cf\u6307\u5b9a\u6570\u7ec4\u7684\u957f\u5ea6\u3002\u4f46\u662f\uff0c\u6570\u7ec4\u7684\u957f\u5ea6\u5e38\u5e38\u5728\u8fd0\u884c\u65f6\u624d\u77e5\u9053\uff0c\u8fd9\u662f\u7531\u4e8e\u5b83\u6240\u9700\u8981\u7684\u5185\u5b58\u7a7a\u95f4\u53d6\u51b3\u4e8e\u8f93\u5165\u6570\u636e\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u7528\u4e8e\u8ba1\u7b97\u5b66\u751f\u7b49\u7ea7\u548c\u5e73\u5747\u5206\u7684\u7a0b\u5e8f\u53ef\u80fd\u9700\u8981\u5b58\u50a8\u4e00\u4e2a\u73ed\u7ea7\u6240\u6709\u5b66\u751f\u7684\u6570\u636e\uff0c\u4f46\u4e0d\u540c\u73ed\u7ea7\u7684\u5b66\u751f\u6570\u91cf\u53ef\u80fd\u4e0d\u540c\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u901a\u5e38\u91c7\u53d6\u7684\u65b9\u6cd5\u662f\u58f0\u660e\u4e00\u4e2a\u8f83\u5927\u7684\u6570\u7ec4\uff0c\u5b83\u53ef\u4ee5\u5bb9\u7eb3\u53ef\u80fd\u51fa\u73b0\u7684\u6700\u591a\u5143\u7d20\u3002</p>"},{"location":"foundation/pointers-on-c/dynamic-memory/#mallocfree","title":"malloc\u548cfree","text":"<p>C\u51fd\u6570\u5e93\u63d0\u4f9b\u4e86\u4e24\u4e2a\u51fd\u6570\uff0cmalloc\u548cfree\uff0c\u5206\u522b\u7528\u4e8e\u6267\u884c\u52a8\u6001\u5185\u5b58\u5206\u914d\u548c\u91ca\u653e\u3002\u8fd9\u4e9b\u51fd\u6570\u7ef4\u62a4\u4e00\u4e2a\u53ef\u7528\u5185\u5b58\u6c60\u3002\u5f53\u4e00\u4e2a\u7a0b\u5e8f\u53e6\u5916\u9700\u8981\u4e00\u4e9b\u5185\u5b58\u65f6\uff0c\u5b83\u5c31\u8c03\u7528malloc\u51fd\u6570\uff0cmalloc\u4ece\u5185\u5b58\u6c60\u4e2d\u63d0\u53d6\u4e00\u5757\u5408\u9002\u7684\u5185\u5b58\uff0c\u5e76\u5411\u8be5\u7a0b\u5e8f\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u8fd9\u5757\u5185\u5b58\u7684\u6307\u9488\u3002\u8fd9\u5757\u5185\u5b58\u6b64\u65f6\u5e76\u6ca1\u6709\u4ee5\u4efb\u4f55\u65b9\u5f0f\u8fdb\u884c\u521d\u59cb\u5316\u3002\u5982\u679c\u5bf9\u8fd9\u5757\u5185\u5b58\u8fdb\u884c\u521d\u59cb\u5316\u975e\u5e38\u91cd\u8981\uff0c\u4f60\u8981\u4e48\u81ea\u5df2\u52a8\u624b\u5bf9\u5b83\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u8981\u4e48\u4f7f\u7528calloc\u51fd\u6570\uff08\u5728\u4e0b\u4e00\u8282\u63cf\u8ff0\uff09\u3002\u5f53\u4e00\u5757\u4ee5\u524d\u5206\u914d\u7684\u5185\u5b58\u4e0d\u518d\u4f7f\u7528\u65f6\uff0c\u7a0b\u5e8f\u8c03\u7528free\u51fd\u6570\u628a\u5b83\u5f52\u8fd8\u7ed9\u5185\u5b58\u6c60\u4f9b\u4ee5\u540e\u4e4b\u9700\u3002</p> <p>malloc\u7684\u53c2\u6570\u5c31\u662f\u9700\u8981\u5206\u914d\u7684\u5185\u5b58\u5b57\u8282\uff08\u5b57\u7b26\uff09\u6570 \u3002\u5982\u679c\u5185\u5b58\u6c60\u4e2d\u7684\u53ef\u7528\u5185\u5b58\u53ef\u4ee5\u6ee1\u8db3\u8fd9\u4e2a\u9700\u6c42\uff0cmalloc\u5c31\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u88ab\u5206\u914d\u7684\u5185\u5b58\u5757\u8d77\u59cb\u4f4d\u7f6e\u7684\u6307\u9488\u3002</p> <p>malloc\u6240\u5206\u914d\u7684\u662f\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bf7\u6c42\u5b83\u5206\u914d100\u4e2a\u5b57\u8282\u7684\u5185\u5b58\uff0c\u90a3\u4e48\u5b83\u5b9e\u9645\u5206\u914d\u7684\u5185\u5b58\u5c31\u662f100\u4e2a\u8fde\u7eed\u7684\u5b57\u8282\uff0c\u5e76\u4e0d\u4f1a\u5206\u5f00\u4f4d\u4e8e\u4e24\u5757\u6216\u591a\u5757\u4e0d\u540c\u7684\u5185\u5b58\u3002\u540c\u65f6\uff0cmalloc\u5b9e\u9645\u5206\u914d\u7684\u5185\u5b58\u6709\u53ef\u80fd\u6bd4\u4f60\u8bf7\u6c42\u7684\u7a0d\u5fae\u591a\u4e00\u70b9\u3002\u4f46\u662f\uff0c\u8fd9\u4e2a\u884c\u4e3a\u662f\u7531\u7f16\u8bd1\u5668\u5b9a\u4e49\u7684\uff0c\u6240\u4ee5\u4f60\u4e0d\u80fd\u6307\u671b\u5b83\u80af\u5b9a\u4f1a\u5206\u914d\u6bd4\u4f60\u7684\u8bf7\u6c42\u66f4\u591a\u7684\u5185\u5b58\u3002</p> <p>\u5982\u679c\u5185\u5b58\u6c60\u662f\u7a7a\u7684\uff0c\u6216\u8005\u5b83\u7684\u53ef\u7528\u5185\u5b58\u65e0\u6cd5\u6ee1\u8db3\u4f60\u7684\u8bf7\u6c42\uff0c\u4f1a\u53d1\u751f\u4ec0\u4e48\u60c5\u51b5\u5462\uff1f\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cmalloc\u51fd\u6570\u5411\u64cd\u4f5c\u7cfb\u7edf\u8bf7\u6c42\uff0c\u8981\u6c42\u5f97\u5230\u66f4\u591a\u7684\u5185\u5b58\uff0c\u5e76\u5728\u8fd9\u5757\u65b0\u5185\u5b58\u4e0a\u6267\u884c\u5206\u914d\u4efb\u52a1\u3002\u5982\u679c\u64cd\u4f5c\u7cfb\u7edf\u65e0\u6cd5\u5411malloc\u63d0\u4f9b\u66f4\u591a\u7684\u5185\u5b58\uff0cmalloc\u5c31\u8fd4\u56de\u4e00\u4e2aNULL\u6307\u9488\u3002\u56e0\u6b64\uff0c\u5bf9\u6bcf\u4e2a\u4ecemalloc\u8fd4\u56de\u7684\u6307\u9488\u90fd\u8fdb\u884c\u68c0\u67e5\uff0c\u786e\u4fdd\u5b83\u5e76\u975eNULL\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002</p> <p>free\u7684\u53c2\u6570\u5fc5\u987b\u8981\u4e48\u662fNULL\uff0c\u8981\u4e48\u662f\u4e00\u4e2a\u5148\u524d\u4ecemalloc\u3001calloc\u6216realloc\u8fd4\u56de\u7684\u503c\u3002\u5411free\u4f20\u9012\u4e00\u4e2aNULL\u53c2\u6570\u4e0d\u4f1a\u4ea7\u751f\u4efb\u4f55\u6548\u679c\u3002</p> <p>malloc\u53c8\u662f\u5982\u4f55\u77e5\u9053\u4f60\u6240\u8bf7\u6c42\u7684\u5185\u5b58\u9700\u8981\u5b58\u50a8\u7684\u662f\u6574\u6570\u3001\u6d6e\u70b9\u503c\u3001\u7ed3\u6784\u8fd8\u662f\u6570\u7ec4\u5462\uff1f\u5b83\u5e76\u4e0d\u77e5\u60c5\u2014\u2014malloc\u8fd4\u56de\u4e00\u4e2a\u7c7b\u578b\u4e3avoid \u7684\u6307\u9488\uff0c\u6b63\u662f\u7f18\u4e8e\u8fd9\u4e2a\u539f\u56e0\u3002\u6807\u51c6\u8868\u793a\u4e00\u4e2avoid \u7c7b\u578b\u7684\u6307\u9488\u53ef\u4ee5\u8f6c\u6362\u4e3a\u5176\u4ed6\u4efb\u4f55\u7c7b\u578b\u7684\u6307\u9488\u3002\u4f46\u662f\uff0c\u6709\u4e9b\u7f16\u8bd1\u5668\uff0c\u5c24\u5176\u662f\u90a3\u4e9b\u8001\u5f0f\u7684\u7f16\u8bd1\u5668\uff0c\u53ef\u80fd\u8981\u6c42\u4f60\u5728\u8f6c\u6362\u65f6\u4f7f\u7528\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u3002</p> <p>\u5bf9\u4e8e\u8981\u6c42\u8fb9\u754c\u5bf9\u9f50\u7684\u673a\u5668\uff0cmalloc\u6240\u8fd4\u56de\u7684\u5185\u5b58\u7684\u8d77\u59cb\u4f4d\u7f6e\u5c06\u59cb\u7ec8\u80fd\u591f\u6ee1\u8db3\u5bf9\u8fb9\u754c\u5bf9\u9f50\u8981\u6c42\u6700\u4e25\u683c\u7684\u7c7b\u578b\u7684\u8981\u6c42\u3002</p>"},{"location":"foundation/pointers-on-c/dynamic-memory/#callocrealloc","title":"calloc\u548crealloc","text":"<p>\u53e6\u5916\u8fd8\u6709\u4e24\u4e2a\u5185\u5b58\u5206\u914d\u51fd\u6570\uff0ccalloc\u548crealloc\u3002</p> <pre><code>void\u3000\u3000*calloc( size_t num_elements,\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 size_t element_size );\nvoid\u3000\u3000realloc( void *ptr, size_t new_size );\n</code></pre> <p>calloc\u4e5f\u7528\u4e8e\u5206\u914d\u5185\u5b58\u3002malloc\u548ccalloc\u4e4b\u95f4\u7684\u4e3b\u8981\u533a\u522b\u662f\u540e\u8005\u5728\u8fd4\u56de\u6307\u5411\u5185\u5b58\u7684\u6307\u9488\u4e4b\u524d\u628a\u5b83\u521d\u59cb\u5316\u4e3a0\u3002\u8fd9\u4e2a\u521d\u59cb\u5316\u5e38\u5e38\u80fd\u5e26\u6765\u65b9\u4fbf\uff0c\u4f46\u5982\u679c\u4f60\u7684\u7a0b\u5e8f\u53ea\u662f\u60f3\u628a\u4e00\u4e9b\u503c\u5b58\u50a8\u5230\u6570\u7ec4\u4e2d\uff0c\u90a3\u4e48\u8fd9\u4e2a\u521d\u59cb\u5316\u8fc7\u7a0b\u7eaf\u5c5e\u6d6a\u8d39\u65f6\u95f4\u3002calloc\u548cmalloc\u4e4b\u95f4\u53e6\u4e00\u4e2a\u8f83\u5c0f\u7684\u533a\u522b\u662f\u5b83\u4eec\u8bf7\u6c42\u5185\u5b58\u6570\u91cf\u7684\u65b9\u5f0f\u4e0d\u540c\u3002calloc\u7684\u53c2\u6570\u5305\u62ec\u6240\u9700\u5143\u7d20\u7684\u6570\u91cf\u548c\u6bcf\u4e2a\u5143\u7d20\u7684\u5b57\u8282\u6570\u3002\u6839\u636e\u8fd9\u4e9b\u503c\uff0c\u5b83\u80fd\u591f\u8ba1\u7b97\u51fa\u603b\u5171\u9700\u8981\u5206\u914d\u7684\u5185\u5b58\u3002</p> <p>realloc\u51fd\u6570\u7528\u4e8e\u4fee\u6539\u4e00\u4e2a\u539f\u5148\u5df2\u7ecf\u5206\u914d\u7684\u5185\u5b58\u5757\u7684\u5927\u5c0f\u3002\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u4f60\u53ef\u4ee5\u4f7f\u4e00\u5757\u5185\u5b58\u6269\u5927\u6216\u7f29\u5c0f\u3002\u5982\u679c\u5b83\u7528\u4e8e\u6269\u5927\u4e00\u4e2a\u5185\u5b58\u5757\uff0c\u90a3\u4e48\u8fd9\u5757\u5185\u5b58\u539f\u5148\u7684\u5185\u5bb9\u4f9d\u7136\u4fdd\u7559\uff0c\u65b0\u589e\u52a0\u7684\u5185\u5b58\u6dfb\u52a0\u5230\u539f\u5148\u5185\u5b58\u5757\u7684\u540e\u9762\uff0c\u65b0\u5185\u5b58\u5e76\u672a\u4ee5\u4efb\u4f55\u65b9\u6cd5\u8fdb\u884c\u521d\u59cb\u5316\u3002\u5982\u679c\u5b83\u7528\u4e8e\u7f29\u5c0f\u4e00\u4e2a\u5185\u5b58\u5757\uff0c\u8be5\u5185\u5b58\u5757\u5c3e\u90e8\u7684\u90e8\u5206\u5185\u5b58\u4fbf\u88ab\u62ff\u6389\uff0c\u5269\u4f59\u90e8\u5206\u5185\u5b58\u7684\u539f\u5148\u5185\u5bb9\u4f9d\u7136\u4fdd\u7559\u3002</p> <p>\u5982\u679c\u539f\u5148\u7684\u5185\u5b58\u5757\u65e0\u6cd5\u6539\u53d8\u5927\u5c0f\uff0crealloc\u5c06\u5206\u914d\u53e6\u4e00\u5757\u6b63\u786e\u5927\u5c0f\u7684\u5185\u5b58\uff0c\u5e76\u628a\u539f\u5148\u90a3\u5757\u5185\u5b58\u7684\u5185\u5bb9\u590d\u5236\u5230\u65b0\u7684\u5757\u4e0a\u3002\u56e0\u6b64\uff0c\u5728\u4f7f\u7528realloc\u4e4b\u540e\uff0c\u4f60\u5c31\u4e0d\u80fd\u518d\u4f7f\u7528\u6307\u5411\u65e7\u5185\u5b58\u7684\u6307\u9488\uff0c\u800c\u662f\u5e94\u8be5\u6539\u7528realloc\u6240\u8fd4\u56de\u7684\u65b0\u6307\u9488\u3002</p> <p>\u6700\u540e\uff0c\u5982\u679crealloc\u51fd\u6570\u7684\u7b2c1\u4e2a\u53c2\u6570\u662fNULL\uff0c\u90a3\u4e48\u5b83\u7684\u884c\u4e3a\u5c31\u548cmalloc\u4e00\u6a21\u4e00\u6837\u3002</p>"},{"location":"foundation/pointers-on-c/dynamic-memory/#_3","title":"\u4f7f\u7528\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58","text":"<p>\u5f53\u4f60\u4f7f\u7528\u52a8\u6001\u5206\u914d\u5185\u5b58\u540e\u5c31\u6709\u4e86\u4e00\u4e2a\u6307\u9488\uff0c\u90a3\u4e48\u4f60\u8be5\u5982\u4f55\u4f7f\u7528\u8fd9\u5757\u5185\u5b58\u5462\uff1f\u5f53\u7136\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u95f4\u63a5\u8bbf\u95ee\u548c\u6307\u9488\u8fd0\u7b97\u6765\u8bbf\u95ee\u6570\u7ec4\u7684\u4e0d\u540c\u6574\u6570\u4f4d\u7f6e\uff0c\u540c\u65f6\u4f60\u4e0d\u4ec5\u53ef\u4ee5\u4f7f\u7528\u6307\u9488\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e0b\u6807\u3002</p>"},{"location":"foundation/pointers-on-c/dynamic-memory/#_4","title":"\u5e38\u89c1\u7684\u52a8\u6001\u5185\u5b58\u9519\u8bef","text":"<p>\u5728\u4f7f\u7528\u52a8\u6001\u5185\u5b58\u5206\u914d\u7684\u7a0b\u5e8f\u4e2d\uff0c\u5e38\u5e38\u4f1a\u51fa\u73b0\u8bb8\u591a\u9519\u8bef\u3002\u8fd9\u4e9b\u9519\u8bef\u5305\u62ec\u5bf9NULL\u6307\u9488\u8fdb\u884c\u89e3\u5f15\u7528\u64cd\u4f5c\u3001\u5bf9\u5206\u914d\u7684\u5185\u5b58\u8fdb\u884c\u64cd\u4f5c\u65f6\u8d8a\u8fc7\u8fb9\u754c\u3001\u91ca\u653e\u5e76\u975e\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u3001\u8bd5\u56fe\u91ca\u653e\u4e00\u5757\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u7684\u4e00\u90e8\u5206\u4ee5\u53ca\u4e00\u5757\u52a8\u6001\u5185\u5b58\u88ab\u91ca\u653e\u4e4b\u540e\u88ab\u7ee7\u7eed\u4f7f\u7528\u3002</p> <p>\u5f53\u4e00\u4e2a\u4f7f\u7528\u52a8\u6001\u5185\u5b58\u5206\u914d\u7684\u7a0b\u5e8f\u5931\u8d25\u65f6\uff0c\u4eba\u4eec\u5f88\u5bb9\u6613\u628a\u95ee\u9898\u7684\u8d23\u4efb\u63a8\u7ed9malloc\u548cfree\u51fd\u6570\u3002\u4f46\u5b83\u4eec\u5b9e\u9645\u4e0a\u5f88\u5c11\u662f\u7f6a\u9b41\u7978\u9996\u3002\u4e8b\u5b9e\u4e0a\uff0c\u95ee\u9898\u51e0\u4e4e\u603b\u662f\u51fa\u5728\u4f60\u81ea\u5df1\u7684\u7a0b\u5e8f\u4e2d\uff0c\u800c\u4e14\u5e38\u5e38\u662f\u7531\u4e8e\u8bbf\u95ee\u4e86\u5206\u914d\u5185\u5b58\u4ee5\u5916\u7684\u533a\u57df\u800c\u5f15\u8d77\u7684\u3002</p>"},{"location":"foundation/pointers-on-c/dynamic-memory/#_5","title":"\u603b\u7ed3","text":"<p>\u5f53\u6570\u7ec4\u88ab\u58f0\u660e\u65f6\uff0c\u5fc5\u987b\u5728\u7f16\u8bd1\u65f6\u77e5\u9053\u5b83\u7684\u957f\u5ea6\u3002\u52a8\u6001\u5185\u5b58\u5206\u914d\u5141\u8bb8\u7a0b\u5e8f\u4e3a\u4e00\u4e2a\u957f\u5ea6\u5728\u8fd0\u884c\u65f6\u624d\u77e5\u9053\u7684\u6570\u7ec4\u5206\u914d\u5185\u5b58\u7a7a\u95f4\u3002</p> <p>malloc\u548ccalloc\u51fd\u6570\u90fd\u7528\u4e8e\u52a8\u6001\u5206\u914d\u4e00\u5757\u5185\u5b58\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u8be5\u5757\u5185\u5b58\u7684\u6307\u9488\u3002malloc\u7684\u53c2\u6570\u5c31\u662f\u9700\u8981\u5206\u914d\u7684\u5185\u5b58\u7684\u5b57\u8282\u6570\u3002\u548c\u5b83\u4e0d\u540c\u7684\u662f\uff0ccalloc\u7684\u53c2\u6570\u662f\u4f60\u9700\u8981\u5206\u914d\u7684\u5143\u7d20\u4e2a\u6570\u548c\u6bcf\u4e2a\u5143\u7d20\u7684\u957f\u5ea6\u3002calloc\u51fd\u6570\u5728\u8fd4\u56de\u524d\u628a\u5185\u5b58\u521d\u59cb\u5316\u4e3a\u96f6\uff0c\u800cmalloc\u51fd\u6570\u8fd4\u56de\u65f6\u5185\u5b58\u5e76\u672a\u4ee5\u4efb\u4f55\u65b9\u5f0f\u8fdb\u884c\u521d\u59cb\u5316\u3002\u8c03\u7528realloc\u51fd\u6570\u53ef\u4ee5\u6539\u53d8\u4e00\u5757\u5df2\u7ecf\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u7684\u5927\u5c0f\u3002\u589e\u52a0\u5185\u5b58\u5757\u5927\u5c0f\u65f6\u6709\u53ef\u80fd\u91c7\u53d6\u7684\u65b9\u6cd5\u662f\u628a\u539f\u6765\u5185\u5b58\u5757\u4e0a\u7684\u6240\u6709\u6570\u636e\u590d\u5236\u5230\u4e00\u4e2a\u65b0\u7684\u3001\u66f4\u5927\u7684\u5185\u5b58\u5757\u4e0a\u3002\u5f53\u4e00\u4e2a\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u5757\u4e0d\u518d\u4f7f\u7528\u65f6\uff0c\u5e94\u8be5\u8c03\u7528free\u51fd\u6570\u628a\u5b83\u5f52\u8fd8\u7ed9\u53ef\u7528\u5185\u5b58\u6c60\u3002\u5185\u5b58\u88ab\u91ca\u653e\u4e4b\u540e\u4fbf\u4e0d\u80fd\u518d\u88ab\u8bbf\u95ee\u3002</p> <p>\u5982\u679c\u8bf7\u6c42\u7684\u5185\u5b58\u5206\u914d\u5931\u8d25\uff0cmalloc\u3001calloc\u548crealloc\u51fd\u6570\u8fd4\u56de\u7684\u5c06\u662f\u4e00\u4e2aNULL\u6307\u9488\u3002\u9519\u8bef\u5730\u8bbf\u95ee\u5206\u914d\u5185\u5b58\u4e4b\u5916\u7684\u533a\u57df\u6240\u5f15\u8d77\u7684\u540e\u679c\u7c7b\u4f3c\u8d8a\u754c\u8bbf\u95ee\u4e00\u4e2a\u6570\u7ec4\uff0c\u4f46\u8fd9\u4e2a\u9519\u8bef\u8fd8\u53ef\u80fd\u7834\u574f\u53ef\u7528\u5185\u5b58\u6c60\uff0c\u5bfc\u81f4\u7a0b\u5e8f\u5931\u8d25\u3002\u5982\u679c\u4e00\u4e2a\u6307\u9488\u4e0d\u662f\u4ece\u65e9\u5148\u7684malloc\u3001calloc\u6216realloc\u51fd\u6570\u8fd4\u56de\u7684\uff0c\u5b83\u662f\u4e0d\u80fd\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9free\u51fd\u6570\u7684\u3002\u4f60\u4e5f\u4e0d\u80fd\u53ea\u91ca\u653e\u4e00\u5757\u5185\u5b58\u7684\u4e00\u90e8\u5206\u3002</p> <p>\u5185\u5b58\u6cc4\u6f0f\u662f\u6307\u5185\u5b58\u88ab\u52a8\u6001\u5206\u914d\u4ee5\u540e\uff0c\u5f53\u5b83\u4e0d\u518d\u4f7f\u7528\u65f6\u672a\u88ab\u91ca\u653e\u3002\u5185\u5b58\u6cc4\u6f0f\u4f1a\u589e\u52a0\u7a0b\u5e8f\u7684\u4f53\u79ef\uff0c\u6709\u53ef\u80fd\u5bfc\u81f4\u7a0b\u5e8f\u6216\u7cfb\u7edf\u7684\u5d29\u6e83\u3002</p>"},{"location":"foundation/pointers-on-c/dynamic-memory/#_6","title":"\u7f16\u7a0b\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/dynamic-memory/#1","title":"\u7ec3\u4e60 1","text":"<p>\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u4e00\u5217\u6574\u6570\uff0c\u628a\u8fd9\u4e9b\u503c\u5b58\u50a8\u4e8e\u4e00\u4e2a\u52a8\u6001\u5206\u914d\u7684\u6570\u7ec4\u4e2d\u5e76\u8fd4\u56de\u8fd9\u4e2a\u6570\u7ec4\u3002\u51fd\u6570\u901a\u8fc7\u89c2\u5bdfEOF\u5224\u65ad\u8f93\u5165\u5217\u8868\u662f\u5426\u7ed3\u675f\u3002\u6570\u7ec4\u7684\u7b2c1\u4e2a\u6570\u662f\u6570\u7ec4\u5305\u542b\u7684\u503c\u7684\u4e2a\u6570\uff0c\u5b83\u7684\u540e\u9762\u5c31\u662f\u8fd9\u4e9b\u6574\u6570\u503c\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint* readIntegers() {\n    int* array = (int*)malloc(sizeof(int)); // \u521d\u59cb\u5206\u914d\u7a7a\u95f4\u7ed9\u8ba1\u6570\u5668\n    if (array == NULL) { // \u68c0\u67e5\u5185\u5b58\u5206\u914d\u662f\u5426\u6210\u529f\n        perror(\"Initial malloc failed\");\n        exit(EXIT_FAILURE);\n    }\n    array[0] = 0; // \u521d\u59cb\u5316\u8ba1\u6570\u5668\u4e3a0\n\n    int input;\n    while (scanf(\"%d\", &amp;input) != EOF) { // \u8bfb\u53d6\u6574\u6570\u76f4\u5230EOF\n        array[0]++; // \u589e\u52a0\u8ba1\u6570\u5668\n        // \u91cd\u65b0\u5206\u914d\u7a7a\u95f4\u4ee5\u5bb9\u7eb3\u65b0\u7684\u6574\u6570\u548c\u8ba1\u6570\u5668\n        int* temp = (int*)realloc(array, (array[0] + 1) * sizeof(int));\n        if (temp == NULL) { // \u68c0\u67e5\u5185\u5b58\u91cd\u65b0\u5206\u914d\u662f\u5426\u6210\u529f\n            perror(\"realloc failed\");\n            free(array);\n            exit(EXIT_FAILURE);\n        }\n        array = temp;\n        array[array[0]] = input; // \u5728\u6570\u7ec4\u7684\u672b\u5c3e\u6dfb\u52a0\u65b0\u8bfb\u53d6\u7684\u6574\u6570\n    }\n\n    if (array[0] == 0) { // \u5982\u679c\u6ca1\u6709\u8bfb\u53d6\u4efb\u4f55\u6574\u6570\n        free(array);\n        return NULL;\n    }\n\n    return array; // \u8fd4\u56de\u52a8\u6001\u5206\u914d\u5e76\u586b\u5145\u7684\u6570\u7ec4\n}\n\nint main() {\n    int* integers = readIntegers();\n    if (integers != NULL) {\n        printf(\"You have entered %d integers which are:\\n\", integers[0]);\n        for (int i = 1; i &lt;= integers[0]; i++) {\n            printf(\"%d\\n\", integers[i]);\n        }\n        free(integers); // \u8bb0\u5f97\u91ca\u653e\u5206\u914d\u7684\u5185\u5b58\n    } else {\n        printf(\"No integers were read.\\n\");\n    }\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/dynamic-memory/#2","title":"\u7ec3\u4e60 2","text":"<p>\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u628a\u5b57\u7b26\u4e32\u590d\u5236\u5230\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u4e2d\uff0c\u5e76\u8fd4\u56de\u8be5\u5b57\u7b26\u4e32\u7684\u62f7\u8d1d\u3002\u8fd9\u4e2a\u51fd\u6570\u4e0d\u5e94\u8be5\u5bf9\u8bfb\u5165\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u4f5c\u4efb\u4f55\u9650\u5236\uff01</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar* readAndCopyString() {\n    int bufferSize = 10; // \u521d\u59cb\u7f13\u51b2\u533a\u5927\u5c0f\n    char* str = (char*)malloc(bufferSize * sizeof(char));\n    if (str == NULL) { // \u68c0\u67e5\u5185\u5b58\u5206\u914d\u662f\u5426\u6210\u529f\n        perror(\"Initial malloc failed\");\n        exit(EXIT_FAILURE);\n    }\n\n    char ch;\n    int count = 0;\n    printf(\"Enter a string: \");\n    while (scanf(\"%c\", &amp;ch) &amp;&amp; ch != '\\n') { // \u8bfb\u53d6\u5b57\u7b26\u76f4\u5230\u9047\u5230\u6362\u884c\u7b26\n        str[count++] = ch;\n        if (count == bufferSize) { // \u82e5\u5f53\u524d\u5df2\u7528\u5b8c\u7f13\u51b2\u533a\n            bufferSize *= 2; // \u589e\u52a0\u7f13\u51b2\u533a\u5927\u5c0f\n            char* temp = (char*)realloc(str, bufferSize * sizeof(char));\n            if (temp == NULL) { // \u68c0\u67e5\u5185\u5b58\u91cd\u65b0\u5206\u914d\u662f\u5426\u6210\u529f\n                perror(\"realloc failed\");\n                free(str);\n                exit(EXIT_FAILURE);\n            }\n            str = temp;\n        }\n    }\n    str[count] = '\\0'; // \u5728\u5b57\u7b26\u4e32\u672b\u5c3e\u6dfb\u52a0NULL\u7ec8\u6b62\u7b26\n\n    // \u91cd\u65b0\u5206\u914d\u6070\u597d\u5408\u9002\u7684\u7a7a\u95f4\u7ed9\u5b57\u7b26\u4e32\n    char* exactStr = (char*)realloc(str, (count + 1) * sizeof(char));\n    if (exactStr == NULL) { // \u68c0\u67e5\u5185\u5b58\u91cd\u65b0\u5206\u914d\u662f\u5426\u6210\u529f\n        perror(\"Final realloc failed\");\n        free(str); // \u91ca\u653e\u539f\u6765\u7684\u5185\u5b58\u9632\u6b62\u5185\u5b58\u6cc4\u9732\n        exit(EXIT_FAILURE);\n    }\n\n    return exactStr; // \u8fd4\u56de\u52a8\u6001\u5206\u914d\u7684\u5b57\u7b26\u4e32\u526f\u672c\n}\n\nint main() {\n    char* str = readAndCopyString();\n    printf(\"You entered: %s\\n\", str);\n    free(str); // \u4f7f\u7528\u5b8c\u6bd5\u540e\u91ca\u653e\u5206\u914d\u7684\u5185\u5b58\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/environment-config/","title":"\u73af\u5883\u642d\u5efa","text":""},{"location":"foundation/pointers-on-c/environment-config/#vscode-cc","title":"VSCode \u914d\u7f6e C/C++ \u5f00\u53d1\u73af\u5883","text":"<p>macOS VS Code C/C++ Debug\uff5c\u5728 macOS \u4e0a\u7528 VS Code \u8c03\u8bd5 C/C++ \u4ee3\u7801</p> <p>\u5728 Mac \u4e0a\u9762\u7528 VS Code \u8c03\u8bd5 C \u6216\u8005 C++\uff0c\u4e3b\u8981\u4f7f\u7528 VS Code \u7684 C/C++ \u63d2\u4ef6\u751f\u6210\u7f16\u8bd1\u4efb\u52a1\uff08.vscode/tasks.json\uff09\uff0c\u4f7f\u7528 CodeLLDB \u63d2\u4ef6\u751f\u6210\u8c03\u8bd5\u4efb\u52a1\uff08.vscode/launch.json\uff09</p> <ul> <li>VSCode \u5b89\u88c5 C/C++ \u63d2\u4ef6</li> <li>VSCode \u5982\u4f55\u7f16\u8bd1 C/C++ \u6587\u4ef6</li> <li>VSCode \u5982\u4f55 Debug C/C++ \u6587\u4ef6</li> <li>VSCode \u5982\u4f55 Debug \u591a\u6587\u4ef6 C/C++ \u9879\u76ee</li> </ul>"},{"location":"foundation/pointers-on-c/function/","title":"\u51fd\u6570","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p>"},{"location":"foundation/pointers-on-c/function/#_2","title":"\u51fd\u6570\u5b9a\u4e49","text":"<p>\u51fd\u6570\u7684\u5b9a\u4e49\u5c31\u662f\u51fd\u6570\u4f53\u7684\u5b9e\u73b0\u3002\u51fd\u6570\u4f53\u5c31\u662f\u4e00\u4e2a\u4ee3\u7801\u5757\uff0c\u5b83\u5728\u51fd\u6570\u88ab\u8c03\u7528\u65f6\u6267\u884c\u3002\u4e0e\u51fd\u6570\u5b9a\u4e49\u76f8\u53cd\uff0c\u51fd\u6570\u58f0\u660e\u51fa\u73b0\u5728\u51fd\u6570\u88ab\u8c03\u7528\u7684\u5730\u65b9\u3002\u51fd\u6570\u58f0\u660e\u5411\u7f16\u8bd1\u5668\u63d0\u4f9b\u8be5\u51fd\u6570\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u7528\u4e8e\u786e\u4fdd\u51fd\u6570\u88ab\u6b63\u786e\u5730\u8c03\u7528\u3002</p> <pre><code>function_name()\n{\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/function/#_3","title":"\u51fd\u6570\u7684\u53c2\u6570","text":"<p>C\u51fd\u6570\u7684\u6240\u6709\u53c2\u6570\u5747\u4ee5\u201c\u4f20\u503c\u8c03\u7528\u201d\u65b9\u5f0f\u8fdb\u884c\u4f20\u9012\uff0c\u8fd9\u610f\u5473\u7740\u51fd\u6570\u5c06\u83b7\u5f97\u53c2\u6570\u503c\u7684\u4e00\u4efd\u62f7\u8d1d\u3002\u8fd9\u6837\uff0c\u51fd\u6570\u53ef\u4ee5\u653e\u5fc3\u4fee\u6539\u8fd9\u4e2a\u62f7\u8d1d\u503c\uff0c\u800c\u4e0d\u5fc5\u62c5\u5fc3\u4f1a\u4fee\u6539\u8c03\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f20\u9012\u7ed9\u5b83\u7684\u53c2\u6570\u3002\u8fd9\u4e2a\u884c\u4e3a\u4e0eModula\u548cPascal\u4e2d\u7684\u503c\u53c2\u6570\uff08\u4e0d\u662fvar\u53c2\u6570\uff09\u76f8\u540c\u3002</p> <p>C\u7684\u89c4\u5219\u5f88\u7b80\u5355\uff1a\u6240\u6709\u53c2\u6570\u90fd\u662f\u4f20\u503c\u8c03\u7528\u3002\u4f46\u662f\uff0c\u5982\u679c\u88ab\u4f20\u9012\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u6570\u7ec4\u540d\uff0c\u5e76\u4e14\u5728\u51fd\u6570\u4e2d\u4f7f\u7528\u4e0b\u6807\u5f15\u7528\u8be5\u6570\u7ec4\u7684\u53c2\u6570\uff0c\u90a3\u4e48\u5728\u51fd\u6570\u4e2d\u5bf9\u6570\u7ec4\u5143\u7d20\u8fdb\u884c\u4fee\u6539\u5b9e\u9645\u4e0a\u4fee\u6539\u7684\u662f\u8c03\u7528\u7a0b\u5e8f\u4e2d\u7684\u6570\u7ec4\u5143\u7d20\u3002\u51fd\u6570\u5c06\u8bbf\u95ee\u8c03\u7528\u7a0b\u5e8f\u7684\u6570\u7ec4\u5143\u7d20\uff0c\u6570\u7ec4\u5e76\u4e0d\u4f1a\u88ab\u590d\u5236\u3002\u8fd9\u4e2a\u884c\u4e3a\u88ab\u79f0\u4e3a\u201c\u4f20\u5740\u8c03\u7528\u201d\uff0c\u4e5f\u5c31\u662f\u8bb8\u591a\u5176\u4ed6\u8bed\u8a00\u6240\u5b9e\u73b0\u7684var\u53c2\u6570\u3002</p> <p>\u6570\u7ec4\u53c2\u6570\u7684\u8fd9\u79cd\u884c\u4e3a\u4f3c\u4e4e\u4e0e\u4f20\u503c\u8c03\u7528\u89c4\u5219\u76f8\u6096\u3002\u4f46\u662f\uff0c\u6b64\u5904\u5176\u5b9e\u5e76\u65e0\u77db\u76fe\u4e4b\u5904\u2014\u2014\u6570\u7ec4\u540d\u7684\u503c\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u5c31\u662f\u8fd9\u4e2a\u6307\u9488\u7684\u4e00\u4efd\u62f7\u8d1d\u3002\u4e0b\u6807\u5f15\u7528\u5b9e\u9645\u4e0a\u662f\u95f4\u63a5\u8bbf\u95ee\u7684\u53e6\u4e00\u79cd\u5f62\u5f0f\uff0c\u5b83\u53ef\u4ee5\u5bf9\u6307\u9488\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\uff0c\u8bbf\u95ee\u6307\u9488\u6307\u5411\u7684\u5185\u5b58\u4f4d\u7f6e\u3002\u53c2\u6570\uff08\u6307\u9488\uff09\u5b9e\u9645\u4e0a\u662f\u4e00\u4efd\u62f7\u8d1d\uff0c\u4f46\u5728\u8fd9\u4efd\u62f7\u8d1d\u4e0a\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u6240\u8bbf\u95ee\u7684\u662f\u539f\u5148\u7684\u6570\u7ec4\u3002\u6211\u4eec\u53ea\u8981\u8bb0\u4f4f\u4e24\u4e2a\u89c4\u5219\uff1a</p> <p>1\uff0e\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u6807\u91cf\u53c2\u6570\u662f\u4f20\u503c\u8c03\u7528\u7684\u3002</p> <p>2\uff0e\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u6570\u7ec4\u53c2\u6570\u5728\u884c\u4e3a\u4e0a\u5c31\u50cf\u5b83\u4eec\u662f\u901a\u8fc7\u4f20\u5740\u8c03\u7528\u7684\u90a3\u6837\u3002</p>"},{"location":"foundation/pointers-on-c/function/#_4","title":"\u53ef\u53d8\u53c2\u6570\u5217\u8868","text":"<p>\u5728\u51fd\u6570\u7684\u539f\u578b\u4e2d\uff0c\u5217\u51fa\u4e86\u51fd\u6570\u671f\u671b\u63a5\u53d7\u7684\u53c2\u6570\uff0c\u4f46\u539f\u578b\u53ea\u80fd\u663e\u793a\u56fa\u5b9a\u6570\u76ee\u7684\u53c2\u6570\u3002\u8ba9\u4e00\u4e2a\u51fd\u6570\u5728\u4e0d\u540c\u7684\u65f6\u5019\u63a5\u53d7\u4e0d\u540c\u6570\u76ee\u7684\u53c2\u6570\u662f\u4e0d\u662f\u53ef\u4ee5\u5462\uff1f</p>"},{"location":"foundation/pointers-on-c/function/#stdarg","title":"stdarg\u5b8f","text":"<p>\u53ef\u53d8\u53c2\u6570\u5217\u8868\u662f\u901a\u8fc7\u5b8f\u6765\u5b9e\u73b0\u7684\uff0c\u8fd9\u4e9b\u5b8f\u5b9a\u4e49\u4e8estdarg.h\u5934\u6587\u4ef6\uff0c\u5b83\u662f\u6807\u51c6\u5e93\u7684\u4e00\u90e8\u5206\u3002\u8fd9\u4e2a\u5934\u6587\u4ef6\u58f0\u660e\u4e86\u4e00\u4e2a\u7c7b\u578bva_list\u548c\u4e09\u4e2a\u5b8f\u2014\u2014va_start\u3001va_arg\u548cva_end  \u3002\u6211\u4eec\u53ef\u4ee5\u58f0\u660e\u4e00\u4e2a\u7c7b\u578b\u4e3ava_list\u7684\u53d8\u91cf\uff0c\u4e0e\u8fd9\u51e0\u4e2a\u5b8f\u914d\u5408\u4f7f\u7528\uff0c\u8bbf\u95ee\u53c2\u6570\u7684\u503c\u3002</p> <p>\u4f60\u53ef\u80fd\u540c\u65f6\u6ce8\u610f\u5230\u53c2\u6570\u5217\u8868\u4e2d\u81f3\u5c11\u8981\u6709\u4e00\u4e2a\u547d\u540d\u53c2\u6570\u3002\u5982\u679c\u8fde\u4e00\u4e2a\u547d\u540d\u53c2\u6570\u4e5f\u6ca1\u6709\uff0c\u4f60\u5c31\u65e0\u6cd5\u4f7f\u7528va_start\u3002\u8fd9\u4e2a\u53c2\u6570\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u6cd5\uff0c\u7528\u4e8e\u67e5\u627e\u53c2\u6570\u5217\u8868\u7684\u53ef\u53d8\u90e8\u5206\u3002</p> <p>\u5bf9\u4e8e\u8fd9\u4e9b\u5b8f\uff0c\u5b58\u5728\u4e24\u4e2a\u57fa\u672c\u7684\u9650\u5236\u3002\u4e00\u4e2a\u503c\u7684\u7c7b\u578b\u65e0\u6cd5\u7b80\u5355\u5730\u901a\u8fc7\u68c0\u67e5\u5b83\u7684\u4f4d\u6a21\u5f0f\u6765\u5224\u65ad\uff0c\u8fd9\u4e24\u4e2a\u9650\u5236\u5c31\u662f\u8fd9\u4e2a\u4e8b\u5b9e\u7684\u76f4\u63a5\u7ed3\u679c\u3002</p> <ul> <li>\u8fd9\u4e9b\u5b8f\u65e0\u6cd5\u5224\u65ad\u5b9e\u9645\u5b58\u5728\u7684\u53c2\u6570\u7684\u6570\u91cf\u3002</li> <li>\u8fd9\u4e9b\u5b8f\u65e0\u6cd5\u5224\u65ad\u6bcf\u4e2a\u53c2\u6570\u7684\u7c7b\u578b\u3002</li> </ul>"},{"location":"foundation/pointers-on-c/function/#_5","title":"\u7f16\u7a0b\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/function/#1","title":"\u7ec3\u4e60 1","text":"<p>\u4e3a\u4e0b\u9762\u8fd9\u4e2a\u51fd\u6570\u539f\u578b\u7f16\u5199\u51fd\u6570\u5b9a\u4e49</p> <pre><code>\u3000\u3000int ascii_to_integer( char *string );\n</code></pre> <p>\u8fd9\u4e2a\u5b57\u7b26\u4e32\u53c2\u6570\u5fc5\u987b\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u6570\u5b57\uff0c\u51fd\u6570\u5e94\u8be5\u628a\u8fd9\u4e9b\u6570\u5b57\u5b57\u7b26\u8f6c\u6362\u4e3a\u6574\u6570\u5e76\u8fd4\u56de\u8fd9\u4e2a\u6574\u6570\u3002\u5982\u679c\u5b57\u7b26\u4e32\u53c2\u6570\u5305\u542b\u4e86\u4efb\u4f55\u975e\u6570\u5b57\u5b57\u7b26\uff0c\u51fd\u6570\u5c31\u8fd4\u56de\u96f6\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n\nint ascii_to_integer(char *string) {\n    int result = 0;  // \u5b58\u50a8\u7ed3\u679c\u7684\u6574\u6570\n\n    // \u5faa\u73af\u904d\u5386\u5b57\u7b26\u4e32\u4e2d\u7684\u6bcf\u4e2a\u5b57\u7b26\n    while (*string) {\n        // \u5982\u679c\u5f53\u524d\u5b57\u7b26\u662f\u6570\u5b57\u5b57\u7b26\n        if (*string &gt;= '0' &amp;&amp; *string &lt;= '9') {\n            // \u5c06\u5f53\u524d\u5b57\u7b26\u8f6c\u6362\u4e3a\u6574\u6570\uff08\u51cf\u53bb'0'\u7684ASCII\u503c\u5f97\u5230\u771f\u6b63\u7684\u6570\u503c\uff09\n            // \u5e76\u5c06\u5176\u52a0\u5230\u7ed3\u679c\u4e0a\uff0c\u540c\u65f6\u8003\u8651\u5f53\u524d\u7ed3\u679c\u5df2\u662f\u524d\u4e00\u6b21\u8fed\u4ee3\u7684\u7ed3\u679c*10\n            result = result * 10 + (*string - '0');\n        } else {\n            // \u5982\u679c\u9047\u5230\u975e\u6570\u5b57\u5b57\u7b26\uff0c\u5219\u505c\u6b62\u8f6c\u6362\n            break;\n        }\n\n        // \u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u5b57\u7b26\n        string++;\n    }\n\n    return result;\n}\n\n// \u6d4b\u8bd5\u51fd\u6570\u7684\u7b80\u5355\u4f8b\u5b50\nint main() {\n    char str1[] = \"12345\";\n    char str2[] = \"987a654\";\n    char str3[] = \"abc123\";\n\n    printf(\"%s \u8f6c\u6362\u4e3a\u6574\u6570\u662f: %d\\n\", str1, ascii_to_integer(str1));\n    printf(\"%s \u8f6c\u6362\u4e3a\u6574\u6570\u662f: %d\\n\", str2, ascii_to_integer(str2));\n    printf(\"%s \u8f6c\u6362\u4e3a\u6574\u6570\u662f: %d\\n\", str3, ascii_to_integer(str3));\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/function/#2","title":"\u7ec3\u4e60 2","text":"<p>\u7f16\u5199\u4e00\u4e2a\u540d\u53ebmax_list\u7684\u51fd\u6570\uff0c\u5b83\u7528\u4e8e\u68c0\u67e5\u4efb\u610f\u6570\u76ee\u7684\u6574\u578b\u53c2\u6570\u5e76\u8fd4\u56de\u5b83\u4eec\u4e2d\u7684\u6700\u5927\u503c\u3002\u53c2\u6570\u5217\u8868\u5fc5\u987b\u4ee5\u4e00\u4e2a\u8d1f\u503c\u7ed3\u5c3e\uff0c\u63d0\u793a\u5217\u8868\u7684\u7ed3\u675f\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdarg.h&gt;\n\n// \u5b9a\u4e49max_list\u51fd\u6570\uff0c\u4f7f\u7528\u53ef\u53d8\u53c2\u6570\u5217\u8868\u627e\u51fa\u5e76\u8fd4\u56de\u6700\u5927\u6574\u6570\nint max_list(int first_arg, ...) {\n    // \u521d\u59cb\u5316\u53ef\u53d8\u53c2\u6570\u5217\u8868\n    va_list var_arg;\n    va_start(var_arg, first_arg);\n\n    // \u5047\u8bbe\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u76ee\u524d\u4e3a\u6b62\u7684\u6700\u5927\u503c\n    int max_val = first_arg;\n\n    int curr_val;\n\n    // \u5faa\u73af\u76f4\u5230\u9047\u5230\u8d1f\u6570\u53c2\u6570\uff0c\u8fd9\u8868\u793a\u53c2\u6570\u5217\u8868\u7684\u7ed3\u675f\n    while ((curr_val = va_arg(var_arg, int)) &gt;= 0) {\n        // \u66f4\u65b0\u6700\u5927\u503c\n        if (curr_val &gt; max_val) {\n            max_val = curr_val;\n        }\n    }\n\n    // \u6e05\u7406\u53ef\u53d8\u53c2\u6570\u5217\u8868\n    va_end(var_arg);\n\n    // \u8fd4\u56de\u627e\u5230\u7684\u6700\u5927\u503c\n    return max_val;\n}\n\n// \u4e3b\u51fd\u6570\uff0c\u7528\u4e8e\u5c55\u793amax_list\u51fd\u6570\u7684\u4f7f\u7528\nint main() {\n    // \u6d4b\u8bd5max_list\u51fd\u6570\n    printf(\"Max of 12, 75, 3, 87, -1 is: %d\\n\", max_list(12, 75, 3, 87, -1));\n    printf(\"Max of 20, 10, 5, -1 is: %d\\n\", max_list(20, 10, 5, -1));\n    printf(\"Max of 99, -1 is: %d\\n\", max_list(99, -1));\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/function/#3","title":"\u7ec3\u4e60 3","text":"<p>\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5316\u7684 printf \u51fd\u6570\uff0c\u5b83\u80fd\u591f\u5904\u7406 %d\u3001%f\u3001%s\u548c%c \u683c\u5f0f\u7801\u3002\u6839\u636e ANSI \u6807\u51c6\u7684\u539f\u5219\uff0c\u5176\u4ed6\u683c\u5f0f\u7801\u7684\u884c\u4e3a\u662f\u672a\u5b9a\u4e49\u7684\u3002\u4f60\u53ef\u4ee5\u5047\u5b9a\u5df2\u7ecf\u5b58\u5728\u51fd\u6570print_integer\u548cprint_float\uff0c\u7528\u4e8e\u6253\u5370\u8fd9\u4e9b\u7c7b\u578b\u7684\u503c\u3002\u5bf9\u4e8e\u53e6\u5916\u4e24\u79cd\u7c7b\u578b\u7684\u503c\uff0c\u4f7f\u7528putchar\u6765\u6253\u5370\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdarg.h&gt;\n\n// \u5047\u8bbe\u7684\u51fd\u6570\u539f\u578b\nvoid print_integer(int value) {\n    printf(\"%d\", value);\n}\n\n// \u5047\u8bbe\u7684\u51fd\u6570\u539f\u578b\nvoid print_float(float value) {\n    printf(\"%f\", value);\n}\n\nvoid mini_printf(const char *format, ...) {\n    va_list args;\n    va_start(args, format);\n\n    while (*format != '\\0') {\n        if (*format == '%') {\n            format++; // \u79fb\u52a8\u5230\u683c\u5f0f\u8bf4\u660e\u7b26\n            switch (*format) {\n                case 'd':\n                    print_integer(va_arg(args, int));\n                    break;\n                case 'f':\n                    print_float((float)va_arg(args, double)); // \u6ce8\u610f\uff1ava_arg\u4f7f\u7528double\u6765\u83b7\u53d6\u6d6e\u70b9\u6570\n                    break;\n                case 's': ;\n                    char *s = va_arg(args, char*);\n                    while (*s) putchar(*s++);\n                    break;\n                case 'c':\n                    putchar((char)va_arg(args, int)); // \u6ce8\u610f\uff1ava_arg\u4f7f\u7528int\u6765\u83b7\u53d6\u5b57\u7b26\n                    break;\n                default:\n                    // \u5982\u679c\u9047\u5230\u672a\u5b9a\u4e49\u7684\u683c\u5f0f\u4ee3\u7801\uff0c\u5219\u8f93\u51fa\u5b83\u3002\n                    putchar('%');\n                    putchar(*format);\n                    break;\n            }\n        } else {\n            // \u5982\u679c\u4e0d\u662f\u683c\u5f0f\u6307\u5b9a\u7b26\uff0c\u76f4\u63a5\u8f93\u51fa\u8be5\u5b57\u7b26\n            putchar(*format);\n        }\n        format++;\n    }\n\n    va_end(args);\n}\n\nint main() {\n    mini_printf(\"This is a string: %s\\n\", \"Hello, World!\");\n    mini_printf(\"This is an integer: %d\\n\", 12345);\n    mini_printf(\"This is a float: %f\\nThis is a char: %c\\n\", 3.14159, 'A');\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/operators-and-expressions/","title":"\u64cd\u4f5c\u7b26\u548c\u8868\u8fbe\u5f0f","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p> <p>C\u63d0\u4f9b\u4e86\u6240\u6709\u4f60\u5e0c\u671b\u7f16\u7a0b\u8bed\u8a00\u5e94\u8be5\u62e5\u6709\u7684\u64cd\u4f5c\u7b26 \uff0c\u5b83\u751a\u81f3\u63d0\u4f9b\u4e86\u4e00\u4e9b\u4f60\u610f\u60f3\u4e0d\u5230\u7684\u64cd\u4f5c\u7b26\u3002\u4e8b\u5b9e\u4e0a\uff0cC\u88ab\u8bb8\u591a\u4eba\u6240\u8bdf\u75c5\u7684\u4e00\u4e2a\u7f3a\u70b9\u5c31\u662f\u5b83\u54c1\u79cd\u7e41\u591a\u7684\u64cd\u4f5c\u7b26\u3002C\u7684\u8fd9\u4e2a\u7279\u70b9\u4f7f\u5b83\u5f88\u96be\u7cbe\u901a\u3002\u53e6\u4e00\u65b9\u9762\uff0cC\u7684\u8bb8\u591a\u64cd\u4f5c\u7b26\u5177\u6709\u5176\u4ed6\u8bed\u8a00\u7684\u64cd\u4f5c\u7b26\u65e0\u53ef\u6297\u8861\u7684\u4ef7\u503c\uff0c\u8fd9\u4e5f\u662fC\u9002\u7528\u4e8e\u5f00\u53d1\u8303\u56f4\u6781\u5e7f\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u539f\u56e0\u4e4b\u4e00\u3002</p>"},{"location":"foundation/pointers-on-c/operators-and-expressions/#_2","title":"\u64cd\u4f5c\u7b26","text":""},{"location":"foundation/pointers-on-c/operators-and-expressions/#_3","title":"\u7b97\u672f\u64cd\u4f5c\u7b26","text":"<p>C\u63d0\u4f9b\u4e86\u6240\u6709\u5e38\u7528\u7684\u7b97\u672f\u64cd\u4f5c\u7b26\uff1a</p> <pre><code>+\u3000\u3000-\u3000\u3000*\u3000\u3000/\u3000\u3000%\n</code></pre>"},{"location":"foundation/pointers-on-c/operators-and-expressions/#_4","title":"\u79fb\u4f4d\u64cd\u4f5c\u7b26","text":"<p>\u6c47\u7f16\u8bed\u8a00\u7a0b\u5e8f\u5458\u5bf9\u4e8e\u79fb\u4f4d\u64cd\u4f5c\u5df2\u7ecf\u662f\u975e\u5e38\u719f\u6089\u4e86\u3002\u5bf9\u4e8e\u90a3\u4e9b\u9002\u5e94\u80fd\u529b\u5f3a\u7684\u8bfb\u8005\uff0c\u8fd9\u91cc\u4f5c\u4e00\u7b80\u5355\u4ecb\u7ecd\u3002\u79fb\u4f4d\u64cd\u4f5c\u53ea\u662f\u7b80\u5355\u5730\u628a\u4e00\u4e2a\u503c\u7684\u4f4d\u5411\u5de6\u6216\u5411\u53f3\u79fb\u52a8\u3002\u5728\u5de6\u79fb\u4f4d\u4e2d\uff0c\u503c\u6700\u5de6\u8fb9\u7684\u51e0\u4f4d\u88ab\u4e22\u5f03\uff0c\u53f3\u8fb9\u591a\u51fa\u6765\u7684\u51e0\u4e2a\u7a7a\u4f4d\u5219\u75310\u8865\u9f50\u3002</p>"},{"location":"foundation/pointers-on-c/operators-and-expressions/#_5","title":"\u4f4d\u64cd\u4f5c\u7b26","text":"<p>\u4f4d\u64cd\u4f5c\u7b26\u5bf9\u5b83\u4eec\u7684\u64cd\u4f5c\u6570\u7684\u5404\u4e2a\u4f4d\u6267\u884cAND\u3001OR\u548cXOR\uff08\u5f02\u6216\uff09\u7b49\u903b\u8f91\u64cd\u4f5c\u3002</p> <p>\u5f53\u4e24\u4e2a\u4f4d\u8fdb\u884cAND\u64cd\u4f5c\u65f6\uff0c\u5982\u679c\u4e24\u4e2a\u4f4d\u90fd\u662f1\uff0c\u7ed3\u679c\u4e3a1\uff0c\u5426\u5219\u7ed3\u679c\u4e3a0\u3002\u5f53\u4e24\u4e2a\u4f4d\u8fdb\u884cOR\u64cd\u4f5c\u65f6\uff0c\u5982\u679c\u4e24\u4e2a\u4f4d\u90fd\u662f0\uff0c\u7ed3\u679c\u4e3a0\uff0c\u5426\u5219\u7ed3\u679c\u4e3a1\u3002\u6700\u540e\uff0c\u5f53\u4e24\u4e2a\u4f4d\u8fdb\u884cXOR\u64cd\u4f5c\u65f6\uff0c\u5982\u679c\u4e24\u4e2a\u4f4d\u4e0d\u540c\uff0c\u7ed3\u679c\u4e3a1\uff0c\u5982\u679c\u4e24\u4e2a\u4f4d\u76f8\u540c\uff0c\u7ed3\u679c\u4e3a0\u3002</p> <p>\u4f4d\u64cd\u4f5c\u7b26\u6709\uff1a</p> <pre><code>&amp;\u3000\u3000|\u3000\u3000^\n</code></pre>"},{"location":"foundation/pointers-on-c/operators-and-expressions/#_6","title":"\u8d4b\u503c","text":"<p>\u6700\u540e\uff0c\u6211\u4eec\u8ba8\u8bba\u8d4b\u503c\u64cd\u4f5c\u7b26\uff0c\u5b83\u7528\u4e00\u4e2a\u7b49\u53f7\u8868\u793a\u3002\u8d4b\u503c\u662f\u8868\u8fbe\u5f0f\u7684\u4e00\u79cd\uff0c\u800c\u4e0d\u662f\u67d0\u79cd\u7c7b\u578b\u7684\u8bed\u53e5\u3002\u6240\u4ee5\uff0c\u53ea\u8981\u662f\u5141\u8bb8\u51fa\u73b0\u8868\u8fbe\u5f0f\u7684\u5730\u65b9\uff0c\u90fd\u5141\u8bb8\u8fdb\u884c\u8d4b\u503c\u3002</p> <p>\u8d4b\u503c\u64cd\u4f5c\u7b26\u628a\u53f3\u64cd\u4f5c\u6570\u7684\u503c\u5b58\u50a8\u4e8e\u5de6\u64cd\u4f5c\u6570\u6307\u5b9a\u7684\u4f4d\u7f6e\u3002\u4f46\u8d4b\u503c\u4e5f\u662f\u4e2a\u8868\u8fbe\u5f0f\uff0c\u8868\u8fbe\u5f0f\u5c31\u5177\u6709\u4e00\u4e2a\u503c\u3002\u8d4b\u503c\u8868\u8fbe\u5f0f\u7684\u503c\u5c31\u662f\u5de6\u64cd\u4f5c\u6570\u7684\u65b0\u503c\uff0c\u5b83\u53ef\u4ee5\u4f5c\u4e3a\u5176\u4ed6\u8d4b\u503c\u64cd\u4f5c\u7b26\u7684\u64cd\u4f5c\u6570\uff0c\u5982\u4e0b\u9762\u7684\u8bed\u53e5\u6240\u793a\uff1a</p> <pre><code>a = x = y + 3;\n</code></pre>"},{"location":"foundation/pointers-on-c/operators-and-expressions/#_7","title":"\u5176\u5b83\u64cd\u4f5c\u7b26","text":"<p>\u672c\u7ae0\u8fd8\u4ecb\u7ecd\u4e86\u5176\u4ed6\u4e00\u4e9b\u64cd\u4f5c\u7b26</p> <ul> <li>\u5355\u76ee\u64cd\u4f5c\u7b26</li> <li>\u903b\u8f91\u64cd\u4f5c\u7b26</li> <li>\u6761\u4ef6\u64cd\u4f5c\u7b26</li> <li>\u9017\u53f7\u64cd\u4f5c\u7b26</li> <li>\u4e0b\u6807\u5f15\u7528</li> </ul>"},{"location":"foundation/pointers-on-c/operators-and-expressions/#_8","title":"\u5e03\u5c14\u503c","text":"<p>C\u5e76\u4e0d\u5177\u5907\u663e\u5f0f\u7684\u5e03\u5c14\u7c7b\u578b\uff0c\u6240\u4ee5\u4f7f\u7528\u6574\u6570\u6765\u4ee3\u66ff\u3002\u5176\u89c4\u5219\u662f\uff1a\u96f6\u662f\u5047\uff0c\u4efb\u4f55\u975e\u96f6\u503c\u7686\u4e3a\u771f\u3002</p>"},{"location":"foundation/pointers-on-c/operators-and-expressions/#_9","title":"\u5de6\u503c\u548c\u53f3\u503c","text":"<p>\u4e3a\u4e86\u7406\u89e3\u6709\u4e9b\u64cd\u4f5c\u7b26\u5b58\u5728\u7684\u9650\u5236\uff0c\u4f60\u5fc5\u987b\u7406\u89e3\u5de6\u503c (L-value)\u548c\u53f3\u503c (R-value)\u4e4b\u95f4\u7684\u533a\u522b\u3002\u8fd9\u4e24\u4e2a\u672f\u8bed\u662f\u591a\u5e74\u524d\u7531\u7f16\u8bd1\u5668\u8bbe\u8ba1\u8005\u6240\u521b\u9020\u5e76\u6cbf\u7528\u81f3\u4eca\uff0c\u5c3d\u7ba1\u5b83\u4eec\u7684\u5b9a\u4e49\u5e76\u4e0d\u4e0eC\u8bed\u8a00\u4e25\u683c\u543b\u5408\u3002</p> <p>\u5de6\u503c\u5c31\u662f\u90a3\u4e9b\u80fd\u591f\u51fa\u73b0\u5728\u8d4b\u503c\u7b26\u53f7\u5de6\u8fb9\u7684\u4e1c\u897f\u3002\u53f3\u503c\u5c31\u662f\u90a3\u4e9b\u53ef\u4ee5\u51fa\u73b0\u5728\u8d4b\u503c\u7b26\u53f7\u53f3\u8fb9\u7684\u4e1c\u897f\u3002</p>"},{"location":"foundation/pointers-on-c/operators-and-expressions/#_10","title":"\u7f16\u7a0b\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/operators-and-expressions/#1","title":"\u7ec3\u4e60 1","text":"<p>\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u5b57\u7b26\uff0c\u5e76\u628a\u5b83\u4eec\u5199\u5230\u6807\u51c6\u8f93\u51fa\u4e2d\u3002\u9664\u4e86\u5927\u5199\u5b57\u6bcd\u5b57\u7b26\u8981\u8f6c\u6362\u4e3a\u5c0f\u5199\u5b57\u6bcd\u4e4b\u5916\uff0c\u6240\u6709\u5b57\u7b26\u7684\u8f93\u51fa\u5f62\u5f0f\u5e94\u8be5\u548c\u5b83\u7684\u8f93\u5165\u5f62\u5f0f\u5b8c\u5168\u76f8\u540c\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt; // \u4e3a\u4e86\u4f7f\u7528tolower\u51fd\u6570\n\nint main() {\n    int c; // \u4f7f\u7528int\u6765\u5b58\u50a8\u5b57\u7b26\uff0c\u662f\u56e0\u4e3aEOF\u901a\u5e38\u5b9a\u4e49\u4e3a-1\uff0c\u65e0\u6cd5\u7528char\u8868\u793a\n\n    // \u4f7f\u7528getchar\u8bfb\u53d6\u5355\u4e2a\u5b57\u7b26\u76f4\u5230EOF\n    while((c = getchar()) != EOF) {\n        // \u5982\u679c\u5b57\u7b26\u662f\u5927\u5199\u5b57\u6bcd\uff0c\u8f6c\u6362\u4e3a\u5c0f\u5199\n        if(c &gt;= 'A' &amp;&amp; c &lt;= 'Z') {\n            c = tolower(c);\n        }\n        // \u8f93\u51fa\u5b57\u7b26\n        putchar(c);\n    }\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/operators-and-expressions/#2","title":"\u7ec3\u4e60 2","text":"<p>\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u5b57\u7b26\uff0c\u5e76\u628a\u5b83\u4eec\u5199\u5230\u6807\u51c6\u8f93\u51fa\u4e2d\u3002\u6240\u6709\u975e\u5b57\u6bcd\u5b57\u7b26\u90fd\u5b8c\u5168\u6309\u7167\u5b83\u7684\u8f93\u5165\u5f62\u5f0f\u8f93\u51fa\uff0c\u5b57\u6bcd\u5b57\u7b26\u5728\u8f93\u51fa\u524d\u8fdb\u884c\u52a0\u5bc6\u3002</p> <p>\u52a0\u5bc6\u65b9\u6cd5\u5f88\u7b80\u5355\uff1a\u6bcf\u4e2a\u5b57\u6bcd\u88ab\u4fee\u6539\u4e3a\u5728\u5b57\u6bcd\u8868\u4e0a\u8ddd\u517613\u4e2a\u4f4d\u7f6e\uff08\u524d\u6216\u540e\uff09\u7684\u5b57\u6bcd\u3002\u4f8b\u5982\uff0cA\u88ab\u4fee\u6539\u4e3aN\uff0cB\u88ab\u4fee\u6539\u4e3aO\uff0cZ\u88ab\u4fee\u6539\u4e3aM\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u6ce8\u610f\u5927\u5c0f\u5199\u5b57\u6bcd\u90fd\u5e94\u8be5\u88ab\u8f6c\u6362</p> <pre><code>#include &lt;stdio.h&gt;\n\n// \u51fd\u6570\u58f0\u660e\uff0c\u7528\u4e8eROT13\u52a0\u5bc6\nchar rot13_char(char c);\n\nint main() {\n    int c;  // \u4f7f\u7528int\u6765\u63a5\u6536\u5b57\u7b26\uff0c\u4ee5\u4fbf\u80fd\u5904\u7406EOF\u60c5\u51b5\n\n    // \u4ece\u6807\u51c6\u8f93\u5165\u4e2d\u9010\u5b57\u7b26\u8bfb\u53d6\uff0c\u76f4\u5230EOF\n    while ((c = getchar()) != EOF) {\n        // \u6253\u5370\u52a0\u5bc6\u540e\u7684\u5b57\u7b26\n        putchar(rot13_char(c));\n    }\n\n    return 0;\n}\n\n// \u5b9e\u73b0ROT13\u52a0\u5bc6\u7684\u51fd\u6570\nchar rot13_char(char c) {\n    // \u5904\u7406\u5927\u5199\u5b57\u6bcd\n    if (c &gt;= 'A' &amp;&amp; c &lt;= 'Z') {\n        return 'A' + (c - 'A' + 13) % 26;\n    }\n    // \u5904\u7406\u5c0f\u5199\u5b57\u6bcd\n    else if (c &gt;= 'a' &amp;&amp; c &lt;= 'z') {\n        return 'a' + (c - 'a' + 13) % 26;\n    }\n    // \u975e\u5b57\u6bcd\u5b57\u7b26\u4e0d\u53d8\n    return c;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/operators-and-expressions/#3","title":"\u7ec3\u4e603","text":"<p>\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u628avalue\u7684\u4e8c\u8fdb\u5236\u4f4d\u6a21\u5f0f\u4ece\u5de6\u5230\u53f3\u53d8\u6362\u4e00\u4e0b\u540e\u7684\u503c\uff0c\u7f16\u5199\u51fd\u6570\u65f6\u8981\u6ce8\u610f\u4e0d\u8981\u8ba9\u5b83\u4f9d\u8d56\u4e8e\u4f60\u7684\u673a\u5668\u4e0a\u6574\u578b\u503c\u7684\u957f\u5ea6\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n\n// \u51fd\u6570\u58f0\u660e\nunsigned int reverse_bits(unsigned int value) {\n    unsigned int result = 0;\n    unsigned int i;\n    for (i = 0; i &lt; sizeof(value) * 8; i++) { // \u904d\u5386 value \u7684\u6bcf\u4e00\u4f4d\n        result &lt;&lt;= 1;  // \u5c06 result \u5de6\u79fb\u4e00\u4f4d\uff0c\u4e3a\u4e0b\u4e00\u4f4d\u505a\u597d\u7a7a\u95f4\n        result |= (value &amp; 1); // \u5c06 value \u7684\u6700\u4f4e\u4f4d\u52a0\u5230 result \u7684\u6700\u4f4e\u4f4d\n        value &gt;&gt;= 1;  // \u5c06 value \u53f3\u79fb\u4e00\u4f4d\uff0c\u51c6\u5907\u5904\u7406\u4e0b\u4e00\u4f4d\n    }\n    return result;\n}\n\nint main() {\n    unsigned int num = 1; // \u6d4b\u8bd5\u793a\u4f8b\n    printf(\"Original number: %u\\n\", num);\n    unsigned int reversed = reverse_bits(num);\n    printf(\"Reversed bits: %u\\n\", reversed);\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/pointer/","title":"\u6307\u9488","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p>"},{"location":"foundation/pointers-on-c/pointer/#_2","title":"\u5185\u5b58\u548c\u5730\u5740","text":"<p>\u524d\u9762\u63d0\u5230\u8fc7\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u8ba1\u7b97\u673a\u7684\u5185\u5b58\u770b\u4f5c\u662f\u4e00\u6761\u957f\u8857\u4e0a\u7684\u4e00\u6392\u623f\u5c4b\u3002\u6bcf\u5ea7\u623f\u5b50\u90fd\u53ef\u4ee5\u5bb9\u7eb3\u6570\u636e\uff0c\u5e76\u901a\u8fc7\u4e00\u4e2a\u623f\u53f7\u6765\u6807\u8bc6\u3002</p> <p>\u8fd9\u4e2a\u6bd4\u55bb\u9887\u4e3a\u6709\u7528\uff0c\u4f46\u4e5f\u5b58\u5728\u5c40\u9650\u6027\u3002\u8ba1\u7b97\u673a\u7684\u5185\u5b58\u7531\u6570\u4ee5\u4ebf\u4e07\u8ba1\u7684\u4f4d\uff08bit\uff09\u7ec4\u6210\uff0c\u6bcf\u4e2a\u4f4d\u53ef\u4ee5\u5bb9\u7eb3\u503c0\u62161\u3002\u7531\u4e8e\u4e00\u4e2a\u4f4d\u6240\u80fd\u8868\u793a\u7684\u503c\u7684\u8303\u56f4\u592a\u6709\u9650\uff0c\u6240\u4ee5\u5355\u72ec\u7684\u4f4d\u7528\u5904\u4e0d\u5927\uff0c\u901a\u5e38\u8bb8\u591a\u4f4d\u5408\u6210\u4e00\u7ec4\u4f5c\u4e3a\u4e00\u4e2a\u5355\u4f4d\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5b58\u50a8\u8303\u56f4\u8f83\u5927\u7684\u503c\u3002</p> <p>1\uff0e\u5185\u5b58\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u7531\u4e00\u4e2a\u72ec\u4e00\u65e0\u4e8c\u7684\u5730\u5740\u6807\u8bc6\u3002</p> <p>2\uff0e\u5185\u5b58\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u90fd\u5305\u542b\u4e00\u4e2a\u503c\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5185\u5b58\u5730\u5740\u83b7\u5f97\u8fd9\u4e2a\u5730\u5740\u4e0a\u7684\u503c\uff0c\u4f46\u662f\uff0c\u8981\u8bb0\u4f4f\u6240\u6709\u8fd9\u4e9b\u5730\u5740\u5b9e\u5728\u662f\u592a\u7b28\u62d9\u4e86\uff0c\u6240\u4ee5\u9ad8\u7ea7\u8bed\u8a00\u6240\u63d0\u4f9b\u7684\u7279\u6027\u4e4b\u4e00\u5c31\u662f\u901a\u8fc7\u540d\u5b57\u800c\u4e0d\u662f\u5730\u5740\u6765\u8bbf\u95ee\u5185\u5b58\u7684\u4f4d\u7f6e\u3002</p> <p>\u5f53\u7136\uff0c\u8fd9\u4e9b\u540d\u5b57\u5c31\u662f\u6211\u4eec\u6240\u79f0\u7684\u53d8\u91cf\u3002\u6709\u4e00\u70b9\u975e\u5e38\u91cd\u8981\uff0c\u4f60\u5fc5\u987b\u8bb0\u4f4f\uff0c\u540d\u5b57\u4e0e\u5185\u5b58\u4f4d\u7f6e\u4e4b\u95f4\u7684\u5173\u8054\u5e76\u4e0d\u662f\u786c\u4ef6\u6240\u63d0\u4f9b\u7684\uff0c\u5b83\u662f\u7531\u7f16\u8bd1\u5668\u4e3a\u6211\u4eec\u5b9e\u73b0\u7684\u3002\u6240\u6709\u8fd9\u4e9b\u53d8\u91cf\u7ed9\u4e86\u6211\u4eec\u4e00\u79cd\u66f4\u65b9\u4fbf\u7684\u65b9\u6cd5\u8bb0\u4f4f\u5730\u5740\u2014\u2014\u786c\u4ef6\u4ecd\u7136\u901a\u8fc7\u5730\u5740\u8bbf\u95ee\u5185\u5b58\u4f4d\u7f6e \u3002</p>"},{"location":"foundation/pointers-on-c/pointer/#_3","title":"\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u7b26","text":"<p>\u901a\u8fc7\u4e00\u4e2a\u6307\u9488\u8bbf\u95ee\u5b83\u6240\u6307\u5411\u7684\u5730\u5740\u7684\u8fc7\u7a0b\u79f0\u4e3a\u95f4\u63a5\u8bbf\u95ee(indirection)\u6216\u89e3\u5f15\u7528\u6307\u9488(dereferencing the pointer)\u3002\u8fd9\u4e2a\u7528\u4e8e\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u7684\u64cd\u4f5c\u7b26\u662f\u5355\u76ee\u64cd\u4f5c\u7b26*\u3002</p> <p></p>"},{"location":"foundation/pointers-on-c/pointer/#null","title":"NULL\u6307\u9488","text":"<p>\u6807\u51c6\u5b9a\u4e49\u4e86NULL\u6307\u9488\uff0c\u5b83\u4f5c\u4e3a\u4e00\u4e2a\u7279\u6b8a\u7684\u6307\u9488\u53d8\u91cf\uff0c\u8868\u793a\u4e0d\u6307\u5411\u4efb\u4f55\u4e1c\u897f\u3002\u8981\u4f7f\u4e00\u4e2a\u6307\u9488\u53d8\u91cf\u4e3aNULL\uff0c\u4f60\u53ef\u4ee5\u7ed9\u5b83\u8d4b\u4e00\u4e2a\u96f6\u503c\u3002\u4e3a\u4e86\u6d4b\u8bd5\u4e00\u4e2a\u6307\u9488\u53d8\u91cf\u662f\u5426\u4e3aNULL\uff0c\u4f60\u53ef\u4ee5\u5c06\u5b83\u4e0e\u96f6\u503c\u8fdb\u884c\u6bd4\u8f83\u3002\u4e4b\u6240\u4ee5\u9009\u62e9\u96f6\u8fd9\u4e2a\u503c\u662f\u56e0\u4e3a\u4e00\u79cd\u6e90\u4ee3\u7801\u7ea6\u5b9a\u3002\u5c31\u673a\u5668\u5185\u90e8\u800c\u8a00\uff0cNULL\u6307\u9488\u7684\u5b9e\u9645\u503c\u53ef\u80fd\u4e0e\u6b64\u4e0d\u540c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7f16\u8bd1\u5668\u5c06\u8d1f\u8d23\u96f6\u503c\u548c\u5185\u90e8\u503c\u4e4b\u95f4\u7684\u7ffb\u8bd1\u8f6c\u6362\u3002</p> <p>NULL\u6307\u9488\u7684\u6982\u5ff5\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u56e0\u4e3a\u5b83\u7ed9\u4e86\u4f60\u4e00\u79cd\u65b9\u6cd5\uff0c\u8868\u793a\u67d0\u4e2a\u7279\u5b9a\u7684\u6307\u9488\u76ee\u524d\u5e76\u672a\u6307\u5411\u4efb\u4f55\u4e1c\u897f\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u7528\u4e8e\u5728\u67d0\u4e2a\u6570\u7ec4\u4e2d\u67e5\u627e\u67d0\u4e2a\u7279\u5b9a\u503c\u7684\u51fd\u6570\u53ef\u80fd\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u67e5\u627e\u5230\u7684\u6570\u7ec4\u5143\u7d20\u7684\u6307\u9488\u3002\u5982\u679c\u8be5\u6570\u7ec4\u4e0d\u5305\u542b\u6307\u5b9a\u6761\u4ef6\u7684\u503c\uff0c\u51fd\u6570\u5c31\u8fd4\u56de\u4e00\u4e2aNULL\u6307\u9488\u3002\u8fd9\u4e2a\u6280\u5de7\u5141\u8bb8\u8fd4\u56de\u503c\u4f20\u8fbe\u4e24\u4e2a\u4e0d\u540c\u7247\u6bb5\u7684\u4fe1\u606f\u3002\u9996\u5148\uff0c\u6709\u6ca1\u6709\u627e\u5230\u5143\u7d20\uff1f\u5176\u6b21\uff0c\u5982\u679c\u627e\u5230\uff0c\u5b83\u662f\u54ea\u4e2a\u5143\u7d20\uff1f</p> <p>\u5bf9\u6307\u9488\u8fdb\u884c\u89e3\u5f15\u7528\u64cd\u4f5c\u53ef\u4ee5\u83b7\u5f97\u5b83\u6240\u6307\u5411\u7684\u503c\u3002\u4f46\u4ece\u5b9a\u4e49\u4e0a\u770b\uff0cNULL\u6307\u9488\u5e76\u672a\u6307\u5411\u4efb\u4f55\u4e1c\u897f\u3002\u56e0\u6b64\uff0c\u5bf9\u4e00\u4e2aNULL\u6307\u9488\u8fdb\u884c\u89e3\u5f15\u7528\u64cd\u4f5c\u662f\u975e\u6cd5\u7684\u3002\u5728\u5bf9\u6307\u9488\u8fdb\u884c\u89e3\u5f15\u7528\u64cd\u4f5c\u4e4b\u524d\uff0c\u4f60\u9996\u5148\u5fc5\u987b\u786e\u4fdd\u5b83\u5e76\u975eNULL\u6307\u9488\u3002</p>"},{"location":"foundation/pointers-on-c/pointer/#_4","title":"\u6307\u9488\u3001\u95f4\u63a5\u8bbf\u95ee\u548c\u53d8\u91cf","text":"<p>\u5982\u679c\u4f60\u81ea\u4ee5\u4e3a\u5df2\u7ecf\u7cbe\u901a\u4e86\u6307\u9488\uff0c\u8bf7\u770b\u4e00\u4e0b\u8fd9\u4e2a\u8868\u8fbe\u5f0f\uff0c\u770b\u770b\u4f60\u662f\u5426\u660e\u767d\u5b83\u7684\u610f\u601d\u3002</p> <pre><code>*&amp;a = 25;\n</code></pre> <p>\u5982\u679c\u4f60\u7684\u7b54\u6848\u662f\u5b83\u628a\u503c25\u8d4b\u503c\u7ed9\u53d8\u91cfa\uff0c\u606d\u559c\uff01\u4f60\u7b54\u5bf9\u4e86\u3002\u8ba9\u6211\u4eec\u6765\u5206\u6790\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u3002\u9996\u5148\uff0c&amp;\u64cd\u4f5c\u7b26\u4ea7\u751f\u53d8\u91cfa\u7684\u5730\u5740\uff0c\u5b83\u662f\u4e00\u4e2a\u6307\u9488\u5e38\u91cf\uff08\u6ce8\u610f\uff0c\u4f7f\u7528\u8fd9\u4e2a\u6307\u9488\u5e38\u91cf\u5e76\u4e0d\u9700\u8981\u77e5\u9053\u5b83\u7684\u5b9e\u9645\u503c\uff09\u3002\u63a5\u7740\uff0c*\u64cd\u4f5c\u7b26\u8bbf\u95ee\u5176\u64cd\u4f5c\u6570\u6240\u8868\u793a\u7684\u5730\u5740\u3002\u5728\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u4e2d\uff0c\u64cd\u4f5c\u6570\u662fa\u7684\u5730\u5740\uff0c\u6240\u4ee5\u503c25\u5c31\u5b58\u50a8\u4e8ea\u4e2d\u3002</p> <p>\u8fd9\u6761\u8bed\u53e5\u548c\u7b80\u5355\u5730\u4f7f\u7528a=25;\u6709\u4ec0\u4e48\u533a\u522b\u5417\uff1f\u4ece\u529f\u80fd\u4e0a\u8bf4\uff0c\u5b83\u4eec\u662f\u76f8\u540c\u7684\u3002\u4f46\u662f\uff0c\u5b83\u6d89\u53ca\u66f4\u591a\u7684\u64cd\u4f5c\u3002\u9664\u975e\u7f16\u8bd1\u5668\uff08\u6216\u4f18\u5316\u5668\uff09\u77e5\u9053\u4f60\u5728\u5e72\u4ec0\u4e48\u5e76\u4e22\u5f03\u989d\u5916\u7684\u64cd\u4f5c\uff0c\u5426\u5219\u5b83\u6240\u4ea7\u751f\u7684\u76ee\u6807\u4ee3\u7801\u5c06\u4f1a\u66f4\u5927\u3001\u66f4\u6162\u3002\u66f4\u7cdf\u7684\u662f\uff0c\u8fd9\u4e9b\u989d\u5916\u7684\u64cd\u4f5c\u7b26\u4f1a\u4f7f\u6e90\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u53d8\u5dee\u3002\u57fa\u4e8e\u8fd9\u4e9b\u539f\u56e0\uff0c\u6ca1\u4eba\u4f1a\u6545\u610f\u4f7f\u7528\u50cf*&amp;a\u8fd9\u6837\u7684\u8868\u8fbe\u5f0f\u3002</p>"},{"location":"foundation/pointers-on-c/pointer/#_5","title":"\u6307\u9488\u8fd0\u7b97","text":"<p>\u6307\u9488\u52a0\u4e0a\u4e00\u4e2a\u6574\u6570\u7684\u7ed3\u679c\u662f\u53e6\u4e00\u4e2a\u6307\u9488\u3002\u95ee\u9898\u662f\uff0c\u5b83\u6307\u5411\u54ea\u91cc\uff1f\u5982\u679c\u4f60\u5c06\u4e00\u4e2a\u5b57\u7b26\u6307\u9488\u52a01\uff0c\u8fd0\u7b97\u7ed3\u679c\u4ea7\u751f\u7684\u6307\u9488\u6307\u5411\u5185\u5b58\u4e2d\u7684\u4e0b\u4e00\u4e2a\u5b57\u7b26\u3002float\u5360\u636e\u7684\u5185\u5b58\u7a7a\u95f4\u4e0d\u6b621\u4e2a\u5b57\u8282\uff0c\u5982\u679c\u4f60\u5c06\u4e00\u4e2a\u6307\u5411float\u7684\u6307\u9488\u52a01\uff0c\u5c06\u4f1a\u53d1\u751f\u4ec0\u4e48\u5462\uff1f\u5b83\u4f1a\u4e0d\u4f1a\u6307\u5411\u8be5float\u503c\u5185\u90e8\u7684\u67d0\u4e2a\u5b57\u8282\u5462\uff1f</p> <p>\u5e78\u8fd0\u7684\u662f\uff0c\u7b54\u6848\u662f\u5426\u5b9a\u7684\u3002\u5f53\u4e00\u4e2a\u6307\u9488\u548c\u4e00\u4e2a\u6574\u6570\u91cf\u6267\u884c\u7b97\u672f\u8fd0\u7b97\u65f6\uff0c\u6574\u6570\u5728\u6267\u884c\u52a0\u6cd5\u8fd0\u7b97\u524d\u59cb\u7ec8\u4f1a\u6839\u636e\u5408\u9002\u7684\u5927\u5c0f\u8fdb\u884c\u8c03\u6574\u3002\u8fd9\u4e2a\u201c\u5408\u9002\u7684\u5927\u5c0f\u201d\u5c31\u662f\u6307\u9488\u6240\u6307\u5411\u7c7b\u578b\u7684\u5927\u5c0f\uff0c\u201c\u8c03\u6574\u201d\u5c31\u662f\u628a\u6574\u6570\u503c\u548c\u201c\u5408\u9002\u7684\u5927\u5c0f\u201d\u76f8\u4e58\u3002\u4e3a\u4e86\u66f4\u597d\u5730\u8bf4\u660e\uff0c\u8bd5\u60f3\u5728\u67d0\u53f0\u673a\u5668\u4e0a\uff0cfloat\u5360\u636e4\u4e2a\u5b57\u8282\u3002\u5728\u8ba1\u7b97float\u578b\u6307\u9488\u52a03\u7684\u8868\u8fbe\u5f0f\u65f6\uff0c\u8fd9\u4e2a3\u5c06\u6839\u636efloat\u7c7b\u578b\u7684\u5927\u5c0f\uff08\u6b64\u4f8b\u4e2d\u4e3a4\uff09\u8fdb\u884c\u8c03\u6574\uff08\u76f8\u4e58\uff09\u3002\u8fd9\u6837\uff0c\u5b9e\u9645\u52a0\u5230\u6307\u9488\u4e0a\u7684\u6574\u578b\u503c\u4e3a12\u3002</p>"},{"location":"foundation/pointers-on-c/pointer/#_6","title":"\u7b97\u672f\u8fd0\u7b97","text":""},{"location":"foundation/pointers-on-c/pointer/#_7","title":"\u6307\u9488\u3000\u00b1\u3000\u6574\u6570","text":"<p>\u6807\u51c6\u5b9a\u4e49\u8fd9\u79cd\u5f62\u5f0f\u53ea\u80fd\u7528\u4e8e\u6307\u5411\u6570\u7ec4\u4e2d\u67d0\u4e2a\u5143\u7d20\u7684\u6307\u9488\uff0c\u4f46\u5b9e\u9645\u4e0a\u8fd9\u79cd\u5f62\u5f0f\u4e5f\u9002\u7528\u4e8e\u4f7f\u7528 malloc \u51fd\u6570\u52a8\u6001\u5206\u914d\u83b7\u5f97\u7684\u5185\u5b58\uff0c\u5c3d\u7ba1\u7ffb\u904d\u6807\u51c6\u4e5f\u672a\u89c1\u5b83\u63d0\u53ca\u8fd9\u4e2a\u4e8b\u5b9e\u3002</p> <p>\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u5b58\u50a8\u4e8e\u8fde\u7eed\u7684\u5185\u5b58\u4f4d\u7f6e\u4e2d\uff0c\u540e\u9762\u5143\u7d20\u7684\u5730\u5740\u5927\u4e8e\u524d\u9762\u5143\u7d20\u7684\u5730\u5740\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5f88\u5bb9\u6613\u770b\u51fa\uff0c\u5bf9\u4e00\u4e2a\u6307\u9488\u52a01\u4f7f\u5b83\u6307\u5411\u6570\u7ec4\u4e2d\u4e0b\u4e00\u4e2a\u5143\u7d20\u3002</p> <p>\u7b2c2\u79cd\u7c7b\u578b\u7684\u6307\u9488\u8fd0\u7b97\u5177\u6709\u5982\u4e0b\u5f62\u5f0f\uff1a</p>"},{"location":"foundation/pointers-on-c/pointer/#_8","title":"\u6307\u9488\u3000\u2014\u3000\u6307\u9488","text":"<p>\u53ea\u6709\u5f53\u4e24\u4e2a\u6307\u9488\u90fd\u6307\u5411\u540c\u4e00\u4e2a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u65f6\uff0c\u624d\u5141\u8bb8\u4ece\u4e00\u4e2a\u6307\u9488\u51cf\u53bb\u53e6\u4e00\u4e2a\u6307\u9488\u3002</p> <p>\u4e24\u4e2a\u6307\u9488\u76f8\u51cf\u7684\u7ed3\u679c\u7684\u7c7b\u578b\u662fptrdiff_t\uff0c\u5b83\u662f\u4e00\u79cd\u6709\u7b26\u53f7\u6574\u6570\u7c7b\u578b\u3002\u51cf\u6cd5\u8fd0\u7b97\u7684\u503c\u662f\u4e24\u4e2a\u6307\u9488\u5728\u5185\u5b58\u4e2d\u7684\u8ddd\u79bb\uff08\u4ee5\u6570\u7ec4\u5143\u7d20\u7684\u957f\u5ea6\u4e3a\u5355\u4f4d\uff0c\u800c\u4e0d\u662f\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\uff0c\u56e0\u4e3a\u51cf\u6cd5\u8fd0\u7b97\u7684\u7ed3\u679c\u5c06\u9664\u4ee5\u6570\u7ec4\u5143\u7d20\u7c7b\u578b\u7684\u957f\u5ea6\u3002\u4f8b\u5982\uff0c\u5982\u679cp1\u6307\u5411array[i]\u800cp2\u6307\u5411array[j]\uff0c\u90a3\u4e48p2-p1\u7684\u503c\u5c31\u662fj-i\u7684\u503c\u3002</p> <p>\u5982\u679c\u4e24\u4e2a\u6307\u9488\u6240\u6307\u5411\u7684\u4e0d\u662f\u540c\u4e00\u4e2a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\uff0c\u90a3\u4e48\u5b83\u4eec\u4e4b\u95f4\u76f8\u51cf\u7684\u7ed3\u679c\u662f\u672a\u5b9a\u4e49\u7684\u3002\u5c31\u50cf\u5982\u679c\u4f60\u628a\u4e24\u4e2a\u4f4d\u4e8e\u4e0d\u540c\u8857\u9053\u7684\u623f\u5b50\u7684\u95e8\u724c\u53f7\u7801\u76f8\u51cf\u4e0d\u53ef\u80fd\u83b7\u5f97\u8fd9\u4e24\u6240\u623f\u5b50\u95f4\u7684\u623f\u5b50\u6570\u4e00\u6837\u3002\u7a0b\u5e8f\u5458\u65e0\u4ece\u77e5\u9053\u4e24\u4e2a\u6570\u7ec4\u5728\u5185\u5b58\u4e2d\u7684\u76f8\u5bf9\u4f4d\u7f6e\uff0c\u5982\u679c\u4e0d\u77e5\u9053\u8fd9\u4e00\u70b9\uff0c\u4e24\u4e2a\u6307\u9488\u4e4b\u95f4\u7684\u8ddd\u79bb\u5c31\u6beb\u65e0\u610f\u4e49\u3002</p>"},{"location":"foundation/pointers-on-c/pointer/#_9","title":"\u5173\u7cfb\u8fd0\u7b97","text":"<p>\u5bf9\u6307\u9488\u6267\u884c\u5173\u7cfb\u8fd0\u7b97\u4e5f\u662f\u6709\u9650\u5236\u7684\u3002\u7528\u4e0b\u5217\u5173\u7cfb\u64cd\u4f5c\u7b26\u5bf9\u4e24\u4e2a\u6307\u9488\u503c\u8fdb\u884c\u6bd4\u8f83\u662f\u53ef\u80fd\u7684\uff1a</p> <pre><code>&lt;\u3000\u3000&lt;=\u3000\u3000&gt;\u3000\u3000&gt;=\n</code></pre> <p>\u4e0d\u8fc7\u524d\u63d0\u662f\u5b83\u4eec\u90fd\u6307\u5411\u540c\u4e00\u4e2a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u3002\u6839\u636e\u4f60\u6240\u4f7f\u7528\u7684\u64cd\u4f5c\u7b26\uff0c\u6bd4\u8f83\u8868\u8fbe\u5f0f\u5c06\u544a\u8bc9\u4f60\u54ea\u4e2a\u6307\u9488\u6307\u5411\u6570\u7ec4\u4e2d\u66f4\u524d\u6216\u66f4\u540e\u7684\u5143\u7d20\u3002\u6807\u51c6\u5e76\u672a\u5b9a\u4e49\u5982\u679c\u4e24\u4e2a\u4efb\u610f\u7684\u6307\u9488\u8fdb\u884c\u6bd4\u8f83\u4f1a\u4ea7\u751f\u4ec0\u4e48\u7ed3\u679c\u3002</p> <p>\u7136\u800c\uff0c\u4f60\u53ef\u4ee5\u5728\u4e24\u4e2a\u4efb\u610f\u7684\u6307\u9488\u95f4\u6267\u884c\u76f8\u7b49\u6216\u4e0d\u76f8\u7b49\u6d4b\u8bd5\uff0c\u56e0\u4e3a\u8fd9\u7c7b\u6bd4\u8f83\u7684\u7ed3\u679c\u548c\u7f16\u8bd1\u5668\u9009\u62e9\u5728\u4f55\u5904\u5b58\u50a8\u6570\u636e\u5e76\u65e0\u5173\u7cfb\u2014\u2014\u6307\u9488\u8981\u4e48\u6307\u5411\u540c\u4e00\u4e2a\u5730\u5740\uff0c\u8981\u4e48\u6307\u5411\u4e0d\u540c\u7684\u5730\u5740\u3002</p>"},{"location":"foundation/pointers-on-c/pointer/#_10","title":"\u603b\u7ed3","text":"<p>\u8ba1\u7b97\u673a\u5185\u5b58\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u90fd\u7531\u4e00\u4e2a\u5730\u5740\u6807\u8bc6\u3002\u901a\u5e38\uff0c\u90bb\u8fd1\u7684\u5185\u5b58\u4f4d\u7f6e\u5408\u6210\u4e00\u7ec4\uff0c\u8fd9\u6837\u5c31\u5141\u8bb8\u5b58\u50a8\u66f4\u5927\u8303\u56f4\u7684\u503c\u3002\u6307\u9488\u5c31\u662f\u5b83\u7684\u503c\u8868\u793a\u5185\u5b58\u5730\u5740\u7684\u53d8\u91cf\u3002</p> <p>\u65e0\u8bba\u662f\u7a0b\u5e8f\u5458\u8fd8\u662f\u8ba1\u7b97\u673a\u90fd\u65e0\u6cd5\u901a\u8fc7\u503c\u7684\u4f4d\u6a21\u5f0f\u6765\u5224\u65ad\u5b83\u7684\u7c7b\u578b\u3002\u7c7b\u578b\u662f\u901a\u8fc7\u503c\u7684\u4f7f\u7528\u65b9\u6cd5\u9690\u5f0f\u5730\u786e\u5b9a\u7684\u3002\u7f16\u8bd1\u5668\u80fd\u591f\u4fdd\u8bc1\u503c\u7684\u58f0\u660e\u548c\u503c\u7684\u4f7f\u7528\u4e4b\u95f4\u7684\u5173\u7cfb\u662f\u9002\u5f53\u7684\uff0c\u4ece\u800c\u5e2e\u52a9\u6211\u4eec\u786e\u5b9a\u503c\u7684\u7c7b\u578b\u3002</p> <p>\u6307\u9488\u53d8\u91cf\u7684\u503c\u5e76\u975e\u5b83\u6240\u6307\u5411\u7684\u5185\u5b58\u4f4d\u7f6e\u6240\u5b58\u50a8\u7684\u503c\u3002\u6211\u4eec\u5fc5\u987b\u4f7f\u7528\u95f4\u63a5\u8bbf\u95ee\u6765\u83b7\u5f97\u5b83\u6240\u6307\u5411\u4f4d\u7f6e\u5b58\u50a8\u7684\u503c\u3002\u5bf9\u4e00\u4e2a\u201c\u6307\u5411\u6574\u578b\u7684\u6307\u9488\u201d\u65bd\u52a0\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u7684\u7ed3\u679c\u5c06\u662f\u4e00\u4e2a\u6574\u578b\u503c\u3002</p> <p>\u58f0\u660e\u4e00\u4e2a\u6307\u9488\u53d8\u91cf\u5e76\u4e0d\u4f1a\u81ea\u52a8\u5206\u914d\u4efb\u4f55\u5185\u5b58\u3002\u5728\u5bf9\u6307\u9488\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u524d\uff0c\u6307\u9488\u5fc5\u987b\u8fdb\u884c\u521d\u59cb\u5316\uff1a\u6216\u8005\u4f7f\u5b83\u6307\u5411\u73b0\u6709\u7684\u5185\u5b58\uff0c\u6216\u8005\u7ed9\u5b83\u5206\u914d\u52a8\u6001\u5185\u5b58\u3002\u5bf9\u672a\u521d\u59cb\u5316\u7684\u6307\u9488\u53d8\u91cf\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u662f\u975e\u6cd5\u7684\uff0c\u800c\u4e14\u8fd9\u79cd\u9519\u8bef\u5e38\u5e38\u96be\u4ee5\u68c0\u6d4b\u3002\u5176\u7ed3\u679c\u5e38\u5e38\u662f\u4e00\u4e2a\u4e0d\u76f8\u5173\u7684\u503c\u88ab\u4fee\u6539\u3002\u8fd9\u79cd\u9519\u8bef\u662f\u5f88\u96be\u88ab\u8c03\u8bd5\u53d1\u73b0\u7684\u3002</p> <p>NULL\u6307\u9488\u5c31\u662f\u4e0d\u6307\u5411\u4efb\u4f55\u4e1c\u897f\u7684\u6307\u9488\u3002\u5b83\u53ef\u4ee5\u8d4b\u503c\u7ed9\u4e00\u4e2a\u6307\u9488\uff0c\u7528\u4e8e\u8868\u793a\u90a3\u4e2a\u6307\u9488\u5e76\u4e0d\u6307\u5411\u4efb\u4f55\u503c\u3002\u5bf9NULL\u6307\u9488\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u7684\u540e\u679c\u56e0\u7f16\u8bd1\u5668\u800c\u5f02\uff0c\u4e24\u4e2a\u5e38\u89c1\u7684\u540e\u679c\u5206\u522b\u662f\u8fd4\u56de\u5185\u5b58\u4f4d\u7f6e\u96f6\u7684\u503c\u4ee5\u53ca\u7ec8\u6b62\u7a0b\u5e8f\u3002</p> <p>\u548c\u4efb\u4f55\u5176\u4ed6\u53d8\u91cf\u4e00\u6837\uff0c\u6307\u9488\u53d8\u91cf\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5de6\u503c\u4f7f\u7528\u3002\u5bf9\u6307\u9488\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u6240\u4ea7\u751f\u7684\u503c\u4e5f\u662f\u4e2a\u5de6\u503c\uff0c\u56e0\u4e3a\u8fd9\u79cd\u8868\u8fbe\u5f0f\u6807\u8bc6\u4e86\u4e00\u4e2a\u7279\u5b9a\u7684\u5185\u5b58\u4f4d\u7f6e\u3002</p> <p>\u9664\u4e86NULL\u6307\u9488\u4e4b\u5916\uff0c\u518d\u4e5f\u6ca1\u6709\u4efb\u4f55\u5185\u5efa\u7684\u8bb0\u6cd5\u6765\u8868\u793a\u6307\u9488\u5e38\u91cf\uff0c\u56e0\u4e3a\u7a0b\u5e8f\u5458\u901a\u5e38\u65e0\u6cd5\u9884\u6d4b\u7f16\u8bd1\u5668\u4f1a\u628a\u53d8\u91cf\u653e\u5728\u5185\u5b58\u4e2d\u7684\u4ec0\u4e48\u4f4d\u7f6e\u3002\u5728\u6781\u5c11\u89c1\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5076\u5c14\u9700\u8981\u4f7f\u7528\u6307\u9488\u5e38\u91cf\uff0c\u8fd9\u65f6\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u628a\u4e00\u4e2a\u6574\u578b\u503c\u5f3a\u5236\u8f6c\u6362\u4e3a\u6307\u9488\u7c7b\u578b\u6765\u521b\u5efa\u5b83\u3002</p> <p>\u5728\u6307\u9488\u503c\u4e0a\u53ef\u4ee5\u6267\u884c\u4e00\u4e9b\u6709\u9650\u7684\u7b97\u672f\u8fd0\u7b97\u3002\u4f60\u53ef\u4ee5\u628a\u4e00\u4e2a\u6574\u578b\u503c\u52a0\u5230\u4e00\u4e2a\u6307\u9488\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u4ece\u4e00\u4e2a\u6307\u9488\u51cf\u53bb\u4e00\u4e2a\u6574\u578b\u503c\u3002\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u6574\u578b\u503c\u4f1a\u8fdb\u884c\u8c03\u6574\uff0c\u539f\u503c\u5c06\u4e58\u4ee5\u6307\u9488\u76ee\u6807\u7c7b\u578b\u7684\u957f\u5ea6\u3002\u8fd9\u6837\uff0c\u5bf9\u4e00\u4e2a\u6307\u9488\u52a01\u5c06\u4f7f\u5b83\u6307\u5411\u4e0b\u4e00\u4e2a\u53d8\u91cf\uff0c\u81f3\u4e8e\u8be5\u53d8\u91cf\u5728\u5185\u5b58\u4e2d\u5360\u51e0\u4e2a\u5b57\u8282\u7684\u5927\u5c0f\u5219\u4e0e\u6b64\u65e0\u5173\u3002</p> <p>\u7136\u800c\uff0c\u6307\u9488\u8fd0\u7b97\u53ea\u6709\u4f5c\u7528\u4e8e\u6570\u7ec4\u4e2d\u5176\u7ed3\u679c\u624d\u662f\u53ef\u4ee5\u9884\u6d4b\u7684\u3002\u5bf9\u4efb\u4f55\u5e76\u975e\u6307\u5411\u6570\u7ec4\u5143\u7d20\u7684\u6307\u9488\u6267\u884c\u7b97\u672f\u8fd0\u7b97\u662f\u975e\u6cd5\u7684\uff08\u4f46\u5e38\u5e38\u5f88\u96be\u88ab\u68c0\u6d4b\u5230\uff09\u3002\u5982\u679c\u4e00\u4e2a\u6307\u9488\u51cf\u53bb\u4e00\u4e2a\u6574\u6570\u540e\uff0c\u8fd0\u7b97\u7ed3\u679c\u4ea7\u751f\u7684\u6307\u9488\u6240\u6307\u5411\u7684\u4f4d\u7f6e\u5728\u6570\u7ec4\u7b2c\u4e00\u4e2a\u5143\u7d20\u4e4b\u524d\uff0c\u90a3\u4e48\u5b83\u4e5f\u662f\u975e\u6cd5\u7684\u3002\u52a0\u6cd5\u8fd0\u7b97\u7a0d\u6709\u4e0d\u540c\uff0c\u5982\u679c\u7ed3\u679c\u6307\u9488\u6307\u5411\u6570\u7ec4\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u540e\u9762\u7684\u90a3\u4e2a\u5185\u5b58\u4f4d\u7f6e\u4ecd\u662f\u5408\u6cd5\uff08\u4f46\u4e0d\u80fd\u5bf9\u8fd9\u4e2a\u6307\u9488\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\uff09\uff0c\u4e0d\u8fc7\u518d\u5f80\u540e\u5c31\u4e0d\u5408\u6cd5\u4e86\u3002</p> <p>\u5982\u679c\u4e24\u4e2a\u6307\u9488\u90fd\u6307\u5411\u540c\u4e00\u4e2a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\uff0c\u90a3\u4e48\u5b83\u4eec\u4e4b\u95f4\u53ef\u4ee5\u76f8\u51cf\u3002\u6307\u9488\u51cf\u6cd5\u7684\u7ed3\u679c\u7ecf\u8fc7\u8c03\u6574\uff08\u9664\u4ee5\u6570\u7ec4\u5143\u7d20\u7c7b\u578b\u7684\u957f\u5ea6\uff09\uff0c\u8868\u793a\u4e24\u4e2a\u6307\u9488\u5728\u6570\u7ec4\u4e2d\u76f8\u9694\u591a\u5c11\u4e2a\u5143\u7d20\u3002\u5982\u679c\u4e24\u4e2a\u6307\u9488\u5e76\u4e0d\u662f\u6307\u5411\u540c\u4e00\u4e2a\u6570\u7ec4\u7684\u5143\u7d20\uff0c\u90a3\u4e48\u5b83\u4eec\u4e4b\u95f4\u8fdb\u884c\u76f8\u51cf\u5c31\u662f\u9519\u8bef\u7684\u3002</p> <p>\u4efb\u4f55\u6307\u9488\u4e4b\u95f4\u90fd\u53ef\u4ee5\u8fdb\u884c\u6bd4\u8f83\uff0c\u6d4b\u8bd5\u5b83\u4eec\u76f8\u7b49\u6216\u4e0d\u76f8\u7b49\u3002\u5982\u679c\u4e24\u4e2a\u6307\u9488\u90fd\u6307\u5411\u540c\u4e00\u4e2a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\uff0c\u90a3\u4e48\u5b83\u4eec\u4e4b\u95f4\u8fd8\u53ef\u4ee5\u6267\u884c&lt;\u3001&lt;=\u3001&gt;\u548c&gt;=\u7b49\u5173\u7cfb\u8fd0\u7b97\uff0c\u7528\u4e8e\u5224\u65ad\u5b83\u4eec\u5728\u6570\u7ec4\u4e2d\u4efb\u4f55\u6307\u9488\u4e4b\u95f4\u90fd\u53ef\u4ee5\u8fdb\u884c\u6bd4\u8f83\uff0c\u6d4b\u8bd5\u5b83\u4eec\u76f8\u7b49\u6216\u4e0d\u76f8\u7b49\u3002\u5982\u679c\u4e24\u4e2a\u6307\u9488\u90fd\u6307\u5411\u540c\u4e00\u4e2a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\uff0c\u90a3\u4e48\u5b83\u4eec\u4e4b\u95f4\u8fd8\u53ef\u4ee5\u6267\u884c&lt;\u3001&lt;=\u3001&gt;\u548c&gt;=\u7b49\u5173\u7cfb\u8fd0\u7b97\uff0c\u7528\u4e8e\u5224\u65ad\u5b83\u4eec\u5728\u6570\u7ec4\u4e2d\u7684\u76f8\u5bf9\u4f4d\u7f6e\u3002\u5bf9\u4e24\u4e2a\u4e0d\u76f8\u5173\u7684\u6307\u9488\u6267\u884c\u5173\u7cfb\u8fd0\u7b97\uff0c\u5176\u7ed3\u679c\u662f\u672a\u5b9a\u4e49\u7684\u3002</p>"},{"location":"foundation/pointers-on-c/pointer/#_11","title":"\u7f16\u8bd1\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/pointer/#1","title":"\u7ec3\u4e60 1","text":"<p>\u8bf7\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u5728\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u8fdb\u884c\u641c\u7d22\uff0c\u67e5\u627e\u6240\u6709\u5728\u4e00\u4e2a\u7ed9\u5b9a\u5b57\u7b26\u96c6\u5408\u4e2d\u51fa\u73b0\u7684\u5b57\u7b26\u3002\u8fd9\u4e2a\u51fd\u6570\u7684\u539f\u578b\u5e94\u8be5\u5982\u4e0b\uff1a</p> <pre><code>char *find_char( char const *source,\n\u3000\u3000char const *chars );\n</code></pre> <pre><code>#include &lt;stdio.h&gt;\n\nchar *find_char(char const *source, char const *chars) {\n    if (!source || !chars) {\n        return NULL; // \u5982\u679c\u4efb\u4e00\u8f93\u5165\u5b57\u7b26\u4e32\u662fNULL\uff0c\u76f4\u63a5\u8fd4\u56deNULL\n    }\n\n    // \u904d\u5386source\u5b57\u7b26\u4e32\n    for (; *source != '\\0'; ++source) {\n        // \u5bf9\u6bcf\u4e2asource\u4e2d\u7684\u5b57\u7b26\uff0c\u904d\u5386chars\u5b57\u7b26\u4e32\n        for (const char *temp_chars = chars; *temp_chars != '\\0'; ++temp_chars) {\n            // \u5982\u679c\u5728chars\u4e2d\u627e\u5230\u4e86\u4e0esource\u4e2d\u5f53\u524d\u5b57\u7b26\u76f8\u5339\u914d\u7684\u5b57\u7b26\uff0c\u8fd4\u56de\u5f53\u524d\u5b57\u7b26\u7684\u5730\u5740\n            if (*source == *temp_chars) {\n                return (char *)source;\n            }\n        }\n    }\n\n    // \u5982\u679c\u904d\u5386\u5b8c\u4e86source\u5b57\u7b26\u4e32\u4e5f\u6ca1\u6709\u5728chars\u4e2d\u627e\u5230\u5339\u914d\u7684\u5b57\u7b26\uff0c\u8fd4\u56deNULL\n    return NULL;\n}\n\nint main() {\n    char const *source = \"Hello, World!\";\n    char const *chars = \"abcdefghijklmnopqrstuvwxyz\";\n\n    char *found_char = find_char(source, chars);\n    if (found_char != NULL) {\n        printf(\"First matching character: '%c'\\n\", *found_char);\n    } else {\n        printf(\"No matching character found.\\n\");\n    }\n\n    return 0;\n}\n\n</code></pre>"},{"location":"foundation/pointers-on-c/pointer/#2","title":"\u7ec3\u4e60 2","text":"<p>\u8bf7\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u5220\u9664\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u4e00\u90e8\u5206\u3002\u51fd\u6570\u7684\u539f\u578b\u5982\u4e0b\uff1a</p> <pre><code>\u3000int del_substr( char *str, char const *substr )\n</code></pre> <p>\u51fd\u6570\u9996\u5148\u5e94\u8be5\u5224\u65adsubstr\u662f\u5426\u51fa\u73b0\u5728str\u4e2d\u3002\u5982\u679c\u5b83\u5e76\u672a\u51fa\u73b0\uff0c\u51fd\u6570\u5c31\u8fd4\u56de0\uff1b\u5982\u679c\u51fa\u73b0\uff0c\u51fd\u6570\u5e94\u8be5\u628astr\u4e2d\u4f4d\u4e8e\u8be5\u5b50\u4e32\u540e\u9762\u7684\u6240\u6709\u5b57\u7b26\u590d\u5236\u5230\u8be5\u5b50\u4e32\u7684\u4f4d\u7f6e\uff0c\u4ece\u800c\u5220\u9664\u8fd9\u4e2a\u5b50\u4e32\uff0c\u7136\u540e\u51fd\u6570\u8fd4\u56de1\u3002\u5982\u679csubstr\u591a\u6b21\u51fa\u73b0\u5728str\u4e2d\uff0c\u51fd\u6570\u53ea\u5220\u9664\u7b2c1\u6b21\u51fa\u73b0\u7684\u5b50\u4e32\u3002\u51fd\u6570\u7684\u7b2c2\u4e2a\u53c2\u6570\u7edd\u4e0d\u4f1a\u88ab\u4fee\u6539\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdbool.h&gt;\n\n// \u529f\u80fd: \u67e5\u627e\u5b50\u5b57\u7b26\u4e32substr\u5728\u5b57\u7b26\u4e32str\u4e2d\u7684\u4f4d\u7f6e\n// \u8fd4\u56de\u503c: \u5982\u679c\u627e\u5230substr\uff0c\u5219\u8fd4\u56desubstr\u5728str\u4e2d\u9996\u6b21\u51fa\u73b0\u7684\u5730\u5740\uff1b\u5426\u5219\u8fd4\u56deNULL\nchar *find_substr(char *str, char const *substr) {\n    if (!str || !substr) {\n        return NULL;\n    }\n\n    int len_str = strlen(str);\n    int len_substr = strlen(substr);\n\n    if (len_substr == 0) {\n        return str;\n    }\n\n    for (int i = 0; i &lt;= len_str - len_substr; ++i) {\n        bool found = true;\n        for (int j = 0; j &lt; len_substr; ++j) {\n            if (str[i + j] != substr[j]) {\n                found = false;\n                break;\n            }\n        }\n        if (found) {\n            return &amp;str[i];\n        }\n    }\n    return NULL;\n}\n\n// \u529f\u80fd: \u4ece\u5b57\u7b26\u4e32str\u4e2d\u5220\u9664\u5b50\u5b57\u7b26\u4e32substr\n// \u8fd4\u56de\u503c: \u5982\u679c\u5220\u9664\u6210\u529f\uff0c\u8fd4\u56de1\uff1b\u5982\u679c\u5b50\u5b57\u7b26\u4e32\u672a\u627e\u5230\uff0c\u8fd4\u56de0\nint del_substr(char *str, char const *substr) {\n    char *substr_location = find_substr(str, substr);\n\n    if (substr_location == NULL) {\n        // \u5982\u679c\u672a\u627e\u5230\u5b50\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de0\n        return 0;\n    }\n\n    int len_substr = strlen(substr);\n    int shift = strlen(substr_location + len_substr) + 1; // \u5305\u62ecNULL\u7ec8\u6b62\u7b26\n\n    // \u5220\u9664\u5b50\u5b57\u7b26\u4e32\uff1a\u5c06\u540e\u9762\u7684\u5b57\u7b26\u4e32\u5411\u524d\u79fb\u52a8\n    memmove(substr_location, substr_location + len_substr, shift);\n\n    return 1;\n}\n\nint main() {\n    char str[100] = \"Hello, World! World!\";\n    char const *substr = \"World\";\n\n    printf(\"Original string: '%s'\\n\", str);\n\n    if (del_substr(str, substr)) {\n        printf(\"After deletion: '%s'\\n\", str);\n    } else {\n        printf(\"Substring not found.\\n\");\n    }\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/pointer/#3","title":"\u7ec3\u4e60 3","text":"<p>\u7f16\u5199\u51fd\u6570reverse_string\uff0c\u5b83\u7684\u539f\u578b\u5982\u4e0b\uff1a</p> <pre><code>\u3000void reverse_string( char *string );\n</code></pre> <p>\u51fd\u6570\u628a\u53c2\u6570\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u7b26\u53cd\u5411\u6392\u5217\u3002\u8bf7\u4f7f\u7528\u6307\u9488\u800c\u4e0d\u662f\u6570\u7ec4\u4e0b\u6807\uff0c\u4e0d\u8981\u4f7f\u7528\u4efb\u4f55C\u51fd\u6570\u5e93\u4e2d\u7528\u4e8e\u64cd\u7eb5\u5b57\u7b26\u4e32\u7684\u51fd\u6570\u3002\u63d0\u793a\uff1a \u4e0d\u9700\u8981\u58f0\u660e\u4e00\u4e2a\u5c40\u90e8\u6570\u7ec4\u6765\u4e34\u65f6\u5b58\u50a8\u53c2\u6570\u5b57\u7b26\u4e32\u3002</p> <pre><code>void reverse_string(char *string) {\n    char *start = string; // start\u6307\u9488\u6307\u5411\u5b57\u7b26\u4e32\u5f00\u5934\n    char *end = string; // end\u6307\u9488\u4e5f\u5148\u6307\u5411\u5f00\u5934\uff0c\u7a0d\u540e\u5bfb\u627e\u5b57\u7b26\u4e32\u672b\u5c3e\n    char temp; // \u4ea4\u6362\u5b57\u7b26\u65f6\u4f7f\u7528\u7684\u4e34\u65f6\u53d8\u91cf\n\n    // \u5c06end\u6307\u9488\u79fb\u52a8\u5230\u5b57\u7b26\u4e32\u7684\u672b\u5c3e\uff08\u4e0d\u5305\u62ecNULL\u7ec8\u6b62\u7b26\uff09\n    while (*end != '\\0') {\n        end++;\n    }\n    end--; // end\u6307\u9488\u73b0\u5728\u6307\u5411\u5b57\u7b26\u4e32\u7684\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\n\n    // \u5f53start\u6307\u9488\u5728end\u6307\u9488\u4e4b\u524d\u65f6\uff0c\u4ea4\u6362\u4e24\u4e2a\u6307\u9488\u6307\u5411\u7684\u5b57\u7b26\n    while (start &lt; end) {\n        // \u4ea4\u6362\u5e76\u79fb\u52a8\u6307\u9488\n        temp = *start;\n        *start = *end;\n        *end = temp;\n\n        // start\u6307\u9488\u5411\u540e\u79fb\u52a8\uff0cend\u6307\u9488\u5411\u524d\u79fb\u52a8\n        start++;\n        end--;\n    }\n}\n\nint main() {\n    char str[] = \"Hello, World!\";\n    reverse_string(str);\n    printf(\"%s\\n\", str); // \u8f93\u51fa\u53cd\u8f6c\u540e\u7684\u5b57\u7b26\u4e32\n    return 0;\n}\n\n</code></pre>"},{"location":"foundation/pointers-on-c/preprocessor/","title":"\u9884\u5904\u7406\u5668","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p>"},{"location":"foundation/pointers-on-c/preprocessor/#_2","title":"\u9884\u5b9a\u4e49\u7b26\u53f7","text":"<p>\u7531\u9884\u5904\u7406\u5668 \u5b9a\u4e49\u7684\u7b26\u53f7\u3002\u5b83\u4eec\u7684\u503c\u6216\u8005\u662f\u5b57\u7b26\u4e32\u5e38\u91cf\uff0c\u6216\u8005\u662f\u5341\u8fdb\u5236\u6570\u5b57\u5e38\u91cf\u3002__FILE__\u548c__LINE__\u5728\u786e\u8ba4\u8c03\u8bd5\u8f93\u51fa\u7684\u6765\u6e90\u65b9\u9762\u5f88\u6709\u7528\u5904\u3002__DATE__\u548c__TIME__\u5e38\u5e38\u7528\u4e8e\u5728\u88ab\u7f16\u8bd1\u7684\u7a0b\u5e8f\u4e2d\u52a0\u5165\u7248\u672c\u4fe1\u606f\u3002__STDC__\u7528\u4e8e\u90a3\u4e9b\u5728ANSI\u73af\u5883\u548c\u975eANSI\u73af\u5883\u90fd\u5fc5\u987b\u8fdb\u884c\u7f16\u8bd1\u7684\u7a0b\u5e8f\u4e2d\u7ed3\u5408\u6761\u4ef6\u7f16\u8bd1</p>"},{"location":"foundation/pointers-on-c/preprocessor/#define","title":"define","text":"<p>\u4f60\u5df2\u7ecf\u89c1\u8fc7 define\u6307\u4ee4\u7684\u4e00\u4e9b\u7b80\u5355\u7528\u6cd5\uff0c\u5c31\u662f\u4e3a\u6570\u503c\u547d\u540d\u4e00\u4e2a\u7b26\u53f7\u3002</p> <pre><code>#define\u3000name\u3000 stuff\n</code></pre> <p>\u6709\u4e86\u8fd9\u6761\u6307\u4ee4\u4ee5\u540e\uff0c\u6bcf\u5f53\u6709\u7b26\u53f7name\u51fa\u73b0\u5728\u8fd9\u6761\u6307\u4ee4\u540e\u9762\u65f6\uff0c\u9884\u5904\u7406\u5668\u5c31\u4f1a\u628a\u5b83\u66ff\u6362\u6210stuff\u3002</p> <p>\u66ff\u6362\u6587\u672c\u5e76\u4e0d\u4ec5\u9650\u4e8e\u6570\u503c\u5b57\u9762\u503c\u5e38\u91cf\u3002\u4f7f\u7528#define\u6307\u4ee4\uff0c\u4f60\u53ef\u4ee5\u628a\u4efb\u4f55 \u6587\u672c\u66ff\u6362\u5230\u7a0b\u5e8f\u4e2d\u3002</p> <p>\u5982\u679c\u5b9a\u4e49\u4e2d\u7684stuff\u975e\u5e38\u957f\uff0c\u5b83\u53ef\u4ee5\u5206\u6210\u51e0\u884c\uff0c\u9664\u4e86\u6700\u540e\u4e00\u884c\u4e4b\u5916\uff0c\u6bcf\u884c\u7684\u672b\u5c3e\u90fd\u8981\u52a0\u4e00\u4e2a\u53cd\u659c\u6760\u3002</p>"},{"location":"foundation/pointers-on-c/preprocessor/#_3","title":"\u5b8f","text":"<p><code>#define</code>\u673a\u5236\u5305\u62ec\u4e86\u4e00\u4e2a\u89c4\u5b9a\uff0c\u5141\u8bb8\u628a\u53c2\u6570\u66ff\u6362\u5230\u6587\u672c\u4e2d\uff0c\u8fd9\u79cd\u5b9e\u73b0\u901a\u5e38\u79f0\u4e3a\u5b8f (macro)\u6216\u5b9a\u4e49\u5b8f(defined macro)\u3002\u4e0b\u9762\u662f\u5b8f\u7684\u58f0\u660e\u65b9\u5f0f\uff1a</p> <pre><code>define\u3000name(parameter-list\n\n)\u3000 stuff\n</code></pre> <p>\u5176\u4e2d\uff0cparameter-list\uff08\u53c2\u6570\u5217\u8868\uff09\u662f\u4e00\u4e2a\u7531\u9017\u53f7\u5206\u9694\u7684\u7b26\u53f7\u5217\u8868\uff0c\u5b83\u4eec\u53ef\u80fd\u51fa\u73b0\u5728stuff\u4e2d\u3002\u53c2\u6570\u5217\u8868\u7684\u5de6\u62ec\u53f7\u5fc5\u987b\u4e0ename\u7d27\u90bb\u3002\u5982\u679c\u4e24\u8005\u4e4b\u95f4\u6709\u4efb\u4f55\u7a7a\u767d\u5b58\u5728\uff0c\u53c2\u6570\u5217\u8868\u5c31\u4f1a\u88ab\u89e3\u91ca\u4e3astuff\u7684\u4e00\u90e8\u5206\u3002</p> <p>\u5f53\u5b8f\u88ab\u8c03\u7528\u65f6\uff0c\u540d\u5b57\u540e\u9762\u662f\u4e00\u4e2a\u7531\u9017\u53f7\u5206\u9694\u7684\u503c\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u503c\u90fd\u4e0e\u5b8f\u5b9a\u4e49\u4e2d\u7684\u4e00\u4e2a\u53c2\u6570\u76f8\u5bf9\u5e94\uff0c\u6574\u4e2a\u5217\u8868\u7528\u4e00\u5bf9\u62ec\u53f7\u5305\u56f4\u3002\u5f53\u53c2\u6570\u51fa\u73b0\u5728\u7a0b\u5e8f\u4e2d\u65f6\uff0c\u4e0e\u6bcf\u4e2a\u53c2\u6570\u5bf9\u5e94\u7684\u5b9e\u9645\u503c\u90fd\u5c06\u88ab\u66ff\u6362\u5230stuff\u4e2d\u3002</p> <pre><code>#define SQUARE(x)\u3000\u3000x * x\nSQUARE( 5 )\n</code></pre>"},{"location":"foundation/pointers-on-c/preprocessor/#define_1","title":"define\u66ff\u6362","text":"<p>\u5728\u7a0b\u5e8f\u4e2d\u6269\u5c55 define\u5b9a\u4e49\u7b26\u53f7\u548c\u5b8f\u65f6\uff0c\u9700\u8981\u6d89\u53ca\u51e0\u4e2a\u6b65\u9aa4\u3002</p> <p>1\uff0e\u5728\u8c03\u7528\u5b8f\u65f6\uff0c\u9996\u5148\u5bf9\u53c2\u6570\u8fdb\u884c\u68c0\u67e5\uff0c\u770b\u770b\u662f\u5426\u5305\u542b\u4e86\u4efb\u4f55\u7531 define\u5b9a\u4e49\u7684\u7b26\u53f7\u3002\u5982\u679c\u662f\uff0c\u5b83\u4eec\u9996\u5148\u88ab\u66ff\u6362\u3002</p> <p>2\uff0e\u66ff\u6362\u6587\u672c\u968f\u540e\u88ab\u63d2\u5165\u5230\u7a0b\u5e8f\u4e2d\u539f\u6765\u6587\u672c\u7684\u4f4d\u7f6e\u3002\u5bf9\u4e8e\u5b8f\uff0c\u53c2\u6570\u540d\u88ab\u5b83\u4eec\u7684\u503c\u6240\u66ff\u4ee3\u3002</p> <p>3\uff0e\u6700\u540e\uff0c\u518d\u6b21\u5bf9\u7ed3\u679c\u6587\u672c\u8fdb\u884c\u626b\u63cf\uff0c\u770b\u770b\u5b83\u662f\u5426\u5305\u542b\u4e86\u4efb\u4f55\u7531define\u5b9a\u4e49\u7684\u7b26\u53f7\u3002\u5982\u679c\u662f\uff0c\u5c31\u91cd\u590d\u4e0a\u8ff0\u5904\u7406\u8fc7\u7a0b\u3002</p> <p>\u8fd9\u6837\uff0c\u5b8f\u53c2\u6570\u548cdefine\u5b9a\u4e49\u53ef\u4ee5\u5305\u542b\u5176\u4ed6define\u5b9a\u4e49\u7684\u7b26\u53f7\u3002\u4f46\u662f\uff0c\u5b8f\u4e0d\u53ef\u4ee5\u51fa\u73b0\u9012\u5f52\u3002</p>"},{"location":"foundation/pointers-on-c/preprocessor/#_4","title":"\u5b8f\u4e0e\u51fd\u6570","text":"<p>\u5b8f\u975e\u5e38\u9891\u7e41\u5730\u7528\u4e8e\u6267\u884c\u7b80\u5355\u7684\u8ba1\u7b97\uff0c\u6bd4\u5982\u5728\u4e24\u4e2a\u8868\u8fbe\u5f0f\u4e2d\u5bfb\u627e\u5176\u4e2d\u8f83\u5927\uff08\u6216\u8f83\u5c0f\uff09\u7684\u4e00\u4e2a\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u7528\u51fd\u6570\u6765\u5b8c\u6210\u8fd9\u4e2a\u4efb\u52a1\u5462\uff1f\u6709\u4e24\u4e2a\u539f\u56e0\u3002\u9996\u5148\uff0c\u7528\u4e8e\u8c03\u7528\u548c\u4ece\u51fd\u6570\u8fd4\u56de\u7684\u4ee3\u7801\u5f88\u53ef\u80fd\u6bd4\u5b9e\u9645\u6267\u884c\u8fd9\u4e2a\u5c0f\u578b\u8ba1\u7b97\u5de5\u4f5c\u7684\u4ee3\u7801\u66f4\u5927\uff0c\u6240\u4ee5\u4f7f\u7528\u5b8f\u6bd4\u4f7f\u7528\u51fd\u6570\u5728\u7a0b\u5e8f\u7684\u89c4\u6a21\u548c\u901f\u5ea6\u65b9\u9762\u90fd\u66f4\u80dc\u4e00\u7b79\u3002</p> <p>\u4f46\u662f\uff0c\u66f4\u4e3a\u91cd\u8981\u7684\u662f\uff0c\u51fd\u6570\u7684\u53c2\u6570\u5fc5\u987b\u58f0\u660e\u4e3a\u4e00\u79cd\u7279\u5b9a\u7684\u7c7b\u578b\uff0c\u6240\u4ee5\u5b83\u53ea\u80fd\u5728\u7c7b\u578b\u5408\u9002\u7684\u8868\u8fbe\u5f0f\u4e0a\u4f7f\u7528\u3002\u53cd\u4e4b\uff0c\u4e0a\u9762\u8fd9\u4e2a\u5b8f\u53ef\u4ee5\u7528\u4e8e\u6574\u578b\u3001\u957f\u6574\u578b\u3001\u5355\u6d6e\u70b9\u578b\u3001\u53cc\u6d6e\u70b9\u6570\u4ee5\u53ca\u5176\u4ed6\u4efb\u4f55\u53ef\u4ee5\u7528&gt;\u64cd\u4f5c\u7b26\u6bd4\u8f83\u503c\u5927\u5c0f\u7684\u7c7b\u578b\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5b8f\u662f\u4e0e\u7c7b\u578b\u65e0\u5173\u7684\u3002</p> <p>\u548c\u4f7f\u7528\u51fd\u6570\u76f8\u6bd4\uff0c\u4f7f\u7528\u5b8f\u7684\u4e0d\u5229\u4e4b\u5904\u5728\u4e8e\u6bcf\u6b21\u4f7f\u7528\u5b8f\u65f6\uff0c\u4e00\u4efd\u5b8f\u5b9a\u4e49\u4ee3\u7801\u7684\u62f7\u8d1d\u90fd\u5c06\u63d2\u5165\u5230\u7a0b\u5e8f\u4e2d\u3002\u9664\u975e\u5b8f\u975e\u5e38\u77ed\uff0c\u5426\u5219\u4f7f\u7528\u5b8f\u53ef\u80fd\u4f1a\u5927\u5e45\u5ea6\u589e\u52a0\u7a0b\u5e8f\u7684\u957f\u5ea6\u3002</p>"},{"location":"foundation/pointers-on-c/preprocessor/#_5","title":"\u5e26\u526f\u4f5c\u7528\u7684\u5b8f\u53c2\u6570","text":"<p>\u5f53\u5b8f\u53c2\u6570\u5728\u5b8f\u5b9a\u4e49\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\u8d85\u8fc7\u4e00\u6b21\u65f6\uff0c\u5982\u679c\u8fd9\u4e2a\u53c2\u6570\u5177\u6709\u526f\u4f5c\u7528\uff0c\u90a3\u4e48\u5f53\u4f60\u4f7f\u7528\u8fd9\u4e2a\u5b8f\u65f6\u5c31\u53ef\u80fd\u51fa\u73b0\u5371\u9669\uff0c\u5bfc\u81f4\u4e0d\u53ef\u9884\u6599\u7684\u7ed3\u679c\u3002\u526f\u4f5c\u7528 \u5c31\u662f\u5728\u8868\u8fbe\u5f0f\u6c42\u503c\u65f6\u51fa\u73b0\u7684\u6c38\u4e45\u6027\u6548\u679c\u3002</p>"},{"location":"foundation/pointers-on-c/preprocessor/#_6","title":"\u547d\u4ee4\u884c\u5b9a\u4e49","text":"<p>\u8bb8\u591aC\u7f16\u8bd1\u5668\u63d0\u4f9b\u4e86\u4e00\u79cd\u80fd\u529b\uff0c\u5141\u8bb8\u4f60\u5728\u547d\u4ee4\u884c\u4e2d\u5b9a\u4e49\u7b26\u53f7\uff0c\u7528\u4e8e\u542f\u52a8\u7f16\u8bd1\u8fc7\u7a0b\u3002\u5f53\u6211\u4eec\u6839\u636e\u540c\u4e00\u4e2a\u6e90\u6587\u4ef6\u7f16\u8bd1\u4e00\u4e2a\u7a0b\u5e8f\u7684\u4e0d\u540c\u7248\u672c\u65f6\uff0c\u8fd9\u4e2a\u7279\u6027\u662f\u5f88\u6709\u7528\u7684\u3002</p>"},{"location":"foundation/pointers-on-c/preprocessor/#_7","title":"\u6761\u4ef6\u7f16\u8bd1","text":"<p>\u5728\u7f16\u8bd1\u4e00\u4e2a\u7a0b\u5e8f\u65f6\uff0c\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u67d0\u6761\u8bed\u53e5\u6216\u67d0\u7ec4\u8bed\u53e5\u8fdb\u884c\u7ffb\u8bd1\u6216\u8005\u88ab\u5ffd\u7565\uff0c\u5e38\u5e38\u4f1a\u663e\u5f97\u5f88\u65b9\u4fbf\u3002\u53ea\u7528\u4e8e\u8c03\u8bd5\u7a0b\u5e8f\u7684\u8bed\u53e5\u5c31\u662f\u4e00\u4e2a\u660e\u663e\u7684\u4f8b\u5b50\u3002\u5b83\u4eec\u4e0d\u5e94\u8be5\u51fa\u73b0\u5728\u7a0b\u5e8f\u7684\u4ea7\u54c1\u7248\u672c\u4e2d\uff0c\u4f46\u662f\u4f60\u53ef\u80fd\u5e76\u4e0d\u60f3\u628a\u8fd9\u4e9b\u8bed\u53e5\u4ece\u6e90\u4ee3\u7801\u4e2d\u7269\u7406\u5220\u9664\uff0c\u56e0\u4e3a\u5982\u679c\u9700\u8981\u4e00\u4e9b\u7ef4\u62a4\u6027\u4fee\u6539\u65f6\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u91cd\u65b0\u8c03\u8bd5\u8fd9\u4e2a\u7a0b\u5e8f\uff0c\u8fd8\u9700\u8981\u8fd9\u4e9b\u8bed\u53e5\u3002</p> <p>\u6761\u4ef6\u7f16\u8bd1(conditional compilation)\u5c31\u662f\u7528\u4e8e\u5b9e\u73b0\u8fd9\u4e2a\u76ee\u7684\u3002\u4f7f\u7528\u6761\u4ef6\u7f16\u8bd1\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u4ee3\u7801\u7684\u4e00\u90e8\u5206\u662f\u88ab\u6b63\u5e38\u7f16\u8bd1\u8fd8\u662f\u5b8c\u5168\u5ffd\u7565\u3002\u7528\u4e8e\u652f\u6301\u6761\u4ef6\u7f16\u8bd1\u7684\u57fa\u672c\u7ed3\u6784\u662fif\u6307\u4ee4\u548c\u4e0e\u5176\u5339\u914d\u7684endif\u6307\u4ee4\u3002</p>"},{"location":"foundation/pointers-on-c/preprocessor/#_8","title":"\u6587\u4ef6\u5305\u542b","text":"<p>\u4f60\u5df2\u7ecf\u770b\u5230\u8fc7\uff0cinclude\u6307\u4ee4\u4f7f\u53e6\u4e00\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9\u88ab\u7f16\u8bd1\uff0c\u5c31\u50cf\u5b83\u5b9e\u9645\u51fa\u73b0\u4e8e include\u6307\u4ee4\u51fa\u73b0\u7684\u4f4d\u7f6e\u4e00\u6837\u3002\u8fd9\u79cd\u66ff\u6362\u6267\u884c\u7684\u65b9\u5f0f\u5f88\u7b80\u5355\uff1a\u9884\u5904\u7406\u5668\u5220\u9664\u8fd9\u6761\u6307\u4ee4\uff0c\u5e76\u7528\u5305\u542b\u6587\u4ef6\u7684\u5185\u5bb9\u53d6\u800c\u4ee3\u4e4b\u3002\u8fd9\u6837\uff0c\u4e00\u4e2a\u5934\u6587\u4ef6\u5982\u679c\u88ab\u5305\u542b\u523010\u4e2a\u6e90\u6587\u4ef6\u4e2d\uff0c\u5b83\u5b9e\u9645\u4e0a\u88ab\u7f16\u8bd1\u4e8610\u6b21\u3002</p> <p>\u5f53\u5934\u6587\u4ef6\u88ab\u5305\u542b\u65f6\uff0c\u4f4d\u4e8e\u5934\u6587\u4ef6\u5185\u7684\u6240\u6709\u5185\u5bb9\u90fd\u8981\u88ab\u7f16\u8bd1\u3002\u8fd9\u4e2a\u4e8b\u5b9e\u610f\u5473\u7740\u6bcf\u4e2a\u5934\u6587\u4ef6\u53ea\u5e94\u8be5\u5305\u542b\u4e00\u7ec4\u51fd\u6570\u6216\u6570\u636e\u7684\u58f0\u660e\u3002\u548c\u628a\u4e00\u4e2a\u7a0b\u5e8f\u9700\u8981\u7684\u6240\u6709\u58f0\u660e\u90fd\u653e\u5165\u4e00\u4e2a\u5de8\u5927\u7684\u5934\u6587\u4ef6\u76f8\u6bd4\uff0c\u4f7f\u7528\u51e0\u4e2a\u5934\u6587\u4ef6\uff0c\u6bcf\u4e2a\u5934\u6587\u4ef6\u5305\u542b\u7528\u4e8e\u67d0\u4e2a\u7279\u5b9a\u51fd\u6570\u6216\u6a21\u5757\u7684\u58f0\u660e\u7684\u505a\u6cd5\u66f4\u597d\u4e00\u4e9b\u3002</p> <p>\u7f16\u8bd1\u5668\u652f\u6301\u4e24\u79cd\u4e0d\u540c\u7c7b\u578b\u7684include\u6587\u4ef6\u5305\u542b\uff1a\u51fd\u6570\u5e93\u6587\u4ef6\u548c\u672c\u5730\u6587\u4ef6\u3002</p> <p>\u51fd\u6570\u5e93\u5934\u6587\u4ef6\u5305\u542b\u4f7f\u7528\u4e0b\u9762\u7684\u8bed\u6cd5\u3002</p> <pre><code>#include &lt;filename&gt;\n</code></pre> <p>\u672c\u5730\u6587\u4ef6\u5305\u542b\u4f7f\u7528\u53e6\u4e00\u79cd\u8bed\u6cd5\uff1a</p> <pre><code>#include \"filename\"\n</code></pre>"},{"location":"foundation/pointers-on-c/preprocessor/#_9","title":"\u603b\u7ed3","text":"<p>\u7f16\u8bd1\u4e00\u4e2aC\u7a0b\u5e8f\u7684\u7b2c1\u4e2a\u6b65\u9aa4\u5c31\u662f\u5bf9\u5b83\u8fdb\u884c\u9884\u5904\u7406\u3002\u9884\u5904\u7406\u5668\u5171\u652f\u63015\u4e2a\u7b26\u53f7</p> <p>define\u6307\u4ee4\u628a\u4e00\u4e2a\u7b26\u53f7\u540d\u4e0e\u4e00\u4e2a\u4efb\u610f\u7684\u5b57\u7b26\u5e8f\u5217\u8054\u7cfb\u5728\u4e00\u8d77\u3002\u4f8b\u5982\uff0c\u8fd9\u4e9b\u5b57\u7b26\u53ef\u80fd\u662f\u4e00\u4e2a\u5b57\u9762\u503c\u5e38\u91cf\u3001\u8868\u8fbe\u5f0f\u6216\u8005\u7a0b\u5e8f\u8bed\u53e5\u3002\u8fd9\u4e2a\u5e8f\u5217\u5230\u8be5\u884c\u7684\u672b\u5c3e\u7ed3\u675f\u3002\u5982\u679c\u8be5\u5e8f\u5217\u8f83\u957f\uff0c\u53ef\u4ee5\u628a\u5b83\u5206\u5f00\u6570\u884c\uff0c\u4f46\u5728\u6700\u540e\u4e00\u884c\u4e4b\u5916\u7684\u6bcf\u4e00\u884c\u672b\u5c3e\u52a0\u4e00\u4e2a\u53cd\u659c\u6760\u3002\u5b8f\u5c31\u662f\u4e00\u4e2a\u88ab\u5b9a\u4e49\u7684\u5e8f\u5217\uff0c\u5b83\u7684\u53c2\u6570\u503c\u5c06\u88ab\u66ff\u6362\u3002\u5f53\u4e00\u4e2a\u5b8f\u88ab\u8c03\u7528\u65f6\uff0c\u5b83\u7684\u6bcf\u4e2a\u53c2\u6570\u90fd\u88ab\u4e00\u4e2a\u5177\u4f53\u7684\u503c\u66ff\u6362\u3002\u4e3a\u4e86\u9632\u6b62\u53ef\u80fd\u51fa\u73b0\u4e8e\u8868\u8fbe\u5f0f\u4e2d\u7684\u4e0e\u5b8f\u6709\u5173\u7684\u9519\u8bef\uff0c\u5728\u5b8f\u5b8c\u6574\u5b9a\u4e49\u7684\u4e24\u8fb9\u5e94\u8be5\u52a0\u4e0a\u62ec\u53f7\u3002\u540c\u6837\uff0c\u5728\u5b8f\u5b9a\u4e49\u4e2d\u6bcf\u4e2a\u53c2\u6570\u7684\u4e24\u8fb9\u4e5f\u8981\u52a0\u4e0a\u62ec\u53f7\u3002define\u6307\u4ee4\u53ef\u4ee5\u7528\u4e8e\u201c\u91cd\u5199\u201dC\u8bed\u8a00\uff0c\u4f7f\u5b83\u770b\u4e0a\u53bb\u50cf\u662f\u5176\u4ed6\u8bed\u8a00\u3002</p> <p>argument\u7ed3\u6784\u7531\u9884\u5904\u7406\u5668\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u5e38\u91cf\u201cargument\u201d\u3002<code>##</code>\u64cd\u4f5c\u7b26\u7528\u4e8e\u628a\u5b83\u4e24\u8fb9\u7684\u6587\u672c\u7c98\u8d34\u6210\u540c\u4e00\u4e2a\u6807\u8bc6\u7b26\u3002</p> <p>\u6709\u4e9b\u4efb\u52a1\u65e2\u53ef\u4ee5\u7528\u5b8f\u4e5f\u53ef\u4ee5\u7528\u51fd\u6570\u5b9e\u73b0\u3002\u4f46\u662f\uff0c\u5b8f\u4e0e\u7c7b\u578b\u65e0\u5173\uff0c\u8fd9\u662f\u4e00\u4e2a\u4f18\u70b9\u3002\u5b8f\u7684\u6267\u884c\u901f\u5ea6\u5feb\u4e8e\u51fd\u6570\uff0c\u56e0\u4e3a\u5b83\u4e0d\u5b58\u5728\u51fd\u6570\u8c03\u7528/\u8fd4\u56de\u7684\u5f00\u9500\u3002\u4f46\u662f\uff0c\u4f7f\u7528\u5b8f\u901a\u5e38\u4f1a\u589e\u52a0\u7a0b\u5e8f\u7684\u957f\u5ea6\uff0c\u4f46\u51fd\u6570\u5374\u4e0d\u4f1a\u3002\u540c\u6837\uff0c\u5177\u6709\u526f\u4f5c\u7528\u7684\u53c2\u6570\u53ef\u80fd\u5728\u5b8f\u7684\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u4e0d\u53ef\u9884\u6599\u7684\u7ed3\u679c\uff0c\u800c\u51fd\u6570\u53c2\u6570\u7684\u884c\u4e3a\u66f4\u5bb9\u6613\u9884\u6d4b\u3002\u7531\u4e8e\u8fd9\u4e9b\u533a\u522b\uff0c\u4f7f\u7528\u4e00\u79cd\u547d\u540d\u7ea6\u5b9a\uff0c\u8ba9\u7a0b\u5e8f\u5458\u5f88\u5bb9\u6613\u5730\u5224\u65ad\u4e00\u4e2a\u6807\u8bc6\u7b26\u662f\u51fd\u6570\u8fd8\u662f\u5b8f\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002</p> <p>\u5728\u8bb8\u591a\u7f16\u8bd1\u5668\u4e2d\uff0c\u7b26\u53f7\u53ef\u4ee5\u4ece\u547d\u4ee4\u884c\u5b9a\u4e49\u3002<code>#undef</code>\u6307\u4ee4\u5c06\u5bfc\u81f4\u4e00\u4e2a\u540d\u5b57\u7684\u539f\u6765\u5b9a\u4e49\u88ab\u5ffd\u7565\u3002</p> <p>\u4f7f\u7528\u6761\u4ef6\u7f16\u8bd1\uff0c\u4f60\u53ef\u4ee5\u4ece\u4e00\u7ec4\u5355\u4e00\u7684\u6e90\u6587\u4ef6\u521b\u5efa\u7a0b\u5e8f\u7684\u4e0d\u540c\u7248\u672c\u3002<code>#if</code>\u6307\u4ee4\u6839\u636e\u7f16\u8bd1\u65f6\u6d4b\u8bd5\u7684\u7ed3\u679c\uff0c\u5305\u542b\u6216\u5ffd\u7565\u4e00\u4e2a\u5e8f\u5217\u7684\u4ee3\u7801\u3002\u5f53\u540c\u65f6\u4f7f\u7528<code>#elif</code>\u548c<code>#else</code>\u6307\u4ee4\u65f6\uff0c\u4f60\u53ef\u4ee5\u4ece\u51e0\u4e2a\u5e8f\u5217\u7684\u4ee3\u7801\u4e2d\u9009\u62e9\u5176\u4e2d\u4e4b\u4e00\u8fdb\u884c\u7f16\u8bd1\u3002\u9664\u4e86\u6d4b\u8bd5\u5e38\u91cf\u8868\u8fbe\u5f0f\u4e4b\u5916\uff0c\u8fd9\u4e9b\u6307\u4ee4\u8fd8\u53ef\u4ee5\u6d4b\u8bd5\u67d0\u4e2a\u7b26\u53f7\u662f\u5426\u5df2\u88ab\u5b9a\u4e49\u3002<code>#ifdef</code>\u548c<code>#ifndef</code>\u6307\u4ee4\u4e5f\u53ef\u4ee5\u6267\u884c\u8fd9\u4e2a\u4efb\u52a1\u3002</p> <p><code>#include</code>\u6307\u4ee4\u7528\u4e8e\u5b9e\u73b0\u6587\u4ef6\u5305\u542b\u3002\u5b83\u5177\u6709\u4e24\u79cd\u5f62\u5f0f\u3002\u5982\u679c\u6587\u4ef6\u540d\u4f4d\u4e8e\u4e00\u5bf9\u5c16\u62ec\u53f7\u4e2d\uff0c\u7f16\u8bd1\u5668\u5c06\u5728\u7531\u7f16\u8bd1\u5668\u5b9a\u4e49\u7684\u6807\u51c6\u4f4d\u7f6e\u67e5\u627e\u8fd9\u4e2a\u6587\u4ef6\u3002\u8fd9\u79cd\u5f62\u5f0f\u901a\u5e38\u7528\u4e8e\u5305\u542b\u51fd\u6570\u5e93\u5934\u6587\u4ef6\u65f6\u3002\u53e6\u4e00\u79cd\u5f62\u5f0f\uff0c\u6587\u4ef6\u540d\u51fa\u73b0\u5728\u4e00\u5bf9\u53cc\u5f15\u53f7\u5185\u3002\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u53ef\u4ee5\u7528\u4e0d\u540c\u7684\u65b9\u5f0f\u5904\u7406\u8fd9\u79cd\u5f62\u5f0f\u3002\u4f46\u662f\uff0c\u5982\u679c\u7528\u4e8e\u5904\u7406\u672c\u5730\u5934\u6587\u4ef6\u7684\u4efb\u4f55\u7279\u6b8a\u5904\u7406\u65b9\u6cd5\u65e0\u6cd5\u627e\u5230\u8fd9\u4e2a\u5934\u6587\u4ef6\uff0c\u90a3\u4e48\u7f16\u8bd1\u5668\u63a5\u4e0b\u6765\u5c31\u4f7f\u7528\u6807\u51c6\u67e5\u627e\u8fc7\u7a0b\u6765\u5bfb\u627e\u5b83\u3002\u8fd9\u79cd\u5f62\u5f0f\u901a\u5e38\u7528\u4e8e\u5305\u542b\u4f60\u81ea\u5df1\u7f16\u5199\u7684\u5934\u6587\u4ef6\u3002\u6587\u4ef6\u5305\u542b\u53ef\u4ee5\u5d4c\u5957\uff0c\u4f46\u5f88\u5c11\u9700\u8981\u8fdb\u884c\u8d85\u8fc7\u4e00\u5c42\u6216\u4e24\u5c42\u7684\u6587\u4ef6\u5305\u542b\u5d4c\u5957\u3002\u5d4c\u5957\u7684\u5305\u542b\u6587\u4ef6\u5c06\u4f1a\u589e\u52a0\u591a\u6b21\u5305\u542b\u540c\u4e00\u4e2a\u6587\u4ef6\u7684\u5371\u9669\uff0c\u800c\u4e14\u4f7f\u6211\u4eec\u66f4\u96be\u4ee5\u786e\u5b9a\u67d0\u4e2a\u7279\u5b9a\u7684\u6e90\u6587\u4ef6\u4f9d\u8d56\u7684\u7a76\u7adf\u662f\u54ea\u4e2a\u5934\u6587\u4ef6\u3002</p> <p><code>#error</code>\u6307\u4ee4\u5728\u7f16\u8bd1\u65f6\u4ea7\u751f\u4e00\u6761\u9519\u8bef\u4fe1\u606f\uff0c\u4fe1\u606f\u4e2d\u5305\u542b\u7684\u662f\u4f60\u6240\u9009\u62e9\u7684\u6587\u672c\u3002<code>#line</code>\u6307\u4ee4\u5141\u8bb8\u4f60\u544a\u8bc9\u7f16\u8bd1\u5668\u4e0b\u4e00\u884c\u8f93\u5165\u7684\u884c\u53f7\uff0c\u5982\u679c\u5b83\u52a0\u4e0a\u4e86\u53ef\u9009\u5185\u5bb9\uff0c\u5b83\u8fd8\u5c06\u544a\u8bc9\u7f16\u8bd1\u5668\u8f93\u5165\u6e90\u6587\u4ef6\u7684\u540d\u5b57\u3002\u56e0\u7f16\u8bd1\u5668\u800c\u5f02\u7684<code>#progma</code>\u6307\u4ee4\u5141\u8bb8\u7f16\u8bd1\u5668\u63d0\u4f9b\u4e0d\u6807\u51c6\u7684\u5904\u7406\u8fc7\u7a0b\uff0c\u6bd4\u5982\u5411\u4e00\u4e2a\u51fd\u6570\u63d2\u5165\u5185\u8054\u7684\u6c47\u7f16\u4ee3\u7801\u3002</p>"},{"location":"foundation/pointers-on-c/preprocessor/#_10","title":"\u7f16\u7a0b\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/preprocessor/#1","title":"\u7ec3\u4e60 1","text":"<p>\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u63d0\u793a\u8fd0\u884c\u8fd9\u4e2a\u51fd\u6570\u7684\u8ba1\u7b97\u673a\u7684\u7c7b\u578b\u3002\u8fd9\u4e2a\u51fd\u6570\u5c06\u7531\u4e00\u4e2a\u80fd\u591f\u8fd0\u884c\u4e8e\u8bb8\u591a\u4e0d\u540c\u8ba1\u7b97\u673a\u7684\u7a0b\u5e8f\u4f7f\u7528\u3002</p> <pre><code>#define CPU_UNKNOWN 0\n\n// \u5047\u8bbe\u8fd9\u4e9b\u662f\u53ef\u80fd\u88ab\u5b9a\u4e49\u7684\u5b8f\u7684\u793a\u4f8b\n#define CPU_X86 1\n#define CPU_X64 2\n#define CPU_ARM 3\n#define CPU_MIPS 4\n\nint cpu_type(void) {\n    #if defined(CPU_X86)\n        return CPU_X86;\n    #elif defined(CPU_X64)\n        return CPU_X64;\n    #elif defined(CPU_ARM)\n        return CPU_ARM;\n    #elif defined(CPU_MIPS)\n        return CPU_MIPS;\n    #else\n        return CPU_UNKNOWN;\n    #endif\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/quick-start/","title":"\u5feb\u901f\u4e0a\u624b","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p> <p>\u4e0a\u4e00\u8282\u6211\u4eec\u4e86\u89e3\u4e86\u5982\u4f55\u914d\u7f6e C \u8bed\u8a00\u7684\u5f00\u53d1\u73af\u5883\uff0c\u8fd9\u4e00\u8282\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u6765\u5feb\u901f\u4e86\u89e3 C \u8bed\u8a00\u3002</p>"},{"location":"foundation/pointers-on-c/quick-start/#c","title":"\u901a\u8fc7\u4e00\u6bb5\u4ee3\u7801\u5feb\u901f\u4e86\u89e3 C \u8bed\u8a00","text":"<p>\u8fd9\u4e2a\u7a0b\u5e8f\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u8f93\u5165\u884c\uff0c\u7136\u540e\u5c06\u6bcf\u4e00\u884c\u8f93\u5165\u4ee5\u53ca\u884c\u4e2d\u7684\u67d0\u4e9b\u90e8\u5206\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\u3002\u7b2c\u4e00\u4e2a\u8f93\u5165\u662f\u4e00\u7ec4\u5217\u53f7\uff0c\u4ee5\u8d1f\u6570\u7ed3\u675f\u3002\u5217\u53f7\u662f\u6210\u5bf9\u51fa\u73b0\u7684\uff0c\u6307\u5b9a\u4e86\u8981\u6253\u5370\u7684\u8f93\u5165\u884c\u7684\u5217\u8303\u56f4\u3002\u4f8b\u5982\uff0c0 3 10 12 -1 \u8868\u793a\u53ea\u6253\u5370\u5217 0 \u5230 3 \u548c\u5217 10 \u5230 12\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define MAX_COLS 20    /* max # of columns to process */\n#define MAX_INPUT 1000 /* max len of input &amp; output lines */\n\nint read_column_numbers(int columns[], int max);\nvoid rearrange(char *output, char const *input, int n_columns, int const columns[]);\n\nint main(void)\n{\n    int n_columns;          /* # of columns to process */\n    int columns[MAX_COLS];  /* the columns to process */\n    char input[MAX_INPUT];  /* array for input line */\n    char output[MAX_INPUT]; /* array for output line */\n\n    /*\n    ** \u8bfb\u53d6\u8f93\u5165\u7684\u5217\u7f16\u53f7\n    */\n    n_columns = read_column_numbers(columns, MAX_COLS);\n\n    /*\n    ** \u8bfb\u53d6\u3001\u5904\u7406\u5e76\u6253\u5370\u5269\u4f59\u7684\u8f93\u5165\u884c\n    ** gets\u51fd\u6570\u662f\u4e00\u4e2aC\u8bed\u8a00\u6807\u51c6\u5e93\u51fd\u6570\uff0c\u7528\u4e8e\u4ece\u6807\u51c6\u8f93\u5165\uff08\u901a\u5e38\u662f\u952e\u76d8\uff09\u8bfb\u53d6\u4e00\u884c\u6587\u672c\uff0c\u76f4\u5230\u9047\u5230\u6362\u884c\u7b26\uff08'\\n'\uff09\u6216\u6587\u4ef6\u7ed3\u675f\u7b26\u3002\n    ** \u5b83\u5c06\u8bfb\u53d6\u7684\u5b57\u7b26\uff08\u4e0d\u5305\u62ec\u6362\u884c\u7b26\uff09\u5b58\u50a8\u5230\u5176\u53c2\u6570\u6240\u6307\u5411\u7684\u5b57\u7b26\u6570\u7ec4\u4e2d\uff0c\u5e76\u5728\u6700\u540e\u6dfb\u52a0\u4e00\u4e2a\u5b57\u7b26\u4e32\u7ed3\u675f\u7b26'\\0'\u3002\n    ** gets\u51fd\u6570\u5728\u8bfb\u5230\u6587\u4ef6\u7ed3\u675f\u7b26\uff08EOF\uff09\u65f6\u4f1a\u8fd4\u56deNULL\uff0c\u56e0\u6b64\u8fd9\u4e2a\u5faa\u73af\u4f1a\u4e00\u76f4\u8fd0\u884c\uff0c\u76f4\u5230\u7528\u6237\u8f93\u5165EOF\u6807\u5fd7\uff08\u5728Windows\u4e2d\u901a\u5e38\u662fCtrl+Z\uff0c\u800c\u5728Unix/Linux\u7cfb\u7edf\u4e2d\u662fCtrl+D\uff09\u3002\n    */\n    while (gets(input) != NULL)\n    {\n        printf(\"Original input : %s\\n\", input);\n        rearrange(output, input, n_columns, columns);\n        printf(\"Rearranged line: %s\\n\", output);\n    }\n\n    return EXIT_SUCCESS;\n}\n\n/*\n** \u8bfb\u53d6\u5217\u7f16\u53f7\u5217\u8868\uff0c\u5ffd\u7565\u8d85\u51fa\u6700\u5927\u503c\u7684\u5217\u7f16\u53f7\n*/\nint read_column_numbers(int columns[], int max)\n{\n    int num = 0;\n    int ch;\n\n    /*\n    ** \u83b7\u53d6\u5217\u7f16\u53f7\uff0c\u9047\u5230EOF\u6216\u8005\u5c0f\u4e8e0\u7684\u6570\u5b57\u65f6\u505c\u6b62\uff0c\u5faa\u73af\u7ed3\u675f\u7684\u6761\u4ef6\u5177\u4f53\u5305\u62ec\u4ee5\u4e0b\u4e09\u4e2a\n    ** 1. \u8f93\u5165\u7684\u5217\u7f16\u53f7\u6570\u91cf\u8fbe\u5230\u6700\u5927\u503c\n    ** 2. scanf(%d\", &amp;columns[num])\u7684\u8fd4\u56de\u503c\u4e0d\u4e3a1\uff0c\u5373\u4e0d\u518d\u8bfb\u53d6\u5230\u6574\u6570\n    ** 3. \u8bfb\u53d6\u5230\u7684\u6574\u6570\u5c0f\u4e8e0\n    */\n    while (num &lt; max &amp;&amp; scanf(\"%d\", &amp;columns[num]) == 1 &amp;&amp; columns[num] &gt;= 0)\n        num += 1;\n\n    /*\n    ** \u786e\u4fdd\u5217\u7f16\u53f7\u662f\u6210\u5bf9\u51fa\u73b0\u7684\n    */\n    if (num % 2 != 0)\n    {\n        puts(\"Last column number is not paired.\");\n        exit(EXIT_FAILURE);\n    }\n\n    /*\n    ** \u4e22\u5f03\u6700\u540e\u4e00\u4e2a\u6570\u5b57\u540e\u9762\u7684\u5b57\u7b26\n    */\n    while ((ch = getchar()) != EOF &amp;&amp; ch != '\\n')\n        ;\n\n    return num;\n}\n\n/*\n** \u901a\u8fc7\u8fde\u63a5\u6307\u5b9a\u5217\u7684\u5b57\u7b26\u6765\u5904\u7406\u4e00\u884c\u8f93\u5165\u3002\u7136\u540e\u8f93\u51fa\u884c\u4ee5NUL\u7ed3\u5c3e\u3002\n** \u5f53\u6570\u7ec4\u540d\u4f5c\u4e3a\u5b9e\u53c2\u65f6\uff0c\u4f20\u7ed9\u51fd\u6570\u7684\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u6307\u5411\u6570\u7ec4\u8d77\u59cb\u4f4d\u7f6e\u7684\u6307\u9488\uff0c\u4e5f\u5c31\u662f\u6570\u7ec4\u5728\u5185\u5b58\u4e2d\u7684\u5730\u5740\n** \u56e0\u6b64\u5f53\u4e0d\u5e0c\u671b\u539f\u6570\u636e\u4e0d\u88ab\u6539\u522b\u65f6\uff0c\u9700\u8981\u6dfb\u52a0 const \u4fee\u9970\n*/\nvoid rearrange(char *output, char const *input, int n_columns, int const columns[])\n{\n    int col;        /* subscript for columns array */\n    int output_col; /* output column counter */\n    int len;        /* length of input line */\n\n    len = strlen(input);\n    output_col = 0;\n\n    /*\n    ** \u5904\u7406\u6bcf\u4e00\u5bf9\u5217\u7f16\u53f7\n    */\n    for (col = 0; col &lt; n_columns; col += 2)\n    {\n        int nchars = columns[col + 1] - columns[col] + 1;\n\n        /*\n        ** \u5982\u679c\u8f93\u5165\u884c\u4e0d\u591f\u957f\u6216\u8005\u8f93\u51fa\u6570\u7ec4\u5df2\u6ee1\uff0c\u6211\u4eec\u5c31\u7ed3\u675f\u4e86\u3002\n        */\n        if (columns[col] &gt;= len || output_col == MAX_INPUT - 1)\n            break;\n\n        /*\n        ** \u5982\u679c\u8f93\u51fa\u6570\u7ec4\u4e2d\u6ca1\u6709\u8db3\u591f\u7684\u7a7a\u95f4\uff0c\u53ea\u590d\u5236\u80fd\u653e\u4e0b\u7684\u90e8\u5206\u3002\n        */\n        if (output_col + nchars &gt; MAX_INPUT - 1)\n            nchars = MAX_INPUT - output_col - 1;\n\n        /*\n        ** \u590d\u5236\u76f8\u5173\u6570\u636e\n        */\n        strncpy(output + output_col, input + columns[col], nchars);\n        output_col += nchars;\n    }\n\n    /*\n    ** \u6dfb\u52a0NUL\u5b57\u7b26\n    ** \u5728output\u5b57\u7b26\u4e32\u7684output_col\u4f4d\u7f6e\u5904\u63d2\u5165\u4e00\u4e2a\u5b57\u7b26\u4e32\u7ec8\u6b62\u7b26\uff08null terminator\uff09\uff0c\u7528\u4e8e\u6807\u8bb0\u5b57\u7b26\u4e32\u7684\u7ed3\u675f\u3002\u5728C\u8bed\u8a00\u4e2d\uff0c\u5b57\u7b26\u4e32\u662f\u4ee5'\\0'\uff08ASCII\u7801\u4e3a0\u7684\u5b57\u7b26\uff09\u7ed3\u675f\u7684\u5b57\u7b26\u6570\u7ec4\u3002\u8fd9\u4e2a\u7ec8\u6b62\u7b26\u662f\u5fc5\u987b\u7684\uff0c\u56e0\u4e3a\u5b83\u544a\u8bc9\u5b57\u7b26** \u4e32\u5904\u7406\u51fd\u6570\uff08\u6bd4\u5982printf\u3001strlen\u7b49\uff09\u5b57\u7b26\u4e32\u5728\u54ea\u91cc\u7ed3\u675f\u3002\n    */\n    output[output_col] = '\\0';\n}\n</code></pre> <p>\u901a\u8fc7\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u5feb\u901f\u4e86\u89e3 C \u8bed\u8a00\u7684\u8f93\u5165\uff0c\u8f93\u51fa\uff0c\u51fd\u6570\uff0c\u4f20\u53c2\uff0c\u5faa\u73af\u7b49\u77e5\u8bc6\u70b9\u3002</p> <p>\u6240\u6709\u7684 C \u7a0b\u5e8f\u5fc5\u987b\u6709\u4e00\u4e2a main \u51fd\u6570\uff0c\u5b83\u662f\u7a0b\u5e8f\u6267\u884c\u7684\u8d77\u70b9\u3002\u51fd\u6570\u7684\u6807\u91cf\u53c2\u6570\u901a\u8fc7\u4f20\u503c\u7684\u65b9\u5f0f\u8fdb\u884c\u4f20\u9012\uff0c\u800c\u6570\u7ec4\u540d\u53c2\u6570\u5219\u5177\u6709\u4f20\u5740\u8c03\u7528\u7684\u8bed\u4e49\u3002\u5b57\u7b26\u4e32\u662f\u4e00\u4e32\u7531 NULL \u5b57\u8282\u7ed3\u5c3e\u7684\u5b57\u7b26\uff0c\u5e76\u4e14\u6709\u4e00\u7ec4\u5e93\u51fd\u6570\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u4e13\u95e8\u7528\u4e8e\u64cd\u7eb5\u5b57\u7b26\u4e32\u3002printf \u51fd\u6570\u6267\u884c\u683c\u5f0f\u5316\u8f93\u51fa\uff0cscanf \u51fd\u6570\u7528\u4e8e\u683c\u5f0f\u5316\u8f93\u5165\uff0cgetchar \u548cputchar \u5206\u522b\u6267\u884c\u975e\u683c\u5f0f\u5316\u5b57\u7b26\u7684\u8f93\u5165\u548c\u8f93\u51fa\u3002if \u548c while \u8bed\u53e5\u5728 C \u8bed\u8a00\u4e2d\u7684\u7528\u9014\u8ddf\u5b83\u4eec\u5728\u5176\u4ed6\u8bed\u8a00\u4e2d\u7684\u7528\u9014\u5dee\u4e0d\u592a\u591a\u3002</p>"},{"location":"foundation/pointers-on-c/quick-start/#_2","title":"\u7f16\u7a0b\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/quick-start/#1","title":"\u7ec3\u4e60 1","text":"<p>\u201cHello world!\u201d\u7a0b\u5e8f\u5e38\u5e38\u662fC\u7f16\u7a0b\u65b0\u624b\u6240\u7f16\u5199\u7684\u7b2c1\u4e2a\u7a0b\u5e8f\u3002\u5b83\u5728\u6807\u51c6\u8f93\u51fa\u4e2d\u6253\u5370Hello world!\uff0c\u5e76\u5728\u540e\u9762\u6dfb\u52a0\u4e00\u4e2a\u6362\u884c\u7b26\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    printf(\"Hello World\\n\");\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/quick-start/#2","title":"\u7ec3\u4e60 2","text":"<p>\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u51e0\u884c\u8f93\u5165\u3002\u6bcf\u884c\u8f93\u5165\u90fd\u8981\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\u4e0a\uff0c\u524d\u9762\u8981\u52a0\u4e0a\u884c\u53f7\u3002\u5728\u7f16\u5199\u8fd9\u4e2a\u7a0b\u5e8f\u65f6\u8981\u8bd5\u56fe\u8ba9\u7a0b\u5e8f\u80fd\u591f\u5904\u7406\u7684\u8f93\u5165\u884c\u7684\u957f\u5ea6\u6ca1\u6709\u9650\u5236\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define BUFFER_SIZE 1024 // \u5b9a\u4e49\u7f13\u51b2\u533a\u5927\u5c0f\n\nint main() {\n    char buffer[BUFFER_SIZE];\n    int line_number = 1;\n\n    printf(\"\u8bf7\u8f93\u5165\u6587\u672c\uff08CTRL+D \u6216 CTRL+Z \u4ee5\u7ed3\u675f\uff09:\\n\");\n\n    // \u8bfb\u53d6\u8f93\u5165\u76f4\u5230EOF\n    while (fgets(buffer, BUFFER_SIZE, stdin)) {\n        // \u6253\u5370\u884c\u53f7\u548c\u8f93\u5165\u884c\n        printf(\"%d: %s\", line_number++, buffer);\n\n        // \u5982\u679c\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u4e0d\u662f\u6362\u884c\u7b26\uff0c\u8bf4\u660e\u53ef\u80fd\u8fd8\u6709\u66f4\u591a\u5185\u5bb9\u672a\u8bfb\u53d6\u5b8c\n        if (buffer[strlen(buffer) - 1] != '\\n') {\n            int ch;\n            // \u6d88\u8017\u5269\u4f59\u7684\u5b57\u7b26\u76f4\u5230\u9047\u5230\u6362\u884c\u7b26\uff0c\u4ee5\u5b8c\u6210\u8fd9\u4e00\u884c\u7684\u8bfb\u53d6\n            while ((ch = getchar()) != '\\n' &amp;&amp; ch != EOF);\n            if (ch == '\\n') {\n                printf(\"\\n...\u8fd9\u4e00\u884c\u8d85\u8fc7\u4e86\u7f13\u51b2\u533a\u957f\u5ea6\uff0c\u4ec5\u663e\u793a\u90e8\u5206\u5185\u5bb9\\n\");\n            }\n        }\n    }\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/quick-start/#3","title":"\u7ec3\u4e60 3","text":"<p>\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u4e00\u4e9b\u5b57\u7b26\uff0c\u5e76\u628a\u5b83\u4eec\u5199\u5230\u6807\u51c6\u8f93\u51fa\u4e0a\u3002\u5b83\u540c\u65f6\u5e94\u8be5\u8ba1\u7b97checksum\u503c\uff0c\u5e76\u5199\u5728\u5b57\u7b26\u7684\u540e\u9762\u3002</p> <p>checksum(\u68c0\u9a8c\u548c)\u7528\u4e00\u4e2asinged char\u7c7b\u578b\u7684\u53d8\u91cf\u8fdb\u884c\u8ba1\u7b97\uff0c\u5b83\u521d\u59cb\u4e3a-1\u3002\u5f53\u6bcf\u4e2a\u5b57\u7b26\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u65f6\uff0c\u5b83\u7684\u503c\u5c31\u88ab\u52a0\u5230checksum\u4e2d\u3002\u5982\u679cchecksum\u53d8\u91cf\u4ea7\u51fa\u4e86\u6ea2\u51fa\uff0c\u90a3\u4e48\u8fd9\u4e9b\u6ea2\u51fa\u5c31\u4f1a\u88ab\u5ffd\u7565\u3002\u5f53\u6240\u6709\u7684\u5b57\u7b26\u5747\u88ab\u5199\u5165\u540e\uff0c\u7a0b\u5e8f\u4ee5\u5341\u8fdb\u5236\u6574\u6570\u7684\u5f62\u5f0f\u6253\u5370\u51fachecksum\u7684\u503c\uff0c\u5b83\u6709\u53ef\u80fd\u662f\u8d1f\u503c\u3002\u6ce8\u610f\u5728checksum\u540e\u9762\u8981\u6dfb\u52a0\u4e00\u4e2a\u6362\u884c\u7b26\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    signed char checksum = -1; // checksum\u7684\u521d\u59cb\u503c\n    int ch; // \u7528\u4e8e\u5b58\u50a8\u8f93\u5165\u7684\u5b57\u7b26\n\n    printf(\"\u8bf7\u8f93\u5165\u5b57\u7b26\uff0c\u56de\u8f66\u7ed3\u675f\u8f93\u5165:\\n\");\n\n    // \u4f7f\u7528getchar()\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u5b57\u7b26\u76f4\u5230EOF\n    while ((ch = getchar()) != EOF &amp;&amp; ch != '\\n') {\n        checksum += ch; // \u5c06\u5b57\u7b26\u7684\u503c\u52a0\u5230checksum\u4e2d\n    }\n    checksum += '\\n';\n    // \u6253\u5370checksum\u7684\u503c\n    printf(\"\\nChecksum: %d\\n\", checksum);\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/quick-start/#4","title":"\u7ec3\u4e60 4","text":"<p>\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u4e00\u884c\u884c\u5730\u8bfb\u53d6\u8f93\u5165\u884c\uff0c\u76f4\u81f3\u5230\u8fbe\u6587\u4ef6\u5c3e\u3002\u7b97\u51fa\u6bcf\u884c\u8f93\u5165\u884c\u7684\u957f\u5ea6\uff0c\u7136\u540e\u628a\u6700\u957f\u7684\u90a3\u884c\u6253\u5370\u51fa\u6765\u3002\u4e3a\u4e86\u7b80\u5355\u8d77\u89c1\uff0c\u4f60\u53ef\u4ee5\u5047\u5b9a\u6240\u6709\u7684\u8f93\u5165\u884c\u5747\u4e0d\u8d85\u8fc71000\u4e2a\u5b57\u7b26\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX_LINE_LENGTH 1000  // \u5047\u5b9a\u7684\u6700\u5927\u8f93\u5165\u884c\u957f\u5ea6\n\nint main() {\n    int len;  // \u5f53\u524d\u884c\u957f\u5ea6\n    int max;  // \u76ee\u524d\u4e3a\u6b62\u53d1\u73b0\u7684\u6700\u957f\u884c\u7684\u957f\u5ea6\n    char line[MAX_LINE_LENGTH];    // \u5f53\u524d\u7684\u8f93\u5165\u884c\n    char longest[MAX_LINE_LENGTH]; // \u7528\u4e8e\u4fdd\u5b58\u6700\u957f\u7684\u884c\n\n    max = 0;\n    while (fgets(line, MAX_LINE_LENGTH, stdin) != NULL) {\n        len = strlen(line);\n        // \u5982\u679c\u5f53\u524d\u884c\u6bd4\u4e4b\u524d\u8bb0\u5f55\u7684\u6700\u957f\u884c\u8981\u957f\uff0c\u5219\u66f4\u65b0\u6700\u957f\u884c\u548c\u6700\u957f\u957f\u5ea6\n        if (len &gt; max) {\n            max = len;\n            strcpy(longest, line);\n        }\n    }\n\n    if (max &gt; 0) {  // \u5982\u679c\u6709\u884c\u88ab\u8bfb\u53d6\uff0c\u5219\u5b58\u5728\u6700\u957f\u884c\n        printf(\"The longest line is:\\n%s\", longest);\n        printf(\"The length of the longest line is: %d\\n\", max);\n    }\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/statement/","title":"\u8bed\u53e5","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p> <p>C\u5b9e\u73b0\u4e86\u5176\u4ed6\u73b0\u4ee3\u9ad8\u7ea7\u8bed\u8a00\u6240\u5177\u6709\u7684\u6240\u6709\u8bed\u53e5\u3002\u800c\u4e14\uff0c\u5b83\u4eec\u4e2d\u7684\u7edd\u5927\u591a\u6570\u90fd\u662f\u6309\u7167\u4f60\u6240\u9884\u671f\u7684\u65b9\u5f0f\u5de5\u4f5c\u7684\u3002if\u8bed\u53e5\u7528\u4e8e\u5728\u51e0\u6bb5\u5907\u9009\u4ee3\u7801\u4e2d\u9009\u62e9\u8fd0\u884c\u5176\u4e2d\u7684\u4e00\u6bb5\uff0c\u800cwhile\u3001for\u548cdo\u8bed\u53e5\u5219\u7528\u4e8e\u5b9e\u73b0\u4e0d\u540c\u7c7b\u578b\u7684\u5faa\u73af\u3002</p> <p>\u4f46\u662f\uff0c\u548c\u5176\u4ed6\u8bed\u8a00\u76f8\u6bd4\uff0cC\u7684\u8bed\u53e5\u8fd8\u662f\u5b58\u5728\u4e00\u4e9b\u4e0d\u540c\u4e4b\u5904\u3002\u4f8b\u5982\uff0cC\u5e76\u4e0d\u5177\u5907\u4e13\u95e8\u7684\u8d4b\u503c\u8bed\u53e5\uff0c\u800c\u662f\u7edf\u4e00\u7528\u201c\u8868\u8fbe\u5f0f\u8bed\u53e5\u201d\u4ee3\u66ff\u3002switch\u8bed\u53e5\u5b9e\u73b0\u4e86\u5176\u4ed6\u8bed\u8a00\u4e2dcase\u8bed\u53e5\u7684\u529f\u80fd\uff0c\u4f46\u5176\u5b9e\u73b0\u7684\u65b9\u5f0f\u5374\u975e\u6bd4\u5bfb\u5e38\u3002</p>"},{"location":"foundation/pointers-on-c/statement/#_2","title":"\u7a7a\u8bed\u53e5","text":"<p>C\u6700\u7b80\u5355\u7684\u8bed\u53e5\u5c31\u662f\u7a7a\u8bed\u53e5 \uff0c\u5b83\u672c\u8eab\u53ea\u5305\u542b\u4e00\u4e2a\u5206\u53f7\u3002\u7a7a\u8bed\u53e5\u672c\u8eab\u5e76\u4e0d\u6267\u884c\u4efb\u4f55\u4efb\u52a1\uff0c\u4f46\u6709\u65f6\u8fd8\u662f\u6709\u7528\u3002\u5b83\u6240\u9002\u7528\u7684\u573a\u5408\u5c31\u662f\u8bed\u6cd5\u8981\u6c42\u51fa\u73b0\u4e00\u6761\u5b8c\u6574\u7684\u8bed\u53e5\uff0c\u4f46\u5e76\u4e0d\u9700\u8981\u5b83\u6267\u884c\u4efb\u4f55\u4efb\u52a1\u3002</p>"},{"location":"foundation/pointers-on-c/statement/#_3","title":"\u8868\u8fbe\u5f0f\u8bed\u53e5","text":"<p>\u65e2\u7136C\u5e76\u4e0d\u5b58\u5728\u4e13\u95e8\u7684\u201c\u8d4b\u503c\u8bed\u53e5\u201d\uff0c\u90a3\u4e48\u5b83\u5982\u4f55\u8fdb\u884c\u8d4b\u503c\u5462\uff1f\u7b54\u6848\u662f\u8d4b\u503c\u5c31\u662f\u4e00\u79cd\u64cd\u4f5c\uff0c\u5c31\u50cf\u52a0\u6cd5\u548c\u51cf\u6cd5\u4e00\u6837\uff0c\u6240\u4ee5\u8d4b\u503c\u5c31\u5728\u8868\u8fbe\u5f0f\u5185\u8fdb\u884c\u3002</p> <p>\u4f60\u53ea\u8981\u5728\u8868\u8fbe\u5f0f\u540e\u9762\u52a0\u4e0a\u4e00\u4e2a\u5206\u53f7\uff0c\u5c31\u53ef\u4ee5\u628a\u8868\u8fbe\u5f0f\u8f6c\u53d8\u4e3a\u8bed\u53e5\u3002\u6240\u4ee5\uff0c\u4e0b\u9762\u8fd9\u4e24\u4e2a\u8868\u8fbe\u5f0f</p> <pre><code>x = y + 3;\nch = getchar();\n</code></pre> <p>\u5b9e\u9645\u4e0a\u662f\u8868\u8fbe\u5f0f\u8bed\u53e5\uff0c\u800c\u4e0d\u662f\u8d4b\u503c\u8bed\u53e5\u3002</p>"},{"location":"foundation/pointers-on-c/statement/#_4","title":"\u4ee3\u7801\u5757","text":"<p>\u4ee3\u7801\u5757\u5c31\u662f\u4f4d\u4e8e\u4e00\u5bf9\u82b1\u62ec\u53f7\u4e4b\u5185\u7684\u53ef\u9009\u7684\u58f0\u660e\u548c\u8bed\u53e5\u5217\u8868\u3002</p> <p>\u4ee3\u7801\u5757\u53ef\u4ee5\u7528\u4e8e\u8981\u6c42\u51fa\u73b0\u8bed\u53e5\u7684\u5730\u65b9\uff0c\u5b83\u5141\u8bb8\u4f60\u5728\u8bed\u6cd5\u8981\u6c42\u53ea\u51fa\u73b0\u4e00\u6761\u8bed\u53e5\u7684\u5730\u65b9\u4f7f\u7528\u591a\u6761\u8bed\u53e5\u3002\u4ee3\u7801\u5757\u8fd8\u5141\u8bb8\u4f60\u628a\u6570\u636e\u7684\u58f0\u660e\u975e\u5e38\u9760\u8fd1\u5b83\u6240\u4f7f\u7528\u7684\u5730\u65b9\u3002</p>"},{"location":"foundation/pointers-on-c/statement/#if","title":"if\u8bed\u53e5","text":"<p>C\u7684if\u8bed\u53e5\u548c\u5176\u4ed6\u8bed\u8a00\u7684if\u8bed\u53e5\u76f8\u5dee\u4e0d\u5927\u3002</p> <p>\u5728C\u7684if\u8bed\u53e5\u548c\u5176\u4ed6\u8bed\u8a00\u7684if\u8bed\u53e5\u4e2d\uff0c\u53ea\u5b58\u5728\u4e00\u4e2a\u5dee\u522b\u3002C\u5e76\u4e0d\u5177\u5907\u5e03\u5c14\u7c7b\u578b\uff0c\u800c\u662f\u7528\u6574\u578b\u6765\u4ee3\u66ff\u3002\u8fd9\u6837\uff0cexpression\u53ef\u4ee5\u662f\u4efb\u4f55\u80fd\u591f\u4ea7\u751f\u6574\u578b\u7ed3\u679c\u7684\u8868\u8fbe\u5f0f\u2014\u2014\u96f6\u503c\u8868\u793a\u201c\u5047\u201d\uff0c\u975e\u96f6\u503c\u8868\u793a\u201c\u771f\u201d\u3002</p> <p>C\u62e5\u6709\u6240\u6709\u4f60\u671f\u671b\u7684\u5173\u7cfb\u64cd\u4f5c\u7b26\uff0c\u4f46\u5b83\u4eec\u7684\u7ed3\u679c\u662f\u6574\u578b\u503c0\u62161\uff0c\u800c\u4e0d\u662f\u5e03\u5c14\u503c\u201c\u771f\u201d\u6216\u201c\u5047\u201d\u3002\u5173\u7cfb\u64cd\u4f5c\u7b26\u5c31\u662f\u7528\u8fd9\u79cd\u65b9\u5f0f\u6765\u5b9e\u73b0\u5176\u4ed6\u8bed\u8a00\u7684\u5173\u7cfb\u64cd\u4f5c\u7b26\u7684\u529f\u80fd\u3002</p>"},{"location":"foundation/pointers-on-c/statement/#while","title":"while\u8bed\u53e5","text":"<p>C\u7684while\u8bed\u53e5\u4e5f\u548c\u5176\u4ed6\u8bed\u8a00\u7684while\u8bed\u53e5\u6709\u8bb8\u591a\u76f8\u4f3c\u4e4b\u5904\u3002\u552f\u4e00\u771f\u6b63\u5b58\u5728\u5dee\u522b\u7684\u5730\u65b9\u5c31\u662f\u5b83\u7684expression\u90e8\u5206\uff0c\u548cif\u8bed\u53e5\u7c7b\u4f3c\u3002</p>"},{"location":"foundation/pointers-on-c/statement/#breakcontinue","title":"break\u548ccontinue\u8bed\u53e5","text":"<p>\u5728while\u5faa\u73af\u4e2d\u53ef\u4ee5\u4f7f\u7528break\u8bed\u53e5\uff0c\u7528\u4e8e\u6c38\u4e45\u7ec8\u6b62\u5faa\u73af\u3002\u5728\u6267\u884c\u5b8cbreak\u8bed\u53e5\u4e4b\u540e\uff0c\u6267\u884c\u6d41\u4e0b\u4e00\u6761\u6267\u884c\u7684\u8bed\u53e5\u5c31\u662f\u5faa\u73af\u6b63\u5e38\u7ed3\u675f\u540e\u5e94\u8be5\u6267\u884c\u7684\u90a3\u6761\u8bed\u53e5\u3002</p> <p>\u5728while\u5faa\u73af\u4e2d\u4e5f\u53ef\u4ee5\u4f7f\u7528continue\u8bed\u53e5\uff0c\u5b83\u7528\u4e8e\u6c38\u4e45\u7ec8\u6b62\u5f53\u524d\u7684\u90a3\u6b21\u5faa\u73af\u3002\u5728\u6267\u884c\u5b8ccontinue\u8bed\u53e5\u4e4b\u540e\uff0c\u6267\u884c\u6d41\u63a5\u4e0b\u6765\u5c31\u662f\u91cd\u65b0\u6d4b\u8bd5\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u51b3\u5b9a\u662f\u5426\u7ee7\u7eed\u6267\u884c\u5faa\u73af\u3002</p>"},{"location":"foundation/pointers-on-c/statement/#for","title":"for\u8bed\u53e5","text":"<p>C\u7684for\u8bed\u53e5\u6bd4\u5176\u4ed6\u8bed\u8a00\u7684for\u8bed\u53e5\u66f4\u4e3a\u5e38\u7528\u3002\u4e8b\u5b9e\u4e0a\uff0cC\u7684for\u8bed\u53e5\u662fwhile\u5faa\u73af\u7684\u4e00\u79cd\u6781\u4e3a\u5e38\u7528\u7684\u8bed\u53e5\u7ec4\u5408\u5f62\u5f0f\u7684\u7b80\u5199\u6cd5\u3002</p> <p>for\u5faa\u73af\u6709\u4e00\u4e2a\u98ce\u683c\u4e0a\u7684\u4f18\u52bf\uff0c\u5b83\u628a\u6240\u6709\u7528\u4e8e\u64cd\u7eb5\u5faa\u73af\u7684\u8868\u8fbe\u5f0f\u6536\u96c6\u5728\u4e00\u8d77\uff0c\u653e\u5728\u540c\u4e00\u4e2a\u5730\u70b9\uff0c\u4fbf\u4e8e\u5bfb\u627e\u3002\u5f53\u5faa\u73af\u4f53\u6bd4\u8f83\u5e9e\u5927\u65f6\uff0c\u8fd9\u4e2a\u4f18\u70b9\u66f4\u4e3a\u7a81\u51fa\u3002</p>"},{"location":"foundation/pointers-on-c/statement/#do","title":"do\u8bed\u53e5","text":"<p>C\u8bed\u8a00\u7684do\u8bed\u53e5\u975e\u5e38\u50cf\u5176\u4ed6\u8bed\u8a00\u7684repeat\u8bed\u53e5\u3002\u5b83\u5f88\u50cfwhile\u8bed\u53e5\uff0c\u53ea\u662f\u5b83\u7684\u6d4b\u8bd5\u5728\u5faa\u73af\u4f53\u6267\u884c\u4e4b\u540e\u624d\u8fdb\u884c\uff0c\u800c\u4e0d\u662f\u5148\u4e8e\u5faa\u73af\u4f53\u6267\u884c\u3002\u6240\u4ee5\uff0c\u8fd9\u79cd\u5faa\u73af\u7684\u5faa\u73af\u4f53\u81f3\u5c11\u6267\u884c\u4e00\u6b21\u3002</p> <p>\u6211\u4eec\u5982\u4f55\u5728while\u8bed\u53e5\u548cdo\u8bed\u53e5\u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\u5462\uff1f</p> <p>\u5f53\u4f60\u9700\u8981\u5faa\u73af\u4f53\u81f3\u5c11\u6267\u884c\u4e00\u6b21\u65f6\uff0c\u9009\u62e9do\u3002</p>"},{"location":"foundation/pointers-on-c/statement/#switch","title":"switch\u8bed\u53e5","text":"<p>C\u7684switch\u8bed\u53e5\u9887\u4e0d\u5bfb\u5e38\u3002\u5b83\u7c7b\u4f3c\u4e8e\u5176\u4ed6\u8bed\u8a00\u7684case\u8bed\u53e5\uff0c\u4f46\u5728\u6709\u4e00\u4e2a\u65b9\u9762\u5b58\u5728\u91cd\u8981\u7684\u533a\u522b\u3002\u9996\u5148\u8ba9\u6211\u4eec\u6765\u770b\u770b\u5b83\u7684\u8bed\u6cd5\uff0c\u5176\u4e2dexpression\u7684\u7ed3\u679c\u5fc5\u987b\u662f\u6574\u578b\u503c\u3002</p> <p>\u5176\u6b21\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6267\u884c\u6d41\u5c06\u8d2f\u7a7f\u5404\u4e2acase\u6807\u7b7e\uff0c\u800c\u4e0d\u662f\u505c\u7559\u5728\u5355\u4e2acase\u6807\u7b7e\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48case\u6807\u7b7e\u53ea\u662f\u786e\u5b9a\u8bed\u53e5\u5217\u8868\u7684\u8fdb\u5165\u70b9\u800c\u4e0d\u662f\u5212\u5206\u5b83\u4eec\u7684\u539f\u56e0\u3002\u5982\u679c\u4f60\u89c9\u5f97\u8fd9\u4e2a\u884c\u4e3a\u770b\u4e0a\u53bb\u4e0d\u662f\u90a3\u4e48\u6b63\u786e\uff0c\u6709\u4e00\u79cd\u65b9\u6cd5\u53ef\u4ee5\u7ea0\u6b63\u2014\u2014\u5c31\u662fbreak\u8bed\u53e5\u3002</p>"},{"location":"foundation/pointers-on-c/statement/#goto","title":"goto\u8bed\u53e5","text":"<p>\u8981\u4f7f\u7528goto\u8bed\u53e5\uff0c\u4f60\u5fc5\u987b\u5728\u4f60\u5e0c\u671b\u8df3\u8f6c\u7684\u8bed\u53e5\u524d\u9762\u52a0\u4e0a\u8bed\u53e5\u6807\u7b7e\u3002\u8bed\u53e5\u6807\u7b7e\u5c31\u662f\u6807\u8bc6\u7b26\u540e\u9762\u52a0\u4e2a\u5192\u53f7\u3002\u5305\u542b\u8fd9\u4e9b\u6807\u7b7e\u7684goto\u8bed\u53e5\u53ef\u4ee5\u51fa\u73b0\u5728\u540c\u4e00\u4e2a\u51fd\u6570\u4e2d\u7684\u4efb\u4f55\u4f4d\u7f6e\u3002</p> <p>goto\u662f\u4e00\u79cd\u5371\u9669\u7684\u8bed\u53e5\uff0c\u56e0\u4e3a\u5728\u5b66\u4e60C\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5f88\u5bb9\u6613\u5f62\u6210\u5bf9\u5b83\u7684\u4f9d\u8d56\u3002\u7ecf\u9a8c\u6b20\u7f3a\u7684\u7a0b\u5e8f\u5458\u6709\u65f6\u4f7f\u7528goto\u8bed\u53e5\u6765\u907f\u514d\u8003\u8651\u7a0b\u5e8f\u7684\u8bbe\u8ba1\u3002\u8fd9\u6837\u5199\u51fa\u6765\u7684\u7a0b\u5e8f\u8f83\u4e4b\u7ec6\u5fc3\u7f16\u5199\u7684\u7a0b\u5e8f\u603b\u662f\u96be\u4ee5\u7ef4\u62a4\u5f97\u591a\u3002</p> <p>\u4f46\u662f\uff0c\u5728\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u5373\u4f7f\u662f\u7ed3\u6784\u826f\u597d\u7684\u7a0b\u5e8f\uff0c\u4f7f\u7528goto\u8bed\u53e5\u4e5f\u53ef\u80fd\u975e\u5e38\u5408\u9002\u2014\u2014\u5c31\u662f\u8df3\u51fa\u591a\u5c42\u5d4c\u5957\u7684\u5faa\u73af\u3002\u7531\u4e8ebreak\u8bed\u53e5\u53ea\u5f71\u54cd\u5305\u56f4\u5b83\u7684\u6700\u5185\u5c42\u5faa\u73af\uff0c\u8981\u60f3\u7acb\u5373\u4ece\u6df1\u5c42\u5d4c\u5957\u7684\u5faa\u73af\u4e2d\u9000\u51fa\u53ea\u6709\u4f7f\u7528\u4e00\u4e2a\u529e\u6cd5\uff0c\u5c31\u662f\u4f7f\u7528goto\u8bed\u53e5\u3002</p>"},{"location":"foundation/pointers-on-c/statement/#_5","title":"\u603b\u7ed3","text":"<p>C\u7684\u8bb8\u591a\u8bed\u53e5\u7684\u884c\u4e3a\u548c\u5176\u4ed6\u8bed\u8a00\u4e2d\u7684\u7c7b\u4f3c\u8bed\u53e5\u76f8\u4f3c\u3002if\u8bed\u53e5\u6839\u636e\u6761\u4ef6\u6267\u884c\u8bed\u53e5\uff0cwhile\u8bed\u53e5\u91cd\u590d\u6267\u884c\u4e00\u4e9b\u8bed\u53e5\u3002\u7531\u4e8eC\u5e76\u4e0d\u5177\u5907\u5e03\u5c14\u7c7b\u578b\uff0c\u6240\u4ee5\u8fd9\u4e9b\u8bed\u53e5\u5728\u6d4b\u8bd5\u503c\u65f6\u7528\u7684\u90fd\u662f\u6574\u578b\u8868\u8fbe\u5f0f\u3002\u96f6\u503c\u88ab\u89e3\u91ca\u4e3a\u5047\uff0c\u975e\u96f6\u503c\u88ab\u89e3\u91ca\u4e3a\u771f\u3002for\u8bed\u53e5\u662fwhile\u5faa\u73af\u7684\u4e00\u79cd\u5e38\u7528\u7ec4\u5408\u5f62\u5f0f\u7684\u901f\u8bb0\u5199\u6cd5\uff0c\u5b83\u628a\u63a7\u5236\u5faa\u73af\u7684\u8868\u8fbe\u5f0f\u6536\u96c6\u8d77\u6765\u653e\u5728\u4e00\u4e2a\u5730\u65b9\uff0c\u4ee5\u4fbf\u5bfb\u627e\u3002do\u8bed\u53e5\u4e0ewhile\u8bed\u53e5\u7c7b\u4f3c\uff0c\u4f46\u524d\u8005\u80fd\u591f\u4fdd\u8bc1\u5faa\u73af\u4f53\u81f3\u5c11\u6267\u884c\u4e00\u6b21\u3002\u6700\u540e\uff0cgoto\u8bed\u53e5\u628a\u7a0b\u5e8f\u7684\u6267\u884c\u6d41\u4ece\u4e00\u6761\u8bed\u53e5\u8f6c\u79fb\u5230\u53e6\u4e00\u6761\u8bed\u53e5\u3002\u5728\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e94\u8be5\u907f\u514dgoto\u8bed\u53e5\u3002</p> <p>C\u8fd8\u6709\u4e00\u4e9b\u8bed\u53e5\uff0c\u5b83\u4eec\u7684\u884c\u4e3a\u4e0e\u5176\u4ed6\u8bed\u8a00\u4e2d\u7684\u7c7b\u4f3c\u8bed\u53e5\u7a0d\u6709\u4e0d\u540c\u3002\u8d4b\u503c\u64cd\u4f5c\u662f\u5728\u8868\u8fbe\u5f0f\u8bed\u53e5\u4e2d\u6267\u884c\u7684\uff0c\u800c\u4e0d\u662f\u5728\u4e13\u95e8\u7684\u8d4b\u503c\u8bed\u53e5\u4e2d\u8fdb\u884c\u3002switch\u8bed\u53e5\u5b8c\u6210\u7684\u4efb\u52a1\u548c\u5176\u4ed6\u8bed\u8a00\u7684case\u8bed\u53e5\u5dee\u4e0d\u591a\uff0c\u4f46switch\u8bed\u53e5\u5728\u6267\u884c\u65f6\u8d2f\u7a7f\u6240\u6709\u7684case\u6807\u7b7e\u3002\u8981\u60f3\u907f\u514d\u8fd9\u79cd\u884c\u4e3a\uff0c\u4f60\u5fc5\u987b\u5728\u6bcf\u4e2acase\u7684\u8bed\u53e5\u540e\u9762\u589e\u52a0\u4e00\u6761break\u8bed\u53e5\u3002switch\u8bed\u53e5\u7684default\u5b50\u53e5\u7528\u4e8e\u6355\u6349\u6240\u6709\u8868\u8fbe\u5f0f\u7684\u503c\u4e0e\u6240\u6709case\u6807\u7b7e\u7684\u503c\u5747\u4e0d\u5339\u914d\u7684\u60c5\u51b5\u3002\u5982\u679c\u6ca1\u6709default\u5b50\u53e5\uff0c\u5f53\u8868\u8fbe\u5f0f\u7684\u503c\u4e0e\u6240\u6709case\u6807\u7b7e\u7684\u503c\u5747\u4e0d\u5339\u914d\u65f6\uff0c\u6574\u4e2aswitch\u8bed\u53e5\u4f53\u5c06\u88ab\u8df3\u8fc7\u4e0d\u6267\u884c\u3002</p> <p>\u5f53\u9700\u8981\u51fa\u73b0\u4e00\u6761\u8bed\u53e5\u4f46\u5e76\u4e0d\u9700\u8981\u6267\u884c\u4efb\u4f55\u4efb\u52a1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u7a7a\u8bed\u53e5\u3002\u4ee3\u7801\u5757\u5141\u8bb8\u4f60\u5728\u8bed\u6cd5\u8981\u6c42\u53ea\u51fa\u73b0\u4e00\u6761\u8bed\u53e5\u7684\u5730\u65b9\u4e66\u5199\u591a\u6761\u8bed\u53e5\u3002\u5f53\u5faa\u73af\u5185\u90e8\u6267\u884cbreak\u8bed\u53e5\u65f6\uff0c\u5faa\u73af\u5c31\u4f1a\u9000\u51fa\u3002\u5f53\u5faa\u73af\u5185\u90e8\u6267\u884ccontinue\u8bed\u53e5\u65f6\uff0c\u5faa\u73af\u4f53\u7684\u5269\u4f59\u90e8\u5206\u4fbf\u88ab\u8df3\u8fc7\uff0c\u7acb\u5373\u5f00\u59cb\u4e0b\u4e00\u6b21\u5faa\u73af\u3002\u5728while\u548cdo\u5faa\u73af\u4e2d\uff0c\u4e0b\u4e00\u6b21\u5faa\u73af\u5f00\u59cb\u7684\u4f4d\u7f6e\u662f\u8868\u8fbe\u5f0f\u6d4b\u8bd5\u90e8\u5206\u3002\u4f46\u5728for\u5faa\u73af\u4e2d\uff0c\u4e0b\u4e00\u6b21\u5faa\u73af\u5f00\u59cb\u7684\u4f4d\u7f6e\u662f\u8c03\u6574\u90e8\u5206\u3002</p> <p>\u5c31\u662f\u8fd9\u4e9b\u4e86\uff01C\u5e76\u4e0d\u5177\u5907\u4efb\u4f55\u8f93\u5165/\u8f93\u51fa\u8bed\u53e5\uff1bI/O\u662f\u901a\u8fc7\u8c03\u7528\u5e93\u51fd\u6570\u5b9e\u73b0\u7684\u3002C\u4e5f\u4e0d\u5177\u5907\u4efb\u4f55\u5f02\u5e38\u5904\u7406\u8bed\u53e5\uff0c\u5b83\u4eec\u4e5f\u662f\u901a\u8fc7\u8c03\u7528\u5e93\u51fd\u6570\u6765\u5b8c\u6210\u7684\u3002</p>"},{"location":"foundation/pointers-on-c/statement/#_6","title":"\u7f16\u7a0b\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/statement/#1","title":"\u7ec3\u4e601","text":"<p>\u4e00\u4e2a\u6574\u6570\u5982\u679c\u53ea\u80fd\u88ab\u5b83\u672c\u8eab\u548c1\u6574\u9664\uff0c\u5b83\u5c31\u88ab\u79f0\u4e3a\u8d28\u6570(prime)\u3002\u8bf7\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u6253\u5370\u51fa1\uff5e100\u4e4b\u95f4\u7684\u6240\u6709\u8d28\u6570\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nint main() {\n    int num, i;\n    bool isPrime;\n\n    // \u904d\u53861\u5230100\u4e4b\u95f4\u7684\u6240\u6709\u6570\u5b57\n    for (num = 2; num &lt;= 100; num++) {\n        isPrime = true; // \u5047\u8bbe\u5f53\u524d\u6570\u5b57\u662f\u8d28\u6570\n\n        // \u68c0\u67e5num\u662f\u5426\u662f\u8d28\u6570\n        for (i = 2; i &lt;= num / 2; i++) {\n            if (num % i == 0) {\n                isPrime = false; // \u5982\u679c\u627e\u5230\u5176\u4ed6\u9664\u6570\uff0c\u5219num\u4e0d\u662f\u8d28\u6570\n                break; // \u9000\u51fa\u5f53\u524d\u5faa\u73af\n            }\n        }\n\n        // \u5982\u679cnum\u662f\u8d28\u6570\uff0c\u5219\u6253\u5370\u51fa\u6765\n        if (isPrime) {\n            printf(\"%d\\n\", num);\n        }\n    }\n\n    return 0;\n}\n\n</code></pre>"},{"location":"foundation/pointers-on-c/statement/#2","title":"\u7ec3\u4e602","text":"<p>\u7b49\u8fb9\u4e09\u89d2\u5f62\u7684\u4e09\u6761\u8fb9\u957f\u5ea6\u90fd\u76f8\u7b49\uff0c\u4f46\u7b49\u8170\u4e09\u89d2\u5f62\u53ea\u6709\u4e24\u6761\u8fb9\u7684\u957f\u5ea6\u662f\u76f8\u7b49\u7684\u3002\u5982\u679c\u4e09\u89d2\u5f62\u7684\u4e09\u6761\u8fb9\u957f\u5ea6\u90fd\u4e0d\u7b49\uff0c\u90a3\u5c31\u79f0\u4e3a\u4e0d\u7b49\u8fb9\u4e09\u89d2\u5f62\u3002\u8bf7\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u63d0\u793a\u7528\u6237\u8f93\u5165\u4e09\u4e2a\u6570\uff0c\u5206\u522b\u8868\u793a\u4e09\u89d2\u5f62\u4e09\u6761\u8fb9\u7684\u957f\u5ea6\uff0c\u7136\u540e\u7531\u7a0b\u5e8f\u5224\u65ad\u5b83\u662f\u4ec0\u4e48\u7c7b\u578b\u7684\u4e09\u89d2\u5f62\u3002\u63d0\u793a \uff1a\u9664\u4e86\u8fb9\u7684\u957f\u5ea6\u662f\u5426\u76f8\u7b49\u4e4b\u5916\uff0c\u7a0b\u5e8f\u662f\u5426\u8fd8\u5e94\u8003\u8651\u4e00\u4e9b\u5176\u4ed6\u7684\u4e1c\u897f\uff1f</p> <pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int a, b, c; // \u5206\u522b\u4ee3\u8868\u4e09\u89d2\u5f62\u7684\u4e09\u6761\u8fb9\n\n    printf(\"\u8bf7\u8f93\u5165\u4e09\u89d2\u5f62\u4e09\u6761\u8fb9\u7684\u957f\u5ea6\uff08\u7528\u7a7a\u683c\u5206\u9694\uff09: \");\n    scanf(\"%d %d %d\", &amp;a, &amp;b, &amp;c);\n\n    // \u68c0\u67e5\u662f\u5426\u80fd\u6784\u6210\u4e09\u89d2\u5f62\n    if (a + b &gt; c &amp;&amp; a + c &gt; b &amp;&amp; b + c &gt; a) {\n        // \u5982\u679c\u53ef\u4ee5\u6784\u6210\u4e09\u89d2\u5f62\uff0c\u63a5\u7740\u5224\u65ad\u4e09\u89d2\u5f62\u7684\u7c7b\u578b\n\n        if (a == b &amp;&amp; b == c) {\n            // \u4e09\u8fb9\u76f8\u7b49\n            printf(\"\u8fd9\u662f\u4e00\u4e2a\u7b49\u8fb9\u4e09\u89d2\u5f62\u3002\\n\");\n        } else if (a == b || a == c || b == c) {\n            // \u4e24\u8fb9\u76f8\u7b49\n            printf(\"\u8fd9\u662f\u4e00\u4e2a\u7b49\u8170\u4e09\u89d2\u5f62\u3002\\n\");\n        } else {\n            // \u65e0\u8fb9\u76f8\u7b49\n            printf(\"\u8fd9\u662f\u4e00\u4e2a\u4e0d\u7b49\u8fb9\u4e09\u89d2\u5f62\u3002\\n\");\n        }\n    } else {\n        // \u4e0d\u80fd\u6784\u6210\u4e09\u89d2\u5f62\n        printf(\"\u8fd9\u4e09\u6761\u8fb9\u65e0\u6cd5\u6784\u6210\u4e09\u89d2\u5f62\u3002\\n\");\n    }\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/statement/#3","title":"\u7ec3\u4e60 3","text":"<p>\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u4ece\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u53bb\u9664\u591a\u4f59\u7684\u7a7a\u683c\u3002\u5f53\u51fd\u6570\u53d1\u73b0\u5b57\u7b26\u4e32\u4e2d\u5982\u679c\u6709\u4e00\u4e2a\u5730\u65b9\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u8fde\u7eed\u7684\u7a7a\u683c\u7ec4\u6210\uff0c\u5c31\u628a\u5b83\u4eec\u6539\u6210\u5355\u4e2a\u7a7a\u683c\u5b57\u7b26\u3002\u6ce8\u610f\u5f53\u4f60\u904d\u5386\u6574\u4e2a\u5b57\u7b26\u4e32\u65f6\u8981\u786e\u4fdd\u5b83\u4ee5NUL\u5b57\u7b26\u7ed3\u5c3e\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n\nvoid deblank(char string[]) {\n    int readPos = 0, writePos = 0; // \u5206\u522b\u8868\u793a\u8bfb\u53d6\u548c\u5199\u5165\u7684\u4f4d\u7f6e\u6307\u9488\n    int spaceFound = 0; // \u7528\u4e8e\u6807\u8bb0\u662f\u5426\u627e\u5230\u7a7a\u683c\n\n    // \u904d\u5386\u5b57\u7b26\u4e32\u76f4\u5230\u9047\u5230 NUL \u5b57\u7b26\u7ec8\u6b62\n    while (string[readPos]) {\n        if (string[readPos] == ' ') {\n            // \u5982\u679c\u627e\u5230\u7a7a\u683c\u4e14\u4e4b\u524d\u6ca1\u6709\u627e\u5230\u7a7a\u683c\uff0c\u5219\u5199\u5165\u4e00\u4e2a\u7a7a\u683c\u5230\u5f53\u524d\u5199\u5165\u4f4d\u7f6e\n            if (!spaceFound) {\n                string[writePos++] = string[readPos];\n                spaceFound = 1; // \u6807\u8bb0\u627e\u5230\u4e86\u7a7a\u683c\n            }\n        } else {\n            // \u5982\u679c\u627e\u5230\u7684\u4e0d\u662f\u7a7a\u683c\uff0c\u5219\u76f4\u63a5\u5c06\u5b57\u7b26\u5199\u5165\u5f53\u524d\u5199\u5165\u4f4d\u7f6e\n            string[writePos++] = string[readPos];\n            spaceFound = 0; // \u91cd\u7f6e\u7a7a\u683c\u6807\u8bb0\n        }\n        readPos++; // \u79fb\u52a8\u8bfb\u53d6\u4f4d\u7f6e\n    }\n\n    string[writePos] = '\\0'; // \u5728\u6700\u540e\u52a0\u4e0a NUL \u5b57\u7b26\u7ed3\u675f\u5b57\u7b26\u4e32\n}\n\nint main() {\n    char testStr[] = \"This  is   a  test  string.\";\n\n    printf(\"Original string: '%s'\\n\", testStr);\n    deblank(testStr);\n    printf(\"Modified string: '%s'\\n\", testStr);\n\n    return 0;\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/struct-and-pointer/","title":"\u4f7f\u7528\u7ed3\u6784\u548c\u6307\u9488","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p> <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u7ec4\u5408\u4f7f\u7528\u7ed3\u6784\u548c\u6307\u9488\u521b\u5efa\u5f3a\u5927\u7684\u6570\u636e\u7ed3\u6784\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-pointer/#_2","title":"\u94fe\u8868","text":"<p>\u94fe\u8868(linked list)\u5c31\u4e00\u4e9b\u5305\u542b\u6570\u636e\u7684\u72ec\u7acb\u6570\u636e\u7ed3\u6784\uff08\u901a\u5e38\u79f0\u4e3a\u8282\u70b9\uff09\u7684\u96c6\u5408\u3002\u94fe\u8868\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u901a\u8fc7\u94fe\u6216\u6307\u9488\u8fde\u63a5\u5728\u4e00\u8d77\u3002\u7a0b\u5e8f\u901a\u8fc7\u6307\u9488\u8bbf\u95ee\u94fe\u8868\u4e2d\u7684\u8282\u70b9\u3002\u901a\u5e38\u8282\u70b9\u662f\u52a8\u6001\u5206\u914d\u7684\uff0c\u4f46\u6709\u65f6\u4f60\u4e5f\u80fd\u770b\u5230\u7531\u8282\u70b9\u6570\u7ec4\u6784\u5efa\u7684\u94fe\u8868\u3002\u5373\u4f7f\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7a0b\u5e8f\u4e5f\u662f\u901a\u8fc7\u6307\u9488\u6765\u904d\u5386\u94fe\u8868\u7684\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-pointer/#_3","title":"\u5355\u94fe\u8868","text":"<p>\u5728\u5355\u94fe\u8868\u4e2d\uff0c\u6bcf\u4e2a\u8282\u70b9\u5305\u542b\u4e00\u4e2a\u6307\u5411\u94fe\u8868\u4e0b\u4e00\u8282\u70b9\u7684\u6307\u9488\u3002\u94fe\u8868\u6700\u540e\u4e00\u4e2a\u8282\u70b9\u7684\u6307\u9488\u5b57\u6bb5\u7684\u503c\u4e3aNULL\uff0c\u63d0\u793a\u94fe\u8868\u540e\u9762\u4e0d\u518d\u6709\u5176\u4ed6\u8282\u70b9\u3002\u5728\u4f60\u627e\u5230\u94fe\u8868\u7684\u7b2c1\u4e2a\u8282\u70b9\u540e\uff0c\u6307\u9488\u5c31\u53ef\u4ee5\u5e26\u4f60\u8bbf\u95ee\u5269\u4f59\u7684\u6240\u6709\u8282\u70b9\u3002\u4e3a\u4e86\u8bb0\u4f4f\u94fe\u8868\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u6839\u6307\u9488(root pointer)\u3002\u6839\u6307\u9488\u6307\u5411\u94fe\u8868\u7684\u7b2c1\u4e2a\u8282\u70b9\u3002\u6ce8\u610f\u6839\u6307\u9488\u53ea\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u5b83\u4e0d\u5305\u542b\u4efb\u4f55\u6570\u636e\u3002</p> <pre><code>typedef struct\u3000NODE\u3000 {\n\u3000\u3000\u3000\u3000\u3000struct\u3000NODE\u3000 *link;\n\u3000\u3000\u3000\u3000\u3000int\u3000\u3000\u3000\u3000\u3000\u3000\u3000value;\n} Node;\n</code></pre> <p>\u5355\u94fe\u8868\u53ef\u4ee5\u901a\u8fc7\u94fe\u4ece\u5f00\u59cb\u4f4d\u7f6e\u904d\u5386\u94fe\u8868\u76f4\u5230\u7ed3\u675f\u4f4d\u7f6e\uff0c\u4f46\u94fe\u8868\u65e0\u6cd5\u4ece\u76f8\u53cd\u7684\u65b9\u5411\u8fdb\u884c\u904d\u5386\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5f53\u4f60\u7684\u7a0b\u5e8f\u5230\u8fbe\u94fe\u8868\u7684\u6700\u540e\u4e00\u4e2a\u8282\u70b9\u65f6\uff0c\u5982\u679c\u4f60\u60f3\u56de\u5230\u5176\u4ed6\u4efb\u4f55\u8282\u70b9\uff0c\u4f60\u53ea\u80fd\u4ece\u6839\u6307\u9488\u4ece\u5934\u5f00\u59cb\u3002\u5f53\u7136\uff0c\u7a0b\u5e8f\u5728\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\u524d\u53ef\u4ee5\u4fdd\u5b58\u4e00\u4e2a\u6307\u5411\u5f53\u524d\u4f4d\u7f6e\u7684\u6307\u9488\uff0c\u751a\u81f3\u53ef\u4ee5\u4fdd\u5b58\u6307\u5411\u524d\u9762\u51e0\u4e2a\u4f4d\u7f6e\u7684\u6307\u9488\u3002\u4f46\u662f\uff0c\u94fe\u8868\u662f\u52a8\u6001\u5206\u914d\u7684\uff0c\u53ef\u80fd\u589e\u957f\u5230\u51e0\u767e\u6216\u51e0\u5343\u4e2a\u8282\u70b9\uff0c\u6240\u4ee5\u8981\u4fdd\u5b58\u6240\u6709\u6307\u5411\u524d\u9762\u4f4d\u7f6e\u7684\u8282\u70b9\u7684\u6307\u9488\u662f\u4e0d\u53ef\u884c\u7684\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-pointer/#_4","title":"\u53cc\u94fe\u8868","text":"<p>\u5355\u94fe\u8868\u7684\u66ff\u4ee3\u65b9\u6848\u5c31\u662f\u53cc\u94fe\u8868\u3002\u5728\u4e00\u4e2a\u53cc\u94fe\u8868\u4e2d\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u5305\u542b\u4e24\u4e2a\u6307\u9488\u2014\u2014\u6307\u5411\u524d\u4e00\u4e2a\u8282\u70b9\u7684\u6307\u9488\u548c\u6307\u5411\u540e\u4e00\u4e2a\u8282\u70b9\u7684\u6307\u9488\u3002\u8fd9\u53ef\u4ee5\u4f7f\u6211\u4eec\u4ee5\u4efb\u4f55\u65b9\u5411\u904d\u5386\u53cc\u94fe\u8868\uff0c\u751a\u81f3\u53ef\u4ee5\u5ffd\u524d\u5ffd\u540e\u5730\u5728\u53cc\u94fe\u8868\u4e2d\u8bbf\u95ee\u3002</p> <pre><code>typedf struct\u3000NODE\u3000 {\n\u3000\u3000\u3000\u3000struct\u3000NODE\u3000 *fwd;\n\u3000\u3000\u3000\u3000struct\u3000NODE\u3000 *bwd;\n\u3000\u3000\u3000\u3000int\u3000\u3000\u3000\u3000\u3000\u3000\u3000value;\n} Node;\n</code></pre>"},{"location":"foundation/pointers-on-c/struct-and-pointer/#_5","title":"\u603b\u7ed3","text":"<p>\u5355\u94fe\u8868\u662f\u4e00\u79cd\u4f7f\u7528\u6307\u9488\u6765\u5b58\u50a8\u503c\u7684\u6570\u636e\u7ed3\u6784\u3002\u94fe\u8868\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u5305\u542b\u4e00\u4e2a\u5b57\u6bb5\uff0c\u7528\u4e8e\u6307\u5411\u94fe\u8868\u7684\u4e0b\u4e00\u4e2a\u8282\u70b9\u3002\u53e6\u5916\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u6839\u6307\u9488\u6307\u5411\u94fe\u8868\u7684\u7b2c1\u4e2a\u8282\u70b9\u3002\u7531\u4e8e\u8282\u70b9\u5728\u521b\u5efa\u65f6\u662f\u91c7\u7528\u52a8\u6001\u5206\u914d\u5185\u5b58\u7684\u65b9\u5f0f\uff0c\u6240\u4ee5\u5b83\u4eec\u53ef\u80fd\u5206\u5e03\u4e8e\u5185\u5b58\u4e4b\u4e2d\u3002\u4f46\u662f\uff0c\u904d\u5386\u94fe\u8868\u662f\u6839\u636e\u6307\u9488\u8fdb\u884c\u7684\uff0c\u6240\u4ee5\u8282\u70b9\u7684\u7269\u7406\u6392\u5217\u65e0\u5173\u7d27\u8981\u3002\u5355\u94fe\u8868\u53ea\u80fd\u4ee5\u4e00\u4e2a\u65b9\u5411\u8fdb\u884c\u904d\u5386\u3002</p> <p>\u4e3a\u4e86\u628a\u4e00\u4e2a\u65b0\u503c\u63d2\u5165\u5230\u4e00\u4e2a\u6709\u5e8f\u7684\u5355\u94fe\u8868\u4e2d\uff0c\u4f60\u9996\u5148\u5fc5\u987b\u627e\u5230\u94fe\u8868\u4e2d\u5408\u9002\u7684\u63d2\u5165\u4f4d\u7f6e\u3002\u5bf9\u4e8e\u65e0\u5e8f\u5355\u94fe\u8868\uff0c\u65b0\u503c\u53ef\u4ee5\u63d2\u5165\u5230\u4efb\u4f55\u4f4d\u7f6e\u3002\u628a\u4e00\u4e2a\u65b0\u8282\u70b9\u94fe\u63a5\u5230\u94fe\u8868\u4e2d\u9700\u8981\u4e24\u4e2a\u6b65\u9aa4\u3002\u9996\u5148\uff0c\u65b0\u8282\u70b9\u7684link\u5b57\u6bb5\u5fc5\u987b\u8bbe\u7f6e\u4e3a\u6307\u5411\u5b83\u7684\u76ee\u6807\u540e\u7eed\u8282\u70b9\u3002\u5176\u6b21\uff0c\u524d\u4e00\u4e2a\u8282\u70b9\u7684link\u5b57\u6bb5\u5fc5\u987b\u8bbe\u7f6e\u4e3a\u6307\u5411\u8fd9\u4e2a\u65b0\u8282\u70b9\u3002\u5728\u8bb8\u591a\u5176\u4ed6\u8bed\u8a00\u4e2d\uff0c\u63d2\u5165\u51fd\u6570\u4fdd\u5b58\u4e00\u4e2a\u6307\u5411\u524d\u4e00\u4e2a\u8282\u70b9\u7684\u6307\u9488\u6765\u5b8c\u6210\u7b2c2\u4e2a\u6b65\u9aa4\u3002\u4f46\u662f\uff0c\u8fd9\u4e2a\u6280\u5de7\u4f7f\u63d2\u5165\u5230\u94fe\u8868\u7684\u8d77\u59cb\u4f4d\u7f6e\u6210\u4e3a\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u9700\u8981\u5355\u72ec\u5904\u7406\u3002\u5728C\u8bed\u8a00\u4e2d\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4fdd\u5b58\u4e00\u4e2a\u6307\u5411\u5fc5\u987b\u8fdb\u884c\u4fee\u6539\u7684link\u5b57\u6bb5\u7684\u6307\u9488\uff0c\u800c\u4e0d\u662f\u4fdd\u5b58\u4e00\u4e2a\u6307\u5411\u524d\u4e00\u4e2a\u8282\u70b9\u7684\u6307\u9488\uff0c\u4ece\u800c\u6d88\u9664\u4e86\u8fd9\u4e2a\u7279\u6b8a\u60c5\u51b5\u3002</p> <p>\u53cc\u94fe\u8868\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u5305\u542b\u4e24\u4e2alink\u5b57\u6bb5\uff1a\u5176\u4e2d\u4e00\u4e2a\u6307\u5411\u94fe\u8868\u7684\u4e0b\u4e00\u4e2a\u8282\u70b9\uff0c\u53e6\u4e00\u4e2a\u6307\u5411\u94fe\u8868\u7684\u524d\u4e00\u4e2a\u8282\u70b9\u3002\u53cc\u94fe\u8868\u6709\u4e24\u4e2a\u6839\u6307\u9488\uff0c\u5206\u522b\u6307\u5411\u7b2c1\u4e2a\u8282\u70b9\u548c\u6700\u540e\u4e00\u4e2a\u8282\u70b9\u3002\u56e0\u6b64\uff0c\u904d\u5386\u53cc\u94fe\u8868\u53ef\u4ee5\u4ece\u4efb\u4f55\u4e00\u7aef\u5f00\u59cb\uff0c\u800c\u4e14\u5728\u904d\u5386\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u6539\u53d8\u65b9\u5411\u3002\u4e3a\u4e86\u628a\u4e00\u4e2a\u65b0\u8282\u70b9\u63d2\u5165\u5230\u53cc\u94fe\u8868\u4e2d\uff0c\u6211\u4eec\u5fc5\u987b\u4fee\u65394\u4e2a\u6307\u9488\u3002\u65b0\u8282\u70b9\u7684\u524d\u5411\u548c\u540e\u5411link\u5b57\u6bb5\u5fc5\u987b\u88ab\u8bbe\u7f6e\uff0c\u524d\u4e00\u4e2a\u8282\u70b9\u7684\u540e\u5411link\u5b57\u6bb5\u548c\u540e\u4e00\u4e2a\u8282\u70b9\u7684\u524d\u5411link\u5b57\u6bb5\u4e5f\u5fc5\u987b\u8fdb\u884c\u4fee\u6539\uff0c\u4f7f\u5b83\u4eec\u6307\u5411\u8fd9\u4e2a\u65b0\u8282\u70b9\u3002</p> <p>\u8bed\u53e5\u63d0\u70bc\u662f\u4e00\u79cd\u7b80\u5316\u7a0b\u5e8f\u7684\u6280\u5de7\uff0c\u5176\u65b9\u6cd5\u662f\u6d88\u9664\u7a0b\u5e8f\u4e2d\u5197\u4f59\u7684\u8bed\u53e5\u3002\u5982\u679c\u4e00\u6761if\u8bed\u53e5\u7684\u201cthen\u201d\u548c\u201celse\u201d\u5b50\u53e5\u4ee5\u76f8\u540c\u5e8f\u5217\u7684\u8bed\u53e5\u7ed3\u5c3e\uff0c\u5b83\u4eec\u53ef\u4ee5\u88ab\u4e00\u4efd\u5355\u72ec\u7684\u51fa\u73b0\u4e8eif\u8bed\u53e5\u4e4b\u540e\u7684\u62f7\u8d1d\u4ee3\u66ff\u3002\u76f8\u540c\u5e8f\u5217\u7684\u8bed\u53e5\u4e5f\u53ef\u4ee5\u4eceif\u8bed\u53e5\u7684\u8d77\u59cb\u4f4d\u7f6e\u63d0\u70bc\u51fa\u6765\uff0c\u4f46\u8fd9\u79cd\u63d0\u70bc\u4e0d\u80fd\u6539\u53d8if\u7684\u6d4b\u8bd5\u7ed3\u679c\u3002\u5982\u679c\u4e0d\u540c\u7684\u8bed\u53e5\u4e8b\u5b9e\u4e0a\u6267\u884c\u76f8\u540c\u7684\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u628a\u5b83\u4eec\u5199\u6210\u76f8\u540c\u7684\u6837\u5b50\uff0c\u7136\u540e\u518d\u4f7f\u7528\u8bed\u53e5\u63d0\u70bc\u7b80\u5316\u7a0b\u5e8f\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-pointer/#_6","title":"\u7f16\u7a0b\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/struct-and-pointer/#1","title":"\u7ec3\u4e60 1","text":"<p>\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u53cd\u5e8f\u6392\u5217\u4e00\u4e2a\u5355\u94fe\u8868\u7684\u6240\u6709\u8282\u70b9\u3002\u51fd\u6570\u5e94\u8be5\u5177\u6709\u4e0b\u9762\u7684\u539f\u578b\uff1a</p> <pre><code>\u3000\u3000\u3000struct NODE * sll_reverse( struct NODE *first);\n</code></pre> <pre><code>struct NODE {\n    int value;            // \u5047\u8bbe\u94fe\u8868\u50a8\u5b58\u7684\u662f\u6574\u6570\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8c03\u6574\u6570\u636e\u7c7b\u578b\n    struct NODE *next;    // \u6307\u5411\u4e0b\u4e00\u4e2a\u8282\u70b9\n};\n\n#include &lt;stdio.h&gt;\n\nstruct NODE *sll_reverse(struct NODE *first) {\n    struct NODE *prev = NULL;  // \u524d\u4e00\u4e2a\u8282\u70b9\n    struct NODE *current = first;  // \u5f53\u524d\u904d\u5386\u5230\u7684\u8282\u70b9\n    struct NODE *next = NULL;  // \u4e0b\u4e00\u4e2a\u8282\u70b9\n\n    while (current != NULL) {\n        next = current-&gt;next;  // \u4fdd\u5b58\u4e0b\u4e00\u4e2a\u8282\u70b9\n        current-&gt;next = prev;  // \u53cd\u8f6c\u5f53\u524d\u8282\u70b9\u7684\u6307\u5411\n        prev = current;  // \u524d\u79fb\u8282\u70b9\n        current = next;  // \u4f7f\u7528\u4e4b\u524d\u4fdd\u5b58\u7684\u4e0b\u4e00\u4e2a\u8282\u70b9\u7ee7\u7eed\u904d\u5386\n    }\n    first = prev;  // \u66f4\u65b0\u5934\u6307\u9488\n\n    return first;  // \u8fd4\u56de\u65b0\u7684\u5934\u6307\u9488\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/struct-and-pointer/#2","title":"\u7ec3\u4e60 2","text":"<p>\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u4ece\u4e00\u4e2a\u5355\u94fe\u8868\u4e2d\u79fb\u9664\u4e00\u4e2a\u8282\u70b9\u3002\u51fd\u6570\u7684\u539f\u578b\u5e94\u8be5\u5982\u4e0b\uff1a</p> <pre><code>\u3000\u3000\u3000int sll_remove( struct NODE **rootp, struct NODE *node );\n</code></pre> <pre><code>#include &lt;stdlib.h&gt;\n\nint sll_remove(struct NODE **rootp, struct NODE *node) {\n    // \u68c0\u67e5\u7a7a\u6307\u9488\n    if (rootp == NULL || *rootp == NULL || node == NULL) {\n        return 0;\n    }\n\n    struct NODE *current = *rootp;\n    struct NODE *prev = NULL;\n\n    while (current != NULL) {\n        // \u627e\u5230\u76ee\u6807\u8282\u70b9\n        if (current == node) {\n            // \u5982\u679c\u76ee\u6807\u8282\u70b9\u662f\u5934\u8282\u70b9\n            if (prev == NULL) {\n                *rootp = current-&gt;next;\n            } else {\n                // \u8ba9\u524d\u9a71\u8282\u70b9\u6307\u5411\u76ee\u6807\u8282\u70b9\u7684\u4e0b\u4e00\u4e2a\u8282\u70b9\n                prev-&gt;next = current-&gt;next;\n            }\n            // \u91ca\u653e\u76ee\u6807\u8282\u70b9\u7684\u5185\u5b58\n            free(current);\n            return 1;  // \u6210\u529f\u79fb\u9664\n        }\n        // \u79fb\u5411\u4e0b\u4e00\u4e2a\u8282\u70b9\n        prev = current;\n        current = current-&gt;next;\n    }\n\n    return 0;  // \u672a\u627e\u5230\u6307\u5b9a\u8282\u70b9\n}\n</code></pre>"},{"location":"foundation/pointers-on-c/struct-and-union/","title":"\u7ed3\u6784\u548c\u8054\u5408","text":"<p>\u672c\u6587\u4e3a\u300aC \u4e0e \u6307\u9488\u8bfb\u4e66\u7b14\u8bb0\u300b\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53bb\u770b\u539f\u4e66\u3002</p> <p>\u6570\u636e\u7ecf\u5e38\u4ee5\u6210\u7ec4\u7684\u5f62\u5f0f\u5b58\u5728\u3002\u4f8b\u5982\uff0c\u96c7\u4e3b\u5fc5\u987b\u660e\u4e86\u6bcf\u4f4d\u96c7\u5458\u7684\u59d3\u540d\u3001\u5e74\u9f84\u548c\u5de5\u8d44\u3002\u5982\u679c\u8fd9\u4e9b\u503c\u80fd\u591f\u5b58\u50a8\u5728\u4e00\u8d77\uff0c\u8bbf\u95ee\u8d77\u6765\u4f1a\u7b80\u5355\u4e00\u4e9b\u3002\u4f46\u662f\uff0c\u5982\u679c\u8fd9\u4e9b\u503c\u7684\u7c7b\u578b\u4e0d\u540c\uff08\u5c31\u50cf\u73b0\u5728\u8fd9\u79cd\u60c5\u51b5\uff09\uff0c\u5b83\u4eec\u65e0\u6cd5\u5b58\u50a8\u4e8e\u540c\u4e00\u4e2a\u6570\u7ec4\u4e2d\u3002\u5728C\u4e2d\uff0c\u4f7f\u7528\u7ed3\u6784\u53ef\u4ee5\u628a\u4e0d\u540c\u7c7b\u578b\u7684\u503c\u5b58\u50a8\u5728\u4e00\u8d77\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-union/#_2","title":"\u7ed3\u6784\u57fa\u7840\u77e5\u8bc6","text":"<p>\u805a\u5408\u6570\u636e\u7c7b\u578b\uff08aggregate data type\uff09\u80fd\u591f\u540c\u65f6\u5b58\u50a8\u8d85\u8fc7\u4e00\u4e2a\u7684\u5355\u72ec\u6570\u636e\u3002C\u63d0\u4f9b\u4e86\u4e24\u79cd\u7c7b\u578b\u7684\u805a\u5408\u6570\u636e\u7c7b\u578b\uff0c\u6570\u7ec4\u548c\u7ed3\u6784\u3002\u6570\u7ec4\u662f\u76f8\u540c\u7c7b\u578b\u7684\u5143\u7d20\u7684\u96c6\u5408\uff0c\u5b83\u7684\u6bcf\u4e2a\u5143\u7d20\u662f\u901a\u8fc7\u4e0b\u6807\u5f15\u7528\u6216\u6307\u9488\u95f4\u63a5\u8bbf\u95ee\u6765\u9009\u62e9\u7684\u3002</p> <p>\u7ed3\u6784\u4e5f\u662f\u4e00\u4e9b\u503c\u7684\u96c6\u5408\uff0c\u8fd9\u4e9b\u503c\u79f0\u4e3a\u5b83\u7684\u6210\u5458 (member)\uff0c\u4f46\u4e00\u4e2a\u7ed3\u6784\u7684\u5404\u4e2a\u6210\u5458\u53ef\u80fd\u5177\u6709\u4e0d\u540c\u7684\u7c7b\u578b\u3002</p> <p>\u6570\u7ec4\u5143\u7d20\u53ef\u4ee5\u901a\u8fc7\u4e0b\u6807\u8bbf\u95ee\uff0c\u8fd9\u53ea\u662f\u56e0\u4e3a\u6570\u7ec4\u7684\u5143\u7d20\u957f\u5ea6\u76f8\u540c\u3002\u4f46\u662f\uff0c\u5728\u7ed3\u6784\u4e2d\u60c5\u51b5\u5e76\u975e\u5982\u6b64\u3002\u7531\u4e8e\u4e00\u4e2a\u7ed3\u6784\u7684\u6210\u5458\u53ef\u80fd\u957f\u5ea6\u4e0d\u540c\uff0c\u6240\u4ee5\u4e0d\u80fd\u4f7f\u7528\u4e0b\u6807\u6765\u8bbf\u95ee\u5b83\u4eec\u3002\u76f8\u53cd\uff0c\u6bcf\u4e2a\u7ed3\u6784\u6210\u5458\u90fd\u6709\u81ea\u5df1\u7684\u540d\u5b57\uff0c\u5b83\u4eec\u662f\u901a\u8fc7\u540d\u5b57\u8bbf\u95ee\u7684\u3002</p> <p>\u8fd9\u4e2a\u533a\u522b\u975e\u5e38\u91cd\u8981\u3002\u7ed3\u6784\u5e76\u4e0d\u662f\u4e00\u4e2a\u5b83\u81ea\u8eab\u6210\u5458\u7684\u6570\u7ec4\u3002\u548c\u6570\u7ec4\u540d\u4e0d\u540c\uff0c\u5f53\u4e00\u4e2a\u7ed3\u6784\u53d8\u91cf\u5728\u8868\u8fbe\u5f0f\u4e2d\u4f7f\u7528\u65f6\uff0c\u5b83\u5e76\u4e0d\u88ab\u66ff\u6362\u6210\u4e00\u4e2a\u6307\u9488\u3002\u7ed3\u6784\u53d8\u91cf\u4e5f\u65e0\u6cd5\u4f7f\u7528\u4e0b\u6807\u6765\u9009\u62e9\u7279\u5b9a\u7684\u6210\u5458\u3002</p> <p>\u7ed3\u6784\u53d8\u91cf\u5c5e\u4e8e\u6807\u91cf\u7c7b\u578b\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u50cf\u5bf9\u5f85\u5176\u4ed6\u6807\u91cf\u7c7b\u578b\u90a3\u6837\u6267\u884c\u76f8\u540c\u7c7b\u578b\u7684\u64cd\u4f5c\u3002\u7ed3\u6784\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u53c2\u6570\uff0c\u5b83\u4eec\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u8fd4\u56de\u503c\u4ece\u51fd\u6570\u8fd4\u56de\uff0c\u76f8\u540c\u7c7b\u578b\u7684\u7ed3\u6784\u53d8\u91cf\u76f8\u4e92\u4e4b\u95f4\u53ef\u4ee5\u8d4b\u503c\u3002\u4f60\u53ef\u4ee5\u58f0\u660e\u6307\u5411\u7ed3\u6784\u7684\u6307\u9488\uff0c\u53d6\u4e00\u4e2a\u7ed3\u6784\u53d8\u91cf\u7684\u5730\u5740\uff0c\u4e5f\u53ef\u4ee5\u58f0\u660e\u7ed3\u6784\u6570\u7ec4\u3002\u4f46\u662f\uff0c\u5728\u8ba8\u8bba\u8fd9\u4e9b\u8bdd\u9898\u4e4b\u524d\uff0c\u6211\u4eec\u5fc5\u987b\u77e5\u9053\u4e00\u4e9b\u66f4\u4e3a\u57fa\u7840\u7684\u4e1c\u897f\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-union/#_3","title":"\u7ed3\u6784\u58f0\u660e","text":"<p>\u5728\u58f0\u660e\u7ed3\u6784\u65f6\uff0c\u5fc5\u987b\u5217\u51fa\u5b83\u5305\u542b\u7684\u6240\u6709\u6210\u5458\u3002\u8fd9\u4e2a\u5217\u8868\u5305\u62ec\u6bcf\u4e2a\u6210\u5458\u7684\u7c7b\u578b\u548c\u540d\u5b57\u3002</p> <pre><code>struct tag { member-list\n\n } variable-list\n</code></pre>"},{"location":"foundation/pointers-on-c/struct-and-union/#_4","title":"\u7ed3\u6784\u6210\u5458","text":"<p>\u53ef\u4ee5\u5728\u4e00\u4e2a\u7ed3\u6784\u5916\u90e8\u58f0\u660e\u7684\u4efb\u4f55\u53d8\u91cf\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u7ed3\u6784\u7684\u6210\u5458\u3002\u5c24\u5176\u662f\uff0c\u7ed3\u6784\u6210\u5458\u53ef\u4ee5\u662f\u6807\u91cf\u3001\u6570\u7ec4\u3001\u6307\u9488\u751a\u81f3\u662f\u5176\u4ed6\u7ed3\u6784\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-union/#_5","title":"\u7ed3\u6784\u6210\u5458\u7684\u95f4\u63a5\u8bbf\u95ee","text":"<p>\u5982\u679c\u4f60\u62e5\u6709\u4e00\u4e2a\u6307\u5411\u7ed3\u6784\u7684\u6307\u9488\uff0c\u4f60\u8be5\u5982\u4f55\u8bbf\u95ee\u8fd9\u4e2a\u7ed3\u6784\u7684\u6210\u5458\u5462\uff1f\u9996\u5148\u5c31\u662f\u5bf9\u6307\u9488\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\uff0c\u8fd9\u4f7f\u4f60\u83b7\u5f97\u8fd9\u4e2a\u7ed3\u6784\u3002\u7136\u540e\u4f60\u4f7f\u7528\u70b9\u64cd\u4f5c\u7b26\u6765\u8bbf\u95ee\u5b83\u7684\u6210\u5458\u3002\u4f46\u662f\uff0c\u70b9\u64cd\u4f5c\u7b26\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u7b26\uff0c\u6240\u4ee5\u4f60\u5fc5\u987b\u5728\u8868\u8fbe\u5f0f\u4e2d\u4f7f\u7528\u62ec\u53f7\uff0c\u786e\u4fdd\u95f4\u63a5\u8bbf\u95ee\u9996\u5148\u6267\u884c\u3002</p> <p>\u7531\u4e8e\u8fd9\u4e2a\u6982\u5ff5\u6709\u70b9\u60f9\u4eba\u538c\uff0c\u6240\u4ee5C\u8bed\u8a00\u63d0\u4f9b\u4e86\u4e00\u4e2a\u66f4\u4e3a\u65b9\u4fbf\u7684\u64cd\u4f5c\u7b26\u6765\u5b8c\u6210\u8fd9\u9879\u5de5\u4f5c\u2014\u2014-&gt;\u64cd\u4f5c\u7b26\uff08\u4e5f\u79f0\u7bad\u5934\u64cd\u4f5c\u7b26\uff09\u3002\u548c\u70b9\u64cd\u4f5c\u7b26\u4e00\u6837\uff0c\u7bad\u5934\u64cd\u4f5c\u7b26\u63a5\u53d7\u4e24\u4e2a\u64cd\u4f5c\u6570\uff0c\u4f46\u5de6\u64cd\u4f5c\u6570\u5fc5\u987b\u662f\u4e00\u4e2a\u6307\u5411\u7ed3\u6784\u7684\u6307\u9488 \u3002\u7bad\u5934\u64cd\u4f5c\u7b26\u5bf9\u5de6\u64cd\u4f5c\u6570\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u53d6\u5f97\u6307\u9488\u6240\u6307\u5411\u7684\u7ed3\u6784\uff0c\u7136\u540e\u548c\u70b9\u64cd\u4f5c\u7b26\u4e00\u6837\uff0c\u6839\u636e\u53f3\u64cd\u4f5c\u6570\u9009\u62e9\u4e00\u4e2a\u6307\u5b9a\u7684\u7ed3\u6784\u6210\u5458\u3002\u4f46\u662f\uff0c\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u5185\u5efa\u4e8e\u7bad\u5934\u64cd\u4f5c\u7b26\u4e2d\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u9700\u8981\u663e\u5f0f\u5730\u6267\u884c\u95f4\u63a5\u8bbf\u95ee\u6216\u4f7f\u7528\u62ec\u53f7\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-union/#_6","title":"\u7ed3\u6784\u7684\u81ea\u5f15\u7528","text":"<p>\u5728\u4e00\u4e2a\u7ed3\u6784\u5185\u90e8\u5305\u542b\u4e00\u4e2a\u7c7b\u578b\u4e3a\u8be5\u7ed3\u6784\u672c\u8eab\u7684\u6210\u5458\u662f\u5426\u5408\u6cd5\u5462\uff1f</p> <p>\u5f53\u6210\u5458b\u662f\u53e6\u4e00\u4e2a\u5b8c\u6574\u7684\u7ed3\u6784\uff0c\u5176\u5185\u90e8\u8fd8\u5c06\u5305\u542b\u5b83\u81ea\u5df1\u7684\u6210\u5458b\u65f6\uff0c\u8fd9\u79cd\u7c7b\u578b\u7684\u81ea\u5f15\u7528\u662f\u975e\u6cd5\u7684\u3002\u8fd9\u7b2c2\u4e2a\u6210\u5458\u53c8\u662f\u53e6\u4e00\u4e2a\u5b8c\u6574\u7684\u7ed3\u6784\uff0c\u5b83\u8fd8\u5c06\u5305\u62ec\u5b83\u81ea\u5df1\u7684\u6210\u5458b\u3002\u8fd9\u6837\u91cd\u590d\u4e0b\u53bb\u6c38\u65e0\u6b62\u5883\u3002\u8fd9\u6709\u70b9\u50cf\u6c38\u8fdc\u4e0d\u4f1a\u7ec8\u6b62\u7684\u9012\u5f52\u7a0b\u5e8f\u3002</p> <p>\u800c\u5f53 b \u662f\u4e00\u4e2a\u6307\u9488\u800c\u4e0d\u662f\u7ed3\u6784\u65f6\u662f\u5408\u6cd5\u7684\u3002\u7f16\u8bd1\u5668\u5728\u7ed3\u6784\u7684\u957f\u5ea6\u786e\u5b9a\u4e4b\u524d\u5c31\u5df2\u7ecf\u77e5\u9053\u6307\u9488\u7684\u957f\u5ea6\uff0c\u6240\u4ee5\u8fd9\u79cd\u7c7b\u578b\u7684\u81ea\u5f15\u7528\u662f\u5408\u6cd5\u7684\u3002</p> <p>\u5982\u679c\u4f60\u89c9\u5f97\u4e00\u4e2a\u7ed3\u6784\u5185\u90e8\u5305\u542b\u4e00\u4e2a\u6307\u5411\u8be5\u7ed3\u6784\u672c\u8eab\u7684\u6307\u9488\u6709\u4e9b\u5947\u602a\uff0c\u8bf7\u8bb0\u4f4f\u5b83\u4e8b\u5b9e\u4e0a\u6240\u6307\u5411\u7684\u662f\u540c\u4e00\u79cd\u7c7b\u578b\u7684\u4e0d\u540c \u7ed3\u6784\u3002\u66f4\u52a0\u9ad8\u7ea7\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5982\u94fe\u8868\u548c\u6811\uff0c\u90fd\u662f\u7528\u8fd9\u79cd\u6280\u5de7\u5b9e\u73b0\u7684\u3002\u6bcf\u4e2a\u7ed3\u6784\u6307\u5411\u94fe\u8868\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\u6216\u6811\u7684\u4e0b\u4e00\u4e2a\u5206\u679d\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-union/#_7","title":"\u4e0d\u5b8c\u6574\u7684\u58f0\u660e","text":"<p>\u5076\u5c14\uff0c\u4f60\u5fc5\u987b\u58f0\u660e\u4e00\u4e9b\u76f8\u4e92\u4e4b\u95f4\u5b58\u5728\u4f9d\u8d56\u7684\u7ed3\u6784\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5176\u4e2d\u4e00\u4e2a\u7ed3\u6784\u5305\u542b\u4e86\u53e6\u4e00\u4e2a\u7ed3\u6784\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u6210\u5458\u3002\u548c\u81ea\u5f15\u7528\u7ed3\u6784\u4e00\u6837\uff0c\u81f3\u5c11\u6709\u4e00\u4e2a\u7ed3\u6784\u5fc5\u987b\u5728\u53e6\u4e00\u4e2a\u7ed3\u6784\u5185\u90e8\u4ee5\u6307\u9488\u7684\u5f62\u5f0f\u5b58\u5728\u3002\u95ee\u9898\u5728\u4e8e\u58f0\u660e\u90e8\u5206\uff1a\u5982\u679c\u6bcf\u4e2a\u7ed3\u6784\u90fd\u5f15\u7528\u4e86\u5176\u4ed6\u7ed3\u6784\u7684\u6807\u7b7e\uff0c\u54ea\u4e2a\u7ed3\u6784\u5e94\u8be5\u9996\u5148\u58f0\u660e\u5462\uff1f</p> <p>\u8fd9\u4e2a\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848\u662f\u4f7f\u7528\u4e0d\u5b8c\u6574\u58f0\u660e(incomplete declaration)\uff0c\u5b83\u58f0\u660e\u4e00\u4e2a\u4f5c\u4e3a\u7ed3\u6784\u6807\u7b7e\u7684\u6807\u8bc6\u7b26\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e2a\u6807\u7b7e\u7528\u5728\u4e0d\u9700\u8981\u77e5\u9053\u8fd9\u4e2a\u7ed3\u6784\u7684\u957f\u5ea6\u7684\u58f0\u660e\u4e2d\uff0c\u5982\u58f0\u660e\u6307\u5411\u8fd9\u4e2a\u7ed3\u6784\u7684\u6307\u9488\u3002\u63a5\u4e0b\u6765\u7684\u58f0\u660e\u628a\u8fd9\u4e2a\u6807\u7b7e\u4e0e\u6210\u5458\u5217\u8868\u8054\u7cfb\u5728\u4e00\u8d77\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-union/#_8","title":"\u7ed3\u6784\u7684\u521d\u59cb\u5316","text":"<p>\u7ed3\u6784\u7684\u521d\u59cb\u5316\u65b9\u5f0f\u548c\u6570\u7ec4\u7684\u521d\u59cb\u5316\u5f88\u76f8\u4f3c\u3002\u4e00\u4e2a\u4f4d\u4e8e\u4e00\u5bf9\u82b1\u62ec\u53f7\u5185\u90e8\u3001\u7531\u9017\u53f7\u5206\u9694\u7684\u521d\u59cb\u503c\u5217\u8868\u53ef\u7528\u4e8e\u7ed3\u6784\u5404\u4e2a\u6210\u5458\u7684\u521d\u59cb\u5316\u3002\u8fd9\u4e9b\u503c\u6839\u636e\u7ed3\u6784\u6210\u5458\u5217\u8868\u7684\u987a\u5e8f\u5199\u51fa\u3002\u5982\u679c\u521d\u59cb\u5217\u8868\u7684\u503c\u4e0d\u591f\uff0c\u5269\u4f59\u7684\u7ed3\u6784\u6210\u5458\u5c06\u4f7f\u7528\u7f3a\u7701\u503c\u8fdb\u884c\u521d\u59cb\u5316\u3002</p> <p>\u7ed3\u6784\u4e2d\u5982\u679c\u5305\u542b\u6570\u7ec4\u6216\u7ed3\u6784\u6210\u5458\uff0c\u5176\u521d\u59cb\u5316\u65b9\u5f0f\u7c7b\u4f3c\u4e8e\u591a\u7ef4\u6570\u7ec4\u7684\u521d\u59cb\u5316\u3002\u4e00\u4e2a\u5b8c\u6574\u7684\u805a\u5408\u7c7b\u578b\u6210\u5458\u7684\u521d\u59cb\u503c\u5217\u8868\u53ef\u4ee5\u5d4c\u5957\u4e8e\u7ed3\u6784\u7684\u521d\u59cb\u503c\u5217\u8868\u5185\u90e8\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-union/#_9","title":"\u7ed3\u6784\u7684\u5b58\u50a8\u5206\u914d","text":"<p>\u7ed3\u6784\u5728\u5185\u5b58\u4e2d\u662f\u5982\u4f55\u5b9e\u9645\u5b58\u50a8\u7684\u5462\uff1f\u524d\u9762\u4f8b\u5b50\u7684\u8fd9\u5f20\u56fe\u4f3c\u4e4e\u63d0\u793a\u4e86\u7ed3\u6784\u5185\u90e8\u5305\u542b\u4e86\u5927\u91cf\u7684\u672a\u7528\u7a7a\u95f4\u3002\u4f46\u8fd9\u5f20\u56fe\u5e76\u4e0d\u5b8c\u5168\u51c6\u786e\uff0c\u7f16\u8bd1\u5668\u6309\u7167\u6210\u5458\u5217\u8868\u7684\u987a\u5e8f\u4e00\u4e2a\u63a5\u4e00\u4e2a\u5730\u7ed9\u6bcf\u4e2a\u6210\u5458\u5206\u914d\u5185\u5b58\u3002\u53ea\u6709\u5f53\u5b58\u50a8\u6210\u5458\u65f6\u9700\u8981\u6ee1\u8db3\u6b63\u786e\u7684\u8fb9\u754c\u5bf9\u9f50\u8981\u6c42\u65f6\uff0c\u6210\u5458\u4e4b\u95f4\u624d\u53ef\u80fd\u51fa\u73b0\u7528\u4e8e\u586b\u5145\u7684\u989d\u5916\u5185\u5b58\u7a7a\u95f4\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-union/#_10","title":"\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u7684\u7ed3\u6784","text":"<p>\u7ed3\u6784\u53d8\u91cf\u662f\u4e00\u4e2a\u6807\u91cf\uff0c\u5b83\u53ef\u4ee5\u7528\u4e8e\u5176\u4ed6\u6807\u91cf\u53ef\u4ee5\u4f7f\u7528\u7684\u4efb\u4f55\u573a\u5408\u3002\u56e0\u6b64\uff0c\u628a\u7ed3\u6784\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u4e00\u4e2a\u51fd\u6570\u662f\u5408\u6cd5\u7684\uff0c\u4f46\u8fd9\u79cd\u505a\u6cd5\u5f80\u5f80\u5e76\u4e0d\u9002\u5b9c\u3002</p> <p>\u5982\u679c\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u662f\u4e00\u4e2a\u6307\u5411\u7ed3\u6784\u7684\u6307\u9488\uff0c\u6307\u9488\u6bd4\u6574\u4e2a\u7ed3\u6784\u8981\u5c0f\u5f97\u591a\uff0c\u6240\u4ee5\u628a\u5b83\u538b\u5230\u5806\u6808\u4e0a\u6548\u7387\u80fd\u63d0\u9ad8\u5f88\u591a\u3002\u4f20\u9012\u6307\u9488\u53e6\u5916\u9700\u8981\u4ed8\u51fa\u7684\u4ee3\u4ef7\u662f\u6211\u4eec\u5fc5\u987b\u5728\u51fd\u6570\u4e2d\u4f7f\u7528\u95f4\u63a5\u8bbf\u95ee\u6765\u8bbf\u95ee\u7ed3\u6784\u7684\u6210\u5458\u3002\u7ed3\u6784\u8d8a\u5927\uff0c\u628a\u6307\u5411\u5b83\u7684\u6307\u9488\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u6548\u7387\u5c31\u8d8a\u9ad8\u3002</p> <p>\u5728\u8bb8\u591a\u673a\u5668\u4e2d\uff0c\u4f60\u53ef\u4ee5\u628a\u53c2\u6570\u58f0\u660e\u4e3a\u5bc4\u5b58\u5668\u53d8\u91cf\uff0c\u4ece\u800c\u8fdb\u4e00\u6b65\u63d0\u9ad8\u6307\u9488\u4f20\u9012\u65b9\u6848\u7684\u6548\u7387\u3002\u5728\u6709\u4e9b\u673a\u5668\u4e0a\uff0c\u8fd9\u79cd\u58f0\u660e\u5728\u51fd\u6570\u7684\u8d77\u59cb\u90e8\u5206\u8fd8\u9700\u8981\u4e00\u6761\u989d\u5916\u7684\u6307\u4ee4\uff0c\u7528\u4e8e\u628a\u5806\u6808\u4e2d\u7684\u53c2\u6570\uff08\u53c2\u6570\u5148\u4f20\u9012\u7ed9\u5806\u6808\uff09\u590d\u5236\u5230\u5bc4\u5b58\u5668\uff0c\u4f9b\u51fd\u6570\u4f7f\u7528\u3002\u4f46\u662f\uff0c\u5982\u679c\u51fd\u6570\u5bf9\u8fd9\u4e2a\u6307\u9488\u7684\u95f4\u63a5\u8bbf\u95ee\u6b21\u6570\u8d85\u8fc7\u4e24\u4e09\u6b21\uff0c\u90a3\u4e48\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\u6240\u8282\u7701\u7684\u65f6\u95f4\u5c06\u8fdc\u8fdc\u9ad8\u4e8e\u4e00\u6761\u989d\u5916\u6307\u4ee4\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002</p> <p>\u5411\u51fd\u6570\u4f20\u9012\u6307\u9488\u7684\u7f3a\u9677\u5728\u4e8e\u51fd\u6570\u73b0\u5728\u53ef\u4ee5\u5bf9\u8c03\u7528\u7a0b\u5e8f\u7684\u7ed3\u6784\u53d8\u91cf\u8fdb\u884c\u4fee\u6539\u3002\u5982\u679c\u6211\u4eec\u4e0d\u5e0c\u671b\u5982\u6b64\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u4e2d\u4f7f\u7528const\u5173\u952e\u5b57\u6765\u9632\u6b62\u8fd9\u7c7b\u4fee\u6539\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-union/#_11","title":"\u4f4d\u6bb5","text":"<p>\u5173\u4e8e\u7ed3\u6784\uff0c\u6211\u4eec\u6700\u540e\u8fd8\u5fc5\u987b\u63d0\u5230\u5b83\u4eec\u5b9e\u73b0\u4f4d\u6bb5(bit field)\u7684\u80fd\u529b\u3002\u4f4d\u6bb5\u7684\u58f0\u660e\u548c\u7ed3\u6784\u7c7b\u4f3c\uff0c\u4f46\u5b83\u7684\u6210\u5458\u662f\u4e00\u4e2a\u6216\u591a\u4e2a\u4f4d\u7684\u5b57\u6bb5\u3002\u8fd9\u4e9b\u4e0d\u540c\u957f\u5ea6\u7684\u5b57\u6bb5\u5b9e\u9645\u4e0a\u5b58\u50a8\u4e8e\u4e00\u4e2a\u6216\u591a\u4e2a\u6574\u578b\u53d8\u91cf\u4e2d\u3002</p> <p>\u4f4d\u6bb5\u7684\u58f0\u660e\u548c\u4efb\u4f55\u666e\u901a\u7684\u7ed3\u6784\u6210\u5458\u58f0\u660e\u76f8\u540c\uff0c\u4f46\u6709\u4e24\u4e2a\u4f8b\u5916\u3002\u9996\u5148\uff0c\u4f4d\u6bb5\u6210\u5458\u5fc5\u987b\u58f0\u660e\u4e3aint\u3001signed int\u6216unsigned int\u7c7b\u578b\u3002\u5176\u6b21\uff0c\u5728\u6210\u5458\u540d\u7684\u540e\u9762\u662f\u4e00\u4e2a\u5192\u53f7\u548c\u4e00\u4e2a\u6574\u6570\uff0c\u8fd9\u4e2a\u6574\u6570\u6307\u5b9a\u8be5\u4f4d\u6bb5\u6240\u5360\u7528\u7684\u4f4d\u7684\u6570\u76ee\u3002</p> <p>\u4f7f\u7528\u4f4d\u6bb5\u7684\u80fd\u591f\u628a\u957f\u5ea6\u4e3a\u5947\u6570\u7684\u6570\u636e\u5305\u88c5\u5728\u4e00\u8d77\uff0c\u8282\u7701\u5b58\u50a8\u7a7a\u95f4\u3002\u5f53\u7a0b\u5e8f\u9700\u8981\u4f7f\u7528\u6210\u5343\u4e0a\u4e07\u7684\u8fd9\u7c7b\u7ed3\u6784\u65f6\uff0c\u8fd9\u79cd\u8282\u7701\u65b9\u6cd5\u5c31\u4f1a\u53d8\u5f97\u76f8\u5f53\u91cd\u8981\u3002\u53e6\u4e00\u4e2a\u4f7f\u7528\u4f4d\u6bb5\u7684\u7406\u7531\u662f\u7531\u4e8e\u5b83\u4eec\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u8bbf\u95ee\u4e00\u4e2a\u6574\u578b\u503c\u7684\u90e8\u5206\u5185\u5bb9\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-union/#_12","title":"\u8054\u5408","text":"<p>\u548c\u7ed3\u6784\u76f8\u6bd4\uff0c\u8054\u5408\uff08union\uff09\u53ef\u4ee5\u8bf4\u662f\u53e6\u4e00\u79cd\u52a8\u7269\u4e86\u3002\u8054\u5408\u7684\u58f0\u660e\u548c\u7ed3\u6784\u7c7b\u4f3c\uff0c\u4f46\u5b83\u7684\u884c\u4e3a\u65b9\u5f0f\u5374\u548c\u7ed3\u6784\u4e0d\u540c\u3002\u8054\u5408\u7684\u6240\u6709\u6210\u5458\u5f15\u7528\u7684\u662f\u5185\u5b58\u4e2d\u7684\u76f8\u540c\u4f4d\u7f6e \u3002\u5f53\u4f60\u60f3\u5728\u4e0d\u540c\u7684\u65f6\u523b\u628a\u4e0d\u540c\u7684\u4e1c\u897f\u5b58\u50a8\u4e8e\u540c\u4e00\u4e2a\u4f4d\u7f6e\u65f6\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u8054\u5408\u3002</p> <p>\u5982\u679c\u8054\u5408\u7684\u5404\u4e2a\u6210\u5458\u5177\u6709\u4e0d\u540c\u7684\u957f\u5ea6\uff0c\u8054\u5408\u7684\u957f\u5ea6\u5c31\u662f\u5b83\u6700\u957f\u6210\u5458\u7684\u957f\u5ea6\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-union/#_13","title":"\u603b\u7ed3","text":"<p>\u5728\u7ed3\u6784\u4e2d\uff0c\u4e0d\u540c\u7c7b\u578b\u7684\u503c\u53ef\u4ee5\u5b58\u50a8\u5728\u4e00\u8d77\u3002\u7ed3\u6784\u4e2d\u7684\u503c\u79f0\u4e3a\u6210\u5458\uff0c\u5b83\u4eec\u662f\u901a\u8fc7\u540d\u5b57\u8bbf\u95ee\u7684\u3002\u7ed3\u6784\u53d8\u91cf\u662f\u4e00\u4e2a\u6807\u91cf\uff0c\u53ef\u4ee5\u51fa\u73b0\u5728\u666e\u901a\u6807\u91cf\u53d8\u91cf\u53ef\u4ee5\u51fa\u73b0\u7684\u4efb\u4f55\u573a\u5408\u3002</p> <p>\u7ed3\u6784\u7684\u58f0\u660e\u5217\u51fa\u4e86\u7ed3\u6784\u5305\u542b\u7684\u6210\u5458\u5217\u8868\u3002\u4e0d\u540c\u7684\u7ed3\u6784\u58f0\u660e\u5373\u4f7f\u5b83\u4eec\u7684\u6210\u5458\u5217\u8868\u76f8\u540c\u4e5f\u88ab\u8ba4\u4e3a\u662f\u4e0d\u540c\u7684\u7c7b\u578b\u3002\u7ed3\u6784\u6807\u7b7e\u662f\u4e00\u4e2a\u540d\u5b57\uff0c\u5b83\u4e0e\u4e00\u4e2a\u6210\u5458\u5217\u8868\u76f8\u5173\u8054\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u7ed3\u6784\u6807\u7b7e\u5728\u4e0d\u540c\u7684\u58f0\u660e\u4e2d\u521b\u5efa\u76f8\u540c\u7c7b\u578b\u7684\u7ed3\u6784\u53d8\u91cf\uff0c\u8fd9\u6837\u5c31\u4e0d\u7528\u6bcf\u6b21\u5728\u58f0\u660e\u4e2d\u91cd\u590d\u6210\u5458\u5217\u8868\u3002typedef\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u8fd9\u4e2a\u76ee\u6807\u3002</p> <p>\u7ed3\u6784\u7684\u6210\u5458\u53ef\u4ee5\u662f\u6807\u91cf\u3001\u6570\u7ec4\u6216\u6307\u9488\u3002\u7ed3\u6784\u4e5f\u53ef\u4ee5\u5305\u542b\u672c\u8eab\u4e5f\u662f\u7ed3\u6784\u7684\u6210\u5458\u3002\u5728\u4e0d\u540c\u7684\u7ed3\u6784\u4e2d\u51fa\u73b0\u540c\u6837\u7684\u6210\u5458\u540d\u662f\u4e0d\u4f1a\u5f15\u8d77\u51b2\u7a81\u7684\u3002\u4f60\u4f7f\u7528\u70b9\u64cd\u4f5c\u7b26\u8bbf\u95ee\u7ed3\u6784\u53d8\u91cf\u7684\u6210\u5458\u3002\u5982\u679c\u4f60\u62e5\u6709\u4e00\u4e2a\u6307\u5411\u7ed3\u6784\u7684\u6307\u9488\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u7bad\u5934\u64cd\u4f5c\u7b26\u8bbf\u95ee\u8fd9\u4e2a\u7ed3\u6784\u7684\u6210\u5458\u3002</p> <p>\u7ed3\u6784\u4e0d\u80fd\u5305\u542b\u7c7b\u578b\u4e5f\u662f\u8fd9\u4e2a\u7ed3\u6784\u7684\u6210\u5458\uff0c\u4f46\u5b83\u7684\u6210\u5458\u53ef\u4ee5\u662f\u4e00\u4e2a\u6307\u5411\u8fd9\u4e2a\u7ed3\u6784\u7684\u6307\u9488\u3002\u8fd9\u4e2a\u6280\u5de7\u5e38\u5e38\u7528\u4e8e\u94fe\u5f0f\u6570\u636e\u7ed3\u6784\u4e2d\u3002\u4e3a\u4e86\u58f0\u660e\u4e24\u4e2a\u7ed3\u6784\uff0c\u6bcf\u4e2a\u7ed3\u6784\u90fd\u5305\u542b\u4e00\u4e2a\u6307\u5411\u5bf9\u65b9\u7684\u6307\u9488\u7684\u6210\u5458\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u4e0d\u5b8c\u6574\u7684\u58f0\u660e\u6765\u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u6807\u7b7e\u540d\u3002\u7ed3\u6784\u53d8\u91cf\u53ef\u4ee5\u7528\u4e00\u4e2a\u7531\u82b1\u62ec\u53f7\u5305\u56f4\u7684\u503c\u5217\u8868\u8fdb\u884c\u521d\u59cb\u5316\u3002\u8fd9\u4e9b\u503c\u7684\u7c7b\u578b\u5fc5\u987b\u9002\u5408\u5b83\u6240\u521d\u59cb\u5316\u7684\u90a3\u4e9b\u6210\u5458\u3002</p> <p>\u7f16\u8bd1\u5668\u4e3a\u4e00\u4e2a\u7ed3\u6784\u53d8\u91cf\u7684\u6210\u5458\u5206\u914d\u5185\u5b58\u65f6\u8981\u6ee1\u8db3\u5b83\u4eec\u7684\u8fb9\u754c\u5bf9\u9f50\u8981\u6c42\u3002\u5728\u5b9e\u73b0\u7ed3\u6784\u5b58\u50a8\u7684\u8fb9\u754c\u5bf9\u9f50\u65f6\uff0c\u53ef\u80fd\u4f1a\u6d6a\u8d39\u4e00\u90e8\u5206\u5185\u5b58\u7a7a\u95f4\u3002\u6839\u636e\u8fb9\u754c\u5bf9\u9f50\u8981\u6c42\u964d\u5e8f\u6392\u5217\u7ed3\u6784\u6210\u5458\u53ef\u4ee5\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u7ed3\u6784\u5b58\u50a8\u4e2d\u6d6a\u8d39\u7684\u5185\u5b58\u7a7a\u95f4\u3002sizeof\u8fd4\u56de\u7684\u503c\u5305\u542b\u4e86\u7ed3\u6784\u4e2d\u6d6a\u8d39\u7684\u5185\u5b58\u7a7a\u95f4\u3002</p> <p>\u7ed3\u6784\u53ef\u4ee5\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u51fd\u6570\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u8fd4\u56de\u503c\u4ece\u51fd\u6570\u8fd4\u56de\u3002\u4f46\u662f\uff0c\u5411\u51fd\u6570\u4f20\u9012\u4e00\u4e2a\u6307\u5411\u7ed3\u6784\u7684\u6307\u9488\u5f80\u5f80\u6548\u7387\u66f4\u9ad8\u3002\u5728\u7ed3\u6784\u6307\u9488\u53c2\u6570\u7684\u58f0\u660e\u4e2d\u53ef\u4ee5\u52a0\u4e0aconst\u5173\u952e\u5b57\u9632\u6b62\u51fd\u6570\u4fee\u6539\u6307\u9488\u6240\u6307\u5411\u7684\u7ed3\u6784\u3002</p> <p>\u4f4d\u6bb5\u662f\u7ed3\u6784\u7684\u4e00\u79cd\uff0c\u4f46\u5b83\u7684\u6210\u5458\u957f\u5ea6\u4ee5\u4f4d\u4e3a\u5355\u4f4d\u6307\u5b9a\u3002\u4f4d\u6bb5\u58f0\u660e\u5728\u672c\u8d28\u4e0a\u662f\u4e0d\u53ef\u79fb\u690d\u7684\uff0c\u56e0\u4e3a\u5b83\u6d89\u53ca\u8bb8\u591a\u4e0e\u5b9e\u73b0\u6709\u5173\u7684\u56e0\u7d20\u3002\u4f46\u662f\uff0c\u4f4d\u6bb5\u5141\u8bb8\u4f60\u628a\u957f\u5ea6\u4e3a\u5947\u6570\u7684\u503c\u5305\u88c5\u5728\u4e00\u8d77\u4ee5\u8282\u7701\u5b58\u50a8\u7a7a\u95f4\u3002\u6e90\u4ee3\u7801\u5982\u679c\u9700\u8981\u8bbf\u95ee\u4e00\u4e2a\u503c\u5185\u90e8\u4efb\u610f\u7684\u4e00\u4e9b\u4f4d\uff0c\u4f7f\u7528\u4f4d\u6bb5\u6bd4\u8f83\u7b80\u4fbf\u3002</p> <p>\u4e00\u4e2a\u8054\u5408\u7684\u6240\u6709\u6210\u5458\u90fd\u5b58\u50a8\u4e8e\u540c\u4e00\u4e2a\u5185\u5b58\u4f4d\u7f6e\u3002\u901a\u8fc7\u8bbf\u95ee\u4e0d\u540c\u7c7b\u578b\u7684\u8054\u5408\u6210\u5458\uff0c\u5185\u5b58\u4e2d\u76f8\u540c\u7684\u4f4d\u7ec4\u5408\u53ef\u4ee5\u88ab\u89e3\u91ca\u4e3a\u4e0d\u540c\u7684\u4e1c\u897f\u3002\u8054\u5408\u5728\u5b9e\u73b0\u53d8\u4f53\u8bb0\u5f55\u65f6\u5f88\u6709\u7528\uff0c\u4f46\u7a0b\u5e8f\u5458\u5fc5\u987b\u8d1f\u8d23\u786e\u8ba4\u5b9e\u9645\u5b58\u50a8\u7684\u662f\u54ea\u4e2a\u53d8\u4f53\u5e76\u9009\u62e9\u6b63\u786e\u7684\u8054\u5408\u6210\u5458\u4ee5\u4fbf\u8bbf\u95ee\u6570\u636e\u3002\u8054\u5408\u53d8\u91cf\u4e5f\u53ef\u4ee5\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u4f46\u521d\u59cb\u503c\u5fc5\u987b\u4e0e\u8054\u5408\u7b2c1\u4e2a\u6210\u5458\u7684\u7c7b\u578b\u5339\u914d\u3002</p>"},{"location":"foundation/pointers-on-c/struct-and-union/#_14","title":"\u7f16\u7a0b\u7ec3\u4e60","text":""},{"location":"foundation/pointers-on-c/struct-and-union/#1","title":"\u7ec3\u4e60 1","text":"<p>\u5f53\u4f60\u62e8\u6253\u957f\u9014\u7535\u8bdd\u65f6\uff0c\u7535\u8bdd\u516c\u53f8\u6240\u4fdd\u5b58\u7684\u4fe1\u606f\u5305\u62ec\u4f60\u62e8\u6253\u7535\u8bdd\u7684\u65e5\u671f\u548c\u65f6\u95f4\u3002\u5b83\u8fd8\u5305\u62ec\u4e09\u4e2a\u7535\u8bdd\u53f7\u7801\uff1a\u4f60\u4f7f\u7528\u7684\u90a3\u4e2a\u7535\u8bdd\u3001\u4f60\u547c\u53eb\u7684\u90a3\u4e2a\u7535\u8bdd\u4ee5\u53ca\u4f60\u4ed8\u8d26\u7684\u90a3\u4e2a\u7535\u8bdd\u3002\u8fd9\u4e9b\u7535\u8bdd\u53f7\u7801\u7684\u6bcf\u4e00\u4e2a\u90fd\u7531\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\uff1a\u533a\u53f7\u3001\u4ea4\u6362\u53f0\u548c\u7ad9\u53f7\u7801\u3002\u8bf7\u4e3a\u8fd9\u4e9b\u8bb0\u8d26\u4fe1\u606f\u7f16\u5199\u4e00\u4e2a\u7ed3\u6784\u58f0\u660e\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n\n// \u5b9a\u4e49\u7535\u8bdd\u53f7\u7801\u7684\u7ed3\u6784\ntypedef struct {\n    int areaCode;    // \u533a\u53f7\n    int exchange;    // \u4ea4\u6362\u53f0\n    int station;     // \u7ad9\u53f7\u7801\n} PhoneNumber;\n\n// \u5b9a\u4e49\u8bb0\u8d26\u4fe1\u606f\u7684\u7ed3\u6784\ntypedef struct {\n    char callDate[11];  // \u7535\u8bdd\u62e8\u6253\u7684\u65e5\u671f\uff0c\u683c\u5f0f\"YYYY-MM-DD\"\uff0c\u5305\u62ec\u7ed3\u675f\u7b26'\\0'\u9700\u898111\u4e2a\u5b57\u7b26\n    char callTime[6];   // \u7535\u8bdd\u62e8\u6253\u7684\u65f6\u95f4\uff0c\u683c\u5f0f\"HH:MM\"\uff0c\u5305\u62ec\u7ed3\u675f\u7b26'\\0'\u9700\u89816\u4e2a\u5b57\u7b26\n    PhoneNumber usingPhone;  // \u4f7f\u7528\u7684\u7535\u8bdd\n    PhoneNumber calledPhone; // \u547c\u53eb\u7684\u7535\u8bdd\n    PhoneNumber billingPhone; // \u4ed8\u8d26\u7684\u7535\u8bdd\n} CallBillingInfo;\n\nint main() {\n    // \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2aCallBillingInfo\u5b9e\u4f8b\u5e76\u521d\u59cb\u5316\n    CallBillingInfo callInfo = {\n        \"2023-04-01\", // \u7535\u8bdd\u62e8\u6253\u65e5\u671f\n        \"15:30\",      // \u7535\u8bdd\u62e8\u6253\u65f6\u95f4\n        {123, 456, 7890}, // \u4f7f\u7528\u7684\u7535\u8bdd\u53f7\u7801\uff08\u533a\u53f7\u3001\u4ea4\u6362\u53f0\u3001\u7ad9\u53f7\u7801\uff09\n        {321, 654, 0987}, // \u547c\u53eb\u7684\u7535\u8bdd\u53f7\u7801\n        {111, 222, 3333}  // \u4ed8\u8d26\u7684\u7535\u8bdd\u53f7\u7801\n    };\n\n    // \u8f93\u51fa\u67d0\u4e9b\u4fe1\u606f\u8fdb\u884c\u9a8c\u8bc1\n    printf(\"Call Date: %s\\n\", callInfo.callDate);\n    printf(\"Call Time: %s\\n\", callInfo.callTime);\n    printf(\"Using Phone: (%d) %d-%d\\n\", \n            callInfo.usingPhone.areaCode, \n            callInfo.usingPhone.exchange, \n            callInfo.usingPhone.station);\n    return 0;\n}\n</code></pre>"},{"location":"foundation/self-cultivation/dynamic-link/","title":"\u52a8\u6001\u94fe\u63a5","text":"<p>\u6700\u8fd1\u5728\u8bfb\u300a\u7a0b\u5e8f\u5458\u7684\u81ea\u6211\u4fee\u517b\uff1a\u94fe\u63a5\uff0c\u88c5\u8f7d\u4e0e\u5e93\u300b\uff0c\u5176\u5b9e\u8fd9\u672c\u4e66\u8ddf Android \u5f00\u53d1\u7684\u8054\u7cfb\u8fd8\u633a\u7d27\u5bc6\u7684\uff0c\u65e0\u8bba\u662f NDK \u5f00\u53d1\uff0c\u6216\u8005\u662f\u6027\u80fd\u4f18\u5316\u4e2d\u4e00\u4e9b\u5e38\u7528\u7684 Native Hoook \u624b\u6bb5\uff0c\u90fd\u9700\u8981\u4e86\u89e3\u4e00\u4e9b\u94fe\u63a5\uff0c\u88c5\u8f7d\u76f8\u5173\u7684\u77e5\u8bc6\u70b9\u3002\u672c\u6587\u4e3a\u8bfb\u4e66\u7b14\u8bb0\u3002</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_2","title":"\u4e3a\u4ec0\u4e48\u8981\u52a8\u6001\u94fe\u63a5","text":"<p>\u524d\u9762\u6211\u4eec\u4ecb\u7ecd\u4e86\u9759\u6001\u94fe\u63a5\uff0c\u90a3\u4e48\u5728\u5df2\u7ecf\u6709\u4e86\u9759\u6001\u94fe\u63a5\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4e3a\u4ec0\u4e48\u8fd8\u9700\u8981\u52a8\u6001\u94fe\u63a5\uff1f</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_3","title":"\u7a7a\u95f4\u6d6a\u8d39\u95ee\u9898","text":"<p>\u9759\u6001\u94fe\u63a5\u4f1a\u5c06\u4f9d\u8d56\u5e93\u7684\u5185\u5bb9\u76f4\u63a5\u6253\u5305\u5230\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\uff0c\u8fd9\u5f88\u660e\u663e\u4f1a\u5e26\u6765\u6765\u5f97\u7684\u7a7a\u95f4\u6d6a\u8d39\u95ee\u9898\u3002</p> <p>\u60f3\u8c61\u4e00\u4e0b\u6bcf\u4e2a\u7a0b\u5e8f\u5185\u90e8\u9664\u4e86\u90fd\u4fdd\u7559\u7740 printf() \u51fd\u6570\u3001 scanf() \u51fd\u6570\u3001 strlen() \u7b49\u8fd9\u6837\u7684\u516c\u7528\u5e93\u51fd\u6570\uff0c\u8fd8\u6709\u6570\u91cf\u76f8\u5f53\u53ef\u89c2\u7684\u5176\u4ed6\u5e93\u51fd\u6570\u53ca\u5b83\u4eec\u6240\u9700\u8981\u7684\u8f85\u52a9\u6570\u636e\u7ed3\u6784\u3002\u5728\u73b0\u5728\u7684Linux\u7cfb\u7edf\u4e2d\uff0c\u4e00\u4e2a\u666e\u901a\u7a0b\u5e8f\u4f1a\u4f7f\u7528\u5230\u7684C\u8bed\u8a00\u9759\u6001\u5e93\u81f3\u5c11\u57281 MB\u4ee5\u4e0a\uff0c\u90a3\u4e48\uff0c\u5982\u679c\u6211\u4eec\u7684\u673a\u5668\u4e2d\u8fd0\u884c\u7740100\u4e2a\u8fd9\u6837\u7684\u7a0b\u5e8f\uff0c\u5c31\u8981\u6d6a\u8d39\u8fd1100 MB\u7684\u5185\u5b58\u3002</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_4","title":"\u7248\u672c\u66f4\u65b0\u95ee\u9898","text":"<p>\u9759\u6001\u94fe\u63a5\u7684\u53e6\u4e00\u4e2a\u95ee\u9898\u662f\u7ed9\u7a0b\u5e8f\u7684\u66f4\u65b0\uff0c\u90e8\u7f72\u548c\u53d1\u5e03\u5e26\u6765\u5f88\u591a\u9ebb\u70e6\u3002\u4e00\u65e6\u7a0b\u5e8f\u4e2d\u6709\u4efb\u4f55\u6a21\u5757\u66f4\u65b0\uff0c\u6574\u4e2a\u7a0b\u5e8f\u5c31\u8981\u91cd\u65b0\u94fe\u63a5\u3001\u53d1\u5e03\u7ed9\u7528\u6237\u3002\u6bd4\u5982\u4e00\u4e2a\u7a0b\u5e8f\u670920\u4e2a\u6a21\u5757\uff0c\u6bcf\u4e2a\u6a21\u57571 MB\uff0c\u90a3\u4e48\u6bcf\u6b21\u66f4\u65b0\u4efb\u4f55\u4e00\u4e2a\u6a21\u5757\uff0c\u7528\u6237\u5c31\u5f97\u91cd\u65b0\u83b7\u53d6\u8fd9\u4e2a20 MB\u7684\u7a0b\u5e8f\u3002</p> <p>\u56e0\u6b64\u5982\u679c\u7a0b\u5e8f\u90fd\u4f7f\u7528\u9759\u6001\u94fe\u63a5\uff0c\u90a3\u4e48\u901a\u8fc7\u7f51\u7edc\u6765\u66f4\u65b0\u7a0b\u5e8f\u5c06\u4f1a\u975e\u5e38\u4e0d\u4fbf\uff0c\u56e0\u4e3a\u4e00\u65e6\u7a0b\u5e8f\u4efb\u4f55\u4f4d\u7f6e\u7684\u4e00\u4e2a\u5c0f\u6539\u52a8\uff0c\u90fd\u4f1a\u5bfc\u81f4\u6574\u4e2a\u7a0b\u5e8f\u91cd\u65b0\u4e0b\u8f7d</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_5","title":"\u52a8\u6001\u94fe\u63a5\u662f\u4ec0\u4e48?","text":"<p>\u8981\u89e3\u51b3\u7a7a\u95f4\u6d6a\u8d39\u548c\u66f4\u65b0\u56f0\u96be\u8fd9\u4e24\u4e2a\u95ee\u9898\u6700\u7b80\u5355\u7684\u529e\u6cd5\u5c31\u662f\u628a\u7a0b\u5e8f\u7684\u6a21\u5757\u76f8\u4e92\u5206\u5272\u5f00\u6765\uff0c\u5f62\u6210\u72ec\u7acb\u7684\u6587\u4ef6\uff0c\u800c\u4e0d\u518d\u5c06\u5b83\u4eec\u9759\u6001\u5730\u94fe\u63a5\u5728\u4e00\u8d77\u3002\u7b80\u5355\u5730\u8bb2\uff0c\u5c31\u662f\u4e0d\u5bf9\u90a3\u4e9b\u7ec4\u6210\u7a0b\u5e8f\u7684\u76ee\u6807\u6587\u4ef6\u8fdb\u884c\u94fe\u63a5\uff0c\u7b49\u5230\u7a0b\u5e8f\u8981\u8fd0\u884c\u65f6\u624d\u8fdb\u884c\u94fe\u63a5\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u628a\u94fe\u63a5\u8fd9\u4e2a\u8fc7\u7a0b\u63a8\u8fdf\u5230\u4e86\u8fd0\u884c\u65f6\u518d\u8fdb\u884c\uff0c\u8fd9\u5c31\u662f\u52a8\u6001\u94fe\u63a5\uff08Dynamic Linking\uff09\u7684\u57fa\u672c\u601d\u60f3\u3002</p> <p>\u6bd4\u5982\u6211\u4eec\u6709 Program1 \u4e0e Program2 \u4e24\u4e2a\u7a0b\u5e8f\uff0c\u5b83\u4eec\u90fd\u4f9d\u8d56\u4e8e lib.o\u3002\u5f53\u5f00\u59cb\u52a0\u8f7d Program1 \u65f6\uff0c\u7cfb\u7edf\u53d1\u73b0\u5176\u4f9d\u8d56 lib.o\uff0c\u5c31\u4f1a\u5c06 lib.o \u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u5f00\u59cb\u94fe\u63a5\u5de5\u4f5c\u3002\u8fd9\u4e2a\u94fe\u63a5\u8fc7\u7a0b\u4e0e\u9759\u6001\u94fe\u63a5\u975e\u5e38\u76f8\u4f3c\uff0c\u5305\u62ec\u7b26\u53f7\u89e3\u6790\uff0c\u5730\u5740\u91cd\u5b9a\u4f4d\u7b49\u3002\u5b8c\u6210\u8fd9\u4e9b\u6b65\u9aa4\u540e\uff0c\u7cfb\u7edf\u628a\u63a7\u5236\u6743\u4ea4\u7ed9 Program1 \u7684\u7a0b\u5e8f\u5165\u53e3\u5904\uff0c\u7a0b\u5e8f\u5f00\u59cb\u6267\u884c\u3002\u6b64\u65f6\uff0c\u5f53\u6211\u4eec\u5f00\u59cb\u8fd0\u884c Program2 \u65f6\uff0c\u4e0d\u9700\u8981\u518d\u6b21\u52a0\u8f7d lib.o\uff0c\u56e0\u4e3a\u5185\u5b58\u4e2d\u5df2\u7ecf\u6709\u4e00\u4efd\u4e86\uff0c\u7cfb\u7edf\u8981\u505a\u7684\u53ea\u662f\u5c06 Program2 \u4e0e lib.o \u94fe\u63a5\u8d77\u6765\u3002</p> <p>\u5f88\u660e\u663e\uff0c\u52a8\u6001\u94fe\u63a5\u7684\u65b9\u5f0f\u89e3\u51b3\u4e86\u5171\u4eab\u7684\u76ee\u6807\u6587\u4ef6\u591a\u4e2a\u526f\u672c\u6d6a\u8d39\u78c1\u76d8\u548c\u5185\u5b58\u7a7a\u95f4\u7684\u95ee\u9898\uff0c\u78c1\u76d8\u548c\u5185\u5b58\u4e2d\u53ea\u5b58\u5728\u4e00\u4efd lib.o\uff0c\u800c\u4e0d\u662f\u4e24\u4efd\u3002\u53e6\u5916\u5728\u5185\u5b58\u4e2d\u5171\u4eab\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u4e5f\u53ef\u4ee5\u51cf\u5c11\u7269\u7406\u9875\u9762\u7684\u6362\u5165\u6362\u51fa\uff0c\u540c\u65f6\u589e\u52a0CPU\u7f13\u5b58\u7684\u547d\u4e2d\u7387\uff0c\u56e0\u4e3a\u4e0d\u540c\u8fdb\u7a0b\u95f4\u7684\u6570\u636e\u548c\u6307\u4ee4\u8bbf\u95ee\u90fd\u96c6\u4e2d\u5728\u4e86\u540c\u4e00\u4e2a\u5171\u4eab\u6a21\u5757\u4e0a\u3002</p> <p>\u52a8\u6001\u94fe\u63a5\u65b9\u6848\u4e5f\u53ef\u4ee5\u4f7f\u7a0b\u5e8f\u7684\u5347\u7ea7\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\uff0c\u5f53\u6211\u4eec\u8981\u5347\u7ea7\u7a0b\u5e8f\u5e93\u6216\u7a0b\u5e8f\u5171\u4eab\u7684\u67d0\u4e2a\u6a21\u5757\u65f6\uff0c\u7406\u8bba\u4e0a\u53ea\u8981\u7b80\u5355\u5730\u5c06\u65e7\u7684\u76ee\u6807\u6587\u4ef6\u8986\u76d6\u6389\uff0c\u800c\u65e0\u987b\u5c06\u6240\u6709\u7684\u7a0b\u5e8f\u518d\u91cd\u65b0\u94fe\u63a5\u4e00\u904d\u3002\u5f53\u7a0b\u5e8f\u4e0b\u4e00\u6b21\u8fd0\u884c\u7684\u65f6\u5019\uff0c\u65b0\u7248\u672c\u7684\u76ee\u6807\u6587\u4ef6\u4f1a\u88ab\u81ea\u52a8\u88c5\u8f7d\u5230\u5185\u5b58\u5e76\u4e14\u94fe\u63a5\u8d77\u6765\uff0c\u7a0b\u5e8f\u5c31\u5b8c\u6210\u4e86\u5347\u7ea7\u7684\u76ee\u6807\u3002</p> <p>\u52a8\u6001\u94fe\u63a5\u5c06\u7a0b\u5e8f\u94fe\u63a5\u7684\u8fc7\u7a0b\u7531\u88c5\u8f7d\u524d\u63a8\u8fdf\u5230\u4e86\u88c5\u8f7d\u65f6\uff0c\u8fd9\u5f53\u7136\u4f1a\u5e26\u6765\u4e00\u4e9b\u6027\u80fd\u4e0a\u7684\u635f\u5931\uff0c\u4f46\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5ef6\u8fdf\u7ed1\u5b9a(Lazy Binding)\u7b49\u65b9\u5f0f\u8fdb\u884c\u4f18\u5316\uff0c\u4f7f\u6027\u80fd\u635f\u5931\u8fbe\u5230\u6700\u5c0f\u3002\u636e\u4f30\u7b97\uff0c\u52a8\u6001\u94fe\u63a5\u4e0e\u9759\u6001\u94fe\u63a5\u76f8\u6bd4\uff0c\u6027\u80fd\u635f\u5931\u5927\u7ea6\u57285%\u4ee5\u4e0b\u3002\u5f53\u7136\u7ecf\u8fc7\u5b9e\u8df5\u7684\u8bc1\u660e\uff0c\u8fd9\u70b9\u6027\u80fd\u635f\u5931\u7528\u6765\u6362\u53d6\u7a0b\u5e8f\u5728\u7a7a\u95f4\u4e0a\u7684\u8282\u7701\u548c\u7a0b\u5e8f\u6784\u5efa\u548c\u5347\u7ea7\u65f6\u7684\u7075\u6d3b\u6027\uff0c\u662f\u76f8\u5f53\u503c\u5f97\u7684\u3002</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_6","title":"\u52a8\u6001\u94fe\u63a5\u7b80\u5355\u793a\u4f8b","text":"<p>\u63a5\u4e0b\u6765\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u4f8b\u5b50\u6765\u770b\u4e0b\u52a8\u6001\u94fe\u63a5\u7684\u8fc7\u7a0b\uff0c\u5b83\u4eec\u7684\u6e90\u4ee3\u7801\u5982\u4e0b\u6240\u793a</p> <pre><code>/** Program1.c **/\n#include \"Lib.h\"\n\nint main()\n{\n    foobar(1);\n    return 0;\n}\n\n/** Program2.c **/\n#include \"Lib.h\"\n\nint main()\n{\n    foobar(2);\n    return 0;\n}\n\n/** Lib.c **/\n#include &lt;stdio.h&gt;\n\nvoid foobar(int i)\n{\n    printf(\"Printing from Lib.so %d\\n\", i);\n    sleep(-1);\n}\n\n/** Lib.h **/\n#ifndef LIB_H\n#define LIB_H\n\nvoid foobar(int i);\n\n#endif\n</code></pre> <p>\u7a0b\u5e8f\u5f88\u7b80\u5355\uff0c\u4e24\u4e2a\u7a0b\u5e8f\u7684\u4e3b\u8981\u6a21\u5757<code>Program1.c</code>\u548c<code>Program2.c</code>\u5206\u522b\u8c03\u7528\u4e86<code>Lib.c</code>\u91cc\u9762\u7684<code>foobar()</code>\u51fd\u6570\uff0c\u4f20\u8fdb\u53bb\u4e00\u4e2a\u6570\u5b57\uff0c<code>foobar()</code>\u51fd\u6570\u7684\u4f5c\u7528\u5c31\u662f\u6253\u5370\u8fd9\u4e2a\u6570\u5b57</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u5f00\u59cb\u7f16\u8bd1\u94fe\u63a5\u8fd9\u4e9b\u4ee3\u7801</p> <pre><code>gcc -fPIC -shared -o Lib.so Lib.c // -shared \u8868\u793a\u751f\u6210\u52a8\u6001\u5171\u4eab\u5e93\uff0c-fPIC \u540e\u9762\u518d\u89e3\u91ca\ngcc -o Program1 Program1.c ./Lib.so // \u7f16\u8bd1\u94fe\u63a5\u751f\u6210 Program1\ngcc -o Program2 Program2.c ./Lib.so // \u7f16\u8bd1\u94fe\u63a5\u751f\u6210 Program2\n</code></pre> <p>\u901a\u8fc7\u4ee5\u4e0a\u6b65\u9aa4\uff0c\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u4e00\u4e2a\u52a8\u6001\u5171\u4eab\u5e93<code>Lib.so</code>\u4e0e\u4e24\u4e2a\u7a0b\u5e8f\uff1a<code>Program1</code>\u4e0e<code>Program2</code>\u3002\u4ece<code>Program1</code>\u7684\u89d2\u5ea6\u770b\uff0c\u6574\u4e2a\u7f16\u8bd1\u94fe\u63a5\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"foundation/self-cultivation/dynamic-link/#_7","title":"\u52a8\u6001\u94fe\u63a5\u5730\u5740\u7a7a\u95f4\u5206\u5e03","text":"<p>\u5bf9\u4e8e\u9759\u6001\u94fe\u63a5\u7684\u53ef\u6267\u884c\u6587\u4ef6\u6765\u8bf4\uff0c\u6574\u4e2a\u8fdb\u7a0b\u53ea\u6709\u4e00\u4e2a\u6587\u4ef6\u8981\u88ab\u6620\u5c04\uff0c\u90a3\u5c31\u662f\u53ef\u6267\u884c\u6587\u4ef6\u672c\u8eab\uff0c\u6211\u4eec\u5728\u524d\u9762\u7684\u7ae0\u8282\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u9759\u6001\u94fe\u63a5\u4e0b\u7684\u8fdb\u7a0b\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u5206\u5e03\u3002\u4f46\u662f\u5bf9\u4e8e\u52a8\u6001\u94fe\u63a5\u6765\u8bf4\uff0c\u9664\u4e86\u53ef\u6267\u884c\u6587\u4ef6\u672c\u8eab\u4e4b\u5916\uff0c\u8fd8\u6709\u5b83\u6240\u4f9d\u8d56\u7684\u5171\u4eab\u76ee\u6807\u6587\u4ef6\u3002\u90a3\u4e48\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u5206\u5e03\u53c8\u4f1a\u600e\u6837\u5462\uff1f</p> <p>\u6211\u4eec\u8fd0\u884c\u7a0b\u5e8f\uff0c\u7136\u540e\u67e5\u770b\u8fdb\u7a0b maps \u6587\u4ef6\u83b7\u53d6\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5206\u5e03</p> <pre><code>$ ./Program1 &amp;\n[3] 11067\nPrinting from Lib.so 1\n\n $ cat /proc/11067/maps\n55b2e50da000-55b2e50db000 r--p 00000000 07:03 126060                     /workspaces/programmer-training/Program1\n55b2e50db000-55b2e50dc000 r-xp 00001000 07:03 126060                     /workspaces/programmer-training/Program1\n55b2e50dc000-55b2e50dd000 r--p 00002000 07:03 126060                     /workspaces/programmer-training/Program1\n55b2e50dd000-55b2e50de000 r--p 00002000 07:03 126060                     /workspaces/programmer-training/Program1\n55b2e50de000-55b2e50df000 rw-p 00003000 07:03 126060                     /workspaces/programmer-training/Program1\n55b2e558d000-55b2e55ae000 rw-p 00000000 00:00 0                          [heap]\n7f7d4f34a000-7f7d4f34d000 rw-p 00000000 00:00 0 \n7f7d4f34d000-7f7d4f36f000 r--p 00000000 00:2e 525226                     /usr/lib/x86_64-linux-gnu/libc-2.31.so\n7f7d4f36f000-7f7d4f4e7000 r-xp 00022000 00:2e 525226                     /usr/lib/x86_64-linux-gnu/libc-2.31.so\n7f7d4f4e7000-7f7d4f535000 r--p 0019a000 00:2e 525226                     /usr/lib/x86_64-linux-gnu/libc-2.31.so\n7f7d4f535000-7f7d4f539000 r--p 001e7000 00:2e 525226                     /usr/lib/x86_64-linux-gnu/libc-2.31.so\n7f7d4f539000-7f7d4f53b000 rw-p 001eb000 00:2e 525226                     /usr/lib/x86_64-linux-gnu/libc-2.31.so\n7f7d4f53b000-7f7d4f53f000 rw-p 00000000 00:00 0 \n7f7d4f549000-7f7d4f54a000 r--p 00000000 07:03 126046                     /workspaces/programmer-training/Lib.so\n7f7d4f54a000-7f7d4f54b000 r-xp 00001000 07:03 126046                     /workspaces/programmer-training/Lib.so\n7f7d4f54b000-7f7d4f54c000 r--p 00002000 07:03 126046                     /workspaces/programmer-training/Lib.so\n7f7d4f54c000-7f7d4f54d000 r--p 00002000 07:03 126046                     /workspaces/programmer-training/Lib.so\n7f7d4f54d000-7f7d4f54e000 rw-p 00003000 07:03 126046                     /workspaces/programmer-training/Lib.so\n7f7d4f54e000-7f7d4f550000 rw-p 00000000 00:00 0 \n7f7d4f550000-7f7d4f551000 r--p 00000000 00:2e 525204                     /usr/lib/x86_64-linux-gnu/ld-2.31.so\n7f7d4f551000-7f7d4f574000 r-xp 00001000 00:2e 525204                     /usr/lib/x86_64-linux-gnu/ld-2.31.so\n7f7d4f574000-7f7d4f57c000 r--p 00024000 00:2e 525204                     /usr/lib/x86_64-linux-gnu/ld-2.31.so\n7f7d4f57d000-7f7d4f57e000 r--p 0002c000 00:2e 525204                     /usr/lib/x86_64-linux-gnu/ld-2.31.so\n7f7d4f57e000-7f7d4f57f000 rw-p 0002d000 00:2e 525204                     /usr/lib/x86_64-linux-gnu/ld-2.31.so\n7f7d4f57f000-7f7d4f580000 rw-p 00000000 00:00 0 \n7ffc08748000-7ffc0876a000 rw-p 00000000 00:00 0                          [stack]\n7ffc087b5000-7ffc087b9000 r--p 00000000 00:00 0                          [vvar]\n7ffc087b9000-7ffc087bb000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 --xp 00000000 00:00 0                  [vsyscall]\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u8fdb\u7a0b\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u591a\u51fa\u4e86\u51e0\u4e2a\u6587\u4ef6\u6620\u5c04</p> <ul> <li>Lib.so \u4e0e Program1 \u4e00\u6837\uff0c\u5b83\u4eec\u90fd\u662f\u88ab\u64cd\u4f5c\u7cfb\u7edf\u7528\u540c\u6837\u7684\u65b9\u6cd5\u6620\u5c04\u81f3\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u53ea\u662f\u5b83\u4eec\u5360\u636e\u7684\u865a\u62df\u5730\u5740\u548c\u957f\u5ea6\u4e0d\u540c\u3002</li> <li>Program1 \u9664\u4e86\u4f7f\u7528 Lib.so \u4ee5\u5916\uff0c\u5b83\u8fd8\u7528\u5230\u4e86\u52a8\u6001\u94fe\u63a5\u5f62\u5f0f\u7684 C \u8bed\u8a00\u8fd0\u884c\u5e93 libc-2.31.so\u3002</li> <li>\u53e6\u5916\u8fd8\u6709\u4e00\u4e2a\u5f88\u503c\u5f97\u5173\u6ce8\u7684\u5171\u4eab\u5bf9\u8c61\u5c31\u662fld-2.31.so\uff0c\u5b83\u5b9e\u9645\u4e0a\u662fLinux\u4e0b\u7684\u52a8\u6001\u94fe\u63a5\u5668\u3002\u52a8\u6001\u94fe\u63a5\u5668\u4e0e\u666e\u901a\u5171\u4eab\u5bf9\u8c61\u4e00\u6837\u88ab\u6620\u5c04\u5230\u4e86\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u5728\u7cfb\u7edf\u5f00\u59cb\u8fd0\u884cProgram1 \u4e4b\u524d\uff0c\u9996\u5148\u4f1a\u628a\u63a7\u5236\u6743\u4ea4\u7ed9\u52a8\u6001\u94fe\u63a5\u5668\uff0c\u7531\u5b83\u5b8c\u6210\u6240\u6709\u7684\u52a8\u6001\u94fe\u63a5\u5de5\u4f5c\u4ee5\u540e\u518d\u628a\u63a7\u5236\u6743\u4ea4\u7ed9 Program1\uff0c\u7136\u540e\u5f00\u59cb\u6267\u884c\u3002</li> </ul> <p>\u540c\u65f6\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7 readelf \u547d\u4ee4\u67e5\u770b Lib.so \u7684\u88c5\u8f7d\u5c5e\u6027</p> <pre><code>$ readelf -l Lib.so \n\nElf file type is DYN (Shared object file)\nEntry point 0x1080\nThere are 11 program headers, starting at offset 64\n\nProgram Headers:\n  Type           Offset             VirtAddr           PhysAddr\n                 FileSiz            MemSiz              Flags  Align\n  LOAD           0x0000000000000000 0x0000000000000000 0x0000000000000000\n                 0x0000000000000560 0x0000000000000560  R      0x1000\n  LOAD           0x0000000000001000 0x0000000000001000 0x0000000000001000\n                 0x000000000000017d 0x000000000000017d  R E    0x1000\n  LOAD           0x0000000000002000 0x0000000000002000 0x0000000000002000\n                 0x00000000000000dc 0x00000000000000dc  R      0x1000\n  LOAD           0x0000000000002e10 0x0000000000003e10 0x0000000000003e10\n                 0x0000000000000220 0x0000000000000228  RW     0x1000\n  DYNAMIC        0x0000000000002e20 0x0000000000003e20 0x0000000000003e20\n                 0x00000000000001c0 0x00000000000001c0  RW     0x8\n\n Section to Segment mapping:\n  Segment Sections...\n   00     .note.gnu.property .note.gnu.build-id .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rela.dyn .rela.plt \n   01     .init .plt .plt.got .plt.sec .text .fini \n   02     .rodata .eh_frame_hdr .eh_frame \n   03     .init_array .fini_array .dynamic .got .got.plt .data .bss \n</code></pre> <p>\u9664\u4e86\u6587\u4ef6\u7684\u7c7b\u578b\u4e0e\u666e\u901a\u7a0b\u5e8f\u4e0d\u540c\u4ee5\u5916\uff0c\u5176\u4ed6\u51e0\u4e4e\u4e0e\u666e\u901a\u7a0b\u5e8f\u4e00\u6837\u3002\u8fd8\u6709\u6709\u4e00\u70b9\u6bd4\u8f83\u4e0d\u540c\u7684\u662f\uff0c\u52a8\u6001\u94fe\u63a5\u6a21\u5757\u7684\u88c5\u8f7d\u5730\u5740\u662f\u4ece\u5730\u5740 0x00000000 \u5f00\u59cb\u7684\u3002\u6211\u4eec\u77e5\u9053\u8fd9\u4e2a\u5730\u5740\u662f\u65e0\u6548\u5730\u5740\uff0c\u5e76\u4e14\u4ece\u4e0a\u9762\u7684\u8fdb\u7a0b\u865a\u62df\u7a7a\u95f4\u5206\u5e03\u770b\u5230\uff0cLib.so \u7684\u6700\u7ec8\u88c5\u8f7d\u5730\u5740\u5e76\u4e0d\u662f0x00000000\u3002</p> <p>\u4ece\u8fd9\u4e00\u70b9\u6211\u4eec\u53ef\u4ee5\u63a8\u65ad\uff0c\u5171\u4eab\u5bf9\u8c61\u7684\u6700\u7ec8\u88c5\u8f7d\u5730\u5740\u5728\u7f16\u8bd1\u65f6\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u800c\u662f\u5728\u88c5\u8f7d\u65f6\uff0c\u88c5\u8f7d\u5668\u6839\u636e\u5f53\u524d\u5730\u5740\u7a7a\u95f4\u7684\u7a7a\u95f2\u60c5\u51b5\uff0c\u52a8\u6001\u5206\u914d\u4e00\u5757\u8db3\u591f\u5927\u5c0f\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7ed9\u76f8\u5e94\u7684\u5171\u4eab\u5bf9\u8c61\u3002</p> <p>\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u4e3a\u4ec0\u4e48\u8981\u8fd9\u6837\u505a\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u5c06\u6bcf\u4e2a\u5171\u4eab\u5bf9\u8c61\u5728\u8fdb\u7a0b\u4e2d\u7684\u5730\u5740\u56fa\u5b9a?</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_8","title":"\u5730\u5740\u65e0\u5173\u4ee3\u7801","text":""},{"location":"foundation/self-cultivation/dynamic-link/#_9","title":"\u56fa\u5b9a\u88c5\u8f7d\u5730\u5740\u7684\u95ee\u9898","text":"<p>\u4e3a\u4e86\u5b9e\u73b0\u52a8\u6001\u94fe\u63a5\uff0c\u6211\u4eec\u9996\u5148\u4f1a\u9047\u5230\u7684\u95ee\u9898\u5c31\u662f\u5171\u4eab\u5bf9\u8c61\u5730\u5740\u7684\u51b2\u7a81\u95ee\u9898\u3002\u5f88\u660e\u663e\uff0c\u5728\u52a8\u6001\u94fe\u63a5\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4e0d\u540c\u7684\u6a21\u5757\u76ee\u6807\u88c5\u8f7d\u5730\u5740\u90fd\u4e00\u6837\u662f\u4e0d\u884c\u7684</p> <p>\u800c\u5982\u679c\u901a\u8fc7\u624b\u52a8\u6307\u5b9a\u5404\u4e2a\u6a21\u5757\u7684\u5730\u5740\uff0c\u6bd4\u5982\u628a 0x1000 \u5230 0x2000 \u5206\u914d\u7ed9\u6a21\u5757 A\uff0c\u628a\u5730\u5740 0x2000 \u5230 0x3000 \u5206\u914d\u7ed9\u6a21\u5757 B\u3002\u4f46\u662f\u5982\u679c\u540c\u4e00\u4e2a\u6a21\u5757\u88ab\u591a\u4e2a\u7a0b\u5e8f\u4f7f\u7528\uff0c\u6216\u8005\u591a\u4e2a\u6a21\u5757\u88ab\u591a\u4e2a\u7a0b\u5e8f\u4f7f\u7528\uff0c\u8fd9\u79cd\u624b\u52a8\u6307\u5b9a\u7684\u65b9\u5f0f\u5c31\u975e\u5e38\u7e41\u7410\u548c\u5bb9\u6613\u51b2\u7a81\u4e86\uff0c\u5728\u5927\u578b\u7cfb\u7edf\u4e2d\u51e0\u4e4e\u662f\u4e0d\u53ef\u884c\u7684\u3002</p> <p>\u5f88\u660e\u663e\uff0c\u56fa\u5b9a\u88c5\u8f7d\u5730\u5740\u5728\u52a8\u6001\u94fe\u63a5\u4e2d\u662f\u884c\u4e0d\u901a\u7684\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u6a21\u5757\u88c5\u8f7d\u5730\u5740\u56fa\u5b9a\u7684\u95ee\u9898\uff0c\u6211\u4eec\u8bbe\u60f3\u662f\u5426\u53ef\u4ee5\u8ba9\u5171\u4eab\u5bf9\u8c61\u5728\u4efb\u610f\u5730\u5740\u52a0\u8f7d\uff1f\u8fd9\u4e2a\u95ee\u9898\u53e6\u4e00\u79cd\u8868\u8ff0\u65b9\u6cd5\u5c31\u662f\uff1a\u5171\u4eab\u5bf9\u8c61\u5728\u7f16\u8bd1\u65f6\u4e0d\u80fd\u5047\u8bbe\u81ea\u5df1\u5728\u8fdb\u7a0b\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u4f4d\u7f6e\u3002</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_10","title":"\u88c5\u8f7d\u65f6\u91cd\u5b9a\u4f4d","text":"<p>\u4e3a\u4e86\u4f7f\u5171\u4eab\u5bf9\u8c61\u652f\u6301\u5728\u4efb\u610f\u5730\u5740\u88c5\u8f7d\uff0c\u4e00\u4e2a\u5f88\u5bb9\u6613\u60f3\u5230\u7684\u601d\u8def\u5c31\u662f\uff1a\u5171\u4eab\u5bf9\u8c61\u4e2d\u7684\u7b26\u53f7\u5728\u94fe\u63a5\u65f6\u4e0d\u8fdb\u884c\u91cd\u5b9a\u4f4d\uff0c\u800c\u628a\u8fd9\u4e00\u6b65\u63a8\u8fdf\u5230\u88c5\u8f7d\u65f6\u518d\u5b8c\u6210\u3002\u4e00\u65e6\u6a21\u5757\u88c5\u8f7d\u5730\u5740\u786e\u5b9a\uff0c\u5373\u76ee\u6807\u5730\u5740\u786e\u5b9a\uff0c\u90a3\u4e48\u7cfb\u7edf\u5c31\u5bf9\u7a0b\u5e8f\u4e2d\u6240\u6709\u7684\u7edd\u5bf9\u5730\u5740\u5f15\u7528\u8fdb\u884c\u91cd\u5b9a\u4f4d\u3002</p> <p>\u6bd4\u5982\u51fd\u6570 foobar \u76f8\u5bf9\u4e8e\u4ee3\u7801\u6bb5\u7684\u8d77\u59cb\u5730\u5740\u662f 0x100\uff0c\u5f53\u6a21\u5757\u88ab\u88c5\u8f7d\u5230 0x10000000 \u65f6\uff0c\u6211\u4eec\u5047\u8bbe\u4ee3\u7801\u6bb5\u4f4d\u4e8e\u6a21\u5757\u7684\u6700\u5f00\u59cb\uff0c\u5373\u4ee3\u7801\u6bb5\u7684\u88c5\u8f7d\u5730\u5740\u4e5f\u662f 0x10000000\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u786e\u5b9a foobar \u7684\u5730\u5740\u4e3a 0x10000100\u3002\u8fd9\u65f6\u5019\uff0c\u7cfb\u7edf\u904d\u5386\u6a21\u5757\u4e2d\u7684\u91cd\u5b9a\u4f4d\u8868\uff0c\u628a\u6240\u6709\u5bf9 foobar \u7684\u5730\u5740\u5f15\u7528\u90fd\u91cd\u5b9a\u4f4d\u81f3 0x10000100\u3002</p> <p>\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u89e3\u51b3\u5171\u4eab\u5bf9\u8c61\u7684\u5730\u5740\u5728\u88c5\u8f7d\u4e4b\u540e\u624d\u80fd\u786e\u5b9a\u7684\u95ee\u9898\uff0c\u4f46\u662f\u88c5\u8f7d\u65f6\u91cd\u5b9a\u4f4d\u7684\u65b9\u6cd5\u5e76\u4e0d\u9002\u5408\u7528\u6765\u89e3\u51b3\u4e0a\u9762\u7684\u5171\u4eab\u5bf9\u8c61\u4e2d\u6240\u5b58\u5728\u7684\u95ee\u9898\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a\u88c5\u8f7d\u65f6\u91cd\u5b9a\u4f4d\u65b9\u6cd5\u9700\u8981\u4fee\u6539\u6307\u4ee4\uff0c\u6240\u4ee5\u65e0\u6cd5\u505a\u5230\u540c\u4e00\u4efd\u6307\u4ee4\u88ab\u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\uff0c\u56e0\u4e3a\u6307\u4ee4\u88ab\u91cd\u5b9a\u4f4d\u540e\u5bf9\u4e8e\u6bcf\u4e2a\u8fdb\u7a0b\u6765\u8bb2\u662f\u4e0d\u540c\u7684\u3002\u56e0\u6b64\u88c5\u8f7d\u65f6\u91cd\u5b9a\u4f4d\u65b9\u5f0f\u4f1a\u6307\u4ee4\u90e8\u5206\u4e5f\u5b58\u5728\u591a\u4e2a\u526f\u672c\uff0c\u4f1a\u5bfc\u81f4\u4e00\u5b9a\u7684\u5185\u5b58\u6d6a\u8d39\u3002</p> <p>Linux \u548c GCC \u652f\u6301\u8fd9\u79cd\u88c5\u8f7d\u65f6\u91cd\u5b9a\u4f4d\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u524d\u9762\u5728\u4ea7\u751f\u5171\u4eab\u5bf9\u8c61\u65f6\uff0c\u4f7f\u7528\u4e86\u4e24\u4e2aGCC\u53c2\u6570<code>-shared</code>\u548c<code>-fPIC</code>\uff0c\u5982\u679c\u53ea\u4f7f\u7528<code>-shared</code>\uff0c\u90a3\u4e48\u8f93\u51fa\u7684\u5171\u4eab\u5bf9\u8c61\u5c31\u662f\u4f7f\u7528\u88c5\u8f7d\u65f6\u91cd\u5b9a\u4f4d\u7684\u65b9\u6cd5\u3002</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_11","title":"\u5730\u5740\u65e0\u5173\u4ee3\u7801","text":"<p>\u4e0a\u9762\u8bf4\u5230\uff0c\u88c5\u8f7d\u65f6\u91cd\u5b9a\u4f4d\u65b9\u5f0f\u6307\u4ee4\u90e8\u5206\u65e0\u6cd5\u5728\u591a\u4e2a\u8fdb\u7a0b\u95f4\u5171\u4eab\uff0c\u4f1a\u5931\u53bb\u52a8\u6001\u94fe\u63a5\u8282\u7701\u5185\u5b58\u7684\u4e00\u5927\u4f18\u52bf\u3002\u56e0\u6b64\u6211\u4eec\u8fd8\u9700\u8981\u6709\u4e00\u79cd\u66f4\u597d\u7684\u65b9\u6cd5\u89e3\u51b3\u5171\u4eab\u5bf9\u8c61\u6307\u4ee4\u4e2d\u5bf9\u7edd\u5bf9\u5730\u5740\u7684\u91cd\u5b9a\u4f4d\u95ee\u9898\u3002</p> <p>\u5176\u5b9e\u6211\u4eec\u7684\u76ee\u7684\u5f88\u7b80\u5355\uff0c\u5e0c\u671b\u7a0b\u5e8f\u6a21\u5757\u4e2d\u5171\u4eab\u7684\u6307\u4ee4\u90e8\u5206\u5728\u88c5\u8f7d\u65f6\u4e0d\u9700\u8981\u56e0\u4e3a\u88c5\u8f7d\u5730\u5740\u7684\u6539\u53d8\u800c\u6539\u53d8\uff0c\u6240\u4ee5\u5b9e\u73b0\u7684\u57fa\u672c\u60f3\u6cd5\u5c31\u662f\u628a\u6307\u4ee4\u4e2d\u90a3\u4e9b\u9700\u8981\u88ab\u4fee\u6539\u7684\u90e8\u5206\u5206\u79bb\u51fa\u6765\uff0c\u8ddf\u6570\u636e\u90e8\u5206\u653e\u5728\u4e00\u8d77\uff0c\u8fd9\u6837\u6307\u4ee4\u90e8\u5206\u5c31\u53ef\u4ee5\u4fdd\u6301\u4e0d\u53d8\uff0c\u800c\u6570\u636e\u90e8\u5206\u53ef\u4ee5\u5728\u6bcf\u4e2a\u8fdb\u7a0b\u4e2d\u62e5\u6709\u4e00\u4e2a\u526f\u672c\u3002\u8fd9\u79cd\u65b9\u6848\u5c31\u662f\u76ee\u524d\u88ab\u79f0\u4e3a\u5730\u5740\u65e0\u5173\u4ee3\u7801\uff08PIC, Position-independent Code\uff09\u7684\u6280\u672f\u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u5206\u6790\u4e00\u4e0b\u6a21\u5757\u4e2d\u5404\u79cd\u7c7b\u578b\u7684\u5730\u5740\u5f15\u7528\u65b9\u5f0f\uff0c\u6839\u636e\u662f\u5426\u4e3a\u8de8\u6a21\u5757\u53ef\u4ee5\u5206\u6210\u4e24\u7c7b\uff1a\u6a21\u5757\u5185\u90e8\u5f15\u7528\u548c\u6a21\u5757\u5916\u90e8\u5f15\u7528\uff1b\u540c\u65f6\u533a\u5206\u6570\u636e\u4e0e\u6307\u4ee4\u53c8\u53ef\u4ee5\u5206\u4e3a\u6307\u4ee4\u5f15\u7528\u548c\u6570\u636e\u8bbf\u95ee\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u56db\u79cd\u60c5\u51b5\uff1a</p> <ul> <li>\u7b2c\u4e00\u79cd\u662f\u6a21\u5757\u5185\u90e8\u7684\u51fd\u6570\u8c03\u7528\u3001\u8df3\u8f6c\u7b49\u3002</li> <li>\u7b2c\u4e8c\u79cd\u662f\u6a21\u5757\u5185\u90e8\u7684\u6570\u636e\u8bbf\u95ee\uff0c\u6bd4\u5982\u6a21\u5757\u4e2d\u5b9a\u4e49\u7684\u5168\u5c40\u53d8\u91cf\u3001\u9759\u6001\u53d8\u91cf\u3002</li> <li>\u7b2c\u4e09\u79cd\u662f\u6a21\u5757\u5916\u90e8\u7684\u51fd\u6570\u8c03\u7528\u3001\u8df3\u8f6c\u7b49\u3002</li> <li>\u7b2c\u56db\u79cd\u662f\u6a21\u5757\u5916\u90e8\u7684\u6570\u636e\u8bbf\u95ee\uff0c\u6bd4\u5982\u5176\u4ed6\u6a21\u5757\u4e2d\u5b9a\u4e49\u7684\u5168\u5c40\u53d8\u91cf\u3002</li> </ul> <pre><code>#include \"pic.h\"\nstatic int a;\nextern int b;\nextern void ext();\n\nvoid bar()\n{\n    a = 1; // \u6a21\u5757\u5185\u6570\u636e\u8bbf\u95ee\n    b = 2; // \u6a21\u5757\u95f4\u6570\u636e\u8bbf\u95ee\n}\n\nvoid main()\n{\n    bar(); // \u6a21\u5757\u5185\u6307\u4ee4\u8c03\u7528\n    ext(); // \u6a21\u5757\u95f4\u6307\u4ee4\u8c03\u7528\n}\n</code></pre>"},{"location":"foundation/self-cultivation/dynamic-link/#_12","title":"\u7c7b\u578b\u4e00 \u6a21\u5757\u5185\u90e8\u8c03\u7528\u6216\u8df3\u8f6c","text":"<p>\u9996\u5148\u6765\u770b\u4e0b\u7b2c\u4e00\u79cd\u7c7b\u578b\uff0c\u6a21\u5757\u5185\u90e8\u8c03\u7528\uff0c\u56e0\u4e3a\u88ab\u8c03\u7528\u7684\u51fd\u6570\u4e0e\u8c03\u7528\u8005\u90fd\u5904\u4e8e\u540c\u4e00\u4e2a\u6a21\u5757\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u76f8\u5bf9\u4f4d\u7f6e\u662f\u56fa\u5b9a\u7684\uff0c\u6240\u4ee5\u8fd9\u79cd\u60c5\u51b5\u6bd4\u8f83\u7b80\u5355\u3002\u5bf9\u4e8e\u73b0\u4ee3\u7684\u7cfb\u7edf\u6765\u8bb2\uff0c\u6a21\u5757\u5185\u90e8\u7684\u8df3\u8f6c\u3001\u51fd\u6570\u8c03\u7528\u90fd\u53ef\u4ee5\u662f\u76f8\u5bf9\u5730\u5740\u8c03\u7528\uff0c\u6216\u8005\u662f\u57fa\u4e8e\u5bc4\u5b58\u5668\u7684\u76f8\u5bf9\u8c03\u7528\uff0c\u6240\u4ee5\u5bf9\u4e8e\u8fd9\u79cd\u6307\u4ee4\u662f\u4e0d\u9700\u8981\u91cd\u5b9a\u4f4d\u7684\u3002</p> <p>\u6a21\u5757\u5185\u90e8\u8c03\u7528\u7684\u65b9\u5f0f\u5176\u5b9e\u4e0e\u9759\u6001\u94fe\u63a5\u6307\u4ee4\u4fee\u6b63\u65b9\u5f0f\u6bd4\u8f83\u7c7b\u4f3c\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u8fd9\u6761\u6307\u4ee4\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\u8868\u793a\u8c03\u7528\u7684\u6307\u4ee4\u7801\uff0c\u540e4\u4e2a\u5b57\u8282\u8868\u793a\u76ee\u7684\u5730\u5740\u76f8\u5bf9\u4e8e\u5f53\u524d\u6307\u4ee4\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u504f\u79fb\u3002</p> <p>\u6bd4\u5982\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d<code>main</code>\u51fd\u6570\u8c03\u7528\u4e86<code>bar</code>\u51fd\u6570\uff0c\u53ea\u8981<code>main</code>\u4e0e<code>bar</code>\u7684\u76f8\u5bf9\u5730\u5740\u4e0d\u53d8\uff0c\u8fd9\u6761\u6307\u4ee4\u662f\u5730\u5740\u65e0\u5173\u7684\u3002\u5373\u65e0\u8bba\u6a21\u5757\u88ab\u88c5\u8f7d\u5230\u54ea\u4e2a\u4f4d\u7f6e\uff0c\u8fd9\u6761\u6307\u4ee4\u90fd\u662f\u6709\u6548\u7684\u3002</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_13","title":"\u7c7b\u578b\u4e8c \u6a21\u5757\u5185\u90e8\u6570\u636e\u8bbf\u95ee","text":"<p>\u63a5\u7740\u6765\u770b\u770b\u7b2c\u4e8c\u79cd\u7c7b\u578b\uff0c\u6a21\u5757\u5185\u90e8\u7684\u6570\u636e\u8bbf\u95ee\u3002\u5f88\u660e\u663e\uff0c\u6307\u4ee4\u4e2d\u4e0d\u80fd\u76f4\u63a5\u5305\u542b\u6570\u636e\u7684\u7edd\u5bf9\u5730\u5740\uff0c\u90a3\u4e48\u552f\u4e00\u7684\u529e\u6cd5\u5c31\u662f\u76f8\u5bf9\u5bfb\u5740\u3002\u6211\u4eec\u77e5\u9053\uff0c\u4e00\u4e2a\u6a21\u5757\u524d\u9762\u4e00\u822c\u662f\u82e5\u5e72\u4e2a\u9875\u7684\u4ee3\u7801\uff0c\u540e\u9762\u7d27\u8ddf\u7740\u82e5\u5e72\u4e2a\u9875\u7684\u6570\u636e\uff0c\u8fd9\u4e9b\u9875\u4e4b\u95f4\u7684\u76f8\u5bf9\u4f4d\u7f6e\u662f\u56fa\u5b9a\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4efb\u4f55\u4e00\u6761\u6307\u4ee4\u4e0e\u5b83\u9700\u8981\u8bbf\u95ee\u7684\u6a21\u5757\u5185\u90e8\u6570\u636e\u4e4b\u95f4\u7684\u76f8\u5bf9\u4f4d\u7f6e\u662f\u56fa\u5b9a\u7684\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u76f8\u5bf9\u4e8e\u5f53\u524d\u6307\u4ee4\u52a0\u4e0a\u56fa\u5b9a\u7684\u504f\u79fb\u91cf\u5c31\u53ef\u4ee5\u8bbf\u95ee\u6a21\u5757\u5185\u90e8\u6570\u636e\u4e86</p> <p></p>"},{"location":"foundation/self-cultivation/dynamic-link/#_14","title":"\u7c7b\u578b\u4e09 \u6a21\u5757\u95f4\u6570\u636e\u8bbf\u95ee","text":"<p>\u6a21\u5757\u95f4\u7684\u6570\u636e\u8bbf\u95ee\u6bd4\u6a21\u5757\u5185\u90e8\u7a0d\u5fae\u9ebb\u70e6\u4e00\u70b9\uff0c\u56e0\u4e3a\u6a21\u5757\u95f4\u7684\u6570\u636e\u8bbf\u95ee\u76ee\u6807\u5730\u5740\u8981\u7b49\u5230\u88c5\u8f7d\u65f6\u624d\u51b3\u5b9a\uff0c\u6bd4\u5982\u4e0a\u9762\u4f8b\u5b50\u4e2d\u7684\u53d8\u91cfb\uff0c\u5b83\u88ab\u5b9a\u4e49\u5728\u5176\u4ed6\u6a21\u5757\u4e2d\uff0c\u5e76\u4e14\u8be5\u5730\u5740\u5728\u88c5\u8f7d\u65f6\u624d\u80fd\u786e\u5b9a\u3002</p> <p>\u6211\u4eec\u524d\u9762\u63d0\u5230\u8981\u4f7f\u5f97\u4ee3\u7801\u5730\u5740\u65e0\u5173\uff0c\u57fa\u672c\u7684\u601d\u60f3\u5c31\u662f\u628a\u8ddf\u5730\u5740\u76f8\u5173\u7684\u90e8\u5206\u653e\u5230\u6570\u636e\u6bb5\u91cc\u9762\uff0c\u5f88\u660e\u663e\uff0c\u8fd9\u4e9b\u5176\u4ed6\u6a21\u5757\u7684\u5168\u5c40\u53d8\u91cf\u7684\u5730\u5740\u662f\u8ddf\u6a21\u5757\u88c5\u8f7d\u5730\u5740\u6709\u5173\u7684\u3002ELF\u7684\u505a\u6cd5\u662f\u5728\u6570\u636e\u6bb5\u91cc\u9762\u5efa\u7acb\u4e00\u4e2a\u6307\u5411\u8fd9\u4e9b\u53d8\u91cf\u7684\u6307\u9488\u6570\u7ec4\uff0c\u4e5f\u88ab\u79f0\u4e3a\u5168\u5c40\u504f\u79fb\u8868\uff08Global Offset Table\uff0cGOT\uff09\uff0c\u5f53\u4ee3\u7801\u9700\u8981\u5f15\u7528\u8be5\u5168\u5c40\u53d8\u91cf\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7GOT\u4e2d\u76f8\u5bf9\u5e94\u7684\u9879\u95f4\u63a5\u5f15\u7528\uff0c\u5b83\u7684\u57fa\u672c\u673a\u5236\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5982\u4e0a\u6240\u793a\uff0c\u5f53\u6307\u4ee4\u4e2d\u9700\u8981\u8bbf\u95ee\u53d8\u91cf b \u65f6\uff0c\u7a0b\u5e8f\u4f1a\u5148\u627e\u5230 GOT\uff0c\u7136\u540e\u6839\u636e GOT \u4e2d\u53d8\u91cf\u6240\u5bf9\u5e94\u7684\u9879\u627e\u5230\u53d8\u91cf\u7684\u76ee\u6807\u5730\u5740\u3002\u94fe\u63a5\u5668\u5728\u88c5\u8f7d\u6a21\u5757\u7684\u65f6\u5019\u4f1a\u67e5\u627e\u6bcf\u4e2a\u53d8\u91cf\u6240\u5728\u7684\u5730\u5740\uff0c\u7136\u540e\u586b\u5145 GOT \u4e2d\u7684\u5404\u4e2a\u9879\uff0c\u4ee5\u786e\u4fdd\u6bcf\u4e2a\u6307\u9488\u6240\u6307\u5411\u7684\u5730\u5740\u6b63\u786e\u3002\u7531\u4e8e GOT \u672c\u8eab\u662f\u653e\u5728\u6570\u636e\u6bb5\u7684\uff0c\u6240\u4ee5\u5b83\u53ef\u4ee5\u5728\u6a21\u5757\u88c5\u8f7d\u65f6\u88ab\u4fee\u6539\uff0c\u5e76\u4e14\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u53ef\u4ee5\u6709\u72ec\u7acb\u7684\u526f\u672c\uff0c\u76f8\u4e92\u4e0d\u53d7\u5f71\u54cd\u3002</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_15","title":"\u7c7b\u578b\u56db \u6a21\u5757\u95f4\u8c03\u7528\u3001\u8df3\u8f6c","text":"<p>\u5bf9\u4e8e\u6a21\u5757\u95f4\u8c03\u7528\u548c\u8df3\u8f6c\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u91c7\u7528\u4e0a\u9762\u7c7b\u578b\u4e09\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u3002\u4e0e\u4e0a\u9762\u7684\u7c7b\u578b\u6709\u6240\u4e0d\u540c\u7684\u662f\uff0cGOT \u4e2d\u76f8\u5e94\u7684\u9879\u4fdd\u5b58\u7684\u662f\u76ee\u6807\u51fd\u6570\u7684\u5730\u5740\uff0c\u5f53\u6a21\u5757\u9700\u8981\u8c03\u7528\u76ee\u6807\u51fd\u6570\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7GOT \u4e2d\u7684\u9879\u8fdb\u884c\u95f4\u63a5\u8df3\u8f6c\uff0c\u57fa\u672c\u7684\u539f\u7406\u5982\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"foundation/self-cultivation/dynamic-link/#_16","title":"\u5c0f\u7ed3","text":"<p>\u603b\u5f97\u6765\u8bf4\uff0c\u6a21\u5757\u5185\u90e8\u6570\u636e\u4e0e\u6307\u4ee4\u901a\u8fc7\u76f8\u5bf9\u5730\u5740\u8bbf\u95ee\u6216\u8df3\u8f6c\uff0c\u6a21\u5757\u95f4\u6570\u636e\u4e0e\u6307\u4ee4\u901a\u8fc7 GOT \u8868\u95f4\u63a5\u8bbf\u95ee\u6216\u8df3\u8f6c</p>"},{"location":"foundation/self-cultivation/dynamic-link/#plt","title":"\u5ef6\u8fdf\u7ed1\u5b9a(PLT)","text":"<p>\u52a8\u6001\u94fe\u63a5\u76f8\u6bd4\u9759\u6001\u94fe\u63a5\u8981\u66f4\u52a0\u7075\u6d3b\uff0c\u4f46\u662f\u4f1a\u727a\u7272\u4e00\u90e8\u5206\u6027\u80fd\u3002\u636e\u7edf\u8ba1 ELF \u7a0b\u5e8f\u5728\u9759\u6001\u94fe\u63a5\u4e0b\u8981\u6bd4\u52a8\u6001\u5e93\u7a0d\u5fae\u5feb\u70b9\uff0c\u5927\u7ea6\u4e3a1%\uff5e5%\u3002</p> <p>\u52a8\u6001\u94fe\u63a5\u6bd4\u9759\u6001\u94fe\u63a5\u6162\u7684\u539f\u56e0\u4e3b\u8981\u5728\u4e8e\uff1a  </p> <ol> <li>\u52a8\u6001\u94fe\u63a5\u4e0b\u5bf9\u4e8e\u5168\u5c40\u548c\u9759\u6001\u7684\u6570\u636e\u8bbf\u95ee\u90fd\u8981\u8fdb\u884c\u590d\u6742\u7684 GOT \u5b9a\u4f4d\uff0c\u7136\u540e\u95f4\u63a5\u5bfb\u5740\uff0c\u5bf9\u4e8e\u6a21\u5757\u95f4\u7684\u8c03\u7528\u4e5f\u8981\u5148\u5b9a\u4f4dGOT\uff0c\u7136\u540e\u518d\u8fdb\u884c\u95f4\u63a5\u8df3\u8f6c</li> <li>\u52a8\u6001\u94fe\u63a5\u7684\u94fe\u63a5\u5de5\u4f5c\u5728\u8fd0\u884c\u65f6\u5b8c\u6210\uff0c\u5373\u7a0b\u5e8f\u5f00\u59cb\u6267\u884c\u65f6\uff0c\u52a8\u6001\u94fe\u63a5\u5668\u4f1a\u5bfb\u627e\u5e76\u88c5\u8f7d\u6240\u9700\u8981\u7684\u5171\u4eab\u5bf9\u8c61\uff0c\u7136\u540e\u8fdb\u884c\u7b26\u53f7\u67e5\u627e\u5730\u5740\u91cd\u5b9a\u4f4d\u7b49\u5de5\u4f5c</li> </ol> <p>\u4e0b\u9762\u6211\u4eec\u4ecb\u7ecd\u4e00\u4e9b\u4f18\u5316\u52a8\u6001\u94fe\u63a5\u6027\u80fd\u7684\u65b9\u6cd5</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_17","title":"\u5ef6\u8fdf\u7ed1\u5b9a","text":"<p>\u5728\u52a8\u6001\u94fe\u63a5\u4e0b\uff0c\u7a0b\u5e8f\u6a21\u5757\u4e4b\u95f4\u5305\u542b\u4e86\u5927\u91cf\u7684\u51fd\u6570\u5f15\u7528\uff0c\u6240\u4ee5\u5728\u7a0b\u5e8f\u5f00\u59cb\u6267\u884c\u524d\uff0c\u52a8\u6001\u94fe\u63a5\u4f1a\u8017\u8d39\u4e0d\u5c11\u65f6\u95f4\u7528\u4e8e\u89e3\u51b3\u6a21\u5757\u4e4b\u95f4\u7684\u51fd\u6570\u5f15\u7528\u7684\u7b26\u53f7\u67e5\u627e\u4ee5\u53ca\u91cd\u5b9a\u4f4d</p> <p>\u4e0d\u8fc7\u53ef\u4ee5\u60f3\u8c61\uff0c\u5728\u4e00\u4e2a\u7a0b\u5e8f\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u5f88\u591a\u51fd\u6570\u5728\u7a0b\u5e8f\u6267\u884c\u5b8c\u65f6\u90fd\u4e0d\u4f1a\u88ab\u7528\u5230\uff0c\u6bd4\u5982\u4e00\u4e9b\u9519\u8bef\u5904\u7406\u51fd\u6570\u6216\u8005\u662f\u4e00\u4e9b\u7528\u6237\u5f88\u5c11\u7528\u5230\u7684\u529f\u80fd\u6a21\u5757\u7b49\uff0c\u5982\u679c\u4e00\u5f00\u59cb\u5c31\u628a\u6240\u6709\u51fd\u6570\u90fd\u94fe\u63a5\u597d\u5b9e\u9645\u4e0a\u662f\u4e00\u79cd\u6d6a\u8d39\u3002</p> <p>\u6240\u6709\u4e00\u79cd\u6700\u76f4\u63a5\u7684\u4f18\u5316\u601d\u8def\u5c31\u662f\u5ef6\u8fdf\u7ed1\u5b9a\uff08Lazy Binding\uff09\uff1a\u57fa\u672c\u7684\u601d\u60f3\u5c31\u662f\u5f53\u51fd\u6570\u7b2c\u4e00\u6b21\u88ab\u7528\u5230\u65f6\u624d\u8fdb\u884c\u7ed1\u5b9a\uff08\u7b26\u53f7\u67e5\u627e\u3001\u91cd\u5b9a\u4f4d\u7b49\uff09\uff0c\u5982\u679c\u6ca1\u6709\u7528\u5230\u5219\u4e0d\u8fdb\u884c\u7ed1\u5b9a\u3002\u6240\u4ee5\u7a0b\u5e8f\u5f00\u59cb\u6267\u884c\u65f6\uff0c\u6a21\u5757\u95f4\u7684\u51fd\u6570\u8c03\u7528\u90fd\u6ca1\u6709\u8fdb\u884c\u7ed1\u5b9a\uff0c\u800c\u662f\u9700\u8981\u7528\u5230\u65f6\u624d\u7531\u52a8\u6001\u94fe\u63a5\u5668\u6765\u8d1f\u8d23\u7ed1\u5b9a\u3002\u8fd9\u6837\u7684\u505a\u6cd5\u53ef\u4ee5\u5927\u5927\u52a0\u5feb\u7a0b\u5e8f\u7684\u542f\u52a8\u901f\u5ea6\uff0c\u7279\u522b\u6709\u5229\u4e8e\u4e00\u4e9b\u6709\u5927\u91cf\u51fd\u6570\u5f15\u7528\u548c\u5927\u91cf\u6a21\u5757\u7684\u7a0b\u5e8f\u3002</p>"},{"location":"foundation/self-cultivation/dynamic-link/#plt_1","title":"PLT \u57fa\u672c\u539f\u7406","text":"<p>ELF \u4f7f\u7528 PLT\uff08Procedure Linkage Table\uff09\u6765\u5b9e\u73b0\u5ef6\u8fdf\u7ed1\u5b9a\uff0c\u5f53\u6211\u4eec\u8c03\u7528\u67d0\u4e2a\u5916\u90e8\u6a21\u5757\u7684\u51fd\u6570\u65f6\uff0c\u5982\u679c\u6309\u7167\u901a\u5e38\u7684\u505a\u6cd5\u5e94\u8be5\u662f\u901a\u8fc7 GOT \u4e2d\u76f8\u5e94\u7684\u9879\u8fdb\u884c\u95f4\u63a5\u8df3\u8f6c\u3002PLT \u4e3a\u4e86\u5b9e\u73b0\u5ef6\u8fdf\u7ed1\u5b9a\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u95f4\u53c8\u589e\u52a0\u4e86\u4e00\u5c42\u95f4\u63a5\u8df3\u8f6c\u3002\u8c03\u7528\u51fd\u6570\u5e76\u4e0d\u76f4\u63a5\u901a\u8fc7 GOT \u8df3\u8f6c\uff0c\u800c\u662f\u901a\u8fc7\u4e00\u4e2a\u53eb\u4f5c PLT \u9879\u7684\u7ed3\u6784\u6765\u8fdb\u884c\u8df3\u8f6c\u3002\u6bcf\u4e2a\u5916\u90e8\u51fd\u6570\u5728 PLT \u4e2d\u90fd\u6709\u4e00\u4e2a\u76f8\u5e94\u7684\u9879\uff0c\u6bd4\u5982\u6211\u4eec\u8981\u8bbf\u95ee\u5171\u4eab\u5bf9\u8c61\u4e2d\u7684 bar() \u51fd\u6570\uff0c bar() \u51fd\u6570\u5728 PLT \u4e2d\u7684\u9879\u7684\u5730\u5740\u6211\u4eec\u79f0\u4e4b\u4e3a bar@plt\u3002\u8ba9\u6211\u4eec\u6765\u770b\u770b bar@plt \u7684\u5b9e\u73b0\uff1a</p> <pre><code>bar@plt: \njmp\u00a0*(bar@GOT) \npush\u00a0n \npush\u00a0moduleID \njump\u00a0_dl_runtime_resolve \n</code></pre> <ol> <li>bar@plt \u7684\u7b2c\u4e00\u6761\u6307\u4ee4\u662f\u4e00\u6761\u901a\u8fc7 GOT \u95f4\u63a5\u8df3\u8f6c\u7684\u6307\u4ee4\u3002bar@GOT \u8868\u793a GOT \u4e2d\u4fdd\u5b58 bar() \u8fd9\u4e2a\u51fd\u6570\u76f8\u5e94\u7684\u9879\u3002\u5982\u679c\u94fe\u63a5\u5668\u5728\u521d\u59cb\u5316\u9636\u6bb5\u5df2\u7ecf\u521d\u59cb\u5316\u8be5\u9879\uff0c\u5e76\u4e14\u5c06 bar() \u7684\u5730\u5740\u586b\u5165\u8be5\u9879\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8df3\u8f6c\u6307\u4ee4\u5c31\u4f1a\u8df3\u8f6c\u5230 bar()\uff0c \u5b9e\u73b0\u51fd\u6570\u6b63\u786e\u8c03\u7528\u3002\u4f46\u662f\u4e3a\u4e86\u5b9e\u73b0\u5ef6\u8fdf\u7ed1\u5b9a\uff0c\u94fe\u63a5\u5668\u5728\u521d\u59cb\u5316\u9636\u6bb5\u5e76\u6ca1\u6709\u5c06 bar() \u7684\u5730\u5740\u586b\u5165\u5230\u8be5\u9879\uff0c\u90a3\u4e48\u8fd9\u6761\u6307\u4ee4\u76f8\u5f53\u4e8e\u6ca1\u6709\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c\uff0c\u7ee7\u7eed\u4e0b\u9762\u7684\u6307\u4ee4\u3002</li> <li>\u7b2c\u4e8c\u6761\u6307\u4ee4\u5c06\u4e00\u4e2a\u6570\u5b57 n \u538b\u5165\u5806\u6808\u4e2d\uff0c\u8fd9\u4e2a\u6570\u5b57\u662f bar \u8fd9\u4e2a\u7b26\u53f7\u5f15\u7528\u5728\u91cd\u5b9a\u4f4d\u8868\u201c.rel.plt\u201d\u4e2d\u7684\u4e0b\u6807\u3002</li> <li>\u63a5\u7740\u53c8\u662f\u4e00\u6761push\u6307\u4ee4\u5c06\u6a21\u5757\u7684ID\u538b\u5165\u5230\u5806\u6808</li> <li>\u6700\u540e\u8df3\u8f6c\u5230 _dl_runtime_resolve\uff1a\u8fd9\u6761\u6307\u4ee4\u5148\u5c06\u6240\u9700\u8981\u51b3\u8bae\u7b26\u53f7\u7684\u4e0b\u6807\u538b\u5165\u5806\u6808\uff0c\u518d\u5c06\u6a21\u5757 ID \u538b\u5165\u5806\u6808\uff0c\u7136\u540e\u8c03\u7528\u52a8\u6001\u94fe\u63a5\u5668\u7684 _dl_runtime_resolve() \u51fd\u6570\u6765\u5b8c\u6210\u7b26\u53f7\u89e3\u6790\u548c\u91cd\u5b9a\u4f4d\u5de5\u4f5c \u3002_dl_runtime_resolve() \u5728\u8fdb\u884c\u4e00\u7cfb\u5217\u5de5\u4f5c\u4ee5\u540e\u5c06 bar() \u7684\u771f\u6b63\u5730\u5740\u586b\u5165\u5230 bar@GOT \u4e2d</li> <li>\u4e00\u65e6 bar() \u8fd9\u4e2a\u51fd\u6570\u88ab\u89e3\u6790\u5b8c\u6bd5\uff0c\u5f53\u6211\u4eec\u518d\u6b21\u8c03\u7528 bar@plt \u65f6\uff0c\u7b2c\u4e00\u6761jmp\u6307\u4ee4\u5c31\u80fd\u591f\u8df3\u8f6c\u5230\u771f\u6b63\u7684 bar() \u51fd\u6570\u4e2d\uff0c bar() \u51fd\u6570\u8fd4\u56de\u7684\u65f6\u5019\u4f1a\u6839\u636e\u5806\u6808\u91cc\u9762\u4fdd\u5b58\u7684 EIP \u76f4\u63a5\u8fd4\u56de\u5230\u8c03\u7528\u8005\uff0c\u800c\u4e0d\u4f1a\u518d\u7ee7\u7eed\u6267\u884c\u540e\u9762\u7684\u6307\u4ee4</li> </ol>"},{"location":"foundation/self-cultivation/dynamic-link/#plt_2","title":"PLT \u5177\u4f53\u5b9e\u73b0","text":"<p>\u4e0a\u9762\u6211\u4eec\u63cf\u8ff0\u4e86 PLT \u7684\u57fa\u672c\u539f\u7406\uff0cPLT \u771f\u6b63\u7684\u5b9e\u73b0\u8981\u6bd4\u5b83\u7684\u7ed3\u6784\u7a0d\u5fae\u590d\u6742\u4e00\u4e9b\u3002ELF \u5c06 GOT \u62c6\u5206\u6210\u4e86\u4e24\u4e2a\u8868\u53eb\u505a\u201c.got\u201d\u548c\u201c.got.plt\u201d\u3002\u5176\u4e2d\u201c.got\u201d\u7528\u6765\u4fdd\u5b58\u5168\u5c40\u53d8\u91cf\u5f15\u7528\u7684\u5730\u5740\uff0c\u201c.got.plt\u201d\u7528\u6765\u4fdd\u5b58\u51fd\u6570\u5f15\u7528\u7684\u5730\u5740</p> <p></p> <p>\u201c.got.plt\u201d\u8fd8\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u5730\u65b9\u662f\u5b83\u7684\u524d\u4e09\u9879\u662f\u6709\u7279\u6b8a\u610f\u4e49\u7684\uff0c\u5206\u522b\u542b\u4e49\u5982\u4e0b\uff1a</p> <ol> <li>\u7b2c\u4e00\u9879\u4fdd\u5b58\u7684\u662f\u201c.dynamic\u201d\u6bb5\u7684\u5730\u5740\uff0c\u8fd9\u4e2a\u6bb5\u63cf\u8ff0\u4e86\u672c\u6a21\u5757\u52a8\u6001\u94fe\u63a5\u76f8\u5173\u7684\u4fe1\u606f</li> <li>\u7b2c\u4e8c\u9879\u4fdd\u5b58\u7684\u662f\u672c\u6a21\u5757\u7684ID\u3002</li> <li>\u7b2c\u4e09\u9879\u4fdd\u5b58\u7684\u662f _dl_runtime_resolve() \u7684\u5730\u5740\u3002</li> </ol> <p>\u5176\u4e2d\u7b2c\u4e8c\u9879\u548c\u7b2c\u4e09\u9879\u7531\u52a8\u6001\u94fe\u63a5\u5668\u5728\u88c5\u8f7d\u5171\u4eab\u6a21\u5757\u7684\u65f6\u5019\u8d1f\u8d23\u5c06\u5b83\u4eec\u521d\u59cb\u5316\u3002\u201c.got.plt\u201d\u7684\u5176\u4f59\u9879\u5206\u522b\u5bf9\u5e94\u6bcf\u4e2a\u5916\u90e8\u51fd\u6570\u7684\u5f15\u7528\u3002PLT\u7684\u7ed3\u6784\u4e5f\u4e0e\u6211\u4eec\u793a\u4f8b\u4e2d\u7684PLT\u7a0d\u6709\u4e0d\u540c\uff0c\u4e3a\u4e86\u51cf\u5c11\u4ee3\u7801\u7684\u91cd\u590d\uff0cELF\u628a\u4e0a\u9762\u4f8b\u5b50\u4e2d\u7684\u6700\u540e\u4e24\u6761\u6307\u4ee4\u653e\u5230PLT\u4e2d\u7684\u7b2c\u4e00\u9879\u3002\u5e76\u4e14\u89c4\u5b9a\u6bcf\u4e00\u9879\u7684\u957f\u5ea6\u662f 16 \u4e2a\u5b57\u8282\uff0c\u521a\u597d\u7528\u6765\u5b58\u653e 3 \u6761\u6307\u4ee4</p> <p>\u5b9e\u9645\u7684 PLT \u57fa\u672c\u7ed3\u6784\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>PLT0: \npush\u00a0*(GOT\u00a0+\u00a04) \njump\u00a0*(GOT\u00a0+\u00a08) \n\n... \n\nbar@plt: \njmp\u00a0*(bar@GOT) \npush\u00a0n \njump\u00a0PLT0 \u201d\n</code></pre>"},{"location":"foundation/self-cultivation/dynamic-link/#_18","title":"\u52a8\u6001\u94fe\u63a5\u76f8\u5173\u7ed3\u6784","text":"<p>\u52a8\u6001\u94fe\u63a5\u60c5\u51b5\u4e0b\uff0c\u53ef\u6267\u884c\u6587\u4ef6\u7684\u88c5\u8f7d\u4e0e\u9759\u6001\u94fe\u63a5\u60c5\u51b5\u57fa\u672c\u4e00\u6837\u3002\u9996\u5148\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u8bfb\u53d6\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5934\u90e8\uff0c\u68c0\u67e5\u6587\u4ef6\u7684\u5408\u6cd5\u6027\uff0c\u7136\u540e\u4ece\u5934\u90e8\u4e2d\u7684\u201cProgram Header\u201d\u4e2d\u8bfb\u53d6\u6bcf\u4e2a\u201cSegment\u201d\u7684\u865a\u62df\u5730\u5740\u3001\u6587\u4ef6\u5730\u5740\u548c\u5c5e\u6027\uff0c\u5e76\u5c06\u5b83\u4eec\u6620\u5c04\u5230\u8fdb\u7a0b\u865a\u62df\u7a7a\u95f4\u7684\u76f8\u5e94\u4f4d\u7f6e\u3002\u5728\u9759\u6001\u94fe\u63a5\u60c5\u51b5\u4e0b\uff0c\u64cd\u4f5c\u7cfb\u7edf\u63a5\u7740\u5c31\u53ef\u4ee5\u628a\u63a7\u5236\u6743\u8f6c\u4ea4\u7ed9\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5165\u53e3\u5730\u5740\uff0c\u7136\u540e\u7a0b\u5e8f\u5f00\u59cb\u6267\u884c\uff0c\u4e00\u5207\u770b\u8d77\u6765\u975e\u5e38\u76f4\u89c2\u3002</p> <p>\u4f46\u662f\u5728\u52a8\u6001\u94fe\u63a5\u60c5\u51b5\u4e0b\uff0c\u64cd\u4f5c\u7cfb\u7edf\u8fd8\u4e0d\u80fd\u5728\u88c5\u8f7d\u5b8c\u53ef\u6267\u884c\u6587\u4ef6\u4e4b\u540e\u5c31\u628a\u63a7\u5236\u6743\u4ea4\u7ed9\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u56e0\u4e3a\u6211\u4eec\u77e5\u9053\u53ef\u6267\u884c\u6587\u4ef6\u4f9d\u8d56\u4e8e\u5f88\u591a\u5171\u4eab\u5bf9\u8c61\u3002\u8fd9\u65f6\u5019\uff0c\u53ef\u6267\u884c\u6587\u4ef6\u91cc\u5bf9\u4e8e\u5f88\u591a\u5916\u90e8\u7b26\u53f7\u7684\u5f15\u7528\u8fd8\u5904\u4e8e\u65e0\u6548\u5730\u5740\u7684\u72b6\u6001\uff0c\u5373\u8fd8\u6ca1\u6709\u8ddf\u76f8\u5e94\u7684\u5171\u4eab\u5bf9\u8c61\u4e2d\u7684\u5b9e\u9645\u4f4d\u7f6e\u94fe\u63a5\u8d77\u6765\u3002\u6240\u4ee5\u5728\u6620\u5c04\u5b8c\u53ef\u6267\u884c\u6587\u4ef6\u4e4b\u540e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5148\u542f\u52a8\u4e00\u4e2a\u52a8\u6001\u94fe\u63a5\u5668\uff08Dynamic Linker\uff09\u3002</p> <p>\u5728 Linux \u4e0b\uff0c\u52a8\u6001\u94fe\u63a5\u5668ld.so\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u5171\u4eab\u5bf9\u8c61\uff0c\u64cd\u4f5c\u7cfb\u7edf\u540c\u6837\u901a\u8fc7\u6620\u5c04\u7684\u65b9\u5f0f\u5c06\u5b83\u52a0\u8f7d\u5230\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u4e2d\u3002\u64cd\u4f5c\u7cfb\u7edf\u5728\u52a0\u8f7d\u5b8c\u52a8\u6001\u94fe\u63a5\u5668\u4e4b\u540e\uff0c\u5c31\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9\u52a8\u6001\u94fe\u63a5\u5668\u7684\u5165\u53e3\u5730\u5740\uff08\u4e0e\u53ef\u6267\u884c\u6587\u4ef6\u4e00\u6837\uff0c\u5171\u4eab\u5bf9\u8c61\u4e5f\u6709\u5165\u53e3\u5730\u5740\uff09\u3002\u5f53\u52a8\u6001\u94fe\u63a5\u5668\u5f97\u5230\u63a7\u5236\u6743\u4e4b\u540e\uff0c\u5b83\u5f00\u59cb\u6267\u884c\u4e00\u7cfb\u5217\u81ea\u8eab\u7684\u521d\u59cb\u5316\u64cd\u4f5c\uff0c\u7136\u540e\u6839\u636e\u5f53\u524d\u7684\u73af\u5883\u53c2\u6570\uff0c\u5f00\u59cb\u5bf9\u53ef\u6267\u884c\u6587\u4ef6\u8fdb\u884c\u52a8\u6001\u94fe\u63a5\u5de5\u4f5c\u3002\u5f53\u6240\u6709\u52a8\u6001\u94fe\u63a5\u5de5\u4f5c\u5b8c\u6210\u4ee5\u540e\uff0c\u52a8\u6001\u94fe\u63a5\u5668\u4f1a\u5c06\u63a7\u5236\u6743\u8f6c\u4ea4\u5230\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5165\u53e3\u5730\u5740\uff0c\u7a0b\u5e8f\u5f00\u59cb\u6b63\u5f0f\u6267\u884c.</p>"},{"location":"foundation/self-cultivation/dynamic-link/#intrp","title":".intrp \u6bb5","text":"<p>\u90a3\u4e48\u52a8\u6001\u94fe\u63a5\u5668\u7684\u4f4d\u7f6e\u5728\u54ea\u513f\uff1f\u7531\u4ec0\u4e48\u51b3\u5b9a\u7684\u5462\uff1f</p> <p>\u5b9e\u9645\u4e0a\uff0c\u52a8\u6001\u94fe\u63a5\u5668\u7684\u4f4d\u7f6e\u65e2\u4e0d\u662f\u7531\u7cfb\u7edf\u914d\u7f6e\u6307\u5b9a\uff0c\u4e5f\u4e0d\u662f\u7531\u73af\u5883\u53c2\u6570\u51b3\u5b9a\uff0c\u800c\u662f\u7531ELF\u53ef\u6267\u884c\u6587\u4ef6\u51b3\u5b9a\u3002\u5728\u52a8\u6001\u94fe\u63a5\u7684 ELF \u53ef\u6267\u884c\u6587\u4ef6\u4e2d\uff0c\u6709\u4e00\u4e2a\u4e13\u95e8\u7684\u6bb5\u53eb\u505a\u201c.interp\u201d\u6bb5\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 objdump \u5de5\u5177\u6765\u67e5\u770b\u201c.interp\u201d\u5185\u5bb9\u201d</p> <pre><code>$ objdump -s PicTest\n\nPicTest:     file format elf64-x86-64\n\nContents of section .interp:\n 0318 2f6c6962 36342f6c 642d6c69 6e75782d  /lib64/ld-linux-\n 0328 7838362d 36342e73 6f2e3200           x86-64.so.2.    \n</code></pre> <p>\u201c.interp\u201d\u7684\u5185\u5bb9\u5f88\u7b80\u5355\uff0c\u91cc\u9762\u4fdd\u5b58\u7684\u5c31\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e2a\u5b57\u7b26\u4e32\u5c31\u662f\u53ef\u6267\u884c\u6587\u4ef6\u6240\u9700\u8981\u7684\u52a8\u6001\u94fe\u63a5\u5668\u7684\u8def\u5f84</p>"},{"location":"foundation/self-cultivation/dynamic-link/#dynamic","title":".dynamic \u6bb5","text":"<p>\u52a8\u6001\u94fe\u63a5 ELF \u4e2d\u6700\u91cd\u8981\u7684\u7ed3\u6784\u5e94\u8be5\u5c31\u662f\u201c.dynamic\u201d\u6bb5\uff0c\u8fd9\u4e2a\u6bb5\u91cc\u9762\u4fdd\u5b58\u4e86\u52a8\u6001\u94fe\u63a5\u5668\u6240\u9700\u8981\u7684\u57fa\u672c\u4fe1\u606f\uff0c\u6bd4\u5982\u4f9d\u8d56\u4e8e\u54ea\u4e9b\u5171\u4eab\u5bf9\u8c61\u3001\u52a8\u6001\u94fe\u63a5\u7b26\u53f7\u8868\u7684\u4f4d\u7f6e\u3001\u52a8\u6001\u94fe\u63a5\u91cd\u5b9a\u4f4d\u8868\u7684\u4f4d\u7f6e\u3001\u5171\u4eab\u5bf9\u8c61\u521d\u59cb\u5316\u4ee3\u7801\u7684\u5730\u5740\u7b49</p> <p>\u4f7f\u7528 readelf \u5de5\u5177\u53ef\u4ee5\u67e5\u770b\u201c.dynamic\u201d\u6bb5\u7684\u5185\u5bb9</p> <pre><code>$ readelf -d pic.so\n\nDynamic section at offset 0x2e18 contains 24 entries:\n  Tag        Type                         Name/Value\n 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]\n 0x000000000000000c (INIT)               0x1000\n 0x000000000000000d (FINI)               0x1140\n 0x0000000000000019 (INIT_ARRAY)         0x3e08\n 0x000000000000001b (INIT_ARRAYSZ)       8 (bytes)\n 0x000000000000001a (FINI_ARRAY)         0x3e10\n 0x000000000000001c (FINI_ARRAYSZ)       8 (bytes)\n 0x000000006ffffef5 (GNU_HASH)           0x2f0\n 0x0000000000000005 (STRTAB)             0x3d8\n 0x0000000000000006 (SYMTAB)             0x318\n 0x000000000000000a (STRSZ)              120 (bytes)\n 0x000000000000000b (SYMENT)             24 (bytes)\n 0x0000000000000003 (PLTGOT)             0x4000\n 0x0000000000000002 (PLTRELSZ)           24 (bytes)\n 0x0000000000000014 (PLTREL)             RELA\n 0x0000000000000017 (JMPREL)             0x540\n 0x0000000000000007 (RELA)               0x480\n 0x0000000000000008 (RELASZ)             192 (bytes)\n 0x0000000000000009 (RELAENT)            24 (bytes)\n 0x000000006ffffffe (VERNEED)            0x460\n 0x000000006fffffff (VERNEEDNUM)         1\n 0x000000006ffffff0 (VERSYM)             0x450\n 0x000000006ffffff9 (RELACOUNT)          3\n</code></pre> <p>\u53e6\u5916Linux\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u547d\u4ee4\u7528\u6765\u67e5\u770b\u4e00\u4e2a\u7a0b\u5e8f\u4e3b\u6a21\u5757\u6216\u4e00\u4e2a\u5171\u4eab\u5e93\u4f9d\u8d56\u4e8e\u54ea\u4e9b\u5171\u4eab\u5e93\uff1a</p> <pre><code>$ ldd PicTest\n    linux-vdso.so.1 (0x00007ffcfc9bd000)\n    ./pic.so (0x00007f4fc64b5000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f4fc62b9000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f4fc64c1000)\n</code></pre>"},{"location":"foundation/self-cultivation/dynamic-link/#_19","title":"\u52a8\u6001\u7b26\u53f7\u8868","text":"<p>\u4e3a\u4e86\u5b8c\u6210\u52a8\u6001\u94fe\u63a5\uff0c\u6700\u5173\u952e\u7684\u8fd8\u662f\u6240\u4f9d\u8d56\u7684\u7b26\u53f7\u548c\u76f8\u5173\u6587\u4ef6\u7684\u4fe1\u606f\u3002\u6211\u4eec\u77e5\u9053\u5728\u9759\u6001\u94fe\u63a5\u4e2d\uff0c\u6709\u4e00\u4e2a\u4e13\u95e8\u7684\u6bb5\u53eb\u505a\u7b26\u53f7\u8868\u201c.symtab\u201d\uff08Symbol Table\uff09\uff0c\u91cc\u9762\u4fdd\u5b58\u4e86\u6240\u6709\u5173\u4e8e\u8be5\u76ee\u6807\u6587\u4ef6\u7684\u7b26\u53f7\u7684\u5b9a\u4e49\u548c\u5f15\u7528\u3002\u52a8\u6001\u94fe\u63a5\u7684\u7b26\u53f7\u8868\u793a\u5b9e\u9645\u4e0a\u5b83\u8ddf\u9759\u6001\u94fe\u63a5\u5341\u5206\u76f8\u4f3c\u3002</p> <p>\u4e3a\u4e86\u8868\u793a\u52a8\u6001\u94fe\u63a5\u8fd9\u4e9b\u6a21\u5757\u4e4b\u95f4\u7684\u7b26\u53f7\u5bfc\u5165\u5bfc\u51fa\u5173\u7cfb\uff0cELF\u4e13\u95e8\u6709\u4e00\u4e2a\u53eb\u505a\u52a8\u6001\u7b26\u53f7\u8868\uff08Dynamic Symbol Table\uff09\u7684\u6bb5\u7528\u6765\u4fdd\u5b58\u8fd9\u4e9b\u4fe1\u606f\uff0c\u8fd9\u4e2a\u6bb5\u7684\u6bb5\u540d\u901a\u5e38\u53eb\u505a\u201c.dynsym\u201d\uff08Dynamic Symbol\uff09\u3002\u4e0e\u201c.symtab\u201d\u4e0d\u540c\u7684\u662f\uff0c\u201c.dynsym\u201d\u53ea\u4fdd\u5b58\u4e86\u4e0e\u52a8\u6001\u94fe\u63a5\u76f8\u5173\u7684\u7b26\u53f7\uff0c\u5bf9\u4e8e\u90a3\u4e9b\u6a21\u5757\u5185\u90e8\u7684\u7b26\u53f7\u5219\u4e0d\u4fdd\u5b58\u3002\u5f88\u591a\u65f6\u5019\u52a8\u6001\u94fe\u63a5\u7684\u6a21\u5757\u540c\u65f6\u62e5\u6709\u201c.dynsym\u201d\u548c\u201c.symtab\u201d\u4e24\u4e2a\u8868\uff0c\u201c.symtab\u201d\u4e2d\u5f80\u5f80\u4fdd\u5b58\u4e86\u6240\u6709\u7b26\u53f7\uff0c\u5305\u62ec\u201c.dynsym\u201d\u4e2d\u7684\u7b26\u53f7\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u7528 readelf \u5de5\u5177\u6765\u67e5\u770b ELF \u6587\u4ef6\u7684\u52a8\u6001\u7b26\u53f7\u8868</p> <pre><code>$ readelf -s pic.so\n\nSymbol table '.dynsym' contains 8 entries:\n   Num:    Value          Size Type    Bind   Vis      Ndx Name\n     0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND \n     1: 0000000000000000     0 NOTYPE  WEAK   DEFAULT  UND _ITM_deregisterTMCloneTab\n     2: 0000000000000000     0 FUNC    GLOBAL DEFAULT  UND printf@GLIBC_2.2.5 (2)\n     3: 0000000000000000     0 NOTYPE  WEAK   DEFAULT  UND __gmon_start__\n     4: 0000000000000000     0 NOTYPE  WEAK   DEFAULT  UND _ITM_registerTMCloneTable\n     5: 0000000000000000     0 FUNC    WEAK   DEFAULT  UND __cxa_finalize@GLIBC_2.2.5 (2)\n     6: 0000000000001119    39 FUNC    GLOBAL DEFAULT   14 ext\n     7: 0000000000004028     4 OBJECT  GLOBAL DEFAULT   24 b\n</code></pre>"},{"location":"foundation/self-cultivation/dynamic-link/#_20","title":"\u52a8\u6001\u94fe\u63a5\u91cd\u5b9a\u4f4d\u8868","text":"<p>\u5171\u4eab\u5bf9\u8c61\u5728\u88c5\u8f7d\u65f6\u9700\u8981\u91cd\u5b9a\u4f4d\uff0c\u52a8\u6001\u94fe\u63a5\u7684\u6587\u4ef6\u4e2d\uff0c\u4ee3\u7801\u6bb5\u4e0e\u6570\u636e\u6bb5\u7684\u91cd\u5b9a\u4f4d\u8868\u5206\u522b\u53eb\u505a\u201c.rel.dyn\u201d\u548c\u201c.rel.plt\u201d\uff0c\u5b83\u4eec\u5206\u522b\u76f8\u5f53\u4e8e \u201c.rel.text\u201d\u548c\u201c.rel.data\u201d\u3002</p> <p>\u201c.rel.dyn\u201d\u5b9e\u9645\u4e0a\u662f\u5bf9\u6570\u636e\u5f15\u7528\u7684\u4fee\u6b63\uff0c\u5b83\u6240\u4fee\u6b63\u7684\u4f4d\u7f6e\u4f4d\u4e8e\u201c.got\u201d\u4ee5\u53ca\u6570\u636e\u6bb5\uff1b\u800c\u201c.rel.plt\u201d\u662f\u5bf9\u51fd\u6570\u5f15\u7528\u7684\u4fee\u6b63\uff0c\u5b83\u6240\u4fee\u6b63\u7684\u4f4d\u7f6e\u4f4d\u4e8e\u201c.got.plt\u201d\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528readelf \u6765\u67e5\u770b\u4e00\u4e2a\u52a8\u6001\u94fe\u63a5\u7684\u6587\u4ef6\u7684\u91cd\u5b9a\u4f4d\u8868\uff1a</p> <pre><code>$ readelf -r Lib.so\n\nRelocation section '.rela.dyn' at offset 0x488 contains 7 entries:\n  Offset          Info           Type           Sym. Value    Sym. Name + Addend\n000000003e10  000000000008 R_X86_64_RELATIVE                    1130\n000000003e18  000000000008 R_X86_64_RELATIVE                    10f0\n000000004028  000000000008 R_X86_64_RELATIVE                    4028\n000000003fe0  000100000006 R_X86_64_GLOB_DAT 0000000000000000 _ITM_deregisterTMClone + 0\n000000003fe8  000300000006 R_X86_64_GLOB_DAT 0000000000000000 __gmon_start__ + 0\n000000003ff0  000400000006 R_X86_64_GLOB_DAT 0000000000000000 _ITM_registerTMCloneTa + 0\n000000003ff8  000600000006 R_X86_64_GLOB_DAT 0000000000000000 __cxa_finalize@GLIBC_2.2.5 + 0\n\nRelocation section '.rela.plt' at offset 0x530 contains 2 entries:\n  Offset          Info           Type           Sym. Value    Sym. Name + Addend\n000000004018  000200000007 R_X86_64_JUMP_SLO 0000000000000000 printf@GLIBC_2.2.5 + 0\n000000004020  000500000007 R_X86_64_JUMP_SLO 0000000000000000 sleep@GLIBC_2.2.5 + 0\n</code></pre> <p>\u5728\u9759\u6001\u94fe\u63a5\u4e2d\u6211\u4eec\u5df2\u7ecf\u78b0\u5230\u8fc7\u4e24\u79cd\u7c7b\u578b\u7684\u91cd\u5b9a\u4f4d\u5165\u53e3 R_386_32 \u548c R_386_PC32\uff0c\u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\u51e0\u79cd\u65b0\u7684\u91cd\u5b9a\u4f4d\u5165\u53e3\u7c7b\u578b\uff1aR_X86_64_RELATIVE\u3001R_X86_64_GLOB_DAT\u548cR_X86_64_JUMP_SLO</p> <ul> <li>R_X86_64_JUMP_SLO: \u8be5\u7c7b\u578b\u8868\u793a\u88ab\u4fee\u6b63\u7684\u4f4d\u7f6e\u53ea\u9700\u8981\u76f4\u63a5\u586b\u5165\u7b26\u53f7\u7684\u5730\u5740\u5373\u53ef\uff0c\u5b83\u6240\u4fee\u6b63\u7684\u4f4d\u7f6e\u4f4d\u4e8e\u201c.got.plt\u201d</li> <li>R_X86_64_GLOB_DAT: \u4e0e R_X86_64_JUMP_SLO \u7c7b\u4f3c\uff0c\u8868\u793a\u88ab\u4fee\u6b63\u7684\u4f4d\u7f6e\u53ea\u9700\u8981\u76f4\u63a5\u586b\u5165\u7b26\u53f7\u7684\u5730\u5740\u5373\u53ef\uff0c\u4f46\u662f\u5b83\u6240\u4fee\u6b63\u7684\u4f4d\u7f6e\u4f4d\u4e8e\u201c.got\u201d</li> <li>R_X86_64_RELATIVE: \u8fd9\u79cd\u7c7b\u578b\u7684\u91cd\u5b9a\u4f4d\u5b9e\u9645\u4e0a\u5c31\u662f\u57fa\u5740\u91cd\u7f6e\uff0c\u9002\u7528\u4e8e\u5171\u4eab\u5bf9\u8c61\u7684\u6570\u636e\u6bb5\u8fd9\u79cd\u65e0\u6cd5\u505a\u5230\u5730\u5740\u65e0\u5173\u7684\u7b26\u53f7\uff0c\u5b83\u53ef\u80fd\u4f1a\u5305\u542b\u7edd\u5bf9\u5730\u5740\u7684\u5f15\u7528\uff0c\u5bf9\u4e8e\u8fd9\u79cd\u7edd\u5bf9\u5730\u5740\u7684\u5f15\u7528\uff0c\u6211\u4eec\u5fc5\u987b\u5728\u88c5\u8f7d\u65f6\u5c06\u5176\u91cd\u5b9a\u4f4d\u3002</li> </ul>"},{"location":"foundation/self-cultivation/dynamic-link/#_21","title":"\u52a8\u6001\u94fe\u63a5\u7684\u6b65\u9aa4\u548c\u5b9e\u73b0","text":"<p>\u52a8\u6001\u94fe\u63a5\u7684\u6b65\u9aa4\u57fa\u672c\u4e0a\u5206\u4e3a3\u6b65\uff1a\u5148\u662f\u542f\u52a8\u52a8\u6001\u94fe\u63a5\u5668\u672c\u8eab\uff0c\u7136\u540e\u88c5\u8f7d\u6240\u6709\u9700\u8981\u7684\u5171\u4eab\u5bf9\u8c61\uff0c\u6700\u540e\u662f\u91cd\u5b9a\u4f4d\u548c\u521d\u59cb\u5316\u3002</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_22","title":"\u52a8\u6001\u94fe\u63a5\u5668\u81ea\u4e3e","text":"<p>\u6211\u4eec\u77e5\u9053\u52a8\u6001\u94fe\u63a5\u5668\u672c\u8eab\u4e5f\u662f\u4e00\u4e2a\u5171\u4eab\u5bf9\u8c61\uff0c\u4f46\u662f\u4e8b\u5b9e\u4e0a\u5b83\u6709\u4e00\u4e9b\u7279\u6b8a\u6027\u3002\u5bf9\u4e8e\u666e\u901a\u5171\u4eab\u5bf9\u8c61\u6587\u4ef6\u6765\u8bf4\uff0c\u5b83\u7684\u91cd\u5b9a\u4f4d\u5de5\u4f5c\u7531\u52a8\u6001\u94fe\u63a5\u5668\u6765\u5b8c\u6210\uff1b\u5b83\u4e5f\u53ef\u4ee5\u4f9d\u8d56\u4e8e\u5176\u4ed6\u5171\u4eab\u5bf9\u8c61\uff0c\u5176\u4e2d\u7684\u88ab\u4f9d\u8d56\u7684\u5171\u4eab\u5bf9\u8c61\u7531\u52a8\u6001\u94fe\u63a5\u5668\u8d1f\u8d23\u94fe\u63a5\u548c\u88c5\u8f7d\u3002\u53ef\u662f\u5bf9\u4e8e\u52a8\u6001\u94fe\u63a5\u5668\u672c\u8eab\u6765\u8bf4\uff0c\u5b83\u7684\u91cd\u5b9a\u4f4d\u5de5\u4f5c\u7531\u8c01\u6765\u5b8c\u6210\uff1f\u5b83\u662f\u5426\u53ef\u4ee5\u4f9d\u8d56\u4e8e\u5176\u4ed6\u7684\u5171\u4eab\u5bf9\u8c61\uff1f</p> <p>\u8fd9\u5c31\u8981\u6c42\u52a8\u6001\u94fe\u63a5\u5668\u505a\u5230\u81ea\u4e3e\uff1a\u52a8\u6001\u94fe\u63a5\u5668\u672c\u8eab\u4e0d\u53ef\u4ee5\u4f9d\u8d56\u4e8e\u5176\u4ed6\u4efb\u4f55\u5171\u4eab\u5bf9\u8c61\uff1b\u5176\u6b21\u662f\u52a8\u6001\u94fe\u63a5\u5668\u672c\u8eab\u6240\u9700\u8981\u7684\u5168\u5c40\u548c\u9759\u6001\u53d8\u91cf\u7684\u91cd\u5b9a\u4f4d\u5de5\u4f5c\u7531\u5b83\u672c\u8eab\u5b8c\u6210\u3002</p> <p>\u52a8\u6001\u94fe\u63a5\u5668\u5165\u53e3\u5730\u5740\u5373\u662f\u81ea\u4e3e\u4ee3\u7801\u7684\u5165\u53e3\uff0c\u5f53\u64cd\u4f5c\u7cfb\u7edf\u5c06\u8fdb\u7a0b\u63a7\u5236\u6743\u4ea4\u7ed9\u52a8\u6001\u94fe\u63a5\u5668\u65f6\uff0c\u52a8\u6001\u94fe\u63a5\u5668\u7684\u81ea\u4e3e\u4ee3\u7801\u5373\u5f00\u59cb\u6267\u884c\u3002\u81ea\u4e3e\u4ee3\u7801\u9996\u5148\u4f1a\u627e\u5230\u5b83\u81ea\u5df1\u7684 GOT\u3002\u800c GOT \u7684\u7b2c\u4e00\u4e2a\u5165\u53e3\u4fdd\u5b58\u7684\u5373\u662f\u201c.dynamic\u201d\u6bb5\u7684\u504f\u79fb\u5730\u5740\uff0c\u7531\u6b64\u627e\u5230\u4e86\u52a8\u6001\u8fde\u63a5\u5668\u672c\u8eab\u7684\u201c.dynamic\u201d\u6bb5\u3002\u901a\u8fc7\u201c.dynamic\u201d\u4e2d\u7684\u4fe1\u606f\uff0c\u81ea\u4e3e\u4ee3\u7801\u4fbf\u53ef\u4ee5\u83b7\u5f97\u52a8\u6001\u94fe\u63a5\u5668\u672c\u8eab\u7684\u91cd\u5b9a\u4f4d\u8868\u548c\u7b26\u53f7\u8868\u7b49\uff0c\u4ece\u800c\u5f97\u5230\u52a8\u6001\u94fe\u63a5\u5668\u672c\u8eab\u7684\u91cd\u5b9a\u4f4d\u5165\u53e3\uff0c\u5148\u5c06\u5b83\u4eec\u5168\u90e8\u91cd\u5b9a\u4f4d\u3002\u4ece\u8fd9\u4e00\u6b65\u5f00\u59cb\uff0c\u52a8\u6001\u94fe\u63a5\u5668\u4ee3\u7801\u4e2d\u624d\u53ef\u4ee5\u5f00\u59cb\u4f7f\u7528\u81ea\u5df1\u7684\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\u3002</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_23","title":"\u88c5\u8f7d\u5171\u4eab\u5bf9\u8c61","text":"<ol> <li>\u5b8c\u6210\u57fa\u672c\u81ea\u4e3e\u4ee5\u540e\uff0c\u52a8\u6001\u94fe\u63a5\u5668\u5c06\u53ef\u6267\u884c\u6587\u4ef6\u548c\u94fe\u63a5\u5668\u672c\u8eab\u7684\u7b26\u53f7\u8868\u90fd\u5408\u5e76\u5230\u4e00\u4e2a\u7b26\u53f7\u8868\u5f53\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u79f0\u5b83\u4e3a\u5168\u5c40\u7b26\u53f7\u8868\uff08Global Symbol Table\uff09\u3002</li> <li>\u201c.dynamic\u201d\u6bb5\u4e2d\uff0c\u6709\u4e00\u79cd\u7c7b\u578b\u7684\u5165\u53e3\u662fDT_NEEDED\uff0c\u5b83\u6240\u6307\u51fa\u7684\u662f\u8be5\u53ef\u6267\u884c\u6587\u4ef6\uff08\u6216\u5171\u4eab\u5bf9\u8c61\uff09\u6240\u4f9d\u8d56\u7684\u5171\u4eab\u5bf9\u8c61\uff0c\u7531\u6b64\uff0c\u94fe\u63a5\u5668\u53ef\u4ee5\u5217\u51fa\u53ef\u6267\u884c\u6587\u4ef6\u6240\u9700\u8981\u7684\u6240\u6709\u5171\u4eab\u5bf9\u8c61\uff0c\u5e76\u5c06\u8fd9\u4e9b\u5171\u4eab\u5bf9\u8c61\u7684\u540d\u5b57\u653e\u5165\u5230\u4e00\u4e2a\u88c5\u8f7d\u96c6\u5408\u4e2d</li> <li>\u94fe\u63a5\u5668\u5f00\u59cb\u4ece\u96c6\u5408\u91cc\u53d6\u51fa\u4e00\u4e2a\u6240\u9700\u8981\u7684\u5171\u4eab\u5bf9\u8c61\u7684\u540d\u5b57\uff0c\u627e\u5230\u76f8\u5e94\u7684\u6587\u4ef6\u540e\u6253\u5f00\u8be5\u6587\u4ef6\uff0c\u8bfb\u53d6\u76f8\u5e94\u7684ELF\u6587\u4ef6\u5934\u548c\u201c.dynamic\u201d\u6bb5\uff0c\u7136\u540e\u5c06\u5b83\u76f8\u5e94\u7684\u4ee3\u7801\u6bb5\u548c\u6570\u636e\u6bb5\u6620\u5c04\u5230\u8fdb\u7a0b\u7a7a\u95f4\u4e2d\u3002</li> <li>\u5982\u679c\u8fd9\u4e2aELF\u5171\u4eab\u5bf9\u8c61\u8fd8\u4f9d\u8d56\u4e8e\u5176\u4ed6\u5171\u4eab\u5bf9\u8c61\uff0c\u90a3\u4e48\u5c06\u6240\u4f9d\u8d56\u7684\u5171\u4eab\u5bf9\u8c61\u7684\u540d\u5b57\u653e\u5230\u88c5\u8f7d\u96c6\u5408\u4e2d\u3002\u5982\u6b64\u5faa\u73af\u76f4\u5230\u6240\u6709\u4f9d\u8d56\u7684\u5171\u4eab\u5bf9\u8c61\u90fd\u88ab\u88c5\u8f7d\u8fdb\u6765\u4e3a\u6b62\u3002</li> <li>\u8fd9\u4e2a\u88c5\u8f7d\u987a\u5e8f\u7c7b\u4f3c\u56fe\u7684\u904d\u5386\u8fc7\u7a0b\uff0c\u94fe\u63a5\u5668\u53ef\u80fd\u4f1a\u4f7f\u7528\u6df1\u5ea6\u4f18\u5148\u6216\u8005\u5e7f\u5ea6\u4f18\u5148\u6216\u8005\u5176\u4ed6\u7684\u987a\u5e8f\u6765\u904d\u5386\u6574\u4e2a\u56fe</li> <li>\u5f53\u4e00\u4e2a\u65b0\u7684\u5171\u4eab\u5bf9\u8c61\u88ab\u88c5\u8f7d\u8fdb\u6765\u7684\u65f6\u5019\uff0c\u5b83\u7684\u7b26\u53f7\u8868\u4f1a\u88ab\u5408\u5e76\u5230\u5168\u5c40\u7b26\u53f7\u8868\u4e2d\uff0c\u6240\u4ee5\u5f53\u6240\u6709\u7684\u5171\u4eab\u5bf9\u8c61\u90fd\u88ab\u88c5\u8f7d\u8fdb\u6765\u7684\u65f6\u5019\uff0c\u5168\u5c40\u7b26\u53f7\u8868\u91cc\u9762\u5c06\u5305\u542b\u8fdb\u7a0b\u4e2d\u6240\u6709\u7684\u52a8\u6001\u94fe\u63a5\u6240\u9700\u8981\u7684\u7b26\u53f7</li> </ol>"},{"location":"foundation/self-cultivation/dynamic-link/#_24","title":"\u7b26\u53f7\u7684\u4f18\u5316\u7ea7","text":"<p>\u5728\u52a8\u6001\u94fe\u63a5\u5668\u6309\u7167\u5404\u4e2a\u6a21\u5757\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5bf9\u5b83\u4eec\u8fdb\u884c\u88c5\u8f7d\u5e76\u4e14\u5c06\u5b83\u4eec\u7684\u7b26\u53f7\u5e76\u5165\u5230\u5168\u5c40\u7b26\u53f7\u8868\u65f6\uff0c\u4f1a\u4e0d\u4f1a\u6709\u8fd9\u4e48\u4e00\u79cd\u60c5\u51b5\u53d1\u751f\uff0c\u90a3\u5c31\u662f\u6709\u53ef\u80fd\u4e24\u4e2a\u4e0d\u540c\u7684\u6a21\u5757\u5b9a\u4e49\u4e86\u540c\u4e00\u4e2a\u7b26\u53f7\uff1f</p> <pre><code>\u201c/*\u00a0a1.c\u00a0*/ \n\n#include\u00a0&lt;stdio.h&gt; \n\nvoid\u00a0a() \n{ \n\u00a0\u00a0\u00a0printf(\"a1.c\\n\"); \n} \n\n/*\u00a0a2.c\u00a0*/ \n#include\u00a0&lt;stdio.h&gt; \nvoid\u00a0a() \n{ \n\u00a0\u00a0 printf(\"a2.c\\n\"); \n\n}\n\n/*\u00a0b1.c\u00a0*/ \nvoid\u00a0a(); \n\nvoid\u00a0b1() \n{ \n\u00a0\u00a0\u00a0a(); \n} \n\n/*\u00a0b2.c\u00a0*/ \nvoid\u00a0a(); \n\nvoid\u00a0b2() \n{ \n\u00a0\u00a0\u00a0a(); \n}\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230 a1.c \u548c a2.c \u4e2d\u90fd\u5b9a\u4e49\u4e86\u540d\u5b57\u4e3a\u201ca\u201d\u7684\u51fd\u6570\u3002\u90a3\u4e48\u7531\u4e8e b1.c \u548c b2.c \u90fd\u7528\u5230\u4e86\u5916\u90e8\u51fd\u6570\u201ca\u201d\uff0c\u6211\u4eec\u5047\u8bbe b1.so \u4f9d\u8d56\u4e8e a1.so\uff0cb2.so \u4f9d\u8d56\u4e8e a2.so\uff0c\u5c06 b1.so \u4e0e a1.so \u8fdb\u884c\u94fe\u63a5\uff0cb2.so \u4e0e a2.so \u8fdb\u884c\u94fe\u63a5\u3002</p> <p>\u90a3\u4e48\u5f53\u6709\u7a0b\u5e8f\u540c\u65f6\u4f7f\u7528 b1.c \u4e2d\u7684\u51fd\u6570 b1 \u548c b2.c \u4e2d\u7684\u51fd\u6570 b2 \u4f1a\u600e\u4e48\u6837\u5462\uff1f</p> <p>\u5173\u4e8e\u5168\u5c40\u7b26\u53f7\u51b2\u7a81\u7684\u95ee\u9898\uff0c\u5b9e\u9645\u4e0a Linux \u4e0b\u7684\u52a8\u6001\u94fe\u63a5\u5668\u662f\u8fd9\u6837\u5904\u7406\u7684\uff1a\u5b83\u5b9a\u4e49\u4e86\u4e00\u4e2a\u89c4\u5219\uff0c\u90a3\u5c31\u662f\u5f53\u4e00\u4e2a\u7b26\u53f7\u9700\u8981\u88ab\u52a0\u5165\u5168\u5c40\u7b26\u53f7\u8868\u65f6\uff0c\u5982\u679c\u76f8\u540c\u7684\u7b26\u53f7\u540d\u5df2\u7ecf\u5b58\u5728\uff0c\u5219\u540e\u52a0\u5165\u7684\u7b26\u53f7\u88ab\u5ffd\u7565</p> <p>\u7531\u4e8e\u5b58\u5728\u8fd9\u79cd\u91cd\u540d\u7b26\u53f7\u88ab\u76f4\u63a5\u5ffd\u7565\u7684\u95ee\u9898\uff0c\u5f53\u7a0b\u5e8f\u4f7f\u7528\u5927\u91cf\u5171\u4eab\u5bf9\u8c61\u65f6\u5e94\u8be5\u975e\u5e38\u5c0f\u5fc3\u7b26\u53f7\u7684\u91cd\u540d\u95ee\u9898</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_25","title":"\u5168\u5c40\u7b26\u53f7\u4ecb\u5165\u4e0e\u5730\u5740\u65e0\u5173\u4ee3\u7801","text":"<p>\u524d\u9762\u4ecb\u7ecd\u5730\u5740\u65e0\u5173\u4ee3\u7801\u65f6\uff0c\u5bf9\u4e8e\u7b2c\u4e00\u7c7b\u6a21\u5757\u5185\u90e8\u8c03\u7528\u6216\u8df3\u8f6c\u7684\u5904\u7406\u65f6\uff0c\u6211\u4eec\u7b80\u5355\u5730\u5c06\u5176\u5f53\u4f5c\u662f\u76f8\u5bf9\u5730\u5740\u8c03\u7528/\u8df3\u8f6c\u3002</p> <p>\u4f46\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u95ee\u9898\u6bd4\u60f3\u8c61\u4e2d\u8981\u590d\u6742\uff0c\u8fd8\u662f\u62ff\u524d\u9762\u201cpic.c\u201d\u7684\u4f8b\u5b50\u6765\u770b\uff0c\u7531\u4e8e\u53ef\u80fd\u5b58\u5728\u5168\u5c40\u7b26\u53f7\u4ecb\u5165\u7684\u95ee\u9898\uff0c<code>foo</code>\u51fd\u6570\u5bf9\u4e8e<code>bar</code>\u7684\u8c03\u7528\u4e0d\u80fd\u591f\u91c7\u7528\u7b2c\u4e00\u7c7b\u6a21\u5757\u5185\u90e8\u8c03\u7528\u7684\u65b9\u6cd5\uff0c\u56e0\u4e3a\u4e00\u65e6<code>bar</code>\u51fd\u6570\u7531\u4e8e\u5168\u5c40\u7b26\u53f7\u4ecb\u5165\u88ab\u5176\u4ed6\u6a21\u5757\u4e2d\u7684\u540c\u540d\u51fd\u6570\u8986\u76d6\uff0c\u90a3\u4e48<code>foo</code>\u5982\u679c\u91c7\u7528\u76f8\u5bf9\u5730\u5740\u8c03\u7528\u7684\u8bdd\uff0c\u90a3\u4e2a\u76f8\u5bf9\u5730\u5740\u90e8\u5206\u5c31\u9700\u8981\u91cd\u5b9a\u4f4d\uff0c\u8fd9\u53c8\u4e0e\u5171\u4eab\u5bf9\u8c61\u7684\u5730\u5740\u65e0\u5173\u6027\u77db\u76fe\u3002</p> <p>\u6240\u4ee5\u5bf9\u4e8e<code>bar()</code>\u51fd\u6570\u7684\u8c03\u7528\uff0c\u7f16\u8bd1\u5668\u53ea\u80fd\u91c7\u7528\u7b2c\u4e09\u79cd\uff0c\u5373\u5f53\u4f5c\u6a21\u5757\u5916\u90e8\u7b26\u53f7\u5904\u7406\uff0c<code>bar()</code>\u51fd\u6570\u88ab\u8986\u76d6\uff0c\u52a8\u6001\u94fe\u63a5\u5668\u53ea\u9700\u8981\u91cd\u5b9a\u4f4d\u201c.got.plt\u201d\uff0c\u4e0d\u5f71\u54cd\u5171\u4eab\u5bf9\u8c61\u7684\u4ee3\u7801\u6bb5\u3002</p> <p>\u56e0\u6b64\uff0c\u5b9e\u9645\u4e0a\u4f7f\u7528PIC\u6a21\u5f0f\u7f16\u8bd1\u7684\u5171\u4eab\u5bf9\u8c61\uff0c\u5bf9\u4e8e\u6a21\u5757\u5185\u90e8\u7684\u51fd\u6570\u8c03\u7528\u4e5f\u662f\u91c7\u7528\u8ddf\u6a21\u5757\u5916\u90e8\u51fd\u6570\u8c03\u7528\u4e00\u6837\u7684\u65b9\u5f0f\uff0c\u5373\u4f7f\u7528 GOT/PLT \u7684\u65b9\u5f0f\uff0c\u6240\u4ee5\u5728 GOT/PLT \u6ca1\u6709\u88ab\u91cd\u5b9a\u4f4d\u4e4b\u524d\uff0c\u81ea\u4e3e\u4ee3\u7801\u4e0d\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u5168\u5c40\u53d8\u91cf\uff0c\u4e5f\u4e0d\u53ef\u4ee5\u8c03\u7528\u51fd\u6570\u3002</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_26","title":"\u91cd\u5b9a\u4f4d\u4e0e\u521d\u59cb\u5316","text":"<p>\u5f53\u4e0a\u9762\u7684\u6b65\u9aa4\u5b8c\u6210\u4e4b\u540e\uff0c\u94fe\u63a5\u5668\u5f00\u59cb\u91cd\u65b0\u904d\u5386\u53ef\u6267\u884c\u6587\u4ef6\u548c\u6bcf\u4e2a\u5171\u4eab\u5bf9\u8c61\u7684\u91cd\u5b9a\u4f4d\u8868\uff0c\u5c06\u5b83\u4eec\u7684 GOT/PLT \u4e2d\u7684\u6bcf\u4e2a\u9700\u8981\u91cd\u5b9a\u4f4d\u7684\u4f4d\u7f6e\u8fdb\u884c\u4fee\u6b63\u3002\u56e0\u4e3a\u6b64\u65f6\u52a8\u6001\u94fe\u63a5\u5668\u5df2\u7ecf\u62e5\u6709\u4e86\u8fdb\u7a0b\u7684\u5168\u5c40\u7b26\u53f7\u8868\uff0c\u6240\u4ee5\u8fd9\u4e2a\u4fee\u6b63\u8fc7\u7a0b\u4e5f\u663e\u5f97\u6bd4\u8f83\u5bb9\u6613\uff0c\u8ddf\u6211\u4eec\u524d\u9762\u63d0\u5230\u7684\u5730\u5740\u91cd\u5b9a\u4f4d\u7684\u539f\u7406\u57fa\u672c\u76f8\u540c\u3002</p> <p>\u91cd\u5b9a\u4f4d\u5b8c\u6210\u4e4b\u540e\uff0c\u5982\u679c\u67d0\u4e2a\u5171\u4eab\u5bf9\u8c61\u6709\u201c.init\u201d\u6bb5\uff0c\u90a3\u4e48\u52a8\u6001\u94fe\u63a5\u5668\u4f1a\u6267\u884c\u201c.init\u201d\u6bb5\u4e2d\u7684\u4ee3\u7801\uff0c\u7528\u4ee5\u5b9e\u73b0\u5171\u4eab\u5bf9\u8c61\u7279\u6709\u7684\u521d\u59cb\u5316\u8fc7\u7a0b\uff0c\u6bd4\u5982\u6700\u5e38\u89c1\u7684\uff0c\u5171\u4eab\u5bf9\u8c61\u4e2d\u7684C++\u7684\u5168\u5c40/\u9759\u6001\u5bf9\u8c61\u7684\u6784\u9020\u5c31\u9700\u8981\u901a\u8fc7\u201c.init\u201d\u6765\u521d\u59cb\u5316\u3002\u76f8\u5e94\u5730\uff0c\u5171\u4eab\u5bf9\u8c61\u4e2d\u8fd8\u53ef\u80fd\u6709\u201c.finit\u201d\u6bb5\uff0c\u5f53\u8fdb\u7a0b\u9000\u51fa\u65f6\u4f1a\u6267\u884c\u201c.finit\u201d\u6bb5\u4e2d\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u7528\u6765\u5b9e\u73b0\u7c7b\u4f3cC++\u5168\u5c40\u5bf9\u8c61\u6790\u6784\u4e4b\u7c7b\u7684\u64cd\u4f5c\u3002</p> <p>\u5f53\u5b8c\u6210\u4e86\u91cd\u5b9a\u4f4d\u548c\u521d\u59cb\u5316\u4e4b\u540e\uff0c\u6240\u6709\u7684\u51c6\u5907\u5de5\u4f5c\u5c31\u5ba3\u544a\u5b8c\u6210\u4e86\uff0c\u6240\u9700\u8981\u7684\u5171\u4eab\u5bf9\u8c61\u4e5f\u90fd\u5df2\u7ecf\u88c5\u8f7d\u5e76\u4e14\u94fe\u63a5\u5b8c\u6210\u4e86\uff0c\u8fd9\u65f6\u5019\u52a8\u6001\u94fe\u63a5\u5668\u7684\u5de5\u4f5c\u4e5f\u5c31\u5b8c\u6210\u4e86\uff0c\u5c06\u8fdb\u7a0b\u7684\u63a7\u5236\u6743\u8f6c\u4ea4\u7ed9\u7a0b\u5e8f\u7684\u5165\u53e3\u5e76\u4e14\u5f00\u59cb\u6267\u884c\u3002</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_27","title":"\u8fd0\u884c\u65f6\u52a0\u8f7d","text":"<p>\u652f\u6301\u52a8\u6001\u94fe\u63a5\u7684\u7cfb\u7edf\u5f80\u5f80\u90fd\u652f\u6301\u4e00\u79cd\u66f4\u52a0\u7075\u6d3b\u7684\u6a21\u5757\u52a0\u8f7d\u65b9\u5f0f\uff0c\u53eb\u505a\u663e\u5f0f\u8fd0\u884c\u65f6\u94fe\u63a5\uff08Explicit Run-time Linking\uff09\uff0c\u6709\u65f6\u5019\u4e5f\u53eb\u505a\u8fd0\u884c\u65f6\u52a0\u8f7d\u3002\u4e5f\u5c31\u662f\u8ba9\u7a0b\u5e8f\u81ea\u5df1\u5728\u8fd0\u884c\u65f6\u63a7\u5236\u52a0\u8f7d\u6307\u5b9a\u7684\u6a21\u5757\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u4e0d\u9700\u8981\u8be5\u6a21\u5757\u65f6\u5c06\u5176\u5378\u8f7d\u3002</p> <p>\u8fd9\u79cd\u8fd0\u884c\u65f6\u52a0\u8f7d\u4f7f\u5f97\u7a0b\u5e8f\u7684\u6a21\u5757\u7ec4\u7ec7\u53d8\u5f97\u5f88\u7075\u6d3b\uff0c\u5f53\u7a0b\u5e8f\u9700\u8981\u7528\u5230\u67d0\u4e2a\u63d2\u4ef6\u6216\u8005\u9a71\u52a8\u7684\u65f6\u5019\uff0c\u624d\u5c06\u76f8\u5e94\u7684\u6a21\u5757\u88c5\u8f7d\u8fdb\u6765\uff0c\u800c\u4e0d\u9700\u8981\u4ece\u4e00\u5f00\u59cb\u5c31\u5c06\u4ed6\u4eec\u5168\u90e8\u88c5\u8f7d\u8fdb\u6765\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u7a0b\u5e8f\u542f\u52a8\u65f6\u95f4\u548c\u5185\u5b58\u4f7f\u7528\u3002\u5e76\u4e14\u7a0b\u5e8f\u53ef\u4ee5\u5728\u8fd0\u884c\u7684\u65f6\u5019\u91cd\u65b0\u52a0\u8f7d\u67d0\u4e2a\u6a21\u5757\uff0c\u8fd9\u6837\u4f7f\u5f97\u7a0b\u5e8f\u672c\u8eab\u4e0d\u5fc5\u91cd\u65b0\u542f\u52a8\u800c\u5b9e\u73b0\u6a21\u5757\u7684\u589e\u52a0\u3001\u5220\u9664\u3001\u66f4\u65b0\u7b49\uff0c\u8fd9\u5bf9\u4e8e\u5f88\u591a\u9700\u8981\u957f\u671f\u8fd0\u884c\u7684\u7a0b\u5e8f\u6765\u8bf4\u662f\u5f88\u5927\u7684\u4f18\u52bf\u3002</p> <p>\u5728 Linux \u4e2d\uff0c\u52a8\u6001\u5e93\u53ef\u4ee5\u901a\u8fc7\u52a8\u6001\u94fe\u63a5\u5668\u63d0\u4f9b\u7684\u4e00\u7cfb\u5217 API \u8fd0\u884c\u65f6\u52a0\u8f7d\uff0c\u5177\u4f53\u5730\u8bb2\u5171\u67094\u4e2a\u51fd\u6570\uff1a\u6253\u5f00\u52a8\u6001\u5e93\uff08dlopen\uff09\u3001\u67e5\u627e\u7b26\u53f7\uff08dlsym\uff09\u3001\u9519\u8bef\u5904\u7406\uff08dlerror\uff09\u4ee5\u53ca\u5173\u95ed\u52a8\u6001\u5e93\uff08dlclose\uff09</p> <p>\u5728 Android \u5927\u578b\u5e94\u7528\u4e2d\uff0c\u7ecf\u5e38\u4f1a\u4f7f\u7528\u4e0a\u8ff0 dl \u51fd\u6570\u6253\u5f00\u7cfb\u7edf\u52a8\u6001\u5e93\u505a\u4e00\u4e9b hook \u64cd\u4f5c</p>"},{"location":"foundation/self-cultivation/dynamic-link/#_28","title":"\u603b\u7ed3","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u52a8\u6001\u94fe\u63a5\uff0c\u52a8\u6001\u94fe\u63a5\u4e2d\u7684\u88c5\u8f7d\u65f6\u91cd\u5b9a\u4f4d\u4e0e\u5730\u5740\u65e0\u5173\u4ee3\u7801\u6280\u672f\u7684\u4f7f\u7528\uff0cElf \u6587\u4ef6\u4e2d\u52a8\u6001\u94fe\u63a5\u7684\u7ed3\u6784\uff0c\u4ee5\u53ca\u52a8\u6001\u94fe\u63a5\u7684\u6b65\u9aa4\u548c\u5b9e\u73b0\u7b49\u5185\u5bb9</p> <p>\u52a8\u6001\u94fe\u63a5\u4e2d\u7684 .got\uff0c.got.plt \u8868\uff0c\u8fd0\u884c\u65f6\u52a0\u8f7d\u7b49\u5185\u5bb9\u662f\u638c\u63e1 Native Hook \u6280\u672f\u7684\u57fa\u7840\uff0c\u5728 Android \u6027\u80fd\u4f18\u5316\u4e2d\u975e\u5e38\u5e38\u7528\u3002</p>"},{"location":"foundation/self-cultivation/elf-file-detail/","title":"Elf \u6587\u4ef6\u683c\u5f0f\u8be6\u89e3","text":"<p>\u6700\u8fd1\u5728\u8bfb\u300a\u7a0b\u5e8f\u5458\u7684\u81ea\u6211\u4fee\u517b\uff1a\u94fe\u63a5\uff0c\u88c5\u8f7d\u4e0e\u5e93\u300b\uff0c\u5176\u5b9e\u8fd9\u672c\u4e66\u8ddf Android \u5f00\u53d1\u7684\u8054\u7cfb\u8fd8\u633a\u7d27\u5bc6\u7684\uff0c\u65e0\u8bba\u662f NDK \u5f00\u53d1\uff0c\u6216\u8005\u662f\u6027\u80fd\u4f18\u5316\u4e2d\u4e00\u4e9b\u5e38\u7528\u7684 Native Hoook \u624b\u6bb5\uff0c\u90fd\u9700\u8981\u4e86\u89e3\u4e00\u4e9b\u94fe\u63a5\uff0c\u88c5\u8f7d\u76f8\u5173\u7684\u77e5\u8bc6\u70b9\u3002\u672c\u6587\u4e3a\u8bfb\u4e66\u7b14\u8bb0\u3002</p>"},{"location":"foundation/self-cultivation/elf-file-detail/#elf_1","title":"ELF \u6587\u4ef6\u662f\u4ec0\u4e48\uff1f","text":"<p>ELF \u5373 Executable and Linkable Format\uff0c\u662f linux \u4e0b\u7684\u53ef\u6267\u884c\u6587\u4ef6\u3002</p> <p>\u9664\u4e86 ELF \u6587\u4ef6\u672c\u8eab\uff0c\u6e90\u4ee3\u7801\u7f16\u8bd1\u540e\u4f46\u672a\u94fe\u63a5\u7684\u4e2d\u95f4\u6587\u4ef6(.o \u6587\u4ef6)\uff0c\u52a8\u6001\u94fe\u63a5\u5e93(.so \u6587\u4ef6)\uff0c\u9759\u6001\u94fe\u63a5\u5e93(.a \u6587\u4ef6)\uff0c\u90fd\u6309\u7167 ELF \u6587\u4ef6\u683c\u5f0f\u5b58\u50a8.</p> <p>ELF \u6587\u4ef6\u6807\u51c6\u4e2d\u628a\u7cfb\u7edf\u4e2d\u91c7\u7528 ELF \u683c\u5f0f\u7684\u6587\u4ef6\u5206\u4e3a\u4ee5\u4e0b 4 \u7c7b</p> <ul> <li>\u53ef\u91cd\u5b9a\u4f4d\u6587\u4ef6(relocatable file)\uff1a\u5305\u62ec .o \u6587\u4ef6\u548c .a \u6587\u4ef6</li> <li>\u53ef\u6267\u884c\u6587\u4ef6(executable file)\uff1a\u5373 EFL \u53ef\u6267\u884c\u6587\u4ef6\uff0c\u901a\u5e38\u6ca1\u6709\u540e\u7f00</li> <li>\u5171\u4eab\u5e93\u6587\u4ef6(shared object file)\uff1a\u5373 .so \u6587\u4ef6</li> <li>\u6838\u5fc3\u8f6c\u50a8\u6587\u4ef6(core dump file): \u5373 core dump \u6587\u4ef6</li> </ul>"},{"location":"foundation/self-cultivation/elf-file-detail/#elf_2","title":"ELF \u6587\u4ef6\u603b\u4f53\u7ed3\u6784","text":"<p>\u4e00\u4e2a ELF \u6587\u4ef6\u7684\u603b\u4f53\u7ed3\u6784\u5982\u4e0a\u56fe\u6240\u793a\uff08\u4e0a\u56fe\u4e3a\u94fe\u63a5\u89c6\u56fe\uff0c\u6267\u884c\u89c6\u56fe\u7565\u6709\u4e0d\u540c\uff09\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9</p> <ul> <li>ELF Header\uff0cELF\u6587\u4ef6\u5934\uff0c\u5b83\u5305\u542b\u4e86\u63cf\u8ff0\u6574\u4e2a\u6587\u4ef6\u7684\u57fa\u672c\u5c5e\u6027</li> <li>ELF \u6587\u4ef6\u4e2d\u7684\u5404\u4e2a\u6bb5(section)</li> <li>\u6bb5\u8868(section header table), \u8be5\u8868\u63cf\u8ff0\u4e86 ELF \u6587\u4ef6\u5305\u542b\u7684\u6240\u6709\u6bb5\u7684\u4fe1\u606f\uff0c\u6bd4\u5982\u6bcf\u4e2a\u6bb5\u7684\u6bb5\u540d\uff0c\u6bb5\u7684\u957f\u5ea6\u7b49</li> <li>\u5176\u4ed6\u4e00\u4e9b\u8f85\u52a9\u7ed3\u6784\uff0c\u5982\u5b57\u7b26\u4e32\u8868\uff0c\u7b26\u53f7\u8868\u7b49</li> </ul>"},{"location":"foundation/self-cultivation/elf-file-detail/#elf_3","title":"ELF \u6587\u4ef6\u7ed3\u6784\u8be6\u89e3","text":"<p>\u5728\u4e0a\u9762\u6211\u4eec\u4e86\u89e3\u4e86 ELF \u6587\u4ef6\u7684\u603b\u4f53\u7ed3\u6784\uff0c\u4f46\u8033\u542c\u4e3a\u865a\uff0c\u773c\u89c1\u4e3a\u5b9e\uff0c\u6211\u4eec\u63a5\u4e0b\u6765\u5b9e\u64cd\u4e00\u4e0b\uff0c\u770b\u4e0b Elf \u6587\u4ef6\u5177\u4f53\u662f\u600e\u4e48\u6837\u7684</p> <p>\u9996\u5148\u6211\u4eec\u6dfb\u52a0\u4e00\u4e2a<code>SimpleSection.c</code>\u6587\u4ef6\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>int printf(const char *format, ...);\n\nint global_init_var = 84;\nint global_uninit_var;\n\nvoid fun1(int i)\n{\n    printf(\"%d\\n\", i);\n}\n\nint main(void)\n{\n    static int static_var = 85;\n    static int static_var2;\n\n    int a = 1;\n    int b;\n    fun1(static_var + static_var2 + a + b);\n    return a;\n}\n</code></pre> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u901a\u8fc7<code>gcc -c SimpleSection.c</code>\u547d\u4ee4\u53ea\u7f16\u8bd1\u4e0d\u94fe\u63a5\u751f\u6210\u76ee\u6807\u6587\u4ef6\uff1aSimpleSection.o\uff0c\u8fd9\u4e5f\u662f\u4e00\u4e2a ELF \u6587\u4ef6\uff0c\u6211\u4eec\u63a5\u4e0b\u6765\u5c31\u6765\u5206\u6790\u8fd9\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9</p>"},{"location":"foundation/self-cultivation/elf-file-detail/#_1","title":"\u6587\u4ef6\u5934","text":"<pre><code>$ readelf -h SimpleSection.o\n\nELF Header:\n  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00 \n  Class:                             ELF64\n  Data:                              2's complement, little endian\n  Version:                           1 (current)\n  OS/ABI:                            UNIX - System V\n  ABI Version:                       0\n  Type:                              REL (Relocatable file)\n  Machine:                           Advanced Micro Devices X86-64\n  Version:                           0x1\n  Entry point address:               0x0\n  Start of program headers:          0 (bytes into file)\n  Start of section headers:          1184 (bytes into file)\n  Flags:                             0x0\n  Size of this header:               64 (bytes)\n  Size of program headers:           0 (bytes)\n  Number of program headers:         0\n  Size of section headers:           64 (bytes)\n  Number of section headers:         14\n  Section header string table index: 13\n</code></pre> <p>\u5982\u4e0a\u6240\u793a\uff0c\u901a\u8fc7<code>readelf</code>\u547d\u4ee4\u83b7\u53d6\u4e86\u6587\u4ef6\u5934\uff0c\u53ef\u4ee5\u770b\u5230\uff0cELF \u7684\u6587\u4ef6\u5934\u4e2d\u5b9a\u4e49\u4e86ELF\u9b54\u6570\u3001\u6587\u4ef6\u673a\u5668\u5b57\u8282\u957f\u5ea6\u3001\u6570\u636e\u5b58\u50a8\u65b9\u5f0f\u3001\u7248\u672c\u3001\u8fd0\u884c\u5e73\u53f0\u3001ABI\u7248\u672c\u3001\u6587\u4ef6\u7c7b\u578b\u3001\u786c\u4ef6\u5e73\u53f0\u3001\u786c\u4ef6\u5e73\u53f0\u7248\u672c\u3001\u5165\u53e3\u5730\u5740\u3001\u7a0b\u5e8f\u5934\u5165\u53e3\u548c\u957f\u5ea6\u3001\u6bb5\u8868\u7684\u4f4d\u7f6e\u548c\u957f\u5ea6\u53ca\u6bb5\u7684\u6570\u91cf\u7b49\u4fe1\u606f\uff0c\u5305\u542b\u4e86\u63cf\u8ff0\u6574\u4e2a\u6587\u4ef6\u7684\u57fa\u672c\u5c5e\u6027</p> <p>ELF \u6587\u4ef6\u5934\u7ed3\u6784\u53ca\u76f8\u5173\u5e38\u6570\u88ab\u5b9a\u4e49\u5728<code>/usr/include/elf.h</code>\u6587\u4ef6\u4e2d\uff0creadelf \u8f93\u51fa\u7684\u4fe1\u606f\u4e0e\u8fd9\u4e9b\u7ed3\u6784\u5f88\u591a\u90fd\u53ef\u4ee5\u4e00\u4e00\u5bf9\u5e94\uff0c\u611f\u5174\u8da3\u7684\u53ef\u4ee5\u81ea\u884c\u67e5\u770b</p>"},{"location":"foundation/self-cultivation/elf-file-detail/#elf_4","title":"ELF \u9b54\u6570","text":"<p>\u5934\u6587\u4ef6\u4e2d\u6bd4\u8f83\u6709\u610f\u601d\u7684\u662f\u9b54\u6570\uff0c\u9b54\u6570\u7684\u4f5c\u7528\u662f\u7528\u6765\u786e\u8ba4\u6587\u4ef6\u7684\u7c7b\u578b\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5728\u52a0\u8f7d\u53ef\u6267\u884c\u6587\u4ef6\u65f6\u4f1a\u68c0\u9a8c\u9b54\u6570\u662f\u5426\u6b63\u786e\uff0c\u5982\u679c\u4e0d\u6b63\u786e\u5219\u4f1a\u62d2\u7edd\u52a0\u8f7d</p> <p>\u6bd4\u5982\u6211\u4eec\u4e0a\u9762\u7684\u8f93\u51fa\uff0c\u6700\u5f00\u59cb\u7684 4 \u4e2a\u5b57\u8282\u662f\u6240\u6709 ELF \u6587\u4ef6\u90fd\u5fc5\u987b\u76f8\u540c\u7684\u6807\u8bc6\u7801\uff1a<code>0x7f</code>, <code>0x45</code>, <code>0x4c</code>, <code>0x46</code>, \u7b2c\u4e00\u5b57\u8282\u5bf9\u5e94 DEL \u63a7\u5236\u7b26\u7684 ASCII \u7801\uff0c\u540e\u9762 3 \u4e2a\u5b57\u8282\u5219\u6b63\u597d\u662f ELF \u4e09\u4e2a\u5b57\u6bcd\u7684 ASCII \u7801</p> <p>\u7b2c 5 \u4e2a\u5b57\u8282\u7528\u4e8e\u6807\u8bc6 ELF \u6587\u4ef6\u7c7b\uff0c0x01 \u8868\u793a 32 \u4f4d\uff0c0x02 \u8868\u793a 64 \u4f4d\uff0c\u7b2c 6 \u4e2a\u5b57\u8282\u7528\u4e8e\u6807\u8bb0\u5b57\u8282\u5e8f\uff0c\u89c4\u5b9a\u8be5 ELF \u6587\u4ef6\u662f\u5927\u7aef\u8fd8\u662f\u5c0f\u7aef\u7684\uff0c\u7b2c 7 \u4e2a\u5b57\u8282\u7528\u4e8e\u6807\u8bb0 ELF \u6587\u4ef6\u4e3b\u7248\u672c\u53f7\uff0c\u4e00\u822c\u662f 1</p> <p>\u800c\u540e\u9762\u7684 9 \u4e2a\u5b57\u8282\uff0cELF \u6807\u51c6\u8fd8\u6ca1\u6709\u5b9a\u4e49\uff0c\u4e00\u822c\u586b0\uff0c\u6709\u4e9b\u5e73\u53f0\u4f1a\u4f7f\u7528\u8fd9 9 \u4e2a\u5b57\u8282\u4f5c\u4e3a\u6269\u5c55\u6807\u5fd7</p>"},{"location":"foundation/self-cultivation/elf-file-detail/#_2","title":"\u6bb5\u8868","text":"<p>\u5728\u5934\u6587\u4ef6\u4e4b\u540e\u5c31\u662f ELF \u6587\u4ef6\u4e2d\u5404\u79cd\u5404\u6837\u7684\u6bb5\u4e86\uff0c\u6211\u4eec\u901a\u8fc7 readelf \u547d\u4ee4\u6765\u67e5\u770b\u6bb5\u8868\uff0c\u6bb5\u8868\u4e2d\u8bb0\u5f55\u4e86\u6bcf\u4e2a\u6bb5\u7684\u6bb5\u540d\uff0c\u6bb5\u7684\u957f\u5ea6\uff0c\u5728\u6587\u4ef6\u4e2d\u7684\u504f\u79fb\uff0c\u8bfb\u5199\u6743\u9650\uff0c\u4ee5\u53ca\u5176\u5b83\u5c5e\u6027</p> <pre><code>$ readelf -S SimpleSection.o\n\nThere are 14 section headers, starting at offset 0x4a0:\n\nSection Headers:\n  [Nr] Name              Type             Address           Offset    Size              EntSize          Flags  Link  Info  Align\n  [ 0]                   NULL             0000000000000000  00000000  0000000000000000  0000000000000000           0     0     0\n  [ 1] .text             PROGBITS         0000000000000000  00000040  000000000000005f  0000000000000000  AX       0     0     1\n  [ 2] .rela.text        RELA             0000000000000000  00000380  0000000000000078  0000000000000018   I      11     1     8\n  [ 3] .data             PROGBITS         0000000000000000  000000a0  0000000000000008  0000000000000000  WA       0     0     4\n  [ 4] .bss              NOBITS           0000000000000000  000000a8  0000000000000004  0000000000000000  WA       0     0     4\n  [ 5] .rodata           PROGBITS         0000000000000000  000000a8  0000000000000004  0000000000000000   A       0     0     1\n  [ 6] .comment          PROGBITS         0000000000000000  000000ac  000000000000002c  0000000000000001  MS       0     0     1\n  [ 7] .note.GNU-stack   PROGBITS         0000000000000000  000000d8  0000000000000000  0000000000000000           0     0     1\n  [ 8] .note.gnu.propert NOTE             0000000000000000  000000d8  0000000000000020  0000000000000000   A       0     0     8\n  [ 9] .eh_frame         PROGBITS         0000000000000000  000000f8  0000000000000058  0000000000000000   A       0     0     8\n  [10] .rela.eh_frame    RELA             0000000000000000  000003f8  0000000000000030  0000000000000018   I      11     9     8\n  [11] .symtab           SYMTAB           0000000000000000  00000150  00000000000001b0  0000000000000018          12    12     8\n  [12] .strtab           STRTAB           0000000000000000  00000300  000000000000007b  0000000000000000           0     0     1\n  [13] .shstrtab         STRTAB           0000000000000000  00000428  0000000000000074  0000000000000000           0     0     1\nKey to Flags:\n  W (write), A (alloc), X (execute), M (merge), S (strings), I (info),\n  L (link order), O (extra OS processing required), G (group), T (TLS),\n  C (compressed), x (unknown), o (OS specific), E (exclude),\n  l (large), p (processor specific)\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u6bb5\u8868\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u6570\u7ec4\u7684\u6bcf\u4e00\u9879\u5bf9\u5e94\u6bcf\u4e00\u4e2a\u6bb5\uff0c\u5176\u4e2d\u7b2c\u4e00\u4e2a\u9879\u662f\u65e0\u6548\u7684\uff0c\u7c7b\u578b\u4e3a<code>NULL</code>\uff0c\u56e0\u6b64<code>SimpleSection.o</code>\u5171\u6709 13 \u4e2a\u6709\u6548\u7684\u6bb5\uff0c\u6bb5\u8868\u5bf9\u5e94\u7684\u7ed3\u6784\u4f53\u4e5f\u5b9a\u4e49\u5728<code>/usr/include/elf.h</code>\u6587\u4ef6\u4e2d\uff0c\u611f\u5174\u8da3\u7684\u53ef\u4ee5\u81ea\u884c\u67e5\u770b</p> <p>\u4e0b\u9762\u6211\u4eec\u4ecb\u7ecd\u4e00\u4e0b\u6bb5\u8868\u5404\u4e2a\u5b57\u6bb5\u7684\u542b\u4e49</p> \u5b57\u6bb5 \u542b\u4e49 Name \u6bb5\u540d\uff0c\u6bb5\u540d\u662f\u4e2a\u5b57\u7b26\u4e32\uff0c\u4f4d\u4e8e\u4e00\u4e2a\u53eb\u4f5c .shstrtab \u7684\u5b57\u7b26\u4e32\u8868\u4e2d Type \u6bb5\u7684\u7c7b\u578b\uff0c\u6bb5\u540d\u53ea\u5728\u7f16\u8bd1\u548c\u94fe\u63a5\u9636\u6bb5\u6709\u4f5c\u7528\uff0c\u4e0d\u80fd\u771f\u6b63\u5730\u8868\u793a\u6bb5\u7684\u7c7b\u578b\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5c06\u4e00\u4e2a\u6570\u636e\u6bb5\u547d\u540d\u4e3a\".txt\"\uff0c\u5bf9\u4e8e\u7f16\u8bd1\u5668\u548c\u94fe\u63a5\u5668\u6765\u8bf4\uff0c\u4e3b\u8981\u51b3\u5b9a\u6bb5\u7684\u5c5e\u6027\u7684\u662f\u6bb5\u7684\u7c7b\u578b\u4e0e\u6bb5\u7684\u6807\u5fd7\u4f4d Flags \u6bb5\u7684\u6807\u5fd7\u4f4d\uff0c\u6bb5\u7684\u6807\u5fd7\u4f4d\u8868\u793a\u8be5\u6bb5\u5728\u8fdb\u7a0b\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u5c5e\u6027\uff0c\u6bd4\u5982\u662f\u5426\u53ef\u5199\uff0c\u662f\u5426\u53ef\u6267\u884c\u7b49 Address \u6bb5\u865a\u62df\u5730\u5740\uff0c\u5982\u679c\u8be5\u6bb5\u53ef\u4ee5\u88ab\u52a0\u8f7d\uff0c\u5219\u4e3a\u8be5\u6bb5\u88ab\u52a0\u8f7d\u540e\u5728\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u865a\u62df\u5730\u5740\uff0c\u5426\u5219\u4e3a 0 Offset \u6bb5\u504f\u79fb\uff0c\u5982\u679c\u8be5\u6bb5\u5b58\u5728\u4e8e\u6587\u4ef6\u4e2d\uff0c\u5219\u8868\u793a\u8be5\u6bb5\u5728\u6587\u4ef6\u4e2d\u7684\u504f\u79fb\uff0c\u5426\u5219\u65e0\u610f\u4e49\uff0c\u6bd4\u5982\u5bf9\u4e8e .bss \u6bb5\u5c31\u6ca1\u6709\u610f\u4e49 Size \u6bb5\u7684\u957f\u5ea6 Link \u548c Info \u6bb5\u7684\u94fe\u63a5\u4fe1\u606f\uff0c\u5982\u679c\u6bb5\u7684\u7c7b\u578b\u662f\u4e0e\u94fe\u63a5\u76f8\u5173\u7684\uff0c\u6bd4\u5982\u91cd\u5b9a\u4f4d\u8868\uff0c\u7b26\u53f7\u8868\u7b49\uff0c\u5219\u8be5\u5b57\u6bb5\u6709\u610f\u4e49\uff0c\u5426\u5219\u65e0\u610f\u4e49 Align \u6bb5\u5bf9\u9f50\u5730\u5740\uff0c\u6709\u4e9b\u6bb5\u5bf9\u6bb5\u5730\u5740\u5bf9\u9f50\u6709\u8981\u6c42\uff0c\u7531\u4e8e\u5730\u5740\u5bf9\u9f50\u7684\u6570\u91cf\u90fd\u662f 2 \u7684\u6307\u6570\u500d\uff0cAlign \u8868\u793a\u5bf9\u9f50\u6570\u91cf\u4e2d\u7684\u6307\u6570\uff0c\u6bd4\u5982\u5f53 Align = 3 \u65f6\u8868\u793a 8 \u500d\uff0c\u5f53 Algin \u4e3a 0 \u6216\u8005 1 \u65f6\u8868\u793a\u6ca1\u6709\u5bf9\u9f50\u8981\u6c42 EntSize \u9879\u7684\u957f\u5ea6\uff0c\u6709\u4e9b\u6bb5\u5305\u542b\u4e86\u4e00\u4e9b\u56fa\u5b9a\u5927\u5c0f\u7684\u9879\uff0c\u6bd4\u5982\u7b26\u53f7\u8868\uff0c\u5b83\u5305\u542b\u7684\u6bcf\u4e2a\u7b26\u53f7\u6240\u5360\u7684\u5927\u5c0f\u662f\u4e00\u6837\u7684\uff0c\u5bf9\u4e8e\u8fd9\u79cd\u6bb5\uff0cEntSize \u8868\u793a\u6bcf\u4e00\u9879\u7684\u5927\u5c0f\u3002\u5982\u679c\u4e3a 0 \u8868\u793a\u8be5\u6bb5\u6ca1\u6709\u56fa\u5b9a\u5927\u5c0f\u7684\u9879 <p>\u5728\u4e86\u89e3\u4e86\u6bb5\u8868\u7684\u7ed3\u6784\u4e4b\u540e\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u4e00\u4e0b\u5404\u4e2a\u6bb5\u7684\u5177\u4f53\u5185\u5bb9</p>"},{"location":"foundation/self-cultivation/elf-file-detail/#text","title":".text \u4ee3\u7801\u6bb5","text":"<p>\u9996\u5148\u6211\u4eec\u901a\u8fc7 objdump \u547d\u4ee4\u6765\u770b\u4e0b\u4ee3\u7801\u6bb5\u7684\u5177\u4f53\u5185\u5bb9\uff0cobjdump \u7684 \"-s\" \u53c2\u6570\u53ef\u4ee5\u5c06\u6240\u6709\u6bb5\u7684\u5185\u5bb9\u4ee5 16 \u8fdb\u5236\u7684\u65b9\u5f0f\u6253\u5370\u51fa\u6765\uff0c\"-d\" \u53c2\u6570\u53ef\u4ee5\u5c06\u6240\u6709\u5305\u542b\u6307\u4ee4\u7684\u6bb5\u53cd\u6c47\u7f16\uff0c\u7ed3\u679c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ objdump -s -d SimpleSection.o\n\nContents of section .text:\n 0000 f30f1efa 554889e5 4883ec10 897dfc8b  ....UH..H....}..\n 0010 45fc89c6 488d3d00 000000b8 00000000  E...H.=.........\n 0020 e8000000 0090c9c3 f30f1efa 554889e5  ............UH..\n 0030 4883ec10 c745f801 0000008b 15000000  H....E..........\n 0040 008b0500 00000001 c28b45f8 01c28b45  ..........E....E\n 0050 fc01d089 c7e80000 00008b45 f8c9c3    ...........E... \n\nDisassembly of section .text:\n\n0000000000000000 &lt;fun1&gt;:\n   0:   f3 0f 1e fa             endbr64 \n   4:   55                      push   %rbp\n   5:   48 89 e5                mov    %rsp,%rbp\n   8:   48 83 ec 10             sub    $0x10,%rsp\n   c:   89 7d fc                mov    %edi,-0x4(%rbp)\n   f:   8b 45 fc                mov    -0x4(%rbp),%eax\n  12:   89 c6                   mov    %eax,%esi\n  14:   48 8d 3d 00 00 00 00    lea    0x0(%rip),%rdi        # 1b &lt;fun1+0x1b&gt;\n  1b:   b8 00 00 00 00          mov    $0x0,%eax\n  20:   e8 00 00 00 00          callq  25 &lt;fun1+0x25&gt;\n  25:   90                      nop\n  26:   c9                      leaveq \n  27:   c3                      retq   \n\n0000000000000028 &lt;main&gt;:\n  28:   f3 0f 1e fa             endbr64 \n  2c:   55                      push   %rbp\n  2d:   48 89 e5                mov    %rsp,%rbp\n  30:   48 83 ec 10             sub    $0x10,%rsp\n  34:   c7 45 f8 01 00 00 00    movl   $0x1,-0x8(%rbp)\n  3b:   8b 15 00 00 00 00       mov    0x0(%rip),%edx        # 41 &lt;main+0x19&gt;\n  41:   8b 05 00 00 00 00       mov    0x0(%rip),%eax        # 47 &lt;main+0x1f&gt;\n  47:   01 c2                   add    %eax,%edx\n  49:   8b 45 f8                mov    -0x8(%rbp),%eax\n  4c:   01 c2                   add    %eax,%edx\n  4e:   8b 45 fc                mov    -0x4(%rbp),%eax\n  51:   01 d0                   add    %edx,%eax\n  53:   89 c7                   mov    %eax,%edi\n  55:   e8 00 00 00 00          callq  5a &lt;main+0x32&gt;\n  5a:   8b 45 f8                mov    -0x8(%rbp),%eax\n  5d:   c9                      leaveq \n  5e:   c3                      retq   \n</code></pre> <p><code>Contents of section .text</code>\u5c31\u662f.text\u7684\u6570\u636e\u4ee5\u5341\u516d\u8fdb\u5236\u65b9\u5f0f\u6253\u5370\u51fa\u6765\u7684\u5185\u5bb9\uff0c\u603b\u5171 0x5f \u5b57\u8282\uff0c\u6700\u5de6\u9762\u4e00\u5217\u662f\u504f\u79fb\u91cf\uff0c\u4e2d\u95f44\u5217\u662f\u5341\u516d\u8fdb\u5236\u5185\u5bb9\uff0c\u6700\u53f3\u9762\u4e00\u5217\u662f .text \u6bb5\u7684 ASCII \u7801\u5f62\u5f0f\u3002</p> <p><code>Disassembly of section .text</code>\u5219\u662f\u4ee3\u7801\u6bb5\u53cd\u6c47\u7f16\u7684\u7ed3\u679c\uff0c\u53ef\u4ee5\u5f88\u660e\u663e\u5730\u770b\u5230\uff0c.text \u6bb5\u4e2d\u7684\u5185\u5bb9\u5c31\u662f<code>SimpleSection.c</code>\u91cc\u4e24\u4e2a\u51fd\u6570<code>func1()</code>\u548c<code>main()</code>\u7684\u6307\u4ee4\u3002</p>"},{"location":"foundation/self-cultivation/elf-file-detail/#_3","title":"\u6570\u636e\u6bb5\u4e0e\u53ea\u8bfb\u6570\u636e\u6bb5","text":"<p>\u63a5\u4e0b\u6765\u6211\u4eec\u901a\u8fc7 objdump \u547d\u4ee4\u770b\u770b\u6570\u636e\u6bb5\u4e0e\u53ea\u8bfb\u6570\u636e\u6bb5\u7684\u5185\u5bb9</p> <pre><code>$ objdump -x -s -d SimpleSection.o\n\n...\n\nSections:\nIdx Name          Size      VMA               LMA               File off  Algn\n  1 .data         00000008  0000000000000000  0000000000000000  000000a0  2**2\n                  CONTENTS, ALLOC, LOAD, DATA\n  3 .rodata       00000004  0000000000000000  0000000000000000  000000a8  2**0\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n\nContents of section .data:\n 0000 54000000 55000000                    T...U...        \nContents of section .rodata:\n 0000 25640a00                             %d..                \n</code></pre> <p>.data \u6bb5\u4fdd\u5b58\u7684\u662f\u90a3\u4e9b\u5df2\u7ecf\u521d\u59cb\u5316\u4e86\u7684\u5168\u5c40\u9759\u6001\u53d8\u91cf\u548c\u5c40\u90e8\u9759\u6001\u53d8\u91cf\uff0c<code>SimpleSection.c</code>\u4e2d\u7684<code>global_init_var</code>\u4e0e<code>static_var</code>\u4e24\u4e2a\u53d8\u91cf\u5c5e\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u8fd9\u4e24\u4e2a\u53d8\u91cf\u6bcf\u4e2a4\u4e2a\u5b57\u8282\uff0c\u4e00\u5171\u521a\u597d 8 \u4e2a\u5b57\u8282\uff0c\u6240\u4ee5 .data \u6bb5\u7684\u5927\u5c0f\u4e3a8\u4e2a\u5b57\u8282</p> <p>.rodata \u6bb5\u5b58\u653e\u7684\u662f\u53ea\u8bfb\u6570\u636e\uff0c\u4e00\u822c\u662f\u7a0b\u5e8f\u4e2d\u7684\u53ea\u8bfb\u53d8\u91cf(\u5982 const \u4fee\u9970\u7684\u53d8\u91cf)\u548c\u5b57\u7b26\u4e32\u5e38\u91cf\uff0c\u6bd4\u5982\u5728<code>SimpleSection.c</code>\u4e2d\u8c03\u7528<code>printf</code>\u65f6\u7528\u5230\u7684\u5b57\u7b26\u4e32\u5e38\u91cf\uff0c\u5c31\u50a8\u5b58\u5728 .rodata \u6bb5\u4e2d\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6709\u7684\u7f16\u8bd1\u5668\u4f1a\u628a\u5b57\u7b26\u4e32\u5e38\u91cf\u653e\u5728 .data \u6bb5\u4e2d\uff0c\u800c\u4e0d\u4f1a\u5355\u72ec\u653e\u5728 .rodata \u6bb5\u4e2d</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u4e0b\u4e24\u4e2a\u6bb5\u4e2d\u5b58\u50a8\u7684\u5185\u5bb9</p> <p>.data \u4e2d\u5b58\u50a8\u7684\u5185\u5bb9\u5373<code>0x00000054</code>\u4e0e<code>0x00000055</code>\uff0c\u4ee5\u5c0f\u7aef\u5e8f\u5b58\u653e\uff0c\u5b83\u4eec\u7684\u503c\u6b63\u597d\u5bf9\u5e94\u5341\u8fdb\u5236\u7684<code>84</code>\u4e0e<code>85</code>\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u8d4b\u7ed9<code>global_init_var</code>\u4e0e<code>static_var</code>\u7684\u503c</p> <p>.rodata \u4e2d\u5b58\u50a8\u7684\u5185\u5bb9\u4e3a<code>0x25640a00</code>\uff0c\u6b63\u597d\u5bf9\u5e94<code>%d\\n</code>\u7684 ASCII \u7801\uff0c\u53ef\u4ee5\u5bf9\u7167ASCII\u7801\u4e00\u89c8\u8868\uff0cASCII\u7801\u5bf9\u7167\u8868\u67e5\u770b</p>"},{"location":"foundation/self-cultivation/elf-file-detail/#bss","title":".bss \u6bb5","text":"<p>.bss \u6bb5\u5b58\u653e\u672a\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\u548c\u5c40\u90e8\u9759\u6001\u53d8\u91cf\uff0c\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u4e3a\u4ec0\u4e48\u8981\u628a\u5df2\u521d\u59cb\u5316\u7684\u53d8\u91cf\u548c\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf\u5206\u5f00\u5b58\u50a8\u7684\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u76f4\u63a5\u653e\u5728 .data \u6bb5\u4e2d\uff1f</p> <p>\u7b54\u6848\u662f .bss \u6bb5\u4e0d\u5360\u7a7a\u95f4\uff0c\u6211\u4eec\u63a5\u4e0b\u6765\u770b\u4e00\u4e2a\u76f4\u89c2\u7684\u4f8b\u5b50\uff0c\u6765\u770b\u770b .bss \u7684\u4f5c\u7528</p> <pre><code>$ echo \"char array[1024*1024*64] = {'A'}; int main() {return 0;}\" | gcc -x c - -o data\n$ ls -lh data\n-rwxrwxrwx 1 codespace codespace 65M Jun 25 01:26 data\n$ echo \"char array[1024*1024*64]; int main() {return 0;}\" | gcc -x c - -o bss\n$ ls -lh bss\n-rwxrwxrwx 1 codespace codespace 17K Jun 25 01:27 bss\n</code></pre> <ul> <li>\u793a\u4f8b 1 \u4e2d\uff0carray \u53d8\u91cf\u5df2\u7ecf\u88ab\u521d\u59cb\u5316\uff0c\u5b58\u653e\u5728 .data \u6bb5\u4e2d\uff0c\u5360\u7528\u6587\u4ef6\u7a7a\u95f4\uff0c\u56e0\u6b64\u6574\u4e2a\u6587\u4ef6\u5927\u5c0f\u5171\u6709 65 M</li> <li>\u793a\u4f8b 2 \u4e2d\uff0carray \u53d8\u91cf\u672a\u88ab\u521d\u59cb\u5316\uff0c\u5b58\u653e\u5728 .bss \u6bb5\u4e2d\uff0c\u4e0d\u5360\u7528\u6587\u4ef6\u7a7a\u95f4\uff0c\u56e0\u6b64\u6574\u4e2a\u6587\u4ef6\u5927\u5c0f\u53ea\u6709 17 K</li> </ul> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5dee\u522b\u975e\u5e38\u5927\u3002\u5f53\u7136 .bss \u6bb5\u4e0d\u5360\u636e\u5b9e\u9645\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u4f46\u5b83\u7684\u5927\u5c0f\u4e0e\u7b26\u53f7\u8fd8\u662f\u8981\u6709\u5730\u65b9\u5b58\u50a8\uff0c.bss \u6bb5\u7684\u5927\u5c0f\u8bb0\u5f55\u5728\u6bb5\u8868\u4e2d\uff0c\u7b26\u53f7\u8bb0\u5f55\u5728\u7b26\u53f7\u8868\u4e2d\u3002\u5f53\u6587\u4ef6\u52a0\u8f7d\u8fd0\u884c\u65f6\uff0c\u624d\u5206\u914d\u7a7a\u95f4\u4ee5\u53ca\u521d\u59cb\u5316</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u7528 objdump \u547d\u4ee4\u6765\u770b\u770b<code>SimpleSection.o</code> \u7684 .bss \u6bb5\u7684\u5185\u5bb9</p> <pre><code>$ objdump -x -s -d SimpleSection.o\n\n...\nSections:\nIdx Name          Size      VMA               LMA               File off  Algn\n  2 .bss          00000004  0000000000000000  0000000000000000  000000a8  2**2\n                  ALLOC\nSYMBOL TABLE:\n0000000000000000 l     O .bss   0000000000000004 static_var2.1921\n0000000000000004       O *COM*  0000000000000004 global_uninit_var\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u672c\u6765\u9884\u671f .bass \u6bb5\u4e2d\u4f1a\u6709<code>global_uninit_var</code>\u4e0e<code>static_var2</code>\u4e24\u4e2a\u53d8\u91cf\uff0c\u5171 8 \u4e2a\u5b57\u8282\uff0c\u5b9e\u9645\u4e0a\u53ea\u6709<code>static_var2</code>\u4e00\u4e2a\u53d8\u91cf\uff0c4 \u4e2a\u5b57\u8282</p> <p>\u8fd9\u662f\u56e0\u4e3a\u6709\u4e9b\u7f16\u8bd1\u5668\u4f1a\u5c06\u5168\u5c40\u7684\u672a\u521d\u59cb\u5316\u53d8\u91cf\u5b58\u653e\u5728\u76ee\u6807\u6587\u4ef6.bss \u6bb5\uff0c\u6709\u4e9b\u5219\u4e0d\u5b58\u653e\uff0c\u53ea\u662f\u9884\u7559\u4e00\u4e2a\u672a\u5b9a\u4e49\u7684\u5168\u5c40\u53d8\u91cf\u7b26\u53f7\uff0c\u7b49\u5230\u6700\u7ec8\u94fe\u63a5\u6210\u53ef\u6267\u884c\u6587\u4ef6\u7684\u65f6\u5019\u518d\u5728 .bss \u6bb5\u5206\u914d\u7a7a\u95f4</p>"},{"location":"foundation/self-cultivation/elf-file-detail/#_4","title":"\u5176\u4ed6\u6bb5","text":"<p>\u9664\u4e86 .text, .data, .bss \u8fd9 3 \u4e2a\u6700\u5e38\u7528\u7684\u6bb5\u4e4b\u5916\uff0cELF \u6587\u4ef6\u4e5f\u5305\u542b\u4e00\u4e9b\u5176\u4ed6\u7684\u6bb5\uff0c\u4e0b\u9762\u5217\u51fa\u4e86\u4e00\u4e9b\u5e38\u89c1\u7684\u6bb5</p> \u6bb5\u540d \u8bf4\u660e .rodata1 \u53ea\u8bfb\u6570\u636e\u6bb5\uff0c\u5b58\u653e\u53ea\u8bfb\u6570\u636e\uff0c\u4e0e .rodata \u4e00\u6837 .comment \u5b58\u653e\u7f16\u8bd1\u5668\u7248\u672c\u4fe1\u606f .debug \u8c03\u8bd5\u4fe1\u606f .dynamic \u52a8\u6001\u94fe\u63a5\u4fe1\u606f .hash \u7b26\u53f7\u54c8\u5e0c\u8868 .line \u8c03\u8bd5\u65f6\u7684\u884c\u53f7\u8868\uff0c\u5373\u6e90\u4ee3\u7801\u884c\u53f7\u4e0e\u7f16\u8bd1\u540e\u6307\u4ee4\u7684\u5bf9\u5e94\u8868 .note \u989d\u5916\u7684\u7f16\u8bd1\u4fe1\u606f\uff0c\u5982\u7a0b\u5e8f\u7684\u516c\u53f8\u540d\uff0c\u53d1\u5e03\u7248\u672c\u53f7\u7b49 .strtab \u5b57\u7b26\u4e32\u8868\uff0c\u7528\u4e8e\u5b58\u50a8 ELF \u4e2d\u7684\u5404\u79cd\u5b57\u7b26\u4e32 .symtab \u7b26\u53f7\u8868 .shstrtab \u6bb5\u8868\u5b57\u7b26\u4e32\u8868\uff0c\u7528\u4e8e\u5b58\u50a8\u6bb5\u8868\u4e2d\u7528\u5230\u7684\u5b57\u7b26\u4e32 .plt .got \u52a8\u6001\u94fe\u63a5\u7684\u8df3\u8f6c\u8868\u548c\u5168\u5c40\u5165\u53e3\u8868 .init .finit \u7a0b\u5e8f\u521d\u59cb\u5316\u4e0e\u7ec8\u7ed3\u4ee3\u7801\u6bb5 .rel.text \u91cd\u5b9a\u4f4d\u8868 <p>\u8fd9\u91cc\u9762\u7684\u5f88\u591a\u6bb5\u6211\u4eec\u4e4b\u540e\u90fd\u4f1a\u7528\u5230\uff0c\u6bd4\u5982 PLT Hook \u4e2d\u4f1a\u7528\u5230\u7684 .plt .got \u6bb5\uff0c\u5728\u9759\u6001\u94fe\u63a5\u4e2d\u4f1a\u7528\u5230\u91cd\u5b9a\u4f4d\u8868\uff0c\u8fd9\u91cc\u53ef\u4ee5\u5148\u7559\u4e2a\u5370\u8c61</p>"},{"location":"foundation/self-cultivation/elf-file-detail/#elf_5","title":"Elf \u4e2d\u7684\u7b26\u53f7","text":"<p>\u94fe\u63a5\u8fc7\u7a0b\u7684\u672c\u8d28\u662f\u628a\u591a\u4e2a\u76ee\u6807\u6587\u4ef6\u6309\u7167\u4e00\u5b9a\u7684\u89c4\u5219\u62fc\u63a5\u8d77\u6765\uff0c\u5728\u94fe\u63a5\u8fc7\u7a0b\u4e2d\uff0c\u76ee\u6807\u6587\u4ef6\u7684\u62fc\u63a5\u5176\u5b9e\u5c31\u662f\u76ee\u6807\u6587\u4ef6\u4e4b\u95f4\u5bf9\u5730\u5740\u7684\u5f15\u7528\uff0c\u5373\u5bf9\u51fd\u6570\u548c\u53d8\u91cf\u7684\u5730\u5740\u7684\u5f15\u7528\u3002</p> <p>\u6bcf\u4e2a\u51fd\u6570\u6216\u53d8\u91cf\u90fd\u6709\u81ea\u5df1\u72ec\u7279\u7684\u540d\u5b57\uff0c\u624d\u80fd\u907f\u514d\u94fe\u63a5\u8fc7\u7a0b\u4e2d\u4e0d\u540c\u53d8\u91cf\u548c\u51fd\u6570\u4e4b\u95f4\u7684\u6df7\u6dc6\u3002\u5728\u94fe\u63a5\u4e2d\uff0c\u6211\u4eec\u5c06\u51fd\u6570\u548c\u53d8\u91cf\u7edf\u79f0\u4e3a\u7b26\u53f7\uff08Symbol\uff09\uff0c\u51fd\u6570\u540d\u6216\u53d8\u91cf\u540d\u5c31\u662f\u7b26\u53f7\u540d\uff08Symbol Name\uff09\u3002</p> <p>\u6574\u4e2a\u94fe\u63a5\u8fc7\u7a0b\u6b63\u662f\u57fa\u4e8e\u7b26\u53f7\u624d\u80fd\u591f\u6b63\u786e\u5b8c\u6210\u3002\u94fe\u63a5\u8fc7\u7a0b\u4e2d\u5f88\u5173\u952e\u7684\u4e00\u90e8\u5206\u5c31\u662f\u7b26\u53f7\u7684\u7ba1\u7406\uff0c\u6bcf\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u90fd\u4f1a\u6709\u4e00\u4e2a\u76f8\u5e94\u7684\u7b26\u53f7\u8868\uff08Symbol Table\uff09\uff0c\u8fd9\u4e2a\u8868\u91cc\u9762\u8bb0\u5f55\u4e86\u76ee\u6807\u6587\u4ef6\u4e2d\u6240\u7528\u5230\u7684\u6240\u6709\u7b26\u53f7\u3002\u6bcf\u4e2a\u5b9a\u4e49\u7684\u7b26\u53f7\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u503c\uff0c\u53eb\u505a\u7b26\u53f7\u503c\uff08Symbol Value\uff09\uff0c\u5bf9\u4e8e\u53d8\u91cf\u548c\u51fd\u6570\u6765\u8bf4\uff0c\u7b26\u53f7\u503c\u5c31\u662f\u5b83\u4eec\u7684\u5730\u5740</p> <p>\u6211\u4eec\u5c06\u7b26\u53f7\u8868\u4e2d\u7684\u7b26\u53f7\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7c7b:</p> <ul> <li>\u5b9a\u4e49\u5728\u672c\u76ee\u6807\u6587\u4ef6\u7684\u5168\u5c40\u7b26\u53f7\uff0c\u53ef\u4ee5\u88ab\u5176\u4ed6\u76ee\u6807\u6587\u4ef6\u5f15\u7528\u3002\u6bd4\u5982<code>SimpleSection.o</code>\u91cc\u9762\u7684<code>func1</code>\u3001<code>main</code>\u548c<code>global_init_var</code>\u3002</li> <li>\u5728\u672c\u76ee\u6807\u6587\u4ef6\u4e2d\u5f15\u7528\u7684\u5168\u5c40\u7b26\u53f7\uff0c\u5374\u6ca1\u6709\u5b9a\u4e49\u5728\u672c\u76ee\u6807\u6587\u4ef6\uff0c\u8fd9\u4e00\u822c\u53eb\u505a\u5916\u90e8\u7b26\u53f7\uff08External Symbol\uff09\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u524d\u9762\u6240\u8bb2\u7684\u7b26\u53f7\u5f15\u7528\u3002\u6bd4\u5982<code>SimpleSection.o</code>\u91cc\u9762\u7684<code>printf</code>\u3002</li> <li>\u6bb5\u540d\uff0c\u8fd9\u79cd\u7b26\u53f7\u5f80\u5f80\u7531\u7f16\u8bd1\u5668\u4ea7\u751f\uff0c\u5b83\u7684\u503c\u5c31\u662f\u8be5\u6bb5\u7684\u8d77\u59cb\u5730\u5740\u3002\u6bd4\u5982<code>SimpleSection.o</code>\u91cc\u9762\u7684<code>.text</code>\u3001<code>.data</code>\u7b49\u3002</li> <li>\u5c40\u90e8\u7b26\u53f7\uff0c\u8fd9\u7c7b\u7b26\u53f7\u53ea\u5728\u7f16\u8bd1\u5355\u5143\u5185\u90e8\u53ef\u89c1\u3002\u6bd4\u5982<code>SimpleSection.o</code>\u91cc\u9762\u7684<code>static_var</code>\u548c<code>static_var2</code>\u3002\u8c03\u8bd5\u5668\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u7b26\u53f7\u6765\u5206\u6790\u7a0b\u5e8f\u6216\u5d29\u6e83\u65f6\u7684\u6838\u5fc3\u8f6c\u50a8\u6587\u4ef6\u3002\u8fd9\u4e9b\u5c40\u90e8\u7b26\u53f7\u5bf9\u4e8e\u94fe\u63a5\u8fc7\u7a0b\u6ca1\u6709\u4f5c\u7528\uff0c\u94fe\u63a5\u5668\u5f80\u5f80\u4e5f\u5ffd\u7565\u5b83\u4eec\u3002</li> <li>\u884c\u53f7\u4fe1\u606f\uff0c\u5373\u76ee\u6807\u6587\u4ef6\u6307\u4ee4\u4e0e\u6e90\u4ee3\u7801\u4e2d\u4ee3\u7801\u884c\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u5b83\u4e5f\u662f\u53ef\u9009\u7684\u3002\u201d</li> </ul> <p>\u5176\u4e2d\u6700\u503c\u5f97\u5173\u6ce8\u7684\u5c31\u662f\u5168\u5c40\u7b26\u53f7\uff0c\u56e0\u4e3a\u94fe\u63a5\u8fc7\u7a0b\u53ea\u5173\u5fc3\u5168\u5c40\u7b26\u53f7\u7684\u76f8\u4e92\u62fc\u63a5\uff0c\u5c40\u90e8\u7b26\u53f7\u3001\u6bb5\u540d\u3001\u884c\u53f7\u7b49\u90fd\u662f\u6b21\u8981\u7684\uff0c\u5b83\u4eec\u5bf9\u4e8e\u5176\u4ed6\u76ee\u6807\u6587\u4ef6\u6765\u8bf4\u662f\u201c\u4e0d\u53ef\u89c1\u201d\u7684\uff0c\u5728\u94fe\u63a5\u8fc7\u7a0b\u4e2d\u4e5f\u662f\u65e0\u5173\u7d27\u8981\u7684</p>"},{"location":"foundation/self-cultivation/elf-file-detail/#elf_6","title":"ELF \u7b26\u53f7\u8868\u7684\u7ed3\u6784","text":"<p>\u9996\u5148\u6211\u4eec\u901a\u8fc7 readelf \u547d\u4ee4\u6765\u67e5\u770b<code>SimpleSection.o</code> \u7684\u7b26\u53f7\u8868</p> <pre><code>$ readelf -s SimpleSection.o\n\nSymbol table '.symtab' contains 18 entries:\n   Num:    Value          Size Type    Bind   Vis      Ndx Name\n     0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND \n     1: 0000000000000000     0 FILE    LOCAL  DEFAULT  ABS SimpleSection.c\n     2: 0000000000000000     0 SECTION LOCAL  DEFAULT    1 \n     3: 0000000000000000     0 SECTION LOCAL  DEFAULT    3 \n     4: 0000000000000000     0 SECTION LOCAL  DEFAULT    4 \n     5: 0000000000000000     0 SECTION LOCAL  DEFAULT    5 \n     6: 0000000000000004     4 OBJECT  LOCAL  DEFAULT    3 static_var.1920\n     7: 0000000000000000     4 OBJECT  LOCAL  DEFAULT    4 static_var2.1921\n     8: 0000000000000000     0 SECTION LOCAL  DEFAULT    7 \n     9: 0000000000000000     0 SECTION LOCAL  DEFAULT    8 \n    10: 0000000000000000     0 SECTION LOCAL  DEFAULT    9 \n    11: 0000000000000000     0 SECTION LOCAL  DEFAULT    6 \n    12: 0000000000000000     4 OBJECT  GLOBAL DEFAULT    3 global_init_var\n    13: 0000000000000004     4 OBJECT  GLOBAL DEFAULT  COM global_uninit_var\n    14: 0000000000000000    40 FUNC    GLOBAL DEFAULT    1 fun1\n    15: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND _GLOBAL_OFFSET_TABLE_\n    16: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND printf\n    17: 0000000000000028    55 FUNC    GLOBAL DEFAULT    1 main\n</code></pre> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u4ecb\u7ecd\u4e00\u4e2a\u5404\u4e2a\u5217\u7684\u542b\u4e49\uff0c\u5982\u4e0b\u8868\u6240\u793a</p> \u5b57\u6bb5 \u542b\u4e49 Name \u7b26\u53f7\u540d Value \u7b26\u53f7\u5bf9\u5e94\u7684\u503c\uff0c\u4e0d\u540c\u7684\u7b26\u53f7\uff0c\u5176\u503c\u7684\u542b\u4e49\u4e0d\u540c\uff0c\u89c1\u4e0b\u6587\u8be6\u7ec6\u89e3\u6790 Size \u7b26\u53f7\u5927\u5c0f\uff0c\u5bf9\u4e8e\u5305\u542b\u6570\u636e\u7684\u7b26\u53f7\uff0c\u8fd9\u4e2a\u503c\u662f\u6570\u636e\u7c7b\u578b\u7684\u5927\u5c0f\uff0c\u6bd4\u5982\u4e00\u4e2a int \u7c7b\u578b\u7684\u7b26\u53f7\u5360 4 \u4e2a\u5b57\u8282\uff0c\u5982\u679c\u8be5\u503c\u4e3a 0 \u8868\u793a\u8be5\u7b26\u53f7\u5927\u5c0f\u4e3a 0 \u6216\u672a\u77e5 Type \u7b26\u53f7\u7c7b\u578b\uff0c\u5206\u4e3a\u672a\u77e5\u7b26\u53f7\u7c7b\u578b\uff0c\u6570\u636e\u5bf9\u8c61\u7c7b\u578b\uff0c\u51fd\u6570\u7c7b\u578b\uff0c\u6587\u4ef6\u7c7b\u578b\u7b49 Bind \u7ed1\u5b9a\u4fe1\u606f\uff0c\u7528\u4e8e\u533a\u5206\u5c40\u90e8\u7b26\u53f7\uff0c\u5168\u5c40\u7b26\u53f7\u4e0e\u5f31\u5f15\u7528\u7b26\u53f7 Vis \u5728 C/C++ \u4e2d\u672a\u4f7f\u7528\uff0c\u53ef\u5ffd\u7565 Ndx \u7b26\u53f7\u6240\u5728\u7684\u6bb5,\u5982\u679c\u7b26\u53f7\u5b9a\u4e49\u5728\u672c\u76ee\u6807\u6587\u4ef6\u4e2d\uff0c\u8be5\u503c\u8868\u793a\u7b26\u53f7\u6240\u5728\u6bb5\u5728\u6bb5\u8868\u4e2d\u7684\u4e0b\u6807\u3002\u5982\u679c\u8be5\u503c\u4e3a ABS,\u8868\u793a\u8be5\u7b26\u53f7\u5305\u542b\u4e86\u4e00\u4e2a\u7edd\u5bf9\u7684\u503c\uff0c\u6bd4\u5982\u4e0a\u9762\u7684\u6587\u4ef6\u7c7b\u578b\u7684\u7b26\u53f7\u3002\u5982\u679c\u8be5\u503c\u4e3a COM\uff0c\u8868\u793a\u8be5\u503c\u662f\u4e00\u4e2a Common \u5757\u7c7b\u578b\u7684\u7b26\u53f7\u3002\u5982\u679c\u8be5\u503c\u4e3a UND\uff0c\u8868\u793a\u4e3a\u5b9a\u4e49\uff0c\u8bf4\u660e\u8be5\u7b26\u53f7\u5728\u672c\u76ee\u6807\u6587\u4ef6\u4e2d\u88ab\u5f15\u7528\uff0c\u5728\u5176\u4ed6\u6587\u4ef6\u4e2d\u58f0\u660e <p>\u4e0a\u9762\u8bf4\u5230\u4e0d\u540c\u7684\u7b26\u53f7\uff0c\u5176\u503c\u542b\u4e49\u4e0d\u540c\uff0c\u5177\u4f53\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd</p> <ul> <li>\u5728\u76ee\u6807\u6587\u4ef6\u4e2d\uff0c\u5982\u679c\u662f\u7b26\u53f7\u7684\u5b9a\u4e49\u5e76\u4e14\u8be5\u7b26\u53f7\u4e0d\u662f<code>COMMON\u5757</code>\u7c7b\u578b\u7684\uff0c\u5219<code>Value</code>\u8868\u793a\u8be5\u7b26\u53f7\u5728\u6bb5\u4e2d\u7684\u504f\u79fb\u3002\u6bd4\u5982<code>SimpleSection.o</code>\u4e2d\u7684<code>func1</code>\u3001<code>main</code>\u548c<code>global_init_var</code>\u3002</li> <li>\u5728\u76ee\u6807\u6587\u4ef6\u4e2d\uff0c\u5982\u679c\u7b26\u53f7\u662f<code>COMMON\u5757</code>\u7c7b\u578b\u7684\uff0c\u5219<code>Value</code>\u8868\u793a\u8be5\u7b26\u53f7\u7684\u5bf9\u9f50\u5c5e\u6027\u3002\u6bd4\u5982<code>SimpleSection.o</code>\u4e2d\u7684<code>global_uninit_var</code>\u3002</li> <li>\u5728\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\uff0c<code>Value</code>\u8868\u793a\u7b26\u53f7\u7684\u865a\u62df\u5730\u5740\u3002\u8fd9\u4e2a\u865a\u62df\u5730\u5740\u5bf9\u4e8e\u52a8\u6001\u94fe\u63a5\u5668\u6765\u8bf4\u5341\u5206\u6709\u7528\u3002</li> </ul>"},{"location":"foundation/self-cultivation/elf-file-detail/#c-name-mangling","title":"C++ \u7684 Name Mangling \u673a\u5236","text":"<p>\u6211\u4eec\u524d\u9762\u63d0\u5230\u6bcf\u4e2a\u51fd\u6570\u6216\u53d8\u91cf\u90fd\u6709\u81ea\u5df1\u72ec\u7279\u7684\u540d\u5b57\uff0c\u624d\u80fd\u907f\u514d\u94fe\u63a5\u8fc7\u7a0b\u4e2d\u4e0d\u540c\u53d8\u91cf\u548c\u51fd\u6570\u4e4b\u95f4\u7684\u6df7\u6dc6\uff0c\u56e0\u6b64\u5728 C \u8bed\u8a00\u76ee\u6807\u6587\u4ef6\u94fe\u63a5\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u6709\u4e24\u4e2a\u6587\u4ef6\u4e2d\u90fd\u6709<code>fun1</code>\u51fd\u6570\uff0c\u94fe\u63a5\u8fc7\u7a0b\u5c31\u4f1a\u62a5\u9519</p> <p>\u4f46\u5f53\u7a0b\u5e8f\u5f88\u5927\u65f6\uff0c\u4e0d\u540c\u7684\u6a21\u5757\u7531\u591a\u4eba\u5f00\u53d1\uff0c\u5982\u679c\u547d\u540d\u89c4\u8303\u4e0d\u4e25\u683c\uff0c\u5f88\u5bb9\u6613\u51fa\u73b0\u7b26\u53f7\u51b2\u7a81\u7684\u95ee\u9898\uff0c\u4e8e\u662f\u50cfC++\u8fd9\u6837\u7684\u540e\u6765\u8bbe\u8ba1\u7684\u8bed\u8a00\u5f00\u59cb\u8003\u8651\u5230\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u589e\u52a0\u4e86\u540d\u79f0\u7a7a\u95f4\uff08Namespace\uff09\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u591a\u6a21\u5757\u7684\u7b26\u53f7\u51b2\u7a81\u95ee\u9898\u3002</p> <p>\u540c\u65f6 C++\u62e5\u6709\u7c7b\u3001\u7ee7\u627f\u3001\u865a\u673a\u5236\u3001\u91cd\u8f7d\u3001\u540d\u79f0\u7a7a\u95f4\u7b49\u8fd9\u4e9b\u7279\u6027\uff0c\u5b83\u4eec\u4f7f\u5f97\u7b26\u53f7\u7ba1\u7406\u66f4\u4e3a\u590d\u6742\u3002\u6700\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u4e24\u4e2a\u76f8\u540c\u540d\u5b57\u7684\u51fd\u6570<code>func(int)</code>\u548c<code>func(double)</code>\uff0c\u5c3d\u7ba1\u51fd\u6570\u540d\u76f8\u540c\uff0c\u4f46\u662f\u53c2\u6570\u5217\u8868\u4e0d\u540c\uff0c\u90a3\u4e48\u7f16\u8bd1\u5668\u548c\u94fe\u63a5\u5668\u5728\u94fe\u63a5\u8fc7\u7a0b\u4e2d\u5982\u4f55\u533a\u5206\u8fd9\u4e24\u4e2a\u51fd\u6570\u5462\uff1f\u4e3a\u4e86\u652f\u6301 C++ \u8fd9\u4e9b\u590d\u6742\u7684\u7279\u6027\uff0c\u4eba\u4eec\u53d1\u660e\u4e86\u7b26\u53f7\u4fee\u9970\uff08Name Decoration\uff09\u673a\u5236</p> <p>\u6bd4\u5982\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801</p> <pre><code>int    func(int i)           { return 0;     }\nfloat  func(int i, float f)  { return i + f; }\ndouble func(int i, double d) { return i+d;   }\n</code></pre> <p>\u7ecf\u8fc7name mangling\u64cd\u4f5c\u540e\uff0c\u5f97\u5230\u7684\u7b26\u53f7\u8868\u4e2d\u548c<code>func</code>\u6709\u5173\u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>$ g++ main.cc -o main.o &amp;&amp; objdump -t main.o\nmain.o:     file format elf64-x86-64\n\nSYMBOL TABLE:\n0000000000001157 g     F .text  000000000000001c              _Z4funcid\n000000000000113b g     F .text  000000000000001c              _Z4funcif\n0000000000001129 g     F .text  0000000000000012              _Z4funci\n...\n\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u6240\u6709\u7684\u7b26\u53f7\u90fd\u4ee5<code>_Z</code>\u5f00\u5934\uff0c\u524d\u7f00<code>_Z</code>\u662f GCC \u7684\u89c4\u5b9a\uff0c\u5177\u4f53\u662f\u600e\u6837\u8f6c\u5316\u7684\u8fd9\u91cc\u5c31\u4e0d\u8be6\u7ec6\u4ecb\u7ecd\u4e86\uff0c\u6709\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53c2\u8003GCC\u7684\u540d\u79f0\u4fee\u9970\u6807\u51c6\u3002\u540c\u65f6\u6211\u4eec\u4e5f\u53ef\u4ee5\u5229\u7528 nm \u6216 c++filt \u7b49\u5de5\u5177\u6765\u89e3\u6790\u88ab\u4fee\u9970\u7684\u7b26\u53f7\uff0c\u4e0d\u7528\u81ea\u5df1\u624b\u52a8\u89e3\u6790</p> <p>Name Mangling \u673a\u5236\u4f7f\u7528\u5730\u975e\u5e38\u5e7f\u6cdb\uff0c\u5f53\u6211\u4eec\u67e5\u770b android so \u7684\u7b26\u53f7\u8868\u65f6\uff0c\u53ef\u4ee5\u770b\u5230\u5f88\u591a\u4ee5<code>_Z</code>\u5f00\u5934\u7684\u7b26\u53f7\uff0c\u5c31\u53ef\u4ee5\u77e5\u9053\u4ed6\u4eec\u90fd\u662f\u88ab\u4fee\u9970\u8fc7\u7684\u7b26\u53f7</p>"},{"location":"foundation/self-cultivation/elf-file-detail/#_5","title":"\u603b\u7ed3","text":"<p>\u672c\u6587\u8be6\u7ec6\u4ecb\u7ecd\u4e86 ELF \u6587\u4ef6\u7684\u8be6\u7ec6\u7ed3\u6784\uff0c\u5305\u62ec\u6587\u4ef6\u5934\uff0c\u6bb5\u8868\uff0c\u5404\u4e2a\u6bb5\u7684\u7ed3\u6784\uff0c\u7b26\u53f7\u8868\u7684\u7ed3\u6784\u7b49\u5185\u5bb9\u3002</p> <p>\u8fd9\u4e9b\u57fa\u7840\u77e5\u8bc6\u53ef\u80fd\u6709\u4e9b\u67af\u71e5\uff0c\u4f46\u5728 Android \u6027\u80fd\u4f18\u5316\u65b9\u9762\u7684\u5e94\u7528\u5374\u76f8\u5f53\u5e7f\u6cdb\uff0c\u56e0\u6b64\u8fd8\u662f\u6709\u5fc5\u8981\u4e86\u89e3\u4e00\u4e0b\u8fd9\u4e9b\u77e5\u8bc6\u70b9\u7684</p>"},{"location":"foundation/self-cultivation/elf-load/","title":"ELF \u6587\u4ef6\u7684\u88c5\u8f7d\u4e0e\u8fdb\u7a0b","text":"<p>\u6700\u8fd1\u5728\u8bfb\u300a\u7a0b\u5e8f\u5458\u7684\u81ea\u6211\u4fee\u517b\uff1a\u94fe\u63a5\uff0c\u88c5\u8f7d\u4e0e\u5e93\u300b\uff0c\u5176\u5b9e\u8fd9\u672c\u4e66\u8ddf Android \u5f00\u53d1\u7684\u8054\u7cfb\u8fd8\u633a\u7d27\u5bc6\u7684\uff0c\u65e0\u8bba\u662f NDK \u5f00\u53d1\uff0c\u6216\u8005\u662f\u6027\u80fd\u4f18\u5316\u4e2d\u4e00\u4e9b\u5e38\u7528\u7684 Native Hoook \u624b\u6bb5\uff0c\u90fd\u9700\u8981\u4e86\u89e3\u4e00\u4e9b\u94fe\u63a5\uff0c\u88c5\u8f7d\u76f8\u5173\u7684\u77e5\u8bc6\u70b9\u3002\u672c\u6587\u4e3a\u8bfb\u4e66\u7b14\u8bb0\u3002</p> <p>\u53ef\u6267\u884c\u6587\u4ef6\u53ea\u6709\u88ab\u88c5\u8f7d\u5230\u5185\u5b58\u4e2d\u4e4b\u540e\u624d\u80fd\u88ab CPU \u6267\u884c\uff0c\u90a3\u4e48 ELF \u6587\u4ef6\u5728 linux \u4e2d\u5230\u5e95\u662f\u5982\u4f55\u88c5\u8f7d\u7684\uff1f\u4ec0\u4e48\u662f\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u4e3a\u4ec0\u4e48\u8fdb\u7a0b\u8981\u6709\u81ea\u5df1\u7684\u72ec\u7acb\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff1f\u672c\u6587\u4e3b\u8981\u56de\u7b54\u4e86\u8fd9\u4e9b\u95ee\u9898</p>"},{"location":"foundation/self-cultivation/elf-load/#_1","title":"\u8fdb\u7a0b\u865a\u62df\u5730\u5740\u7a7a\u95f4","text":"<p>\u6211\u4eec\u77e5\u9053\u6bcf\u4e2a\u7a0b\u5e8f\u88ab\u8fd0\u884c\u8d77\u6765\u4ee5\u540e\uff0c\u5b83\u5c06\u62e5\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff08Virtual Address Space\uff09\uff0c\u8fd9\u4e2a\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f\u7531 CPU \u7684\u4f4d\u6570\u51b3\u5b9a\u7684\u300232\u4f4d CPU \u6709 2^32 \u53734GB \u865a\u62df\u7a7a\u95f4\uff0c\u800c 64 \u4f4d CPU \u7406\u8bba\u4e0a\u652f\u6301 2^64 \u7ea6 16777216 TB \u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u3002\u4f46\u662f\u5f88\u663e\u7136\u76ee\u524d\u5927\u90e8\u5206\u8bbe\u5907\u7528\u4e0d\u5230\u8fd9\u4e48\u5927\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u76ee\u524d\u5f88\u591a 64 \u4f4d CPU \u4f7f\u7528 40 \u4f4d\u5730\u5740\u7ebf\uff0c\u6700\u5927\u5bfb\u5740\u7a7a\u95f4\u4ec5\u4e3a 1TB\uff0c\u52a0\u4e4b\u522b\u7684\u79cd\u79cd\u539f\u56e0\uff0c\u76ee\u524dWindows 7 64\u4f4d\u7248\u6700\u5927\u4ec5\u80fd\u4f7f\u7528 192GB \u5185\u5b58\uff0cWindows 8 64\u4f4d\u7248\u6700\u5927\u4ec5\u80fd\u4f7f\u7528 512GB \u5185\u5b58\uff0c\u5927\u591a\u6570 64 \u4f4d Android \u8bbe\u5907\u7684\u6700\u5927\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5927\u5c0f\u4e5f\u662f 512 GB\u3002</p> <p>\u4e0b\u9762\u6211\u4eec\u4ee5 32 \u4f4d\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e3a\u4f8b\uff0c\u770b\u770b\u865a\u62df\u5730\u5740\u7a7a\u95f4\u662f\u5982\u4f55\u5206\u914d\u7684</p> <p></p> <ul> <li>\u6574\u4e2a 4 GB \u88ab\u5212\u5206\u6210\u4e86\u4e24\u90e8\u5206</li> <li>\u64cd\u4f5c\u7cfb\u7edf\u5360\u636e\u4e86\u4ece 0xC0000000 \u5230 0xFFFFFFFF \u7684 1 GB</li> <li>\u5e94\u7528\u7a0b\u5e8f\u5360\u636e\u4e86\u4ece 0x00000000 \u5230 0xBFFFFFFF \u7684 3 GB</li> </ul>"},{"location":"foundation/self-cultivation/elf-load/#_2","title":"\u88c5\u8f7d\u7684\u65b9\u5f0f","text":"<p>\u7a0b\u5e8f\u6267\u884c\u65f6\u6240\u9700\u8981\u7684\u6307\u4ee4\u548c\u6570\u636e\u5fc5\u987b\u5728\u5185\u5b58\u4e2d\u624d\u80fd\u591f\u6b63\u5e38\u8fd0\u884c\uff0c\u6700\u7b80\u5355\u7684\u529e\u6cd5\u5c31\u662f\u5c06\u7a0b\u5e8f\u8fd0\u884c\u6240\u9700\u8981\u7684\u6307\u4ee4\u548c\u6570\u636e\u5168\u90fd\u88c5\u5165\u5185\u5b58\u4e2d\uff0c\u8fd9\u5c31\u662f\u6700\u7b80\u5355\u7684\u9759\u6001\u88c5\u5165\u7684\u529e\u6cd5\u3002</p> <p>\u4f46\u5f53\u7a0b\u5e8f\u6240\u9700\u5185\u5b58\u5927\u4e8e\u7269\u7406\u5185\u5b58\u65f6\uff0c\u5c31\u9700\u8981\u6269\u5c55\u5185\u5b58\uff0c\u8fd9\u663e\u7136\u6210\u672c\u8f83\u9ad8\uff0c\u4eba\u4eec\u66f4\u671f\u671b\u7684\u662f\u5728\u4e0d\u6dfb\u52a0\u5185\u5b58\u7684\u60c5\u51b5\u4e0b\u8ba9\u66f4\u591a\u7684\u7a0b\u5e8f\u8fd0\u884c\u8d77\u6765\u3002</p> <p>\u4eba\u4eec\u53d1\u73b0\u7a0b\u5e8f\u8fd0\u884c\u5177\u6709\u5c40\u90e8\u6027\u539f\u7406\uff0c\u4e8e\u662f\u91c7\u7528\u52a8\u6001\u88c5\u5165\uff0c\u5373\u5c06\u5e38\u7528\u90e8\u5206\u653e\u5165\u5185\u5b58\uff0c\u4e0d\u5e38\u7528\u7684\u6570\u636e\u5b58\u50a8\u5728\u78c1\u76d8\u4e2d\uff0c\u4ee5\u5b9e\u73b0\u9ad8\u6548\u5229\u7528\u5185\u5b58\u3002</p>"},{"location":"foundation/self-cultivation/elf-load/#_3","title":"\u9875\u6620\u5c04","text":"<p>\u9875\u6620\u5c04\u662f\u865a\u62df\u5b58\u50a8\u673a\u5236\u7684\u4e00\u90e8\u5206\uff0c\u5b83\u968f\u7740\u865a\u62df\u5b58\u50a8\u7684\u53d1\u660e\u800c\u8bde\u751f\u3002\u9875\u6620\u5c04\u4e0d\u662f\u4e00\u4e0b\u5b50\u5c31\u628a\u7a0b\u5e8f\u7684\u6240\u6709\u6570\u636e\u548c\u6307\u4ee4\u90fd\u88c5\u5165\u5185\u5b58\uff0c\u800c\u662f\u5c06\u5185\u5b58\u548c\u6240\u6709\u78c1\u76d8\u4e2d\u7684\u6570\u636e\u548c\u6307\u4ee4\u6309\u7167\u201c\u9875\uff08Page\uff09\u201d\u4e3a\u5355\u4f4d\u5212\u5206\u6210\u82e5\u5e72\u4e2a\u9875\uff0c\u4ee5\u540e\u6240\u6709\u7684\u88c5\u8f7d\u548c\u64cd\u4f5c\u7684\u5355\u4f4d\u5c31\u662f\u9875\u3002</p> <p>\u9875\u5927\u5c0f\u7531\u786c\u4ef6\u51b3\u5b9a\uff0c\u6700\u5e38\u89c1\u7684\u9875\u5927\u5c0f\u4e00\u822c\u662f 4096 \u5b57\u8282\uff0c\u90a3\u4e48512 MB\u7684\u7269\u7406\u5185\u5b58\u5c31\u62e5\u6709512 * 1024 * 1024 / 4 096 = 131 072\u4e2a\u9875</p> <p></p> <p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u770b\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u6bcf\u4e2a\u865a\u62df\u7a7a\u95f4\u6709 8 \u9875\uff0c\u6bcf\u9875\u5927\u5c0f\u4e3a 1 KB\uff0c\u90a3\u4e48\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5c31\u662f 8 KB\u3002\u6211\u4eec\u5047\u8bbe\u8be5\u8ba1\u7b97\u673a\u6709 13 \u6761\u5730\u5740\u7ebf\uff0c\u5373\u62e5\u6709 2^13 \u7684\u7269\u7406\u5bfb\u5740\u80fd\u529b\uff0c\u90a3\u4e48\u7406\u8bba\u4e0a\u7269\u7406\u7a7a\u95f4\u53ef\u4ee5\u591a\u8fbe 8KB\u3002\u4f46\u662f\u51fa\u4e8e\u79cd\u79cd\u539f\u56e0\uff0c\u6211\u4eec\u5b9e\u9645\u53ea\u6709 6KB \u7684\u7269\u7406\u5185\u5b58\uff0c\u6240\u4ee5\u7269\u7406\u7a7a\u95f4\u5176\u5b9e\u771f\u6b63\u6709\u6548\u7684\u53ea\u662f\u524d 6KB\u3002</p> <p>\u90a3\u4e48\uff0c\u5f53\u6211\u4eec\u628a\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u6309\u9875\u5206\u5272\uff0c\u628a\u5e38\u7528\u7684\u6570\u636e\u548c\u4ee3\u7801\u9875\u88c5\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u628a\u4e0d\u5e38\u7528\u7684\u4ee3\u7801\u548c\u6570\u636e\u9875\u4fdd\u5b58\u5728\u78c1\u76d8\u91cc\uff0c\u5f53\u9700\u8981\u7528\u5230\u7684\u65f6\u5019\u518d\u628a\u5b83\u4ece\u78c1\u76d8\u91cc\u53d6\u51fa\u6765\u5373\u53ef</p> <p>\u6211\u4eec\u628a\u865a\u62df\u7a7a\u95f4\u7684\u9875\u5c31\u53eb\u865a\u62df\u9875\uff08VP\uff0cVirtual Page\uff09\uff0c\u628a\u7269\u7406\u5185\u5b58\u4e2d\u7684\u9875\u53eb\u505a\u7269\u7406\u9875\uff08PP\uff0cPhysical Page\uff09\uff0c\u628a\u78c1\u76d8\u4e2d\u7684\u9875\u53eb\u505a\u78c1\u76d8\u9875\uff08DP\uff0cDisk Page\uff09,\u56fe\u4e2d\u7684\u7ebf\u8868\u793a\u6620\u5c04\u5173\u7cfb</p> <p>\u5728\u4e0a\u56fe\u4e2d\uff0c\u8fdb\u7a0b\u4e2d\u7684\u90e8\u5206\u865a\u62df\u9875\u88ab\u6620\u5c04\u5230\u4e86\u7269\u7406\u5185\u5b58\u9875\uff0c\u6bd4\u5982 VP0 \u3001VP1 \u548c VP7 \u6620\u5c04\u5230 PP0\u3001PP2\u548cPP3\uff1b\u800c\u6709\u90e8\u5206\u9875\u9762\u5374\u5728\u78c1\u76d8\u4e2d\uff0c\u6bd4\u5982 VP2 \u548c VP3 \u4f4d\u4e8e\u78c1\u76d8\u7684 DP0 \u548c DP1 \u4e2d\uff1b\u53e6\u5916\u8fd8\u6709\u4e00\u4e9b\u9875\u9762\u5982 VP4\u3001VP5 \u548c VP6 \u53ef\u80fd\u5c1a\u672a\u88ab\u7528\u5230\u6216\u8bbf\u95ee\u5230\uff0c\u5b83\u4eec\u6682\u65f6\u5904\u4e8e\u672a\u4f7f\u7528\u7684\u72b6\u6001\u3002</p> <p>\u8fdb\u7a0b\u7684 VP2 \u548c VP3 \u4e0d\u5728\u5185\u5b58\u4e2d\uff0c\u4f46\u662f\u5f53\u8fdb\u7a0b\u9700\u8981\u7528\u5230\u8fd9\u4e24\u4e2a\u9875\u7684\u65f6\u5019\uff0c\u786c\u4ef6\u4f1a\u6355\u83b7\u5230\u8fd9\u4e2a\u6d88\u606f\uff0c\u5c31\u662f\u6240\u8c13\u7684\u9875\u9519\u8bef\uff08Page Fault\uff09\uff0c\u7136\u540e\u64cd\u4f5c\u7cfb\u7edf\u63a5\u7ba1\u8fdb\u7a0b\uff0c\u8d1f\u8d23\u5c06 VP2 \u548c VP3 \u4ece\u78c1\u76d8\u4e2d\u8bfb\u51fa\u6765\u5e76\u4e14\u88c5\u5165\u5185\u5b58\uff0c\u7136\u540e\u5c06\u5185\u5b58\u4e2d\u7684\u8fd9\u4e24\u4e2a\u9875\u4e0e VP2 \u548c VP3 \u4e4b\u95f4\u5efa\u7acb\u6620\u5c04\u5173\u7cfb</p> <p>\u5982\u679c\u8fd9\u65f6\u5019\u7a0b\u5e8f\u53ea\u9700\u8981 VP0\u3001VP1\u3001VP2\u3001VP3\u3001VP7 \u8fd9 5 \u4e2a\u9875\uff0c\u90a3\u4e48\u7a0b\u5e8f\u5c31\u80fd\u4e00\u76f4\u8fd0\u884c\u4e0b\u53bb\u3002\u4f46\u662f\u95ee\u9898\u5f88\u660e\u663e\uff0c\u5982\u679c\u8fd9\u65f6\u5019\u7a0b\u5e8f\u9700\u8981\u8bbf\u95ee\u8d85\u51fa 6kb \u7684\u66f4\u591a\u7684\u9875\uff0c\u90a3\u4e48\u88c5\u8f7d\u7ba1\u7406\u5668\u5fc5\u987b\u505a\u51fa\u6289\u62e9\uff0c\u5b83\u5fc5\u987b\u653e\u5f03\u76ee\u524d\u6b63\u5728\u4f7f\u7528\u7684\u5185\u5b58\u9875\u4e2d\u7684\u5176\u4e2d\u4e00\u4e2a\u6765\u88c5\u8f7d\u3002</p> <p>\u81f3\u4e8e\u9009\u62e9\u54ea\u4e2a\u9875\uff0c\u6211\u4eec\u6709\u5f88\u591a\u79cd\u7b97\u6cd5\u53ef\u4ee5\u9009\u62e9\uff0c\u6bd4\u5982\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7b97\u6cd5\u3002\u901a\u8fc7\u5c06\u5e38\u7528\u7684\u9875\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u800c\u5c06\u4e0d\u5e38\u7528\u7684\u9875\u4fdd\u5b58\u5728\u78c1\u76d8\u4e2d\uff0c\u5728\u9700\u8981\u65f6\u518d\u4ece\u78c1\u76d8\u4e2d\u88c5\u8f7d\u76f8\u5e94\u9875\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u5728\u4e0d\u589e\u52a0\u7269\u7406\u5185\u5b58\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u52a8\u6001\u88c5\u5165</p>"},{"location":"foundation/self-cultivation/elf-load/#_4","title":"\u4ece\u64cd\u4f5c\u7cfb\u7edf\u89d2\u5ea6\u770b\u53ef\u6267\u884c\u6587\u4ef6\u7684\u88c5\u8f7d","text":""},{"location":"foundation/self-cultivation/elf-load/#_5","title":"\u8fdb\u7a0b\u7684\u5efa\u7acb","text":"<p>\u4e00\u4e2a\u7a0b\u5e8f\u7684\u6267\u884c\u901a\u5e38\u4e5f\u5c31\u610f\u5473\u7740\uff1a\u521b\u5efa\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u7136\u540e\u88c5\u8f7d\u76f8\u5e94\u7684\u53ef\u6267\u884c\u6587\u4ef6\u5e76\u4e14\u6267\u884c\u3002\u800c\u8fd9\u4e5f\u53ef\u4ee5\u5177\u4f53\u5316\u4e3a\u4e0b\u9762 3 \u4ef6\u4e8b</p> <ul> <li>\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4</li> <li>\u8bfb\u53d6\u53ef\u6267\u884c\u6587\u4ef6\u5934\uff0c\u5e76\u4e14\u5efa\u7acb\u865a\u62df\u7a7a\u95f4\u4e0e\u53ef\u6267\u884c\u6587\u4ef6\u7684\u6620\u5c04\u5173\u7cfb</li> <li>\u5c06CPU\u7684\u6307\u4ee4\u5bc4\u5b58\u5668\u8bbe\u7f6e\u6210\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5165\u53e3\u5730\u5740\uff0c\u542f\u52a8\u8fd0\u884c</li> </ul>"},{"location":"foundation/self-cultivation/elf-load/#_6","title":"\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4","text":"<p>\u8fd9\u4e00\u6b65\u7684\u4e3b\u8981\u5de5\u4f5c\u5c31\u662f\u521b\u5efa\u4e00\u7ec4\u4ece\u865a\u62df\u7a7a\u95f4\u9875\u5230\u7269\u7406\u7a7a\u95f4\u7684\u6620\u5c04\uff0c\u56e0\u6b64\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u7a7a\u95f4\u5b9e\u9645\u4e0a\u5e76\u4e0d\u662f\u521b\u5efa\u7a7a\u95f4\u800c\u662f\u521b\u5efa\u6620\u5c04\u51fd\u6570\u6240\u9700\u8981\u7684\u76f8\u5e94\u7684\u6570\u636e\u7ed3\u6784</p>"},{"location":"foundation/self-cultivation/elf-load/#_7","title":"\u8bfb\u53d6\u53ef\u6267\u884c\u6587\u4ef6\u5934\u5e76\u521b\u5efa\u6620\u5c04","text":"<p>\u4e0a\u9762\u90a3\u4e00\u6b65\u7684\u9875\u6620\u5c04\u5173\u7cfb\u51fd\u6570\u662f\u865a\u62df\u7a7a\u95f4\u5230\u7269\u7406\u5185\u5b58\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u8fd9\u4e00\u6b65\u6240\u505a\u7684\u662f\u865a\u62df\u7a7a\u95f4\u4e0e\u53ef\u6267\u884c\u6587\u4ef6\u7684\u6620\u5c04\u5173\u7cfb\u3002</p> <p>\u5f53\u7a0b\u5e8f\u6267\u884c\u53d1\u751f\u9875\u9519\u8bef\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c06\u4ece\u7269\u7406\u5185\u5b58\u4e2d\u5206\u914d\u4e00\u4e2a\u7269\u7406\u9875\uff0c\u7136\u540e\u5c06\u8be5\u201c\u7f3a\u9875\u201d\u4ece\u78c1\u76d8\u4e2d\u8bfb\u53d6\u5230\u5185\u5b58\u4e2d\uff0c\u518d\u8bbe\u7f6e\u7f3a\u9875\u7684\u865a\u62df\u9875\u548c\u7269\u7406\u9875\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u8fd9\u6837\u7a0b\u5e8f\u624d\u5f97\u4ee5\u6b63\u5e38\u8fd0\u884c\u3002\u4f46\u662f\u5f88\u660e\u663e\u7684\u4e00\u70b9\u662f\uff0c\u5f53\u64cd\u4f5c\u7cfb\u7edf\u6355\u83b7\u5230\u7f3a\u9875\u9519\u8bef\u65f6\uff0c\u5b83\u5e94\u77e5\u9053\u7a0b\u5e8f\u5f53\u524d\u6240\u9700\u8981\u7684\u9875\u5728\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\u7684\u54ea\u4e00\u4e2a\u4f4d\u7f6e\u3002\u8fd9\u5c31\u662f\u865a\u62df\u7a7a\u95f4\u4e0e\u53ef\u6267\u884c\u6587\u4ef6\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u3002\u4ece\u67d0\u79cd\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u4e00\u6b65\u662f\u6574\u4e2a\u88c5\u8f7d\u8fc7\u7a0b\u4e2d\u6700\u91cd\u8981\u7684\u4e00\u6b65\uff0c\u4e5f\u662f\u4f20\u7edf\u610f\u4e49\u4e0a\u201c\u88c5\u8f7d\u201d\u7684\u8fc7\u7a0b\u3002</p> <p>\u6211\u4eec\u770b\u4e00\u4e0b\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5047\u8bbe\u6211\u4eec\u7684 ELF \u53ef\u6267\u884c\u6587\u4ef6\u53ea\u6709\u4e00\u4e2a\u4ee3\u7801\u6bb5<code>.text</code>\uff0c\u5176\u865a\u62df\u5730\u5740\u4e3a 0x08048000\uff0c\u5b83\u5728\u6587\u4ef6\u4e2d\u7684\u5927\u5c0f\u4e3a 0x000e1\u3002\u7531\u4e8e\u865a\u62df\u5b58\u50a8\u7684\u9875\u6620\u5c04\u90fd\u662f\u4ee5\u9875\u4e3a\u5355\u4f4d\u7684\uff0c\u9875\u5927\u5c0f\u901a\u5e38\u4e3a 4kb\u3002\u7531\u4e8e\u8be5.text\u6bb5\u5927\u5c0f\u4e0d\u5230\u4e00\u4e2a\u9875\uff0c\u8003\u8651\u5230\u5bf9\u9f50\u8be5\u6bb5\u5360\u7528\u4e00\u6574\u9875\u3002\u6240\u4ee5\u8be5\u6587\u4ef6\u88ab\u88c5\u8f7d\u65f6\u5c06\u5360\u7528 0x08048000 \u5230 0x08049000 \u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4</p> <p>\u8fd9\u79cd\u6620\u5c04\u5173\u7cfb\u53ea\u662f\u4fdd\u5b58\u5728\u64cd\u4f5c\u7cfb\u7edf\u5185\u90e8\u7684\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\uff0cLinux \u4e2d\u5c06\u8fdb\u7a0b\u865a\u62df\u7a7a\u95f4\u4e2d\u7684\u4e00\u4e2a\u6bb5\u53eb\u505a\u865a\u62df\u5185\u5b58\u533a\u57df\uff08VMA, Virtual Memory Area\uff09\u3002\u6bd4\u5982\u4e0a\u4f8b\u4e2d\uff0c\u64cd\u4f5c\u7cfb\u7edf\u521b\u5efa\u8fdb\u7a0b\u540e\uff0c\u4f1a\u5728\u8fdb\u7a0b\u76f8\u5e94\u7684\u6570\u636e\u7ed3\u6784\u4e2d\u8bbe\u7f6e\u6709\u4e00\u4e2a.text \u6bb5\u7684 VMA\uff1a\u5b83\u5728\u865a\u62df\u7a7a\u95f4\u4e2d\u7684\u5730\u5740\u4e3a0x08048000\uff5e0x08049000\uff0c\u5bf9\u5e94ELF\u6587\u4ef6\u4e2d\u504f\u79fb\u4e3a 0 \u7684 .text</p>"},{"location":"foundation/self-cultivation/elf-load/#_8","title":"\u8fd0\u884c\u53ef\u6267\u884c\u6587\u4ef6","text":"<p>\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u8bbe\u7f6eCPU\u7684\u6307\u4ee4\u5bc4\u5b58\u5668\u5c06\u63a7\u5236\u6743\u8f6c\u4ea4\u7ed9\u8fdb\u7a0b\uff0c\u7531\u6b64\u8fdb\u7a0b\u5f00\u59cb\u6267\u884c</p> <p>\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u64cd\u4f5c\u7cfb\u7edf\u6267\u884c\u4e86\u4e00\u6761\u8df3\u8f6c\u6307\u4ee4\uff0c\u76f4\u63a5\u8df3\u8f6c\u5230\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5165\u53e3\u5730\u5740\uff0c\u4e5f\u5c31\u662f\u5728 ELF \u5934\u6587\u4ef6\u4e2d\u4fdd\u5b58\u7684\u5730\u5740</p>"},{"location":"foundation/self-cultivation/elf-load/#_9","title":"\u9875\u9519\u8bef","text":"<p>\u4e0a\u9762\u7684\u6b65\u9aa4\u6267\u884c\u5b8c\u4ee5\u540e\uff0c\u5176\u5b9e\u53ef\u6267\u884c\u6587\u4ef6\u7684\u771f\u6b63\u6307\u4ee4\u548c\u6570\u636e\u90fd\u6ca1\u6709\u88ab\u88c5\u5165\u5230\u5185\u5b58\u4e2d\u3002\u64cd\u4f5c\u7cfb\u7edf\u53ea\u662f\u901a\u8fc7\u53ef\u6267\u884c\u6587\u4ef6\u5934\u90e8\u7684\u4fe1\u606f\u5efa\u7acb\u8d77\u53ef\u6267\u884c\u6587\u4ef6\u548c\u8fdb\u7a0b\u865a\u5b58\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u800c\u5df2\u3002</p> <p>\u5047\u8bbe\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u7a0b\u5e8f\u7684\u5165\u53e3\u5730\u5740\u4e3a 0x08048000\uff0c\u5373\u521a\u597d\u662f .text \u6bb5\u7684\u8d77\u59cb\u5730\u5740\u3002\u5f53 CPU \u5f00\u59cb\u6253\u7b97\u6267\u884c\u8fd9\u4e2a\u5730\u5740\u7684\u6307\u4ee4\u65f6\uff0c\u53d1\u73b0\u9875\u9762 0x08048000\uff5e0x08049000 \u662f\u4e2a\u7a7a\u9875\u9762\uff0c\u4e8e\u662f\u5b83\u5c31\u8ba4\u4e3a\u8fd9\u662f\u4e00\u4e2a\u9875\u9519\u8bef\uff08Page Fault\uff09\u3002CPU\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff0c\u64cd\u4f5c\u7cfb\u7edf\u6709\u4e13\u95e8\u7684\u9875\u9519\u8bef\u5904\u7406\u4f8b\u7a0b\u6765\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\u3002</p> <p>\u8fd9\u65f6\u5019\u6211\u4eec\u524d\u9762\u63d0\u5230\u7684\u88c5\u8f7d\u8fc7\u7a0b\u7684\u7b2c\u4e8c\u6b65\u5efa\u7acb\u7684\u6570\u636e\u7ed3\u6784\u8d77\u5230\u4e86\u5f88\u5173\u952e\u7684\u4f5c\u7528\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c06\u67e5\u8be2\u8fd9\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u7136\u540e\u627e\u5230\u7a7a\u9875\u9762\u6240\u5728\u7684 VMA\uff0c\u8ba1\u7b97\u51fa\u76f8\u5e94\u7684\u9875\u9762\u5728\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\u7684\u504f\u79fb\uff0c\u7136\u540e\u5728\u7269\u7406\u5185\u5b58\u4e2d\u5206\u914d\u4e00\u4e2a\u7269\u7406\u9875\u9762\uff0c\u5c06\u8fdb\u7a0b\u4e2d\u8be5\u865a\u62df\u9875\u4e0e\u5206\u914d\u7684\u7269\u7406\u9875\u4e4b\u95f4\u5efa\u7acb\u6620\u5c04\u5173\u7cfb\uff0c\u7136\u540e\u628a\u63a7\u5236\u6743\u518d\u8fd8\u56de\u7ed9\u8fdb\u7a0b\uff0c\u8fdb\u7a0b\u4ece\u521a\u624d\u9875\u9519\u8bef\u7684\u4f4d\u7f6e\u91cd\u65b0\u5f00\u59cb\u6267\u884c</p>"},{"location":"foundation/self-cultivation/elf-load/#_10","title":"\u8fdb\u7a0b\u865a\u5b58\u7a7a\u95f4\u5206\u5e03","text":""},{"location":"foundation/self-cultivation/elf-load/#_11","title":"\u94fe\u63a5\u89c6\u56fe\u4e0e\u6267\u884c\u89c6\u56fe","text":"<p>\u6211\u4eec\u524d\u9762\u7684\u4f8b\u5b50\u53ea\u6709\u4e00\u4e2a\u4ee3\u7801\u6bb5\uff0c\u56e0\u6b64\u88ab\u52a0\u8f7d\u540e\u76f8\u5bf9\u5e94\u7684\u4e5f\u53ea\u6709\u4e00\u4e2a VMA\uff0c\u4f46\u5b9e\u9645\u60c5\u51b5\uff0c\u4e00\u4e2a ELF \u6587\u4ef6\u4e2d\u5f80\u5f80\u6709\u591a\u4e2a\u6bb5\uff0c\u6bd4\u5982\u6570\u636e\u6bb5\uff0cbss \u7b49</p> <p>\u56e0\u4e3a ELF \u6587\u4ef6\u88ab\u6620\u5c04\u65f6\u662f\u4ee5\u9875\u4e3a\u5355\u4f4d\u7684\uff0c\u56e0\u6b64\u6bcf\u4e2a\u6bb5\u5728\u6620\u5c04\u65f6\u7684\u957f\u5ea6\u90fd\u662f\u9875\u7684\u6574\u6570\u500d\uff0c\u5982\u679c\u4e0d\u8db3\u4e00\u9875\u4e5f\u5c06\u5360\u7528\u4e00\u9875\u3002\u56e0\u6b64\u968f\u7740\u6bb5\u6570\u91cf\u7684\u589e\u591a\uff0c\u4e5f\u4f1a\u5bfc\u81f4\u66f4\u591a\u7684\u7a7a\u95f4\u6d6a\u8d39\u95ee\u9898</p> <p>\u90a3\u4e48\u8be5\u5982\u4f55\u51cf\u5c11\u8fd9\u79cd\u5185\u5b58\u6d6a\u8d39\u5462\uff1f</p> <p>\u5b9e\u9645\u4e0a\uff0c\u5f53\u64cd\u4f5c\u7cfb\u7edf\u88c5\u8f7d\u53ef\u6267\u884c\u6587\u4ef6\u65f6\uff0c\u5b83\u5b9e\u9645\u4e0a\u5e76\u4e0d\u5173\u5fc3\u53ef\u6267\u884c\u6587\u4ef6\u5404\u4e2a\u6bb5\u6240\u5305\u542b\u7684\u5b9e\u9645\u5185\u5bb9\uff0c\u64cd\u4f5c\u7cfb\u7edf\u53ea\u5173\u5fc3\u4e00\u4e9b\u8ddf\u88c5\u8f7d\u76f8\u5173\u7684\u95ee\u9898\uff0c\u6700\u4e3b\u8981\u7684\u662f\u6bb5\u7684\u6743\u9650(\u53ef\u8bfb\u3001\u53ef\u5199\u3001\u53ef\u6267\u884c) \uff0c\u5728 ELF \u6587\u4ef6\u4e2d\uff0c\u6bb5\u7684\u6743\u9650\u4e3b\u8981\u53ef\u4ee5\u7ec4\u5408\u4e3a\u4ee5\u4e0b\u51e0\u79cd\uff1a</p> <ul> <li>\u4ee5\u4ee3\u7801\u6bb5\u4e3a\u4ee3\u8868\u7684\u6743\u9650\u4e3a\u53ef\u8bfb\u53ef\u6267\u884c\u7684\u6bb5\u3002</li> <li>\u4ee5\u6570\u636e\u6bb5\u548c BSS \u6bb5\u4e3a\u4ee3\u8868\u7684\u6743\u9650\u4e3a\u53ef\u8bfb\u53ef\u5199\u7684\u6bb5\u3002</li> <li>\u4ee5\u53ea\u8bfb\u6570\u636e\u6bb5\u4e3a\u4ee3\u8868\u7684\u6743\u9650\u4e3a\u53ea\u8bfb\u7684\u6bb5\u3002</li> </ul> <p>\u56e0\u6b64\u6700\u7b80\u5355\u7684\u601d\u8def\uff1a\u5bf9\u4e8e\u76f8\u540c\u6743\u9650\u7684\u6bb5\uff0c\u628a\u5b83\u4eec\u5408\u5e76\u5230\u4e00\u8d77\u5f53\u4f5c\u4e00\u4e2a\u6bb5\u8fdb\u884c\u6620\u5c04</p> <p>\u4e0a\u9762\u6211\u4eec\u628a\u94fe\u63a5\u89c6\u56fe\u4e0e\u6267\u884c\u89c6\u56fe\u4e2d\u7684\u5185\u5bb9\u90fd\u79f0\u4e3a\u6bb5\uff0c\u5b9e\u9645\u4e0a\u5b83\u4eec\u662f\u4e24\u4e2a\u4e1c\u897f\uff0c\u53ea\u662f\u7ffb\u8bd1\u6210\u4e86\u4e00\u6837\u7684\u8bcd\uff0c\u5728\u82f1\u6587\u4e2d\uff0c\u94fe\u63a5\u89c6\u56fe\u4e2d\u7684\u6bb5\u662f<code>Section</code>\uff0c\u800c\u6267\u884c\u89c6\u56fe\u7684\u6bb5\u662f<code>Segment</code></p> <p><code>Segment</code>\u5b9e\u9645\u4e0a\u5c31\u662f\u591a\u4e2a\u5c5e\u6027\u7c7b\u4f3c\u7684<code>Section</code>\u5408\u5e76\u7684\u7ed3\u679c\uff0c\u5c06\u591a\u4e2a<code>Section</code>\u5408\u5e76\u6210\u4e00\u4e2a<code>Segment</code>\u6574\u4f53\u6620\u5c04\uff0c\u53ef\u4ee5\u51cf\u5c11\u9875\u9762\u5185\u90e8\u7684\u5185\u5b58\u788e\u7247\uff0c\u51cf\u5c11\u5185\u5b58\u5360\u7528\u3002\u800c\u6b63\u56e0\u4e3a\u6b64\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5728\u6267\u884c\u9636\u6bb5\u662f\u4ee5<code>Segment</code>\u6765\u6620\u5c04\u53ef\u6267\u884c\u6587\u4ef6\u7684\u3002</p> <p>\u6240\u4ee5\u603b\u7684\u6765\u8bf4\uff0c<code>Segment</code>\u548c<code>Section</code>\u662f\u4ece\u4e0d\u540c\u7684\u89d2\u5ea6\u6765\u5212\u5206\u540c\u4e00\u4e2a ELF \u6587\u4ef6\u3002\u8fd9\u4e2a\u5728 ELF \u4e2d\u88ab\u79f0\u4e3a\u4e0d\u540c\u7684\u89c6\u56fe\uff0c\u4ece<code>Section</code>\u7684\u89d2\u5ea6\u6765\u770b ELF \u6587\u4ef6\u5c31\u662f\u94fe\u63a5\u89c6\u56fe\uff0c\u4ece<code>Segment</code>\u7684\u89d2\u5ea6\u6765\u770b\u5c31\u662f\u6267\u884c\u89c6\u56fe\u3002\u5f53\u6211\u4eec\u5728\u8c08\u5230 ELF \u88c5\u8f7d\u65f6\uff0c\u201c\u6bb5\u201d\u4e13\u95e8\u6307<code>Segment</code>\uff1b\u800c\u5728\u5176\u4ed6\u7684\u60c5\u51b5\u4e0b\uff0c\u201c\u6bb5\u201d\u6307\u7684\u662f<code>Section</code>\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 readelf \u547d\u4ee4\u6765\u6253\u5370\u94fe\u63a5\u89c6\u56fe\u4e0e\u6267\u884c\u89c6\u56fe\u7684\u4e0d\u540c\uff0c\u6bd4\u5982\u6211\u4eec\u6709\u4e00\u4e2a\u540d\u4e3a<code>SectionMapping.elf</code>\u7684\u53ef\u6267\u884c\u6587\u4ef6</p> <pre><code># \u94fe\u63a5\u89c6\u56fe\nreadelf -S SectionMapping.elf\n\n# \u6267\u884c\u89c6\u89c6\u56fe\nreadelf -l SectionMapping.elf\n</code></pre> <p>\u8fd9\u91cc\u5c31\u4e0d\u6253\u5370\u7ed3\u679c\u4e86\uff0c\u6211\u4eec\u6765\u770b\u4e0b ELF \u6587\u4ef6\u4e0e\u8fdb\u7a0b\u865a\u62df\u7a7a\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u5982\u4e0b</p> <p></p> <p>\u5176\u5b9e\u5c31\u662f\u6211\u4eec\u4e0a\u9762\u8bf4\u7684\uff0c\u591a\u4e2a\u5c5e\u6027\u7c7b\u4f3c\u7684<code>Section</code>\u5408\u5e76\u4e3a\u4e00\u4e2a<code>Segment</code>\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u6620\u5c04\u5230\u540c\u4e00\u4e2a VMA \u4e2d </p>"},{"location":"foundation/self-cultivation/elf-load/#_12","title":"\u5806\u548c\u6808","text":"<p>\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0cVMA \u4e0d\u4ec5\u88ab\u7528\u4e8e\u6620\u5c04 ELF \u4e2d\u7684 <code>Segment</code>\u3002\u5b9e\u9645\u4e0a\uff0c\u8fdb\u7a0b\u6267\u884c\u8fc7\u7a0b\u4e2d\u9700\u8981\u7528\u5230\u7684\u6808\uff08Stack\uff09\u3001\u5806\uff08Heap\uff09\u7b49\u7a7a\u95f4\uff0c\u5728\u8fdb\u7a0b\u865a\u62df\u7a7a\u95f4\u4e2d\u4e5f\u662f\u4ee5 VMA \u7684\u5f62\u5f0f\u5b58\u5728\u7684\uff0c\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u7684\u6808\u548c\u5806\u5206\u522b\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684 VMA\u3002</p> <p>\u5728 Linux \u7cfb\u7edf\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b<code>/proc/$pid/maps</code>\u6587\u4ef6\u6765\u67e5\u770b\u8fdb\u7a0b\u7684\u865a\u62df\u7a7a\u95f4\u5206\u5e03</p> <pre><code>$ ./SectionMapping.elf &amp;\n[1] 1686\n\n$ cat /proc/1686/maps\n00400000-00401000 r--p 00000000 07:03 126044                             /workspaces/programmer-training/SectionMapping.elf\n00401000-00495000 r-xp 00001000 07:03 126044                             /workspaces/programmer-training/SectionMapping.elf\n00495000-004bc000 r--p 00095000 07:03 126044                             /workspaces/programmer-training/SectionMapping.elf\n004bd000-004c0000 r--p 000bc000 07:03 126044                             /workspaces/programmer-training/SectionMapping.elf\n004c0000-004c3000 rw-p 000bf000 07:03 126044                             /workspaces/programmer-training/SectionMapping.elf\n004c3000-004c4000 rw-p 00000000 00:00 0 \n012f5000-01318000 rw-p 00000000 00:00 0                                  [heap]\n7ffe70214000-7ffe70236000 rw-p 00000000 00:00 0                          [stack]\n7ffe70296000-7ffe7029a000 r--p 00000000 00:00 0                          [vvar]\n7ffe7029a000-7ffe7029c000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 --xp 00000000 00:00 0                  [vsyscall]\n</code></pre> <p>\u7531\u4e8e\u53ef\u6267\u884c\u6587\u4ef6\u5728\u88c5\u8f7d\u65f6\u5b9e\u9645\u4e0a\u662f\u88ab\u6620\u5c04\u7684\u865a\u62df\u7a7a\u95f4\uff0c\u6240\u4ee5\u53ef\u6267\u884c\u6587\u4ef6\u5f88\u591a\u65f6\u5019\u53c8\u88ab\u53eb\u505a\u6620\u50cf\u6587\u4ef6\uff08Image\uff09\uff0c\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\u4e2d\uff0c\u6bcf\u5217\u7684\u542b\u4e49\u5982\u4e0b</p> <ul> <li>\u7b2c\u4e00\u5217\u662fVMA\u7684\u5730\u5740\u8303\u56f4\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u5806\u5728\u4f4e\u5730\u5740\uff0c\u6808\u5728\u9ad8\u5730\u5740\uff1b</li> <li>\u7b2c\u4e8c\u5217\u662fVMA\u7684\u6743\u9650\uff0c\u201cr\u201d\u8868\u793a\u53ef\u8bfb\uff0c\u201cw\u201d\u8868\u793a\u53ef\u5199\uff0c\u201cx\u201d\u8868\u793a\u53ef\u6267\u884c\uff0c\u201cp\u201d\u8868\u793a\u79c1\u6709\uff08COW, Copy on Write\uff09\uff0c\u201cs\u201d\u8868\u793a\u5171\u4eab\u3002</li> <li>\u7b2c\u4e09\u5217\u662f\u504f\u79fb\uff0c\u8868\u793a VMA \u5bf9\u5e94\u7684Segment\u5728\u6620\u50cf\u6587\u4ef6\u4e2d\u7684\u504f\u79fb\uff1b</li> <li>\u7b2c\u56db\u5217\u8868\u793a\u6620\u50cf\u6587\u4ef6\u6240\u5728\u8bbe\u5907\u7684\u4e3b\u8bbe\u5907\u53f7\u548c\u6b21\u8bbe\u5907\u53f7\uff1b</li> <li>\u7b2c\u4e94\u5217\u8868\u793a\u6620\u50cf\u6587\u4ef6\u7684\u8282\u70b9\u53f7\u3002</li> <li>\u6700\u540e\u4e00\u5217\u662f\u6620\u50cf\u6587\u4ef6\u7684\u8def\u5f84\u3002</li> </ul> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u8fdb\u7a0b\u4e2d\u6709 11 \u4e2a VMA\uff0c\u524d 5 \u4e2a\u662f\u53ef\u4ee5\u6620\u5c04\u5230 ELF \u6587\u4ef6\u4e2d\u7684 Segment\u3002\u5176\u5b83\u6bb5\u7684\u6587\u4ef6\u6240\u5728\u8bbe\u5907\u4e3b\u8bbe\u5907\u53f7\u548c\u6b21\u8bbe\u5907\u53f7\u53ca\u6587\u4ef6\u8282\u70b9\u53f7\u90fd\u662f 0\uff0c\u5219\u8868\u793a\u5b83\u4eec\u6ca1\u6709\u6620\u5c04\u5230\u6587\u4ef6\u4e2d\uff0c\u8fd9\u79cdVMA\u53eb\u505a\u533f\u540d\u865a\u62df\u5185\u5b58\u533a\u57df\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5176\u4e2d\u6709\u4e24\u4e2a\u533a\u57df\u5206\u522b\u662f\u5806\uff08Heap\uff09\u548c\u6808\uff08Stack\uff09\uff0c\u8fd9\u4e24\u4e2a VMA \u975e\u5e38\u5e38\u89c1\uff0c\u51e0\u4e4e\u5728\u6240\u6709\u7684\u8fdb\u7a0b\u4e2d\u5b58\u5728\u3002</p> <p>\u603b\u5f97\u6765\u8bf4\uff0c\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u7ed9\u8fdb\u7a0b\u7a7a\u95f4\u5212\u5206\u51fa\u4e00\u4e2a\u4e2a VMA \u6765\u7ba1\u7406\u8fdb\u7a0b\u7684\u865a\u62df\u7a7a\u95f4\uff1b\u57fa\u672c\u539f\u5219\u662f\u5c06\u76f8\u540c\u6743\u9650\u5c5e\u6027\u7684\u3001\u6709\u76f8\u540c\u6620\u50cf\u6587\u4ef6\u7684\u6620\u5c04\u6210\u4e00\u4e2a VMA\uff1b\u4e00\u4e2a\u8fdb\u7a0b\u57fa\u672c\u4e0a\u53ef\u4ee5\u5206\u4e3a\u5982\u4e0b\u51e0\u79cd VMA \u533a\u57df\uff1a</p> <ul> <li>\u4ee3\u7801 VMA\uff0c\u6743\u9650\u53ea\u8bfb\u3001\u53ef\u6267\u884c\uff1b\u6709\u6620\u50cf\u6587\u4ef6\u3002</li> <li>\u6570\u636e VMA\uff0c\u6743\u9650\u53ef\u8bfb\u5199\u3001\u53ef\u6267\u884c\uff1b\u6709\u6620\u50cf\u6587\u4ef6\u3002</li> <li>\u5806 VMA\uff0c\u6743\u9650\u53ef\u8bfb\u5199\u3001\u53ef\u6267\u884c\uff1b\u65e0\u6620\u50cf\u6587\u4ef6\uff0c\u533f\u540d\uff0c\u53ef\u5411\u4e0a\u6269\u5c55\u3002</li> <li>\u6808 VMA\uff0c\u6743\u9650\u53ef\u8bfb\u5199\u3001\u4e0d\u53ef\u6267\u884c\uff1b\u65e0\u6620\u50cf\u6587\u4ef6\uff0c\u533f\u540d\uff0c\u53ef\u5411\u4e0b\u6269\u5c55\u3002</li> </ul> <p>\u4e00\u4e2a\u5e38\u89c1\u8fdb\u7a0b\u7684\u865a\u62df\u7a7a\u95f4\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"foundation/self-cultivation/elf-load/#_13","title":"\u6bb5\u5730\u5740\u5bf9\u9f50","text":"<p>\u53ef\u6267\u884c\u6587\u4ef6\u6700\u7ec8\u662f\u8981\u88ab\u64cd\u4f5c\u7cfb\u7edf\u88c5\u8f7d\u8fd0\u884c\u7684\uff0c\u8fd9\u4e2a\u88c5\u8f7d\u7684\u8fc7\u7a0b\u4e00\u822c\u662f\u901a\u8fc7\u865a\u62df\u5185\u5b58\u7684\u9875\u6620\u5c04\u673a\u5236\u5b8c\u6210\u7684\u3002\u5728\u6620\u5c04\u8fc7\u7a0b\u4e2d\uff0c\u9875\u662f\u6620\u5c04\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u800c\u9875\u5927\u5c0f\u4e00\u822c\u4e3a 4096 \u5b57\u8282</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u8981\u6620\u5c04\u5c06\u4e00\u6bb5\u7269\u7406\u5185\u5b58\u548c\u8fdb\u7a0b\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e4b\u95f4\u5efa\u7acb\u6620\u5c04\u5173\u7cfb\uff0c\u8fd9\u6bb5\u5185\u5b58\u7a7a\u95f4\u7684\u957f\u5ea6\u5fc5\u987b\u662f 4096 \u7684\u6574\u6570\u500d\uff0c\u5e76\u4e14\u8fd9\u6bb5\u7a7a\u95f4\u5728\u7269\u7406\u5185\u5b58\u548c\u8fdb\u7a0b\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u8d77\u59cb\u5730\u5740\u5fc5\u987b\u662f 4096 \u7684\u6574\u6570\u500d\u3002</p> <p>\u5f88\u660e\u663e\u8fd9\u4f1a\u5bfc\u81f4\u4e25\u91cd\u7684\u5185\u5b58\u6d6a\u8d39\u95ee\u9898\uff0c\u6bd4\u5982\u6211\u4eec ELF \u6587\u4ef6\u4e2d\u6709\u5982\u4e0b 3 \u4e2a Segment \u9700\u8981\u88c5\u8f7d</p> \u6bb5 \u8d77\u59cb\u865a\u62df\u5730\u5740 \u5927\u5c0f \u6709\u6548\u5b57\u8282 \u504f\u79fb \u6743\u9650 SEG0 0x08048000 0x1000 127 34 \u53ef\u8bfb\u53ef\u6267\u884c SEG1 0x08049000 0x3000 9899 164 \u53ef\u8bfb\u53ef\u5199 SEG2 0x0804C000 0x1000 1988 \u53ea\u8bfb <p>\u6574\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u7684\u4e09\u4e2a\u6bb5\u7684\u603b\u957f\u5ea6\u53ea\u6709 12014 \u5b57\u8282\uff0c\u5374\u5360\u636e\u4e86 5 \u4e2a\u9875\uff0c\u5373 20480 \u5b57\u8282\uff0c\u7a7a\u95f4\u4f7f\u7528\u7387\u53ea\u6709 58.6%</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u79cd\u95ee\u9898\uff0c\u4e00\u79cd\u89e3\u51b3\u601d\u8def\u5c31\u662f\uff1a\u8ba9\u90a3\u4e9b\u5404\u4e2a\u6bb5\u63a5\u58e4\u90e8\u5206\u5171\u4eab\u4e00\u4e2a\u7269\u7406\u9875\u9762\uff0c\u7136\u540e\u5c06\u8be5\u7269\u7406\u9875\u9762\u5206\u522b\u6620\u5c04\u4e24\u6b21</p> <p>\u6bd4\u5982\u6bb5 A \u7684\u6700\u540e\u4e00\u9875\u4e0e\u6bb5 B \u7684\u7b2c\u4e00\u9875\u63a5\u58e4\uff0c\u5c06\u4e24\u4e2a\u865a\u62df\u5730\u5740\u9875\u4e0e\u540c\u4e00\u4e2a\u7269\u7406\u9875\u9762\u5173\u8054\u8d77\u6765\uff0c\u4f46\u662f\u6bb5 A \u7684\u6700\u540e\u4e00\u9875\u865a\u62df\u5730\u5740\u53ea\u6709\u524d\u534a\u90e8\u5206\u6709\u6548\uff0c\u6bb5 B \u7684\u7b2c\u4e00\u9875\u865a\u62df\u5730\u5740\u53ea\u6709\u540e\u534a\u90e8\u5206\u6709\u6548</p> <p>\u5177\u4f53\u7684\u8ba1\u7b97\u89c4\u5219\u5c31\u4e0d\u5728\u8fd9\u91cc\u7f00\u8ff0\u4e86\uff0c\u53ef\u4ee5\u770b\u4e00\u7bc7\u5f88\u597d\u7684\u603b\u7ed3\uff1agcc\u7f16\u8bd1\u65f6\uff0c\u94fe\u63a5\u5668\u5b89\u6392\u7684\u3010\u865a\u62df\u5730\u5740\u3011\u662f\u5982\u4f55\u8ba1\u7b97\u51fa\u6765\u7684\uff1f</p>"},{"location":"foundation/self-cultivation/elf-load/#linux-elf","title":"Linux \u5185\u6838\u88c5\u8f7d ELF \u8fc7\u7a0b\u7b80\u4ecb","text":"<p>\u4e0b\u9762\u6211\u4eec\u7b80\u5355\u603b\u7ed3\u4e00\u4e0b linux \u5185\u6838\u88c5\u8f7d\u9759\u6001\u94fe\u63a5 ELF \u6587\u4ef6\u7684\u8fc7\u7a0b</p> <p>\u5f53\u6211\u4eec\u5728Linux\u7cfb\u7edf\u7684 bash \u4e0b\u8f93\u5165\u4e00\u4e2a\u547d\u4ee4\u6267\u884c\u67d0\u4e2a ELF \u7a0b\u5e8f\u65f6\uff0cLinux \u7cfb\u7edf\u662f\u600e\u6837\u88c5\u8f7d\u8fd9\u4e2aELF \u6587\u4ef6\u5e76\u4e14\u6267\u884c\u5b83\u7684\u5462\uff1f</p> <ul> <li>\u9996\u5148\u5728\u7528\u6237\u5c42\u9762\uff0c bash \u8fdb\u7a0b\u4f1a\u8c03\u7528<code>fork()</code>\u7cfb\u7edf\u8c03\u7528\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\uff0c\u7136\u540e\u65b0\u7684\u8fdb\u7a0b\u8c03\u7528<code>execve()</code>\u7cfb\u7edf\u8c03\u7528\u6267\u884c\u6307\u5b9a\u7684 ELF \u6587\u4ef6\uff0c\u539f\u5148\u7684 bash \u8fdb\u7a0b\u7ee7\u7eed\u8fd4\u56de\u7b49\u5f85\u521a\u624d\u542f\u52a8\u7684\u65b0\u8fdb\u7a0b\u7ed3\u675f\uff0c\u7136\u540e\u7ee7\u7eed\u7b49\u5f85\u7528\u6237\u8f93\u5165\u547d\u4ee4\u3002</li> <li>\u5728\u8fdb\u5165<code>execve()</code>\u7cfb\u7edf\u8c03\u7528\u4e4b\u540e\uff0cLinux \u5185\u6838\u5c31\u5f00\u59cb\u8fdb\u884c\u771f\u6b63\u7684\u88c5\u8f7d\u5de5\u4f5c\u3002</li> <li>\u9996\u5148\u67e5\u627e\u88ab\u6267\u884c\u7684\u6587\u4ef6\uff0c\u5982\u679c\u627e\u5230\u6587\u4ef6\uff0c\u5219\u8bfb\u53d6\u6587\u4ef6\u7684\u524d 128 \u4e2a\u5b57\u8282\uff0c\u4ee5\u83b7\u53d6\u6587\u4ef6\u5f00\u5934\u7684\u9b54\u6570\u3002\u6839\u636e\u9b54\u6570\u786e\u5b9a\u6587\u4ef6\u683c\u5f0f\uff0c\u5e76\u4e14\u8c03\u7528\u76f8\u5e94\u7684\u88c5\u8f7d\u5904\u7406\u8fc7\u7a0b\u3002</li> <li>\u5728 ELF \u88c5\u8f7d\u5904\u7406\u8fc7\u7a0b\u4e2d\uff0c\u9996\u5148\u4f1a\u68c0\u67e5 ELF \u53ef\u6267\u884c\u6587\u4ef6\u683c\u5f0f\u7684\u6709\u6548\u6027\uff0c\u6bd4\u5982\u9b54\u6570\u3001\u7a0b\u5e8f\u5934\u8868\u4e2d\u6bb5\uff08Segment\uff09\u7684\u6570\u91cf</li> <li>\u63a5\u4e0b\u6765\u6839\u636e ELF \u53ef\u6267\u884c\u6587\u4ef6\u7684\u7a0b\u5e8f\u5934\u8868\u7684\u63cf\u8ff0\uff0c\u5bf9 ELF \u6587\u4ef6\u8fdb\u884c\u6620\u5c04\uff0c\u6bd4\u5982\u4ee3\u7801\u3001\u6570\u636e\u3001\u53ea\u8bfb\u6570\u636e\u7b49</li> <li>\u521d\u59cb\u5316 ELF \u8fdb\u7a0b\u73af\u5883\uff0c\u5728\u8fdb\u7a0b\u521a\u5f00\u59cb\u542f\u52a8\u7684\u65f6\u5019\uff0c\u987b\u77e5\u9053\u4e00\u4e9b\u8fdb\u7a0b\u8fd0\u884c\u7684\u73af\u5883\uff0c\u6700\u57fa\u672c\u7684\u5c31\u662f\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u548c\u8fdb\u7a0b\u7684\u8fd0\u884c\u53c2\u6570</li> <li>\u5c06\u7cfb\u7edf\u8c03\u7528\u7684\u8fd4\u56de\u5730\u5740\u4fee\u6539\u6210 ELF \u53ef\u6267\u884c\u6587\u4ef6\u7684\u5165\u53e3\u70b9\uff0c\u5bf9\u4e8e\u9759\u6001\u94fe\u63a5\u5c31\u662f ELF \u6587\u4ef6\u7684\u6587\u4ef6\u5934\u4e2d e_entry \u6240\u6307\u7684\u5730\u5740</li> <li>\u5f53<code>sys_execve()</code>\u7cfb\u7edf\u8c03\u7528\u7ed3\u675f\uff0c\u4ece\u5185\u6838\u6001\u8fd4\u56de\u5230\u7528\u6237\u6001\u65f6\uff0cEIP \u5bc4\u5b58\u5668\u76f4\u63a5\u8df3\u8f6c\u5230\u4e86 ELF \u7a0b\u5e8f\u7684\u5165\u53e3\u5730\u5740\uff0c\u4e8e\u662f\u65b0\u7684\u7a0b\u5e8f\u5f00\u59cb\u6267\u884c\uff0cELF\u53ef\u6267\u884c\u6587\u4ef6\u88c5\u8f7d\u5b8c\u6210</li> </ul>"},{"location":"foundation/self-cultivation/elf-load/#_14","title":"\u603b\u7ed3","text":"<p>\u76f8\u6bd4\u4e4b\u524d\u7684\u94fe\u63a5\u89c6\u56fe\uff0c\u672c\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u6267\u884c\u89c6\u56fe\u7684 ELF \u6587\u4ef6\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9</p> <ul> <li>ELF \u6587\u4ef6\u662f\u5982\u4f55\u88ab\u88c5\u8f7d\u5230\u5185\u5b58\u4e0a\u7684\uff0c\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u9875\u6620\u5c04\u7684\u65b9\u5f0f\u5c06\u7a0b\u5e8f\u6620\u5c04\u5230\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4</li> <li>\u4ece\u64cd\u4f5c\u7cfb\u7edf\u89d2\u5ea6\u770b ELF \u6587\u4ef6\u662f\u5982\u4f55\u88c5\u8f7d\u7684\uff0c\u5f53\u7a0b\u5e8f\u5f00\u59cb\u8fd0\u884c\u65f6\u53d1\u751f\u9875\u9519\u8bef\u5982\u4f55\u5904\u7406</li> <li>\u8fdb\u7a0b\u865a\u5b58\u7a7a\u95f4\u5177\u4f53\u662f\u5982\u4f55\u5206\u5e03\u7684\uff0c\u5982\u4f55\u89e3\u51b3\u88c5\u8f7d\u8fc7\u7a0b\u4e2d\u7684\u5185\u5b58\u6d6a\u8d39\u95ee\u9898\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5982\u4f55\u4e3a\u7a0b\u5e8f\u7684\u4ee3\u7801\u3001\u6570\u636e\u3001\u5806\u3001\u6808\u5728\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u4e2d\u5206\u914d\uff0c\u5b83\u4eec\u662f\u5982\u4f55\u5206\u5e03\u7684</li> <li>Linux \u7cfb\u7edf\u662f\u600e\u6837\u88c5\u8f7d\u5e76\u8fd0\u884c ELF \u6587\u4ef6\u7684</li> </ul>"},{"location":"foundation/self-cultivation/memory/","title":"\u5185\u5b58","text":"<p>\u6700\u8fd1\u5728\u8bfb\u300a\u7a0b\u5e8f\u5458\u7684\u81ea\u6211\u4fee\u517b\uff1a\u94fe\u63a5\uff0c\u88c5\u8f7d\u4e0e\u5e93\u300b\uff0c\u5176\u5b9e\u8fd9\u672c\u4e66\u8ddf Android \u5f00\u53d1\u7684\u8054\u7cfb\u8fd8\u633a\u7d27\u5bc6\u7684\uff0c\u65e0\u8bba\u662f NDK \u5f00\u53d1\uff0c\u6216\u8005\u662f\u6027\u80fd\u4f18\u5316\u4e2d\u4e00\u4e9b\u5e38\u7528\u7684 Native Hoook \u624b\u6bb5\uff0c\u90fd\u9700\u8981\u4e86\u89e3\u4e00\u4e9b\u94fe\u63a5\uff0c\u88c5\u8f7d\u76f8\u5173\u7684\u77e5\u8bc6\u70b9\u3002\u672c\u6587\u4e3a\u8bfb\u4e66\u7b14\u8bb0\u3002</p>"},{"location":"foundation/self-cultivation/memory/#_2","title":"\u7a0b\u5e8f\u7684\u5185\u5b58\u5e03\u5c40","text":"<p>\u73b0\u4ee3\u7684\u5e94\u7528\u7a0b\u5e8f\u90fd\u8fd0\u884c\u5728\u4e00\u4e2a\u5185\u5b58\u7a7a\u95f4\u91cc\uff0c\u5728 32 \u4f4d\u7684\u7cfb\u7edf\u91cc\uff0c\u8fd9\u4e2a\u5185\u5b58\u7a7a\u95f4\u62e5\u6709 4GB\uff082\u768432\u6b21\u65b9\uff09\u7684\u5bfb\u5740\u80fd\u529b\u3002</p> <p>\u5927\u591a\u6570\u64cd\u4f5c\u7cfb\u7edf\u90fd\u4f1a\u5c06 4GB \u7684\u5185\u5b58\u7a7a\u95f4\u4e2d\u7684\u4e00\u90e8\u5206\u632a\u7ed9\u5185\u6838\u4f7f\u7528\uff0c\u5e94\u7528\u7a0b\u5e8f\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u8fd9\u4e00\u6bb5\u5185\u5b58\uff0c\u8fd9\u4e00\u90e8\u5206\u5185\u5b58\u5730\u5740\u88ab\u79f0\u4e3a\u5185\u6838\u7a7a\u95f4\u3002Linux \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u5c06\u9ad8\u5730\u5740\u7684 1GB \u7a7a\u95f4\u5206\u914d\u7ed9\u5185\u6838\uff0c\u7528\u6237\u4f7f\u7528\u7684\u5269\u4e0b 3GB \u7684\u5185\u5b58\u7a7a\u95f4\u79f0\u4e3a\u7528\u6237\u7a7a\u95f4\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u91cc\u5305\u62ec\u5982\u4e0b\u201c\u9ed8\u8ba4\u201d\u7684\u533a\u57df\uff1a</p> <ul> <li>\u6808\uff1a\u6808\u7528\u4e8e\u7ef4\u62a4\u51fd\u6570\u8c03\u7528\u7684\u4e0a\u4e0b\u6587\uff0c\u79bb\u5f00\u4e86\u6808\u51fd\u6570\u8c03\u7528\u5c31\u6ca1\u6cd5\u5b9e\u73b0\u3002\u6808\u901a\u5e38\u5728\u7528\u6237\u7a7a\u95f4\u7684\u6700\u9ad8\u5730\u5740\u5904\u5206\u914d\uff0c\u901a\u5e38\u6709\u6570\u5146\u5b57\u8282\u7684\u5927\u5c0f\u3002</li> <li>\u5806\uff1a\u5806\u662f\u7528\u6765\u5bb9\u7eb3\u5e94\u7528\u7a0b\u5e8f\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u533a\u57df\uff0c\u5f53\u7a0b\u5e8f\u4f7f\u7528 malloc \u6216 new \u5206\u914d\u5185\u5b58\u65f6\uff0c\u5f97\u5230\u7684\u5185\u5b58\u6765\u81ea\u5806\u91cc\u3002\u5806\u901a\u5e38\u5b58\u5728\u4e8e\u6808\u7684\u4e0b\u65b9\uff08\u4f4e\u5730\u5740\u65b9\u5411\uff09\uff0c\u5728\u67d0\u4e9b\u65f6\u5019\uff0c\u5806\u4e5f\u53ef\u80fd\u6ca1\u6709\u56fa\u5b9a\u7edf\u4e00\u7684\u5b58\u50a8\u533a\u57df\u3002\u5806\u4e00\u822c\u6bd4\u6808\u5927\u5f88\u591a\uff0c\u53ef\u4ee5\u6709\u51e0\u5341\u81f3\u6570\u767e\u5146\u5b57\u8282\u7684\u5bb9\u91cf\u3002</li> <li>\u53ef\u6267\u884c\u6587\u4ef6\u6620\u50cf\uff1a\u8fd9\u91cc\u5b58\u50a8\u7740\u53ef\u6267\u884c\u6587\u4ef6\u5728\u5185\u5b58\u91cc\u7684\u6620\u50cf\uff0c\u7531\u88c5\u8f7d\u5668\u5728\u88c5\u8f7d\u65f6\u5c06\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5185\u5b58\u8bfb\u53d6\u6216\u6620\u5c04\u5230\u8fd9\u91cc\u3002</li> <li>\u4fdd\u7559\u533a\uff1a\u4fdd\u7559\u533a\u5e76\u4e0d\u662f\u4e00\u4e2a\u5355\u4e00\u7684\u5185\u5b58\u533a\u57df\uff0c\u800c\u662f\u5bf9\u5185\u5b58\u4e2d\u53d7\u5230\u4fdd\u62a4\u800c\u7981\u6b62\u8bbf\u95ee\u7684\u5185\u5b58\u533a\u57df\u7684\u603b\u79f0\uff0c\u4f8b\u5982\uff0c\u5927\u591a\u6570\u64cd\u4f5c\u7cfb\u7edf\u91cc\uff0c\u6781\u5c0f\u7684\u5730\u5740\u901a\u5e38\u90fd\u662f\u4e0d\u5141\u8bb8\u8bbf\u95ee\u7684\uff0c\u5982NULL\u3002\u901a\u5e38 C \u8bed\u8a00\u5c06\u65e0\u6548\u6307\u9488\u8d4b\u503c\u4e3a0\u4e5f\u662f\u51fa\u4e8e\u8fd9\u4e2a\u8003\u8651\uff0c\u56e0\u4e3a0\u5730\u5740\u4e0a\u6b63\u5e38\u60c5\u51b5\u4e0b\u4e0d\u53ef\u80fd\u6709\u6709\u6548\u7684\u53ef\u8bbf\u95ee\u6570\u636e\u3002</li> </ul> <p></p> <p>\u5982\u56fe\u6240\u793a\uff0c\u6808\u5411\u4f4e\u5730\u5740\u589e\u957f\uff0c\u5806\u5411\u9ad8\u5730\u5740\u589e\u957f\u3002\u5f53\u6808\u6216\u5806\u73b0\u6709\u7684\u5927\u5c0f\u4e0d\u591f\u7528\u65f6\uff0c\u5b83\u5c06\u6309\u7167\u56fe\u4e2d\u7684\u589e\u957f\u65b9\u5411\u6269\u5927\u81ea\u8eab\u7684\u5c3a\u5bf8\uff0c\u76f4\u5230\u9884\u7559\u7684\u7a7a\u95f4\u88ab\u7528\u5b8c\u4e3a\u6b62\u3002</p>"},{"location":"foundation/self-cultivation/memory/#_3","title":"\u6808","text":""},{"location":"foundation/self-cultivation/memory/#_4","title":"\u4ec0\u4e48\u662f\u6808","text":"<p>\u6808\uff08stack\uff09\u662f\u73b0\u4ee3\u8ba1\u7b97\u673a\u7a0b\u5e8f\u91cc\u6700\u4e3a\u91cd\u8981\u7684\u6982\u5ff5\u4e4b\u4e00\uff0c\u51e0\u4e4e\u6bcf\u4e00\u4e2a\u7a0b\u5e8f\u90fd\u4f7f\u7528\u4e86\u6808\uff0c\u6ca1\u6709\u6808\u5c31\u6ca1\u6709\u51fd\u6570\uff0c\u6ca1\u6709\u5c40\u90e8\u53d8\u91cf\uff0c\u4e5f\u5c31\u6ca1\u6709\u6211\u4eec\u5982\u4eca\u80fd\u591f\u770b\u89c1\u7684\u6240\u6709\u7684\u8ba1\u7b97\u673a\u8bed\u8a00\u3002\u5728\u89e3\u91ca\u4e3a\u4ec0\u4e48\u6808\u4f1a\u5982\u6b64\u91cd\u8981\u4e4b\u524d\uff0c\u8ba9\u6211\u4eec\u6765\u5148\u4e86\u89e3\u4e00\u4e0b\u4f20\u7edf\u7684\u6808\u7684\u5b9a\u4e49\uff1a</p> <p>\u5728\u7ecf\u5178\u7684\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\uff0c\u6808\u88ab\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u7279\u6b8a\u7684\u5bb9\u5668\uff0c\u7528\u6237\u53ef\u4ee5\u5c06\u6570\u636e\u538b\u5165\u6808\u4e2d\uff08\u5165\u6808\uff0cpush\uff09\uff0c\u4e5f\u53ef\u4ee5\u5c06\u5df2\u7ecf\u538b\u5165\u6808\u4e2d\u7684\u6570\u636e\u5f39\u51fa\uff08\u51fa\u6808\uff0cpop\uff09\uff0c\u4f46\u6808\u8fd9\u4e2a\u5bb9\u5668\u5fc5\u987b\u9075\u5b88\u4e00\u6761\u89c4\u5219\uff1a\u5148\u5165\u6808\u7684\u6570\u636e\u540e\u51fa\u6808\uff08First In Last Out, FIFO\uff09\uff0c\u5373\u5148\u8fdb\u540e\u51fa\u3002</p> <p>\u800c\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u6808\u5219\u662f\u4e00\u4e2a\u5177\u6709\u4ee5\u4e0a\u5c5e\u6027\u7684\u52a8\u6001\u5185\u5b58\u533a\u57df\u3002\u7a0b\u5e8f\u53ef\u4ee5\u5c06\u6570\u636e\u538b\u5165\u6808\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u5c06\u6570\u636e\u4ece\u6808\u9876\u5f39\u51fa\u3002\u538b\u6808\u64cd\u4f5c\u4f7f\u5f97\u6808\u589e\u5927\uff0c\u800c\u5f39\u51fa\u64cd\u4f5c\u4f7f\u6808\u51cf\u5c0f\u3002\u5728\u7ecf\u5178\u7684\u64cd\u4f5c\u7cfb\u7edf\u91cc\uff0c\u6808\u603b\u662f\u5411\u4e0b\u589e\u957f\u7684\u3002</p> <p>\u6808\u5728\u7a0b\u5e8f\u8fd0\u884c\u4e2d\u5177\u6709\u4e3e\u8db3\u8f7b\u91cd\u7684\u5730\u4f4d\u3002\u6700\u91cd\u8981\u7684\uff0c\u6808\u4fdd\u5b58\u4e86\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\u6240\u9700\u8981\u7684\u7ef4\u62a4\u4fe1\u606f\uff0c\u8fd9\u5e38\u5e38\u88ab\u79f0\u4e3a\u5806\u6808\u5e27\uff08Stack Frame\uff09\u6216\u6d3b\u52a8\u8bb0\u5f55\uff08Activate Record\uff09\u3002\u5806\u6808\u5e27\u4e00\u822c\u5305\u62ec\u5982\u4e0b\u51e0\u65b9\u9762\u5185\u5bb9</p> <ul> <li>\u51fd\u6570\u7684\u8fd4\u56de\u5730\u5740\u548c\u53c2\u6570</li> <li>\u4e34\u65f6\u53d8\u91cf\uff1a\u5305\u62ec\u51fd\u6570\u7684\u975e\u9759\u6001\u5c40\u90e8\u53d8\u91cf\u4ee5\u53ca\u7f16\u8bd1\u5668\u81ea\u52a8\u751f\u6210\u7684\u5176\u4ed6\u4e34\u65f6\u53d8\u91cf\u3002</li> <li>\u4fdd\u5b58\u7684\u4e0a\u4e0b\u6587\uff1a\u5305\u62ec\u5728\u51fd\u6570\u8c03\u7528\u524d\u540e\u9700\u8981\u4fdd\u6301\u4e0d\u53d8\u7684\u5bc4\u5b58\u5668\u3002</li> </ul> <p>\u5728i386\u4e2d\uff0c\u4e00\u4e2a\u51fd\u6570\u7684\u6d3b\u52a8\u8bb0\u5f55\u7528 ebp \u548c esp \u8fd9\u4e24\u4e2a\u5bc4\u5b58\u5668\u5212\u5b9a\u8303\u56f4\u3002esp \u5bc4\u5b58\u5668\u59cb\u7ec8\u6307\u5411\u6808\u7684\u9876\u90e8\uff0c\u540c\u65f6\u4e5f\u5c31\u6307\u5411\u4e86\u5f53\u524d\u51fd\u6570\u7684\u6d3b\u52a8\u8bb0\u5f55\u7684\u9876\u90e8\u3002\u800c\u76f8\u5bf9\u7684\uff0cebp \u5bc4\u5b58\u5668\u6307\u5411\u4e86\u51fd\u6570\u6d3b\u52a8\u8bb0\u5f55\u7684\u4e00\u4e2a\u56fa\u5b9a\u4f4d\u7f6e\uff0cebp \u5bc4\u5b58\u5668\u53c8\u88ab\u79f0\u4e3a\u5e27\u6307\u9488\uff08Frame Pointer\uff09\u3002\u4e00\u4e2a\u5f88\u5e38\u89c1\u7684\u6d3b\u52a8\u8bb0\u5f55\u793a\u4f8b\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <ul> <li>\u5728\u53c2\u6570\u4e4b\u540e\u7684\u6570\u636e\uff08\u5305\u62ec\u53c2\u6570\uff09\u5373\u662f\u5f53\u524d\u51fd\u6570\u7684\u6d3b\u52a8\u8bb0\u5f55\u3002</li> <li>ebp \u56fa\u5b9a\u5728\u56fe\u4e2d\u6240\u793a\u7684\u4f4d\u7f6e\uff0c\u4e0d\u968f\u8fd9\u4e2a\u51fd\u6570\u7684\u6267\u884c\u800c\u53d8\u5316\uff0c\u76f8\u53cd\u5730\uff0cesp\u59cb\u7ec8\u6307\u5411\u6808\u9876\uff0c\u56e0\u6b64\u968f\u7740\u51fd\u6570\u7684\u6267\u884c\uff0cesp\u4f1a\u4e0d\u65ad\u53d8\u5316\u3002</li> <li>\u56fa\u5b9a\u4e0d\u53d8\u7684ebp\u53ef\u4ee5\u7528\u6765\u5b9a\u4f4d\u51fd\u6570\u6d3b\u52a8\u8bb0\u5f55\u4e2d\u7684\u5404\u4e2a\u6570\u636e\u3002\u5728ebp\u4e4b\u524d\u9996\u5148\u662f\u8fd9\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u5730\u5740\uff0c\u5b83\u7684\u5730\u5740\u662febp-4\uff0c\u518d\u5f80\u524d\u662f\u538b\u5165\u6808\u4e2d\u7684\u53c2\u6570\uff0c\u5b83\u4eec\u7684\u5730\u5740\u5206\u522b\u662febp-8\u3001ebp-12\u7b49\uff0c\u89c6\u53c2\u6570\u6570\u91cf\u548c\u5927\u5c0f\u800c\u5b9a\u3002</li> <li>ebp\u6240\u76f4\u63a5\u6307\u5411\u7684\u6570\u636e\u662f\u8c03\u7528\u8be5\u51fd\u6570\u524debp\u7684\u503c\uff0c\u8fd9\u6837\u5728\u51fd\u6570\u8fd4\u56de\u7684\u65f6\u5019\uff0cebp\u53ef\u4ee5\u901a\u8fc7\u8bfb\u53d6\u8fd9\u4e2a\u503c\u6062\u590d\u5230\u8c03\u7528\u524d\u7684\u503c\u3002</li> </ul>"},{"location":"foundation/self-cultivation/memory/#_5","title":"\u51fd\u6570\u8c03\u7528\u7684\u8fc7\u7a0b","text":"<p>\u4e4b\u6240\u4ee5\u51fd\u6570\u7684\u6d3b\u52a8\u8bb0\u5f55\u4f1a\u5f62\u6210\u5982\u4e0a\u7684\u7ed3\u6784\uff0c\u662f\u56e0\u4e3a\u51fd\u6570\u8c03\u7528\u672c\u8eab\u662f\u5982\u6b64\u4e66\u5199\u7684\uff1a\u4e00\u4e2ai386\u4e0b\u7684\u51fd\u6570\u603b\u662f\u8fd9\u6837\u8c03\u7528\u7684\uff1a</p> <ul> <li>\u628a\u6240\u6709\u6216\u4e00\u90e8\u5206\u53c2\u6570\u538b\u5165\u6808\u4e2d\uff0c\u5982\u679c\u6709\u5176\u4ed6\u53c2\u6570\u6ca1\u6709\u5165\u6808\uff0c\u90a3\u4e48\u4f7f\u7528\u67d0\u4e9b\u7279\u5b9a\u7684\u5bc4\u5b58\u5668\u4f20\u9012\u3002</li> <li>\u628a\u5f53\u524d\u6307\u4ee4\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\u538b\u5165\u6808\u4e2d\u3002</li> <li>\u8df3\u8f6c\u5230\u51fd\u6570\u4f53\u6267\u884c\u3002</li> </ul> <p>\u5176\u4e2d\u7b2c 2 \u6b65\u548c\u7b2c 3 \u6b65\u7531\u6307\u4ee4call\u4e00\u8d77\u6267\u884c\u3002\u8df3\u8f6c\u5230\u51fd\u6570\u4f53\u4e4b\u540e\u5373\u5f00\u59cb\u6267\u884c\u51fd\u6570\uff0c\u800ci386\u51fd\u6570\u4f53\u7684\u201c\u6807\u51c6\u201d\u5f00\u5934\u662f\u8fd9\u6837\u7684\uff1a</p> <ul> <li>push ebp\uff1a\u628a ebp \u538b\u5165\u6808\u4e2d\uff08\u79f0\u4e3aold ebp\uff09\u3002</li> <li>mov ebp, esp\uff1aebp = esp\uff08\u8fd9\u65f6ebp\u6307\u5411\u6808\u9876\uff0c\u800c\u6b64\u65f6\u6808\u9876\u5c31\u662fold ebp\uff09\u3002</li> <li>\u3010\u53ef\u9009\u3011sub esp, XXX\uff1a\u5728\u6808\u4e0a\u5206\u914dXXX\u5b57\u8282\u7684\u4e34\u65f6\u7a7a\u95f4\u3002</li> <li>\u3010\u53ef\u9009\u3011push XXX\uff1a\u5982\u6709\u5fc5\u8981\uff0c\u4fdd\u5b58\u540d\u4e3aXXX\u5bc4\u5b58\u5668\uff08\u53ef\u91cd\u590d\u591a\u4e2a\uff09\u3002</li> </ul> <p>\u628a ebp \u538b\u5165\u6808\u4e2d\uff0c\u662f\u4e3a\u4e86\u5728\u51fd\u6570\u8fd4\u56de\u7684\u65f6\u5019\u4fbf\u4e8e\u6062\u590d\u4ee5\u524d\u7684 ebp \u503c\u3002\u800c\u4e4b\u6240\u4ee5\u53ef\u80fd\u8981\u4fdd\u5b58\u4e00\u4e9b\u5bc4\u5b58\u5668\uff0c\u5728\u4e8e\u7f16\u8bd1\u5668\u53ef\u80fd\u8981\u6c42\u67d0\u4e9b\u5bc4\u5b58\u5668\u5728\u8c03\u7528\u524d\u540e\u4fdd\u6301\u4e0d\u53d8\uff0c\u90a3\u4e48\u51fd\u6570\u5c31\u53ef\u4ee5\u5728\u8c03\u7528\u5f00\u59cb\u65f6\u5c06\u8fd9\u4e9b\u5bc4\u5b58\u5668\u7684\u503c\u538b\u5165\u6808\u4e2d\uff0c\u5728\u7ed3\u675f\u540e\u518d\u53d6\u51fa\u3002\u800c\u5728\u51fd\u6570\u8fd4\u56de\u65f6\uff0c\u6240\u8fdb\u884c\u7684\u201c\u6807\u51c6\u201d\u7ed3\u5c3e\u4e0e\u201c\u6807\u51c6\u201d\u5f00\u5934\u6b63\u597d\u76f8\u53cd</p> <ul> <li>\u3010\u53ef\u9009\u3011pop XXX\uff1a\u5982\u6709\u5fc5\u8981\uff0c\u6062\u590d\u4fdd\u5b58\u8fc7\u7684\u5bc4\u5b58\u5668\uff08\u53ef\u91cd\u590d\u591a\u4e2a\uff09</li> <li>mov esp, ebp\uff1a\u6062\u590dESP\u540c\u65f6\u56de\u6536\u5c40\u90e8\u53d8\u91cf\u7a7a\u95f4\u3002</li> <li>pop ebp\uff1a\u4ece\u6808\u4e2d\u6062\u590d\u4fdd\u5b58\u7684ebp\u7684\u503c\u3002</li> <li>ret\uff1a\u4ece\u6808\u4e2d\u53d6\u5f97\u8fd4\u56de\u5730\u5740\uff0c\u5e76\u8df3\u8f6c\u5230\u8be5\u4f4d\u7f6e\u3002</li> </ul> <p></p>"},{"location":"foundation/self-cultivation/memory/#_6","title":"\u5806\u4e0e\u5185\u5b58\u7ba1\u7406","text":""},{"location":"foundation/self-cultivation/memory/#_7","title":"\u4ec0\u4e48\u662f\u5806","text":"<p>\u5149\u6709\u6808\u5bf9\u4e8e\u9762\u5411\u8fc7\u7a0b\u7684\u7a0b\u5e8f\u8bbe\u8ba1\u8fd8\u8fdc\u8fdc\u4e0d\u591f\uff0c\u56e0\u4e3a\u6808\u4e0a\u7684\u6570\u636e\u5728\u51fd\u6570\u8fd4\u56de\u7684\u65f6\u5019\u5c31\u4f1a\u88ab\u91ca\u653e\u6389\uff0c\u6240\u4ee5\u65e0\u6cd5\u5c06\u6570\u636e\u4f20\u9012\u81f3\u51fd\u6570\u5916\u90e8\u3002\u800c\u5168\u5c40\u53d8\u91cf\u6ca1\u6709\u529e\u6cd5\u52a8\u6001\u5730\u4ea7\u751f\uff0c\u53ea\u80fd\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u5b9a\u4e49\uff0c\u6709\u5f88\u591a\u60c5\u51b5\u4e0b\u7f3a\u4e4f\u8868\u73b0\u529b\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5806\uff08Heap\uff09\u662f\u552f\u4e00\u7684\u9009\u62e9\u3002</p> <p>\u5806\u662f\u4e00\u5757\u5de8\u5927\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5e38\u5e38\u5360\u636e\u6574\u4e2a\u865a\u62df\u7a7a\u95f4\u7684\u7edd\u5927\u90e8\u5206\u3002\u5728\u8fd9\u7247\u7a7a\u95f4\u91cc\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u8bf7\u6c42\u4e00\u5757\u8fde\u7eed\u5185\u5b58\uff0c\u5e76\u81ea\u7531\u5730\u4f7f\u7528\uff0c\u8fd9\u5757\u5185\u5b58\u5728\u7a0b\u5e8f\u4e3b\u52a8\u653e\u5f03\u4e4b\u524d\u90fd\u4f1a\u4e00\u76f4\u4fdd\u6301\u6709\u6548\u3002</p> <p>\u5f53\u7a0b\u5e8f\u4f7f\u7528 malloc \u6216 new \u5206\u914d\u5185\u5b58\u65f6\uff0c\u5f97\u5230\u7684\u5185\u5b58\u6765\u81ea\u5806\u91cc\u3002\u90a3\u4e48malloc\u5230\u5e95\u662f\u600e\u4e48\u5b9e\u73b0\u7684\u5462\uff1f</p> <p>\u6709\u4e00\u79cd\u505a\u6cd5\u662f\uff0c\u628a\u8fdb\u7a0b\u7684\u5185\u5b58\u7ba1\u7406\u4ea4\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u53bb\u505a\uff0c\u65e2\u7136\u5185\u6838\u7ba1\u7406\u7740\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u90a3\u4e48\u5982\u679c\u5b83\u63d0\u4f9b\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\uff0c\u53ef\u4ee5\u8ba9\u7a0b\u5e8f\u4f7f\u7528\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u7533\u8bf7\u5185\u5b58\uff0c\u4e0d\u5c31\u53ef\u4ee5\u4e86\u5417\uff1f</p> <p>\u8fd9\u79cd\u65b9\u5f0f\u7684\u95ee\u9898\u5728\u4e8e\u6027\u80fd\u6bd4\u8f83\u5dee\uff0c\u56e0\u4e3a\u6bcf\u6b21\u7a0b\u5e8f\u7533\u8bf7\u6216\u8005\u91ca\u653e\u5806\u7a7a\u95f4\u90fd\u9700\u8981\u8fdb\u884c\u7cfb\u7edf\u8c03\u7528\u3002\u6211\u4eec\u77e5\u9053\u7cfb\u7edf\u8c03\u7528\u7684\u6027\u80fd\u5f00\u9500\u662f\u5f88\u5927\u7684\uff0c\u5f53\u7a0b\u5e8f\u5bf9\u5806\u7684\u64cd\u4f5c\u6bd4\u8f83\u9891\u7e41\u65f6\uff0c\u8fd9\u6837\u505a\u7684\u7ed3\u679c\u4f1a\u4e25\u91cd\u5f71\u54cd\u7a0b\u5e8f\u7684\u6027\u80fd\u3002\u6bd4\u8f83\u597d\u7684\u505a\u6cd5\u5c31\u662f\u7a0b\u5e8f\u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u4e00\u5757\u9002\u5f53\u5927\u5c0f\u7684\u5806\u7a7a\u95f4\uff0c\u7136\u540e\u7531\u7a0b\u5e8f\u81ea\u5df1\u7ba1\u7406\u8fd9\u5757\u7a7a\u95f4\uff0c\u800c\u5177\u4f53\u6765\u8bb2\uff0c\u7ba1\u7406\u7740\u5806\u7a7a\u95f4\u5206\u914d\u7684\u5f80\u5f80\u662f\u7a0b\u5e8f\u7684\u8fd0\u884c\u5e93\u3002</p> <p>\u8fd0\u884c\u5e93\u76f8\u5f53\u4e8e\u662f\u5411\u64cd\u4f5c\u7cfb\u7edf\u201c\u6279\u53d1\u201d\u4e86\u4e00\u5757\u8f83\u5927\u7684\u5806\u7a7a\u95f4\uff0c\u7136\u540e\u201c\u96f6\u552e\u201d\u7ed9\u7a0b\u5e8f\u7528\u3002\u5f53\u5168\u90e8\u201c\u552e\u5b8c\u201d\u6216\u7a0b\u5e8f\u6709\u5927\u91cf\u7684\u5185\u5b58\u9700\u6c42\u65f6\uff0c\u518d\u6839\u636e\u5b9e\u9645\u9700\u6c42\u5411\u64cd\u4f5c\u7cfb\u7edf\u201c\u8fdb\u8d27\u201d\u3002\u5f53\u7136\u8fd0\u884c\u5e93\u5728\u5411\u7a0b\u5e8f\u96f6\u552e\u5806\u7a7a\u95f4\u65f6\uff0c\u5fc5\u987b\u7ba1\u7406\u5b83\u6279\u53d1\u6765\u7684\u5806\u7a7a\u95f4\uff0c\u4e0d\u80fd\u628a\u540c\u4e00\u5757\u5730\u5740\u51fa\u552e\u4e24\u6b21\uff0c\u5bfc\u81f4\u5730\u5740\u7684\u51b2\u7a81\u3002\u4e8e\u662f\u8fd0\u884c\u5e93\u9700\u8981\u4e00\u4e2a\u7b97\u6cd5\u6765\u7ba1\u7406\u5806\u7a7a\u95f4\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u5c31\u662f\u5806\u7684\u5206\u914d\u7b97\u6cd5\u3002</p> <p>\u4e0d\u8fc7\u5728\u4e86\u89e3\u5177\u4f53\u7684\u5206\u914d\u7b97\u6cd5\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u6765\u770b\u770b\u8fd0\u884c\u5e93\u662f\u600e\u4e48\u5411\u64cd\u4f5c\u7cfb\u7edf\u6279\u53d1\u5185\u5b58\u7684\u3002</p>"},{"location":"foundation/self-cultivation/memory/#linux","title":"Linux \u8fdb\u7a0b\u5806\u7ba1\u7406","text":"<p>Linux \u63d0\u4f9b\u4e86\u4e24\u79cd\u5806\u7a7a\u95f4\u5206\u914d\u65b9\u5f0f\uff0c\u5373\u4e24\u4e2a\u7cfb\u7edf\u8c03\u7528\uff1a\u4e00\u4e2a\u662f brk() \u7cfb\u7edf\u8c03\u7528\uff0c\u53e6\u4e00\u4e2a\u662f mmap()\u3002</p> <p>brk() \u7684\u4f5c\u7528\u5b9e\u9645\u4e0a\u5c31\u662f\u8bbe\u7f6e\u8fdb\u7a0b\u6570\u636e\u6bb5\u7684\u7ed3\u675f\u5730\u5740\uff0c\u5373\u5b83\u53ef\u4ee5\u6269\u5927\u6216\u8005\u7f29\u5c0f\u6570\u636e\u6bb5\uff08Linux \u4e0b\u6570\u636e\u6bb5\u548c BSS \u5408\u5e76\u5728\u4e00\u8d77\u7edf\u79f0\u6570\u636e\u6bb5\uff09\u3002\u5982\u679c\u6211\u4eec\u5c06\u6570\u636e\u6bb5\u7684\u7ed3\u675f\u5730\u5740\u5411\u9ad8\u5730\u5740\u79fb\u52a8\uff0c\u90a3\u4e48\u6269\u5927\u7684\u90a3\u90e8\u5206\u7a7a\u95f4\u5c31\u53ef\u4ee5\u88ab\u6211\u4eec\u4f7f\u7528\uff0c\u628a\u8fd9\u5757\u7a7a\u95f4\u62ff\u6765\u4f5c\u4e3a\u5806\u7a7a\u95f4\u662f\u6700\u5e38\u89c1\u7684\u505a\u6cd5\u4e4b\u4e00\u3002</p> <p>mmap() \u7684\u4f5c\u7528\u5c31\u662f\u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u4e00\u6bb5\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u5f53\u7136\u8fd9\u5757\u865a\u62df\u5730\u5740\u7a7a\u95f4\u53ef\u4ee5\u6620\u5c04\u5230\u67d0\u4e2a\u6587\u4ef6\uff08\u8fd9\u4e5f\u662f\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u7684\u6700\u521d\u7684\u4f5c\u7528\uff09\uff0c\u5f53\u5b83\u4e0d\u5c06\u5730\u5740\u7a7a\u95f4\u6620\u5c04\u5230\u67d0\u4e2a\u6587\u4ef6\u65f6\uff0c\u6211\u4eec\u53c8\u79f0\u8fd9\u5757\u7a7a\u95f4\u4e3a\u533f\u540d\uff08Anonymous\uff09\u7a7a\u95f4\uff0c\u533f\u540d\u7a7a\u95f4\u5c31\u53ef\u4ee5\u62ff\u6765\u4f5c\u4e3a\u5806\u7a7a\u95f4\u3002</p> <p>glibc \u7684 malloc \u51fd\u6570\u662f\u8fd9\u6837\u5904\u7406\u7528\u6237\u7684\u7a7a\u95f4\u8bf7\u6c42\u7684\uff1a\u5bf9\u4e8e\u5c0f\u4e8e 128KB \u7684\u8bf7\u6c42\u6765\u8bf4\uff0c\u5b83\u4f1a\u5728\u73b0\u6709\u7684\u5806\u7a7a\u95f4\u91cc\u9762\uff0c\u6309\u7167\u5806\u5206\u914d\u7b97\u6cd5\u4e3a\u5b83\u5206\u914d\u4e00\u5757\u7a7a\u95f4\u5e76\u8fd4\u56de\uff1b\u5bf9\u4e8e\u5927\u4e8e 128KB \u7684\u8bf7\u6c42\u6765\u8bf4\uff0c\u5b83\u4f1a\u4f7f\u7528 mmap() \u51fd\u6570\u4e3a\u5b83\u5206\u914d\u4e00\u5757\u533f\u540d\u7a7a\u95f4\uff0c\u7136\u540e\u5728\u8fd9\u4e2a\u533f\u540d\u7a7a\u95f4\u4e2d\u4e3a\u7528\u6237\u5206\u914d\u7a7a\u95f4\u3002</p>"},{"location":"foundation/self-cultivation/memory/#_8","title":"\u5806\u5206\u914d\u7b97\u6cd5","text":"<p>\u524d\u9762\u4ecb\u7ecd\u4e86\u5806\u5728\u8fdb\u7a0b\u4e2d\u7684\u5730\u5740\u7a7a\u95f4\u662f\u5982\u4f55\u5206\u5e03\u7684\uff0c\u5bf9\u4e8e\u7a0b\u5e8f\u6765\u8bf4\uff0c\u5806\u7a7a\u95f4\u53ea\u662f\u7a0b\u5e8f\u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u5212\u51fa\u6765\u7684\u4e00\u5927\u5757\u5730\u5740\u7a7a\u95f4\u3002\u800c\u7a0b\u5e8f\u5728\u901a\u8fc7malloc\u7533\u8bf7\u5185\u5b58\u7a7a\u95f4\u65f6\u7684\u5927\u5c0f\u5374\u662f\u4e0d\u4e00\u5b9a\u7684\uff0c\u4ece\u6570\u4e2a\u5b57\u8282\u5230\u6570\u4e2aGB\u90fd\u662f\u6709\u53ef\u80fd\u7684\u3002</p> <p>\u4e8e\u662f\u6211\u4eec\u5fc5\u987b\u5c06\u5806\u7a7a\u95f4\u7ba1\u7406\u8d77\u6765\uff0c\u5c06\u5b83\u5206\u5757\u5730\u6309\u7167\u7528\u6237\u9700\u6c42\u51fa\u552e\u7ed9\u6700\u7ec8\u7684\u7a0b\u5e8f\uff0c\u5e76\u4e14\u8fd8\u53ef\u4ee5\u6309\u7167\u4e00\u5b9a\u7684\u65b9\u5f0f\u6536\u56de\u5185\u5b58\u3002\u5176\u5b9e\u8fd9\u4e2a\u95ee\u9898\u53ef\u4ee5\u5f52\u7ed3\u4e3a\uff1a\u5982\u4f55\u7ba1\u7406\u4e00\u5927\u5757\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u80fd\u591f\u6309\u7167\u9700\u6c42\u5206\u914d\u3001\u91ca\u653e\u5176\u4e2d\u7684\u7a7a\u95f4\uff0c\u8fd9\u5c31\u662f\u5806\u5206\u914d\u7684\u7b97\u6cd5\u3002</p> <p>\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e9b\u7b80\u5355\u7684\u5806\u5206\u914d\u7b97\u6cd5\uff1a</p> <ul> <li>\u7a7a\u95f2\u94fe\u8868\uff1a\u7a7a\u95f2\u94fe\u8868\uff08Free List\uff09\u7684\u65b9\u6cd5\u5b9e\u9645\u4e0a\u5c31\u662f\u628a\u5806\u4e2d\u5404\u4e2a\u7a7a\u95f2\u7684\u5757\u6309\u7167\u94fe\u8868\u7684\u65b9\u5f0f\u8fde\u63a5\u8d77\u6765\uff0c\u5f53\u7528\u6237\u8bf7\u6c42\u4e00\u5757\u7a7a\u95f4\u65f6\uff0c\u53ef\u4ee5\u904d\u5386\u6574\u4e2a\u5217\u8868\uff0c\u76f4\u5230\u627e\u5230\u5408\u9002\u5927\u5c0f\u7684\u5757\u5e76\u4e14\u5c06\u5b83\u62c6\u5206\uff1b\u5f53\u7528\u6237\u91ca\u653e\u7a7a\u95f4\u65f6\u5c06\u5b83\u5408\u5e76\u5230\u7a7a\u95f2\u94fe\u8868\u4e2d\u3002</li> <li>\u4f4d\u56fe\uff1a\u5176\u6838\u5fc3\u601d\u60f3\u662f\u5c06\u6574\u4e2a\u5806\u5212\u5206\u4e3a\u5927\u91cf\u7684\u5757\uff08block\uff09\uff0c\u6bcf\u4e2a\u5757\u7684\u5927\u5c0f\u76f8\u540c\u3002\u5f53\u7528\u6237\u8bf7\u6c42\u5185\u5b58\u7684\u65f6\u5019\uff0c\u603b\u662f\u5206\u914d\u6574\u6570\u4e2a\u5757\u7684\u7a7a\u95f4\u7ed9\u7528\u6237\uff0c\u7b2c\u4e00\u4e2a\u5757\u6211\u4eec\u79f0\u4e3a\u5df2\u5206\u914d\u533a\u57df\u7684\u5934\uff08Head\uff09\uff0c\u5176\u4f59\u7684\u79f0\u4e3a\u5df2\u5206\u914d\u533a\u57df\u7684\u4e3b\u4f53\uff08Body\uff09\u3002\u800c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u6574\u6570\u6570\u7ec4\u6765\u8bb0\u5f55\u5757\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u7531\u4e8e\u6bcf\u4e2a\u5757\u53ea\u6709\u5934/\u4e3b\u4f53/\u7a7a\u95f2\u4e09\u79cd\u72b6\u6001\uff0c\u56e0\u6b64\u4ec5\u4ec5\u9700\u8981\u4e24\u4f4d\u5373\u53ef\u8868\u793a\u4e00\u4e2a\u5757\uff0c\u56e0\u6b64\u79f0\u4e3a\u4f4d\u56fe\u3002</li> <li>\u5bf9\u8c61\u6c60\uff1a\u5bf9\u8c61\u6c60\u7684\u601d\u8def\u5f88\u7b80\u5355\uff0c\u5982\u679c\u6bcf\u4e00\u6b21\u5206\u914d\u7684\u7a7a\u95f4\u5927\u5c0f\u90fd\u4e00\u6837\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u6309\u7167\u8fd9\u4e2a\u6bcf\u6b21\u8bf7\u6c42\u5206\u914d\u7684\u5927\u5c0f\u4f5c\u4e3a\u4e00\u4e2a\u5355\u4f4d\uff0c\u628a\u6574\u4e2a\u5806\u7a7a\u95f4\u5212\u5206\u4e3a\u5927\u91cf\u7684\u5c0f\u5757\uff0c\u6bcf\u6b21\u8bf7\u6c42\u7684\u65f6\u5019\u53ea\u9700\u8981\u627e\u5230\u4e00\u4e2a\u5c0f\u5757\u5c31\u53ef\u4ee5\u4e86\u3002\u5bf9\u8c61\u6c60\u7684\u7ba1\u7406\u65b9\u6cd5\u53ef\u4ee5\u91c7\u7528\u7a7a\u95f2\u94fe\u8868\uff0c\u4e5f\u53ef\u4ee5\u91c7\u7528\u4f4d\u56fe\uff0c\u4e0e\u5b83\u4eec\u7684\u533a\u522b\u4ec5\u4ec5\u5728\u4e8e\u5b83\u5047\u5b9a\u4e86\u6bcf\u6b21\u8bf7\u6c42\u7684\u90fd\u662f\u4e00\u4e2a\u56fa\u5b9a\u7684\u5927\u5c0f\uff0c\u56e0\u6b64\u5b9e\u73b0\u8d77\u6765\u5f88\u5bb9\u6613\u3002\u7531\u4e8e\u6bcf\u6b21\u603b\u662f\u53ea\u8bf7\u6c42\u4e00\u4e2a\u5355\u4f4d\u7684\u5185\u5b58\uff0c\u56e0\u6b64\u8bf7\u6c42\u5f97\u5230\u6ee1\u8db3\u7684\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u65e0\u987b\u67e5\u627e\u4e00\u4e2a\u8db3\u591f\u5927\u7684\u7a7a\u95f4\u3002</li> </ul> <p>\u5b9e\u9645\u4e0a\u5f88\u591a\u73b0\u5b9e\u5e94\u7528\u4e2d\uff0c\u5806\u7684\u5206\u914d\u7b97\u6cd5\u5f80\u5f80\u662f\u91c7\u53d6\u591a\u79cd\u7b97\u6cd5\u590d\u5408\u800c\u6210\u7684\u3002\u6bd4\u5982\u5bf9\u4e8e glibc \u6765\u8bf4\uff0c\u5b83\u5bf9\u4e8e\u5c0f\u4e8e 64 \u5b57\u8282\u7684\u7a7a\u95f4\u7533\u8bf7\u662f\u91c7\u7528\u7c7b\u4f3c\u4e8e\u5bf9\u8c61\u6c60\u7684\u65b9\u6cd5\uff1b\u800c\u5bf9\u4e8e\u5927\u4e8e 512 \u5b57\u8282\u7684\u7a7a\u95f4\u7533\u8bf7\u91c7\u7528\u7684\u662f\u6700\u4f73\u9002\u914d\u7b97\u6cd5\uff1b\u5bf9\u4e8e\u5927\u4e8e 64 \u5b57\u8282\u800c\u5c0f\u4e8e 512 \u5b57\u8282\u7684\uff0c\u5b83\u4f1a\u6839\u636e\u60c5\u51b5\u91c7\u53d6\u4e0a\u8ff0\u65b9\u6cd5\u4e2d\u7684\u6700\u4f73\u6298\u4e2d\u7b56\u7565\uff1b\u5bf9\u4e8e\u5927\u4e8e 128KB \u7684\u7533\u8bf7\uff0c\u5b83\u4f1a\u4f7f\u7528 mmap \u673a\u5236\u76f4\u63a5\u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u7a7a\u95f4\u3002</p>"},{"location":"foundation/self-cultivation/memory/#_9","title":"\u603b\u7ed3","text":"<p>\u5185\u5b58\u662f\u7a0b\u5e8f\u8fd0\u884c\u7684\u57fa\u7840\u8fd0\u884c\u73af\u5883\u4e4b\u4e00\uff0c\u4e86\u89e3\u7a0b\u5e8f\u5982\u4f55\u4f7f\u7528\u5185\u5b58\uff0c\u5bf9\u4e8e\u7a0b\u5e8f\u672c\u8eab\u7684\u7406\u89e3\u4e5f\u975e\u5e38\u91cd\u8981\uff0c\u672c\u6587\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li>\u4ecb\u7ecd\u4e86 i386 \u4f53\u7cfb\u7ed3\u6784\u4e0b\u7a0b\u5e8f\u7684\u57fa\u672c\u5185\u5b58\u5e03\u5c40</li> <li>\u4ec0\u4e48\u662f\u6808\uff0c\u4ee5\u53ca\u6808\u5728\u51fd\u6570\u8c03\u7528\u8fc7\u7a0b\u4e2d\u7684\u4f5c\u7528</li> <li>\u4ec0\u4e48\u662f\u5806\uff0cLinux \u8fdb\u7a0b\u7684\u5806\u7ba1\u7406\u673a\u5236\uff0c\u4ee5\u53ca\u4e3b\u8981\u7684\u5806\u5206\u914d\u7b97\u6cd5</li> </ul>"},{"location":"foundation/self-cultivation/static-link/","title":"\u9759\u6001\u94fe\u63a5","text":"<p>\u6700\u8fd1\u5728\u8bfb\u300a\u7a0b\u5e8f\u5458\u7684\u81ea\u6211\u4fee\u517b\uff1a\u94fe\u63a5\uff0c\u88c5\u8f7d\u4e0e\u5e93\u300b\uff0c\u5176\u5b9e\u8fd9\u672c\u4e66\u8ddf Android \u5f00\u53d1\u7684\u8054\u7cfb\u8fd8\u633a\u7d27\u5bc6\u7684\uff0c\u65e0\u8bba\u662f NDK \u5f00\u53d1\uff0c\u6216\u8005\u662f\u6027\u80fd\u4f18\u5316\u4e2d\u4e00\u4e9b\u5e38\u7528\u7684 Native Hoook \u624b\u6bb5\uff0c\u90fd\u9700\u8981\u4e86\u89e3\u4e00\u4e9b\u94fe\u63a5\uff0c\u88c5\u8f7d\u76f8\u5173\u7684\u77e5\u8bc6\u70b9\u3002\u672c\u6587\u4e3a\u8bfb\u4e66\u7b14\u8bb0\u3002</p>"},{"location":"foundation/self-cultivation/static-link/#_2","title":"\u9759\u6001\u94fe\u63a5\u662f\u4ec0\u4e48\uff1f","text":"<p>\u524d\u9762\u6211\u4eec\u4ecb\u7ecd\u4e86 ELF \u6587\u4ef6\u7684\u5177\u4f53\u683c\u5f0f\uff0c\u63a5\u4e0b\u6765\u7684\u95ee\u9898\u662f\uff0c\u5982\u679c\u6211\u4eec\u6709\u4e24\u4e2a\u6216\u8005\u591a\u4e2a\u76ee\u6807\u6587\u4ef6\u65f6\uff0c\u5982\u4f55\u628a\u4ed6\u4eec\u94fe\u63a5\u8d77\u6765\uff0c\u7ec4\u6210\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff1f</p> <pre><code># a.c\nextern int shared;\nextern void swap(int *a, int* b);\n\nint main(void)\n{\n    int a = 100;\n    swap(&amp;a, &amp;shared);\n}\n\n\n# b.c\nint shared = 1;\n\nvoid swap(int *a, int* b)\n{\n    *a ^= *b ^= *a ^= *b;\n}\n</code></pre> <p>\u6bd4\u5982\u4e0a\u9762\u7684\u4e24\u4e2a\u6587\u4ef6\uff0c\u6587\u4ef6 a \u4e2d\u5f15\u7528\u4e86 \u6587\u4ef6 b \u4e2d\u7684\u4e24\u4e2a\u5168\u5c40\u7b26\u53f7:<code>shared</code>\u53d8\u91cf\u4e0e<code>swap</code>\u51fd\u6570\uff0c\u5728 a \u6587\u4ef6\u7f16\u8bd1\u540e\u751f\u6210\u7684\u76ee\u6807\u6587\u4ef6 <code>a.o</code> \u4e2d\uff0c\u4e24\u4e2a\u5916\u90e8\u7b26\u53f7\u5728\u7b26\u53f7\u8868\u4e2d\u7684 value \u90fd\u4e3a 0\u3002</p> <p>\u800c\u9759\u6001\u94fe\u63a5\u7684\u4f5c\u7528\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u628a\u7b26\u53f7\u66ff\u6362\u4e3a\u5730\u5740\uff0c\u5e76\u5c06<code>a.o</code>\u4e0e<code>b.o</code>\u6587\u4ef6\u6700\u7ec8\u6253\u5305\u6210\u4e00\u4e2a\u53ef\u6267\u884c\u7684\u6587\u4ef6</p>"},{"location":"foundation/self-cultivation/static-link/#_3","title":"\u6e90\u7801\u7f16\u8bd1\u4e0e\u94fe\u63a5","text":"<p>\u63a5\u4e0b\u6765\u6211\u4eec\u5b9e\u64cd\u4e00\u4e0b\u7f16\u8bd1\u94fe\u63a5\u8fc7\u7a0b</p> <p>\u9996\u5148\u6211\u4eec\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5c06 a.c \u4e0e b.c \u6587\u4ef6\u5206\u522b\u7f16\u8bd1\u6210\u76ee\u6807\u6587\u4ef6 a.o \u4e0e b.o</p> <pre><code># \u5fc5\u987b\u5728\u7f16\u8bd1\u65f6\u52a0\u5165\u53c2\u6570-fno-stack-protector\uff0c\u4e0d\u7136\u94fe\u63a5\u62a5\u9519\n$ gcc -c a.c -fno-stack-protector -o a.o\n$ gcc -c b.c -fno-stack-protector -o b.o\n</code></pre> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u53ef\u4ee5\u5229\u7528 ld \u94fe\u63a5\u5668\u5c06 a.o \u4e0e b.o \u94fe\u63a5\u6210\u53ef\u6267\u884c\u6587\u4ef6 ab</p> <pre><code>$ ld a.o b.o -e main -o ab\n</code></pre> <p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u5f97\u5230\u4e86\u53ef\u6267\u884c\u6587\u4ef6</p>"},{"location":"foundation/self-cultivation/static-link/#_4","title":"\u9759\u6001\u94fe\u63a5\u7684\u8fc7\u7a0b","text":"<p>\u4e0a\u9762\u8bf4\u5230\uff0c\u9759\u6001\u94fe\u63a5\u4e3b\u8981\u6709\u4e24\u4e2a\u4f5c\u7528</p> <ol> <li>\u5c06\u591a\u4e2a\u4e2d\u95f4\u6587\u4ef6\u5408\u5e76\u6210\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6</li> <li>\u628a\u7a0b\u5e8f\u4e2d\u7684\u7b26\u53f7\u8f6c\u6362\u6210 CPU \u6267\u884c\u65f6\u7684\u5185\u5b58\u5730\u5740</li> </ol> <p>\u56e0\u6b64\uff0c\u94fe\u63a5\u7684\u8fc7\u7a0b\u4e00\u822c\u4e5f\u5206\u4e3a\u4e24\u6b65\uff0c\u79f0\u4e3a\u4e24\u6b65\u94fe\u63a5</p> <p>\u7b2c\u4e00\u6b65 \u7a7a\u95f4\u4e0e\u5730\u5740\u5206\u914d\uff1a\u5408\u5e76\u7f16\u8bd1\u5668\u751f\u6210\u7684\u591a\u4e2a\u76ee\u6807\uff08.o\uff09\u6587\u4ef6\uff0c\u901a\u5e38\u901a\u8fc7\u76f8\u4f3c\u6bb5\u5408\u5e76\u7684\u65b9\u5f0f(\u5982\u4e0b\u56fe\u6240\u793a)\uff0c\u6700\u7ec8\u751f\u6210\u5171\u4eab\u6587\u4ef6\uff08.so\uff09\u6216\u53ef\u6267\u884c\u6587\u4ef6\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u94fe\u63a5\u5668\u626b\u63cf\u8f93\u5165\u7684\u76ee\u6807\u6587\u4ef6\uff0c\u83b7\u53d6\u5404\u6bb5\u5927\u5c0f\uff0c\u5e76\u6536\u96c6\u7b26\u53f7\u5b9a\u4e49\u548c\u5f15\u7528\u4fe1\u606f\uff0c\u6784\u5efa\u5168\u5c40\u7b26\u53f7\u8868\u3002\u5f53\u94fe\u63a5\u5668\u6784\u9020\u597d\u4e86\u6700\u7ec8\u7684\u6587\u4ef6\u5e03\u5c40\u4ee5\u53ca\u865a\u62df\u5185\u5b58\u5e03\u5c40\u540e\uff0c\u53ef\u6839\u636e\u7b26\u53f7\u8868\u786e\u5b9a\u6bcf\u4e2a\u7b26\u53f7\u7684\u865a\u62df\u5730\u5740\u3002</p> <p></p> <p>\u7b2c\u4e8c\u6b65 \u7b26\u53f7\u89e3\u6790\u4e0e\u91cd\u5b9a\u4f4d\uff1a\u94fe\u63a5\u5668\u4f1a\u5bf9\u6574\u4e2a\u6587\u4ef6\u518d\u8fdb\u884c\u7b2c\u4e8c\u904d\u626b\u63cf\uff0c\u8fd9\u4e00\u9636\u6bb5\uff0c\u4f1a\u5229\u7528\u7b2c\u4e00\u904d\u626b\u63cf\u5f97\u5230\u7684\u7b26\u53f7\u8868\u4fe1\u606f\uff0c\u4f9d\u6b21\u5bf9\u6587\u4ef6\u4e2d\u6bcf\u4e2a\u7b26\u53f7\u5f15\u7528\u7684\u5730\u65b9\u8fdb\u884c\u5730\u5740\u66ff\u6362</p> <p>\u8fd9\u5c31\u662f\u94fe\u63a5\u5668\u5e38\u7528\u7684\u4e24\u6b65\u94fe\u63a5 (Two-pass linking) \u7684\u6b65\u9aa4\uff0c\u7b80\u800c\u8a00\u4e4b\uff0c\u7b2c\u4e00\u6b65\u5b8c\u6210\u6587\u4ef6\u5408\u5e76\u3001\u865a\u62df\u5185\u5b58\u5e03\u5c40\u5206\u914d\u4ee5\u53ca\u7b26\u53f7\u4fe1\u606f\u6536\u96c6\uff1b\u7b2c\u4e8c\u6b65\u5b8c\u6210\u7b26\u53f7\u7684\u91cd\u5b9a\u4f4d\u8fc7\u7a0b\u3002</p>"},{"location":"foundation/self-cultivation/static-link/#_5","title":"\u7a7a\u95f4\u4e0e\u5730\u5740\u5206\u914d","text":"<p>\u7a7a\u95f4\u4e0e\u5730\u5740\u5206\u914d\u7684\u5de5\u4f5c\u5c31\u662f\u626b\u63cf\u6240\u6709\u76ee\u6807\u6587\u4ef6\uff0c\u83b7\u53d6\u76ee\u6807\u6587\u4ef6\u7684\u6bb5\u957f\u5ea6\uff0c\u5e76\u5c06\u4ed6\u4eec\u5408\u5e76\uff0c\u8ba1\u7b97\u51fa\u8f93\u51fa\u6587\u4ef6\u4e2d\u5404\u4e2a\u6bb5\u5408\u5e76\u540e\u7684\u957f\u5ea6\u4e0e\u4f4d\u7f6e\uff0c\u5e76\u786e\u5b9a\u865a\u62df\u5730\u5740</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u5229\u7528 objdump \u5de5\u5177\uff0c\u770b\u770b\u94fe\u63a5\u524d\u540e\u7684\u5730\u5740\u53d8\u5316</p>"},{"location":"foundation/self-cultivation/static-link/#_6","title":"\u76ee\u6807\u6587\u4ef6\u5206\u6790","text":"<pre><code>$ objdump -h a.o\n\na.o:     file format elf64-x86-64\n\nSections:\nIdx Name          Size      VMA               LMA               File off  Algn\n  0 .text         0000002d  0000000000000000  0000000000000000  00000040  2**0\n                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE\n  1 .data         00000000  0000000000000000  0000000000000000  0000006d  2**0\n                  CONTENTS, ALLOC, LOAD, DATA\n  2 .bss          00000000  0000000000000000  0000000000000000  0000006d  2**0\n                  ALLOC\n  3 .comment      0000002c  0000000000000000  0000000000000000  0000006d  2**0\n                  CONTENTS, READONLY\n  4 .note.GNU-stack 00000000  0000000000000000  0000000000000000  00000099  2**0\n                  CONTENTS, READONLY\n  5 .note.gnu.property 00000020  0000000000000000  0000000000000000  000000a0  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  6 .eh_frame     00000038  0000000000000000  0000000000000000  000000c0  2**3\n                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, DATA\n\n$ objdump -h b.o\n\nb.o:     file format elf64-x86-64\n\nSections:\nIdx Name          Size      VMA               LMA               File off  Algn\n  0 .text         0000004f  0000000000000000  0000000000000000  00000040  2**0\n                  CONTENTS, ALLOC, LOAD, READONLY, CODE\n  1 .data         00000004  0000000000000000  0000000000000000  00000090  2**2\n                  CONTENTS, ALLOC, LOAD, DATA\n  2 .bss          00000000  0000000000000000  0000000000000000  00000094  2**0\n                  ALLOC\n  3 .comment      0000002c  0000000000000000  0000000000000000  00000094  2**0\n                  CONTENTS, READONLY\n  4 .note.GNU-stack 00000000  0000000000000000  0000000000000000  000000c0  2**0\n                  CONTENTS, READONLY\n  5 .note.gnu.property 00000020  0000000000000000  0000000000000000  000000c0  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  6 .eh_frame     00000038  0000000000000000  0000000000000000  000000e0  2**3\n                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, DATA\n</code></pre>"},{"location":"foundation/self-cultivation/static-link/#_7","title":"\u53ef\u6267\u884c\u6587\u4ef6\u5206\u6790","text":"<pre><code>$ objdump -h ab\n\nab:     file format elf64-x86-64\n\nSections:\nIdx Name          Size      VMA               LMA               File off  Algn\n  0 .note.gnu.property 00000020  00000000004001c8  00000000004001c8  000001c8  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  1 .text         0000007c  0000000000401000  0000000000401000  00001000  2**0\n                  CONTENTS, ALLOC, LOAD, READONLY, CODE\n  2 .eh_frame     00000058  0000000000402000  0000000000402000  00002000  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  3 .data         00000004  0000000000404000  0000000000404000  00003000  2**2\n                  CONTENTS, ALLOC, LOAD, DATA\n  4 .comment      0000002b  0000000000000000  0000000000000000  00003004  2**0\n                  CONTENTS, READONLY\n</code></pre>"},{"location":"foundation/self-cultivation/static-link/#_8","title":"\u524d\u540e\u5bf9\u6bd4","text":"<ol> <li>a.o \u4e0e b.o \u7684\u6bb5\u901a\u8fc7\u76f8\u4f3c\u6bb5\u5408\u5e76\u7684\u65b9\u5f0f\u6253\u5305\u5230 ab \u4e2d\uff0c\u6bd4\u5982 a.o \u7684\u4ee3\u7801\u6bb5\u957f\u5ea6\u4e3a 0x2d\uff0cb.o \u7684\u4ee3\u7801\u6bb5\u957f\u5ea6\u4e3a 0x4f\uff0c\u800c\u5408\u5e76\u4e4b\u540e\u7684 ab \u7684\u4ee3\u7801\u6bb5\u957f\u5ea6\u5c31\u662f 0x7C = 0x2d + 0x 4f</li> <li>\u94fe\u63a5\u524d\uff0ca.o \u548c b.o \u7684\u6240\u6709\u6bb5\u7684 VMA \u90fd\u662f 0\uff0c\u56e0\u4e3a\u865a\u62df\u7a7a\u95f4\u8fd8\u6ca1\u6709\u5206\u914d\uff0c\u9ed8\u8ba4\u4e3a 0</li> <li>\u94fe\u63a5\u540e\uff0cab \u7684\u5404\u4e2a\u6bb5\u90fd\u88ab\u5206\u914d\u5230\u76f8\u5e94\u7684\u865a\u62df\u5730\u5740  </li> <li>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728 linux \u4e2d elf \u6587\u4ef6\u7684\u865a\u62df\u5730\u5740\u5e76\u4e0d\u662f\u4ece 0 \u5f00\u59cb\u5206\u914d\u7684\uff0ci386 ELF \u9ed8\u8ba4\u4ece\u5730\u5740 0x08048000 \u5f00\u59cb\u5206\u914d\uff0c \u800c x64 \u662f 0x400000</li> <li>\u5728\u6bb5\u7684\u865a\u62df\u5730\u5740\u786e\u8ba4\u4e4b\u540e\uff0c\u6bb5\u5185\u7684\u7b26\u53f7\u6839\u636e\u5176\u5728\u6bb5\u5185\u7684\u504f\u79fb\uff0c\u5176\u865a\u62df\u5730\u5740\u4e5f\u53ef\u4ee5\u786e\u8ba4\u4e86</li> </ol>"},{"location":"foundation/self-cultivation/static-link/#_9","title":"\u7b26\u53f7\u89e3\u6790\u4e0e\u91cd\u5b9a\u4f4d","text":"<p>\u9996\u9875\u6211\u4eec\u901a\u8fc7 objdump \u6765\u770b\u770b a.o \u53cd\u6c47\u7f16\u7684\u7ed3\u679c</p> <pre><code>$ objdump -d a.o\n\na.o:     file format elf64-x86-64\n\nDisassembly of section .text:\n\n0000000000000000 &lt;main&gt;:\n   0:   f3 0f 1e fa             endbr64 \n   4:   55                      push   %rbp\n   5:   48 89 e5                mov    %rsp,%rbp\n   8:   48 83 ec 10             sub    $0x10,%rsp\n   c:   c7 45 fc 64 00 00 00    movl   $0x64,-0x4(%rbp)\n  13:   48 8d 45 fc             lea    -0x4(%rbp),%rax\n  17:   48 8d 35 00 00 00 00    lea    0x0(%rip),%rsi        # 1e &lt;main+0x1e&gt;  shared \u7684\u5f15\u7528\n  1e:   48 89 c7                mov    %rax,%rdi\n  21:   e8 00 00 00 00          callq  26 &lt;main+0x26&gt; # swap \u7684\u5f15\u7528\n  26:   b8 00 00 00 00          mov    $0x0,%eax\n  2b:   c9                      leaveq \n  2c:   c3                      retq   \n</code></pre> <p>\u4ece\u8f93\u51fa\u7684\u7ed3\u679c\u4e2d\u53ef\u4ee5\u770b\u51fa\uff1a</p> <ol> <li>\u5728\u6b64\u65f6 main \u51fd\u6570\u7684\u5730\u5740\u8fd8\u662f 0\uff0c\u56e0\u4e3a\u6b64\u65f6\u8fd8\u6ca1\u6709\u8fdb\u884c\u7a7a\u95f4\u5206\u914d\uff0c\u76ee\u6807\u6587\u4ef6\u4ee3\u7801\u6bb5\u4e2d\u7684\u5730\u5740\u8fd8\u662f\u4ee5 0x000000 \u5f00\u59cb</li> <li>a.o \u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a<code>main</code>\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u5360\u7528 2c \u4e2a\u5b57\u8282\uff0c\u5171 12 \u6761\u6307\u4ee4\u3002\u6700\u5de6\u8fb9\u90a3\u5217\u662f\u6bcf\u6761\u6307\u4ee4\u7684\u504f\u79fb\u91cf\uff0c\u4e00\u884c\u4ee3\u8868\u4e00\u6761\u6307\u4ee4</li> <li>\u6b64\u65f6\u7f16\u8bd1\u5668\u5e76\u4e0d\u77e5\u9053 shared \u7b26\u53f7\u4e0e swap \u7b26\u53f7\u7684\u5730\u5740\uff0c\u56e0\u4e3a\u5b9a\u4e49\u5728\u5176\u4ed6\u6587\u4ef6\u4e2d\uff0c\u56e0\u6b64\u6682\u65f6\u8fd8\u662f\u7528 0 \u8868\u793a</li> </ol> <p>\u94fe\u63a5\u5668\u5728\u5b8c\u6210\u5730\u5740\u548c\u7a7a\u95f4\u5206\u914d\u4e4b\u540e\u5c31\u53ef\u4ee5\u786e\u5b9a\u6240\u6709\u7b26\u53f7\u7684\u865a\u62df\u5730\u5740\u4e86\uff0c\u90a3\u4e48\u94fe\u63a5\u5668\u5c31\u53ef\u4ee5\u6839\u636e\u7b26\u53f7\u7684\u5730\u5740\u5bf9\u9700\u8981\u91cd\u5b9a\u4f4d\u7684\u6307\u4ee4\u8fdb\u884c\u5730\u5740\u4fee\u6b63\uff0c\u63a5\u4e0b\u6765\u518d\u770b\u770b ab \u53cd\u6c47\u7f16\u7684\u7ed3\u679c</p> <pre><code>$ objdump -d ab\n\nab:     file format elf64-x86-64\n\nDisassembly of section .text:\n\n0000000000401000 &lt;main&gt;:\n  401000:       f3 0f 1e fa             endbr64 \n  401004:       55                      push   %rbp\n  401005:       48 89 e5                mov    %rsp,%rbp\n  401008:       48 83 ec 10             sub    $0x10,%rsp\n  40100c:       c7 45 fc 64 00 00 00    movl   $0x64,-0x4(%rbp)\n  401013:       48 8d 45 fc             lea    -0x4(%rbp),%rax\n  401017:       48 8d 35 e2 2f 00 00    lea    0x2fe2(%rip),%rsi        # 404000 &lt;shared&gt;\n  40101e:       48 89 c7                mov    %rax,%rdi\n  401021:       e8 07 00 00 00          callq  40102d &lt;swap&gt;\n  401026:       b8 00 00 00 00          mov    $0x0,%eax\n  40102b:       c9                      leaveq \n  40102c:       c3                      retq   \n\n000000000040102d &lt;swap&gt;:\n  40102d:       f3 0f 1e fa             endbr64 \n  401031:       55                      push   %rbp\n  // ...\n</code></pre> <p>\u5982\u4e0a\u6240\u793a\uff0c<code>swap</code>\u7684\u503c\u88ab\u66ff\u6362\u6210\u4e86<code>0x07</code>\uff0c\u8fd9\u662f\u56e0\u4e3a<code>call</code>\u6307\u4ee4\u662f\u4e00\u6761\u8fd1\u5740\u76f8\u5bf9\u4f4d\u79fb\u8c03\u7528\u6307\u4ee4\uff0c\u5b83\u540e\u9762\u8ddf\u7684\u662f\u8c03\u7528\u6307\u4ee4\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u504f\u79fb\u91cf</p> <p>\u6bd4\u5982\u4e0a\u9762\u504f\u79fb\u91cf\u4e3a<code>0x07</code>\uff0c\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\u4e3a<code>0x401026</code>\uff0c\u800c<code>0x401026+0x07=0x40102d</code>\uff0c\u6b63\u597d\u662f<code>swap</code>\u7b26\u53f7\u7684\u5730\u5740</p>"},{"location":"foundation/self-cultivation/static-link/#_10","title":"\u91cd\u5b9a\u4f4d\u8868","text":"<p>\u6211\u4eec\u524d\u9762\u8bf4\u5230\uff0c\u94fe\u63a5\u5668\u4f1a\u5bf9\u6307\u4ee4\u8fdb\u884c\u91cd\u5b9a\u4f4d\u3002\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u94fe\u63a5\u5668\u600e\u4e48\u77e5\u9053\u54ea\u4e9b\u6307\u4ee4\u9700\u8981\u8c03\u6574\uff1f\u8fd9\u4e9b\u6307\u4ee4\u7684\u54ea\u4e9b\u90e8\u5206\u9700\u8981\u8c03\u6574\uff0c\u5177\u4f53\u5982\u4f55\u8c03\u6574\uff1f\u6bd4\u5982\u4e0a\u9762\u4ecb\u7ecd\u7684<code>shared</code>\u7b26\u53f7\u4e0e<code>swap</code>\u7b26\u53f7\u8c03\u6574\u7684\u65b9\u5f0f\u5c31\u4e0d\u4e00\u6837</p> <p>\u8fd9\u4e9b\u91cd\u5b9a\u4f4d\u76f8\u5173\u7684\u4fe1\u606f\u90fd\u662f\u4fdd\u5b58\u5728 ELF \u4e2d\u7684\u91cd\u5b9a\u4f4d\u8868\u4e2d\u7684\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u9700\u8981\u91cd\u5b9a\u4f4d\u7684 ELF \u6bb5\u90fd\u6709\u4e00\u4e2a\u91cd\u5b9a\u4f4d\u8868\u3002\u6bd4\u5982 .text \u6bb5\u5bf9\u5e94\u7684 .rel.text \u91cd\u5b9a\u4f4d\u8868\uff0c.data \u6bb5\u5bf9\u5e94\u7684 .rel.data \u91cd\u5b9a\u4f4d\u8868</p> <p>\u4e0b\u9762\u6211\u4eec\u770b\u4e0b\u76ee\u6807\u6587\u4ef6\u7684\u91cd\u5b9a\u4f4d\u8868</p> <pre><code>$ readelf -r a.o \n\nRelocation section '.rela.text' at offset 0x260 contains 2 entries:\n  Offset          Info           Type           Sym. Value    Sym. Name + Addend\n00000000001a  000a00000002 R_X86_64_PC32     0000000000000000 shared - 4\n000000000022  000c00000004 R_X86_64_PLT32    0000000000000000 swap - 4\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u5728<code>a.o</code>\u4e2d\u6709\u4e24\u4e2a\u91cd\u5b9a\u4f4d\u5165\u53e3</p> <ol> <li><code>OFFSET</code>\u8868\u793a\u8be5\u91cd\u5b9a\u4f4d\u5165\u53e3\u5728\u8be5\u6bb5\u4e2d\u7684\u4f4d\u7f6e\uff0c\u5bf9\u7167\u524d\u9762\u7684\u53cd\u6c47\u7f16\u7ed3\u679c\uff0c\u4e5f\u53ef\u4ee5\u770b\u5230<code>0x1a</code>\u4e0e<code>0x22</code>\u5c31\u662f\u5bf9\u5e94\u6307\u4ee4\u7684\u5730\u5740\u90e8\u5206</li> <li><code>Type</code>\u8868\u793a\u91cd\u5b9a\u4f4d\u5165\u53e3\u7684\u7c7b\u578b\uff0c\u56e0\u4e3a\u5404\u79cd\u5904\u7406\u5668\u7684\u6307\u4ee4\u683c\u5f0f\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u91cd\u5b9a\u4f4d\u4fee\u6b63\u7684\u6307\u4ee4\u5730\u5740\u683c\u5f0f\u4e5f\u4e0d\u4e00\u6837\uff0c\u6bcf\u79cd\u5904\u7406\u5668\u90fd\u6709\u4e00\u5957\u81ea\u5df1\u7684\u91cd\u5b9a\u4f4d\u5165\u53e3\u7c7b\u578b</li> <li><code>Addend</code>\u8868\u793a\u5360\u4f4d\u7b26\u7684\u957f\u5ea6\uff0c\u91cd\u5b9a\u4f4d\u8fc7\u7a0b\u4e2d\u9700\u8981\u7684\u8f85\u52a9\u4fe1\u606f</li> </ol> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u91cd\u5b9a\u4f4d\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u91cd\u5b9a\u4f4d\u5165\u53e3\u90fd\u662f\u5bf9\u4e00\u4e2a\u7b26\u53f7\u7684\u5f15\u7528\uff0c\u90a3\u4e48\u5f53\u94fe\u63a5\u5668\u9700\u8981\u8981\u5bf9\u67d0\u4e2a\u7b26\u53f7\u8fdb\u884c\u5f15\u7528\u548c\u91cd\u5b9a\u4f4d\u65f6\uff0c\u4ed6\u5c31\u8981\u786e\u5b9a\u8fd9\u4e2a\u7b26\u53f7\u7684\u76ee\u6807\u5730\u5740\uff0c\u8fd9\u65f6\u5019\u94fe\u63a5\u5668\u5c31\u4f1a\u53bb\u67e5\u627e\u7531\u6240\u6709\u8f93\u5165\u76ee\u6807\u6587\u4ef6\u7684\u7b26\u53f7\u8868\u7ec4\u6210\u7684\u5168\u5c40\u7b26\u53f7\u8868\uff0c\u627e\u5230\u76f8\u5e94\u7684\u7b26\u53f7\u540e\u8fdb\u884c\u91cd\u5b9a\u4f4d\u3002</p>"},{"location":"foundation/self-cultivation/static-link/#_11","title":"\u6307\u4ee4\u4fee\u6b63\u65b9\u5f0f","text":"<p>\u4e0d\u540c\u7684\u5904\u7406\u5668\u6307\u4ee4\u5bf9\u4e8e\u5730\u5740\u7684\u683c\u5f0f\u548c\u65b9\u5f0f\u90fd\u4e0d\u4e00\u6837\u3002\u6bd4\u5982\u5bf9\u4e8e 32 \u4f4d Intel x86 \u5904\u7406\u5668\u6765\u8bf4\uff0c\u8f6c\u79fb\u8df3\u8f6c\u6307\u4ee4\uff08jmp \u6307\u4ee4\uff09\u3001\u5b50\u7a0b\u5e8f\u8c03\u7528\u6307\u4ee4\uff08call \u6307\u4ee4\uff09\u548c\u6570\u636e\u4f20\u9001\u6307\u4ee4\uff08mov \u6307\u4ee4\uff09\u5bfb\u5740\u65b9\u5f0f\u5343\u5dee\u4e07\u522b\u3002\u76f4\u81f3 2006 \u5e74\u4e3a\u6b62\uff0cIntel x86 \u7cfb\u5217 CPU \u7684 jmp \u6307\u4ee4\u6709 11 \u79cd\u5bfb\u5740\u6a21\u5f0f\uff1bcall \u6307\u4ee4\u670910\u79cd\uff1bmov \u6307\u4ee4\u5219\u6709\u591a\u8fbe 34 \u79cd\u5bfb\u5740\u6a21\u5f0f</p> <p>\u6211\u4eec\u793a\u4f8b\u4e2d\u7684\u91cd\u5b9a\u4f4d\u5165\u53e3\u7c7b\u578b\u5206\u522b\u4e3a<code>R_X86_64_PC32</code>\u4e0e<code>R_X86_64_PLT32</code>\uff0c\u5b83\u4eec\u7684\u6307\u4ee4\u4fee\u6b63\u65b9\u5f0f\u90fd\u662f\u76f8\u5bf9\u5bfb\u5740\u4fee\u6b63\uff0c\u6307\u4ee4\u8ba1\u7b97\u516c\u5f0f\u4e3a\uff1aS + A \u2013 P</p> <ul> <li>\u8fd9\u91cc\u7684 S \u8868\u793a\u5b8c\u6210\u94fe\u63a5\u540e\u8be5\u7b26\u53f7\u7684\u5b9e\u9645\u5730\u5740\u3002\u5728\u94fe\u63a5\u5668\u5c06\u591a\u4e2a\u4e2d\u95f4\u6587\u4ef6\u7684\u6bb5\u5408\u5e76\u4ee5\u540e\uff0c\u6bcf\u4e2a\u7b26\u53f7\u5c31\u6309\u5148\u540e\u987a\u5e8f\u4f9d\u6b21\u90fd\u4f1a\u5206\u914d\u5230\u4e00\u4e2a\u5730\u5740\uff0c\u8fd9\u5c31\u662f\u5b83\u7684\u6700\u7ec8\u5730\u5740 S\u3002</li> <li>A \u8868\u793a Addend \u7684\u503c\uff0c\u5b83\u4ee3\u8868\u4e86\u5360\u4f4d\u7b26\u7684\u957f\u5ea6\u3002</li> <li>P \u8868\u793a\u8981\u8fdb\u884c\u91cd\u5b9a\u4f4d\u4f4d\u7f6e\u7684\u5730\u5740\u6216\u504f\u79fb\uff0c\u8fd9\u662f\u5f15\u7528\u7b26\u53f7\u7684\u5730\u65b9\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u8981\u56de\u586b\u5730\u5740\u7684\u5730\u65b9\uff0c\u7b80\u5355\u8bf4\uff0c\u5b83\u5c31\u662f\u6211\u4eec\u4e0a\u6587\u63d0\u5230\u7684\u7528 0 \u586b\u5145\u7684\u5360\u4f4d\u7b26\u7684\u5730\u5740\u3002</li> </ul> <p>\u5176\u4e2d P - A = PC \u503c = \u4e0b\u4e00\u6761\u6307\u4ee4\u5730\u5740\uff0c\u56e0\u6b64\u5176\u6307\u4ee4\u8ba1\u7b97\u516c\u5f0f\u4e5f\u53ef\u4ee5\u7b80\u5316\u4e3a S - \u4e0b\u4e00\u6761\u6307\u4ee4\u5730\u5740\uff0c\u4e4b\u6240\u4ee5\u8fd9\u4e48\u8bbe\u8ba1\u662f\u56e0\u4e3a\u7a0b\u5e8f\u8fd0\u884c\u5230\u8fd9\u6761\u6307\u4ee4\u7684\u65f6\u5019\uff0c\u80fd\u591f\u62ff\u5230\u7684\u5730\u5740\u5c31\u53ea\u6709 PC \u7684\u503c\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u5728\u8fd0\u884c\u65f6\u901a\u8fc7\u83b7\u53d6 PC \u503c\u4e0e\u6307\u4ee4\u504f\u79fb\u503c\uff0c\u5c31\u53ef\u4ee5\u8ba1\u7b97\u51fa\u7b26\u53f7\u771f\u6b63\u7684\u865a\u62df\u5730\u5740</p> <p>\u6bd4\u5982\u4e0a\u9762<code>swap</code>\u7b26\u53f7\u504f\u79fb\u91cf\u4e3a<code>0x07</code>\uff0c\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\u4e3a<code>0x401026</code>\uff0c\u800c<code>0x401026+0x07=0x40102d</code>\uff0c\u6b63\u597d\u662f<code>swap</code>\u7b26\u53f7\u7684\u5730\u5740</p>"},{"location":"foundation/self-cultivation/static-link/#_12","title":"\u603b\u7ed3","text":"<ul> <li>\u9759\u6001\u94fe\u63a5\u7684\u6b65\u9aa4\u5206\u4e3a\u4e24\u6b65\uff0c\u7b2c\u4e00\u6b65\u662f\u7a7a\u95f4\u4e0e\u5730\u5740\u5206\u914d\uff0c\u7b2c\u4e8c\u6b65\u662f\u7b26\u53f7\u89e3\u6790\u4e0e\u91cd\u5b9a\u4f4d</li> <li>\u7a7a\u95f4\u4e0e\u5730\u5740\u5206\u914d\u9636\u6bb5\uff1a\u901a\u8fc7\u76f8\u4f3c\u6bb5\u5408\u5e76\u7684\u65b9\u5f0f\u5c06\u591a\u4e2a\u4e2d\u95f4\u6587\u4ef6\u5408\u5e76\u6210\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u94fe\u63a5\u5668\u4f1a\u626b\u63cf\u8f93\u5165\u7684\u76ee\u6807\u6587\u4ef6\uff0c\u83b7\u53d6\u5404\u6bb5\u5927\u5c0f\uff0c\u5e76\u6536\u96c6\u7b26\u53f7\u5b9a\u4e49\u548c\u5f15\u7528\u4fe1\u606f\uff0c\u6784\u5efa\u5168\u5c40\u7b26\u53f7\u8868\uff0c\u5e76\u786e\u5b9a\u6bcf\u4e2a\u7b26\u53f7\u7684\u865a\u62df\u5730\u5740</li> <li>\u7b26\u53f7\u89e3\u6790\u4e0e\u91cd\u5b9a\u4f4d\u9636\u6bb5\uff1a\u94fe\u63a5\u5668\u4f1a\u628a\u5404\u4e2a\u8f93\u5165\u76ee\u6807\u6587\u4ef6\u5bf9\u4e8e\u5916\u90e8\u7b26\u53f7\u7684\u5f15\u7528\u8fdb\u884c\u89e3\u6790\uff0c\u628a\u6bcf\u4e2a\u6bb5\u4e2d\u987b\u91cd\u5b9a\u4f4d\u7684\u6307\u4ee4\u548c\u6570\u636e\u8fdb\u884c\u4fee\u6b63\uff0c\u4f7f\u5176\u6307\u5411\u6b63\u786e\u7684\u4f4d\u7f6e</li> </ul>"},{"location":"foundation/self-cultivation/system-call/","title":"\u7cfb\u7edf\u8c03\u7528","text":"<p>\u6700\u8fd1\u5728\u8bfb\u300a\u7a0b\u5e8f\u5458\u7684\u81ea\u6211\u4fee\u517b\uff1a\u94fe\u63a5\uff0c\u88c5\u8f7d\u4e0e\u5e93\u300b\uff0c\u5176\u5b9e\u8fd9\u672c\u4e66\u8ddf Android \u5f00\u53d1\u7684\u8054\u7cfb\u8fd8\u633a\u7d27\u5bc6\u7684\uff0c\u65e0\u8bba\u662f NDK \u5f00\u53d1\uff0c\u6216\u8005\u662f\u6027\u80fd\u4f18\u5316\u4e2d\u4e00\u4e9b\u5e38\u7528\u7684 Native Hoook \u624b\u6bb5\uff0c\u90fd\u9700\u8981\u4e86\u89e3\u4e00\u4e9b\u94fe\u63a5\uff0c\u88c5\u8f7d\u76f8\u5173\u7684\u77e5\u8bc6\u70b9\u3002\u672c\u6587\u4e3a\u8bfb\u4e66\u7b14\u8bb0\u3002</p>"},{"location":"foundation/self-cultivation/system-call/#_2","title":"\u7cfb\u7edf\u8c03\u7528\u4ecb\u7ecd","text":"<p>\u7cfb\u7edf\u8c03\u7528\u662f\u5e94\u7528\u7a0b\u5e8f\uff08\u8fd0\u884c\u5e93\u4e5f\u662f\u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u90e8\u5206\uff09\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u4e4b\u95f4\u7684\u63a5\u53e3\uff0c\u5b83\u51b3\u5b9a\u4e86\u5e94\u7528\u7a0b\u5e8f\u662f\u5982\u4f55\u4e0e\u5185\u6838\u6253\u4ea4\u9053\u7684\u3002\u65e0\u8bba\u7a0b\u5e8f\u662f\u76f4\u63a5\u8fdb\u884c\u7cfb\u7edf\u8c03\u7528\uff0c\u8fd8\u662f\u901a\u8fc7\u8fd0\u884c\u5e93\uff0c\u6700\u7ec8\u8fd8\u662f\u4f1a\u5230\u8fbe\u7cfb\u7edf\u8c03\u7528\u8fd9\u4e2a\u5c42\u9762\u4e0a\u3002</p>"},{"location":"foundation/self-cultivation/system-call/#_3","title":"\u4ec0\u4e48\u662f\u7cfb\u7edf\u8c03\u7528","text":"<p>\u5728\u73b0\u4ee3\u7684\u64cd\u4f5c\u7cfb\u7edf\u91cc\uff0c\u7a0b\u5e8f\u8fd0\u884c\u7684\u65f6\u5019\uff0c\u672c\u8eab\u662f\u6ca1\u6709\u6743\u5229\u8bbf\u95ee\u591a\u5c11\u7cfb\u7edf\u8d44\u6e90\u7684\u3002\u7531\u4e8e\u7cfb\u7edf\u6709\u9650\u7684\u8d44\u6e90\u6709\u53ef\u80fd\u88ab\u591a\u4e2a\u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u540c\u65f6\u8bbf\u95ee\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u4e0d\u52a0\u4ee5\u4fdd\u62a4\uff0c\u90a3\u4e48\u5404\u4e2a\u5e94\u7528\u7a0b\u5e8f\u96be\u514d\u4ea7\u751f\u51b2\u7a81\u3002\u6240\u4ee5\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u90fd\u5c06\u53ef\u80fd\u4ea7\u751f\u51b2\u7a81\u7684\u7cfb\u7edf\u8d44\u6e90\u7ed9\u4fdd\u62a4\u8d77\u6765\uff0c\u963b\u6b62\u5e94\u7528\u7a0b\u5e8f\u76f4\u63a5\u8bbf\u95ee\u3002\u8fd9\u4e9b\u7cfb\u7edf\u8d44\u6e90\u5305\u62ec\u6587\u4ef6\u3001\u7f51\u7edc\u3001IO\u3001\u5404\u79cd\u8bbe\u5907\u7b49\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u65e0\u8bba\u5728 Windows \u4e0b\u8fd8\u662f Linux \u4e0b\uff0c\u7a0b\u5e8f\u5458\u90fd\u6ca1\u6709\u673a\u4f1a\u64c5\u81ea\u53bb\u8bbf\u95ee\u786c\u76d8\u7684\u67d0\u6247\u533a\u4e0a\u9762\u7684\u6570\u636e\uff0c\u800c\u5fc5\u987b\u901a\u8fc7\u6587\u4ef6\u7cfb\u7edf\uff1b\u4e5f\u4e0d\u80fd\u64c5\u81ea\u4fee\u6539\u4efb\u610f\u6587\u4ef6\uff0c\u6240\u6709\u7684\u8fd9\u4e9b\u64cd\u4f5c\u90fd\u5fc5\u987b\u7ecf\u7531\u64cd\u4f5c\u7cfb\u7edf\u6240\u89c4\u5b9a\u7684\u65b9\u5f0f\u6765\u8fdb\u884c\uff0c\u6bd4\u5982\u6211\u4eec\u4f7f\u7528 fopen \u53bb\u6253\u5f00\u4e00\u4e2a\u6ca1\u6709\u6743\u9650\u7684\u6587\u4ef6\u5c31\u4f1a\u53d1\u751f\u5931\u8d25\u3002</p> <p>\u4e3a\u4e86\u8ba9\u5e94\u7528\u7a0b\u5e8f\u6709\u80fd\u529b\u8bbf\u95ee\u7cfb\u7edf\u8d44\u6e90\uff0c\u4e5f\u4e3a\u4e86\u8ba9\u7a0b\u5e8f\u501f\u52a9\u64cd\u4f5c\u7cfb\u7edf\u505a\u4e00\u4e9b\u5fc5\u987b\u7531\u64cd\u4f5c\u7cfb\u7edf\u652f\u6301\u7684\u884c\u4e3a\uff0c\u6bcf\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u90fd\u4f1a\u63d0\u4f9b\u4e00\u5957\u63a5\u53e3\uff0c\u4ee5\u4f9b\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u3002\u8fd9\u4e9b\u63a5\u53e3\u5f80\u5f80\u901a\u8fc7\u4e2d\u65ad\u6765\u5b9e\u73b0\uff0c\u6bd4\u5982 Linux \u4f7f\u7528 0x80 \u53f7\u4e2d\u65ad\u4f5c\u4e3a\u7cfb\u7edf\u8c03\u7528\u7684\u5165\u53e3\uff0cWindows \u91c7\u7528 0x2E \u53f7\u4e2d\u65ad\u4f5c\u4e3a\u7cfb\u7edf\u8c03\u7528\u5165\u53e3\u3002</p>"},{"location":"foundation/self-cultivation/system-call/#linux","title":"Linux \u7cfb\u7edf\u8c03\u7528","text":"<p>\u4e0b\u9762\u8ba9\u6211\u4eec\u6765\u770b\u770b Linux \u7cfb\u7edf\u8c03\u7528\u7684\u5b9a\u4e49\uff1a\u5728 x86 \u4e0b\uff0c\u7cfb\u7edf\u8c03\u7528\u7531 0x80 \u4e2d\u65ad\u5b8c\u6210\uff0c\u5404\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u7528\u4e8e\u4f20\u9012\u53c2\u6570\uff0cEAX \u5bc4\u5b58\u5668\u7528\u4e8e\u8868\u793a\u7cfb\u7edf\u8c03\u7528\u7684\u63a5\u53e3\u53f7\uff0c\u6bd4\u5982 EAX = 1 \u8868\u793a\u9000\u51fa\u8fdb\u7a0b\uff08exit\uff09\uff1bEAX = 2\u8868\u793a\u521b\u5efa\u8fdb\u7a0b\uff08fork\uff09\uff1bEAX = 3\u8868\u793a\u8bfb\u53d6\u6587\u4ef6\u6216IO\uff08read\uff09\uff1bEAX = 4\u8868\u793a\u5199\u6587\u4ef6\u6216 IO\uff08write\uff09\u7b49\uff0c\u6bcf\u4e2a\u7cfb\u7edf\u8c03\u7528\u90fd\u5bf9\u5e94\u4e8e\u5185\u6838\u6e90\u4ee3\u7801\u4e2d\u7684\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u4eec\u90fd\u662f\u4ee5\u201csys_\u201d\u5f00\u5934\u7684\uff0c\u6bd4\u5982 exit \u8c03\u7528\u5bf9\u5e94\u5185\u6838\u4e2d\u7684 sys_exit \u51fd\u6570\u3002\u5f53\u7cfb\u7edf\u8c03\u7528\u8fd4\u56de\u65f6\uff0cEAX \u53c8\u4f5c\u4e3a\u8c03\u7528\u7ed3\u679c\u7684\u8fd4\u56de\u503c\u3002</p>"},{"location":"foundation/self-cultivation/system-call/#_4","title":"\u7cfb\u7edf\u8c03\u7528\u7684\u5f0a\u7aef","text":"<p>\u7cfb\u7edf\u8c03\u7528\u5b8c\u6210\u4e86\u5e94\u7528\u7a0b\u5e8f\u548c\u5185\u6838\u4ea4\u6d41\u7684\u5de5\u4f5c\uff0c\u56e0\u6b64\u7406\u8bba\u4e0a\u53ea\u9700\u8981\u7cfb\u7edf\u8c03\u7528\u5c31\u53ef\u4ee5\u5b8c\u6210\u4e00\u4e9b\u7a0b\u5e8f\uff0c\u4f46\u662f\u5176\u4e5f\u6709\u4e00\u4e9b\u7f3a\u9677</p> <ul> <li>\u4f7f\u7528\u4e0d\u4fbf\u3002\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u7cfb\u7edf\u8c03\u7528\u63a5\u53e3\u5f80\u5f80\u8fc7\u4e8e\u539f\u59cb\uff0c\u7a0b\u5e8f\u5458\u987b\u8981\u4e86\u89e3\u5f88\u591a\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u76f8\u5173\u7684\u7ec6\u8282\u3002\u5982\u679c\u6ca1\u6709\u8fdb\u884c\u5f88\u597d\u7684\u5305\u88c5\uff0c\u4f7f\u7528\u8d77\u6765\u4e0d\u65b9\u4fbf\u3002</li> <li>\u5404\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u95f4\u7cfb\u7edf\u8c03\u7528\u4e0d\u517c\u5bb9\u3002\u9996\u5148 Windows \u7cfb\u7edf\u548c Linux \u7cfb\u7edf\u4e4b\u95f4\u7684\u7cfb\u7edf\u8c03\u7528\u5c31\u57fa\u672c\u4e0a\u5b8c\u5168\u4e0d\u540c\uff0c\u867d\u7136\u5b83\u4eec\u7684\u5185\u5bb9\u5f88\u591a\u90fd\u4e00\u6837\uff0c\u4f46\u662f\u5b9a\u4e49\u548c\u5b9e\u73b0\u5927\u4e0d\u4e00\u6837\u3002\u5373\u4f7f\u662f\u540c\u7cfb\u5217\u7684\u64cd\u4f5c\u7cfb\u7edf\u7684\u7cfb\u7edf\u8c03\u7528\u90fd\u4e0d\u4e00\u6837\uff0c\u6bd4\u5982 Linux \u548c UNIX \u5c31\u4e0d\u76f8\u540c\u3002</li> </ul> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u9700\u8981\u5f15\u5165\u4e00\u4e2a\u4e2d\u95f4\u5c42\uff1a\u201c\u89e3\u51b3\u8ba1\u7b97\u673a\u7684\u95ee\u9898\u53ef\u4ee5\u901a\u8fc7\u589e\u52a0\u5c42\u6765\u5b9e\u73b0\u201d\uff0c\u4e8e\u662f\u8fd0\u884c\u5e93\u633a\u8eab\u800c\u51fa\uff0c\u5b83\u4f5c\u4e3a\u7cfb\u7edf\u8c03\u7528\u4e0e\u7a0b\u5e8f\u4e4b\u95f4\u7684\u4e00\u4e2a\u62bd\u8c61\u5c42\u5177\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a</p> <ul> <li>\u4f7f\u7528\u7b80\u4fbf\u3002\u56e0\u4e3a\u8fd0\u884c\u5e93\u672c\u8eab\u5c31\u662f\u8bed\u8a00\u7ea7\u522b\u7684\uff0c\u5b83\u4e00\u822c\u90fd\u8bbe\u8ba1\u76f8\u5bf9\u6bd4\u8f83\u53cb\u597d\u3002</li> <li>\u5f62\u5f0f\u7edf\u4e00\u3002\u8fd0\u884c\u5e93\u6709\u5b83\u7684\u6807\u51c6\uff0c\u53eb\u505a\u6807\u51c6\u5e93\uff0c\u51e1\u662f\u6240\u6709\u9075\u5faa\u8fd9\u4e2a\u6807\u51c6\u7684\u8fd0\u884c\u5e93\u7406\u8bba\u4e0a\u90fd\u662f\u76f8\u4e92\u517c\u5bb9\u7684\uff0c\u4e0d\u4f1a\u968f\u7740\u64cd\u4f5c\u7cfb\u7edf\u6216\u7f16\u8bd1\u5668\u7684\u53d8\u5316\u800c\u53d8\u5316\u3002</li> </ul> <p>\u8fd9\u6837\uff0c\u5f53\u6211\u4eec\u4f7f\u7528\u8fd0\u884c\u5e93\u63d0\u4f9b\u7684\u63a5\u53e3\u5199\u7a0b\u5e8f\u65f6\uff0c\u5c31\u4e0d\u4f1a\u9762\u4e34\u8fd9\u4e9b\u95ee\u9898\uff0c\u81f3\u5c11\u662f\u53ef\u4ee5\u5f88\u5927\u7a0b\u5ea6\u4e0a\u63a9\u76d6\u76f4\u63a5\u4f7f\u7528\u7cfb\u7edf\u8c03\u7528\u7684\u5f0a\u7aef\u3002</p> <p>\u8fd0\u884c\u65f6\u5e93\u5c06\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u7684\u7cfb\u7edf\u8c03\u7528\u5305\u88c5\u4e3a\u7edf\u4e00\u56fa\u5b9a\u7684\u63a5\u53e3\uff0c\u4f7f\u5f97\u540c\u6837\u7684\u4ee3\u7801\uff0c\u5728\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u90fd\u53ef\u4ee5\u76f4\u63a5\u7f16\u8bd1\uff0c\u5e76\u4ea7\u751f\u4e00\u81f4\u7684\u6548\u679c\u3002\u8fd9\u5c31\u662f\u6e90\u4ee3\u7801\u7ea7\u4e0a\u7684\u53ef\u79fb\u690d\u6027\u3002</p> <p>\u4f46\u662f\u8fd0\u884c\u5e93\u4e5f\u6709\u8fd0\u884c\u5e93\u7684\u7f3a\u9677\uff0c\u6bd4\u5982 C \u8bed\u8a00\u7684\u8fd0\u884c\u5e93\u4e3a\u4e86\u4fdd\u8bc1\u591a\u4e2a\u5e73\u53f0\u4e4b\u95f4\u80fd\u591f\u76f8\u4e92\u901a\u7528\uff0c\u4e8e\u662f\u5b83\u53ea\u80fd\u53d6\u5404\u4e2a\u5e73\u53f0\u4e4b\u95f4\u529f\u80fd\u7684\u4ea4\u96c6\u3002\u6bd4\u5982 Windows \u548c Linux \u90fd\u652f\u6301\u6587\u4ef6\u8bfb\u5199\uff0c\u90a3\u4e48\u8fd0\u884c\u5e93\u5c31\u53ef\u4ee5\u6709\u6587\u4ef6\u8bfb\u5199\u7684\u529f\u80fd\uff1b\u4f46\u662f Windows \u539f\u751f\u652f\u6301\u56fe\u5f62\u548c\u7528\u6237\u4ea4\u4e92\u7cfb\u7edf\uff0c\u800c Linux \u5374\u4e0d\u662f\u539f\u751f\u652f\u6301\u7684\uff08\u901a\u8fc7 XWindows\uff09\uff0c\u90a3\u4e48 CRT \u5c31\u53ea\u80fd\u628a\u8fd9\u90e8\u5206\u529f\u80fd\u7701\u53bb\u3002</p>"},{"location":"foundation/self-cultivation/system-call/#_5","title":"\u7cfb\u7edf\u8c03\u7528\u539f\u7406","text":""},{"location":"foundation/self-cultivation/system-call/#_6","title":"\u7279\u6743\u7ea7\u4e0e\u4e2d\u65ad","text":"<p>\u73b0\u4ee3\u7684 CPU \u5e38\u5e38\u53ef\u4ee5\u5728\u591a\u79cd\u622a\u7136\u4e0d\u540c\u7684\u7279\u6743\u7ea7\u522b\u4e0b\u6267\u884c\u6307\u4ee4\uff0c\u5728\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u901a\u5e38\u4e5f\u636e\u6b64\u6709\u4e24\u79cd\u7279\u6743\u7ea7\u522b\uff0c\u5206\u522b\u4e3a\u7528\u6237\u6a21\u5f0f\uff08User Mode\uff09\u548c\u5185\u6838\u6a21\u5f0f\uff08Kernel Mode\uff09\uff0c\u4e5f\u88ab\u79f0\u4e3a\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u3002\u7531\u4e8e\u6709\u591a\u79cd\u7279\u6743\u6a21\u5f0f\u7684\u5b58\u5728\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c31\u53ef\u4ee5\u8ba9\u4e0d\u540c\u7684\u4ee3\u7801\u8fd0\u884c\u5728\u4e0d\u540c\u7684\u6a21\u5f0f\u4e0a\uff0c\u4ee5\u9650\u5236\u5b83\u4eec\u7684\u6743\u529b\uff0c\u63d0\u9ad8\u7a33\u5b9a\u6027\u548c\u5b89\u5168\u6027\u3002\u666e\u901a\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u5728\u7528\u6237\u6001\u7684\u6a21\u5f0f\u4e0b\uff0c\u8bf8\u591a\u64cd\u4f5c\u5c06\u53d7\u5230\u9650\u5236\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u5305\u62ec\u8bbf\u95ee\u786c\u4ef6\u8bbe\u5907\u3001\u5f00\u5173\u4e2d\u65ad\u3001\u6539\u53d8\u7279\u6743\u6a21\u5f0f\u7b49\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u8fd0\u884c\u5728\u9ad8\u7279\u6743\u7ea7\u7684\u4ee3\u7801\u5c06\u81ea\u5df1\u964d\u81f3\u4f4e\u7279\u6743\u7ea7\u662f\u5141\u8bb8\u7684\uff0c\u4f46\u53cd\u8fc7\u6765\u4f4e\u7279\u6743\u7ea7\u7684\u4ee3\u7801\u5c06\u81ea\u5df1\u63d0\u5347\u81f3\u9ad8\u7279\u6743\u7ea7\u5219\u4e0d\u662f\u8f7b\u6613\u5c31\u80fd\u8fdb\u884c\u7684\uff0c\u5426\u5219\u7279\u6743\u7ea7\u7684\u4f5c\u7528\u5c31\u6709\u540d\u65e0\u5b9e\u4e86\u3002\u5728\u5c06\u4f4e\u7279\u6743\u7ea7\u7684\u73af\u5883\u8f6c\u4e3a\u9ad8\u7279\u6743\u7ea7\u65f6\uff0c\u987b\u8981\u4f7f\u7528\u4e00\u79cd\u8f83\u4e3a\u53d7\u63a7\u548c\u5b89\u5168\u7684\u5f62\u5f0f\uff0c\u4ee5\u9632\u6b62\u4f4e\u7279\u6743\u6a21\u5f0f\u7684\u4ee3\u7801\u7834\u574f\u9ad8\u7279\u6743\u6a21\u5f0f\u4ee3\u7801\u7684\u6267\u884c\u3002</p> <p>\u7cfb\u7edf\u8c03\u7528\u662f\u8fd0\u884c\u5728\u5185\u6838\u6001\u7684\uff0c\u800c\u5e94\u7528\u7a0b\u5e8f\u57fa\u672c\u90fd\u662f\u8fd0\u884c\u5728\u7528\u6237\u6001\u7684\u3002\u7528\u6237\u6001\u7684\u7a0b\u5e8f\u5982\u4f55\u8fd0\u884c\u5185\u6838\u6001\u7684\u4ee3\u7801\u5462\uff1f</p> <p>\u64cd\u4f5c\u7cfb\u7edf\u4e00\u822c\u662f\u901a\u8fc7\u4e2d\u65ad\uff08Interrupt\uff09\u6765\u4ece\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\u3002\u4ec0\u4e48\u662f\u4e2d\u65ad\u5462\uff1f\u4e2d\u65ad\u662f\u4e00\u4e2a\u786c\u4ef6\u6216\u8f6f\u4ef6\u53d1\u51fa\u7684\u8bf7\u6c42\uff0c\u8981\u6c42CPU\u6682\u505c\u5f53\u524d\u7684\u5de5\u4f5c\u8f6c\u624b\u53bb\u5904\u7406\u66f4\u52a0\u91cd\u8981\u7684\u4e8b\u60c5\u3002\u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5f53\u4f60\u5728\u7f16\u8f91\u6587\u672c\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u952e\u76d8\u4e0a\u7684\u952e\u4e0d\u65ad\u5730\u88ab\u6309\u4e0b\uff0cCPU\u5982\u4f55\u83b7\u77e5\u8fd9\u4e00\u70b9\u7684\u5462\uff1f\u4e00\u79cd\u65b9\u6cd5\u79f0\u4e3a\u8f6e\u8be2\uff08Poll\uff09\uff0c\u5373CPU\u6bcf\u9694\u4e00\u5c0f\u6bb5\u65f6\u95f4\uff08\u51e0\u5341\u5230\u51e0\u767e\u6beb\u79d2\uff09\u53bb\u8be2\u95ee\u952e\u76d8\u662f\u5426\u6709\u952e\u88ab\u6309\u4e0b\uff0c\u4f46\u9664\u975e\u7528\u6237\u662f\u75af\u72c2\u6253\u5b57\u5458\uff0c\u5426\u5219\u5927\u90e8\u5206\u7684\u8f6e\u8be2\u884c\u4e3a\u5f97\u5230\u7684\u90fd\u662f\u201c\u6ca1\u6709\u952e\u88ab\u6309\u4e0b\u201d\u7684\u56de\u5e94\uff0c\u8fd9\u6837\u64cd\u4f5c\u5c31\u88ab\u6d6a\u8d39\u6389\u4e86\u3002\u53e6\u5916\u4e00\u79cd\u65b9\u6cd5\u662fCPU\u4e0d\u53bb\u7406\u776c\u952e\u76d8\uff0c\u800c\u5f53\u952e\u76d8\u4e0a\u6709\u952e\u88ab\u6309\u4e0b\u65f6\uff0c\u952e\u76d8\u4e0a\u7684\u82af\u7247\u53d1\u9001\u4e00\u4e2a\u4fe1\u53f7\u7ed9 CPU\uff0cCPU \u63a5\u6536\u5230\u4fe1\u53f7\u4e4b\u540e\u5c31\u77e5\u9053\u952e\u76d8\u88ab\u6309\u4e0b\u4e86\uff0c\u7136\u540e\u518d\u53bb\u8be2\u95ee\u952e\u76d8\u88ab\u6309\u4e0b\u7684\u952e\u662f\u54ea\u4e00\u4e2a\u3002 \u8fd9\u6837\u7684\u4fe1\u53f7\u5c31\u662f\u4e00\u79cd\u4e2d\u65ad\u3002</p> <p>\u4e2d\u65ad\u4e00\u822c\u5177\u6709\u4e24\u4e2a\u5c5e\u6027\uff0c\u4e00\u4e2a\u79f0\u4e3a\u4e2d\u65ad\u53f7\uff08\u4ece0\u5f00\u59cb\uff09\uff0c\u4e00\u4e2a\u79f0\u4e3a\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\uff08Interrupt Service Routine, ISR\uff09\u3002\u4e0d\u540c\u7684\u4e2d\u65ad\u5177\u6709\u4e0d\u540c\u7684\u4e2d\u65ad\u53f7\uff0c\u800c\u540c\u65f6\u4e00\u4e2a\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u4e00\u4e00\u5bf9\u5e94\u4e00\u4e2a\u4e2d\u65ad\u53f7\u3002\u5728\u5185\u6838\u4e2d\uff0c\u6709\u4e00\u4e2a\u6570\u7ec4\u79f0\u4e3a\u4e2d\u65ad\u5411\u91cf\u8868\uff08Interrupt Vector Table\uff09\uff0c\u8fd9\u4e2a\u6570\u7ec4\u7684\u7b2c n \u9879\u5305\u542b\u4e86\u6307\u5411\u7b2c n \u53f7\u4e2d\u65ad\u7684\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u7684\u6307\u9488\u3002\u5f53\u4e2d\u65ad\u5230\u6765\u65f6\uff0cCPU \u4f1a\u6682\u505c\u5f53\u524d\u6267\u884c\u7684\u4ee3\u7801\uff0c\u6839\u636e\u4e2d\u65ad\u7684\u4e2d\u65ad\u53f7\uff0c\u5728\u4e2d\u65ad\u5411\u91cf\u8868\u4e2d\u627e\u5230\u5bf9\u5e94\u7684\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\uff0c\u5e76\u8c03\u7528\u5b83\u3002\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u6267\u884c\u5b8c\u6210\u4e4b\u540e\uff0cCPU \u4f1a\u7ee7\u7eed\u6267\u884c\u4e4b\u524d\u7684\u4ee3\u7801\u3002</p> <p></p> <p>\u901a\u5e38\u610f\u4e49\u4e0a\uff0c\u4e2d\u65ad\u6709\u4e24\u79cd\u7c7b\u578b\uff0c\u4e00\u79cd\u79f0\u4e3a\u786c\u4ef6\u4e2d\u65ad\uff0c\u8fd9\u79cd\u4e2d\u65ad\u6765\u81ea\u4e8e\u786c\u4ef6\u7684\u5f02\u5e38\u6216\u5176\u4ed6\u4e8b\u4ef6\u7684\u53d1\u751f\uff0c\u5982\u7535\u6e90\u6389\u7535\u3001\u952e\u76d8\u88ab\u6309\u4e0b\u7b49\u3002\u53e6\u4e00\u79cd\u79f0\u4e3a\u8f6f\u4ef6\u4e2d\u65ad\uff0c\u8f6f\u4ef6\u4e2d\u65ad\u901a\u5e38\u662f\u4e00\u6761\u6307\u4ee4\uff08i386\u4e0b\u662fint\uff09\uff0c\u5e26\u6709\u4e00\u4e2a\u53c2\u6570\u8bb0\u5f55\u4e2d\u65ad\u53f7\uff0c\u4f7f\u7528\u8fd9\u6761\u6307\u4ee4\u7528\u6237\u53ef\u4ee5\u624b\u52a8\u89e6\u53d1\u67d0\u4e2a\u4e2d\u65ad\u5e76\u6267\u884c\u5176\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002\u4f8b\u5982\u5728 i386 \u4e0b\uff0cint 0x80 \u8fd9\u6761\u6307\u4ee4\u4f1a\u8c03\u7528\u7b2c0x80\u53f7\u4e2d\u65ad\u7684\u5904\u7406\u7a0b\u5e8f\u3002</p> <p>\u7531\u4e8e\u4e2d\u65ad\u53f7\u662f\u5f88\u6709\u9650\u7684\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u4f1a\u820d\u5f97\u7528\u4e00\u4e2a\u4e2d\u65ad\u53f7\u6765\u5bf9\u5e94\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\uff0c\u800c\u66f4\u503e\u5411\u4e8e\u7528\u4e00\u4e2a\u6216\u5c11\u6570\u51e0\u4e2a\u4e2d\u65ad\u53f7\u6765\u5bf9\u5e94\u6240\u6709\u7684\u7cfb\u7edf\u8c03\u7528\u3002\u4f8b\u5982\uff0ci386 \u4e0b Windows \u91cc\u7edd\u5927\u591a\u6570\u7cfb\u7edf\u8c03\u7528\u90fd\u662f\u7531 int 0x2e \u6765\u89e6\u53d1\u7684\uff0c\u800c Linux \u5219\u4f7f\u7528 int 0x80 \u6765\u89e6\u53d1\u6240\u6709\u7684\u7cfb\u7edf\u8c03\u7528\u3002</p> <p>\u5bf9\u4e8e\u540c\u4e00\u4e2a\u4e2d\u65ad\u53f7\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5982\u4f55\u77e5\u9053\u662f\u54ea\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\u8981\u88ab\u8c03\u7528\u5462\uff1f\u548c\u4e2d\u65ad\u4e00\u6837\uff0c\u7cfb\u7edf\u8c03\u7528\u90fd\u6709\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\u53f7\uff0c\u5c31\u50cf\u8eab\u4efd\u6807\u8bc6\u4e00\u6837\u6765\u8868\u660e\u662f\u54ea\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\uff0c\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u53f7\u901a\u5e38\u5c31\u662f\u7cfb\u7edf\u8c03\u7528\u5728\u7cfb\u7edf\u8c03\u7528\u8868\u4e2d\u7684\u4f4d\u7f6e\uff0c\u4f8b\u5982 Linux \u91cc fork \u7684\u7cfb\u7edf\u8c03\u7528\u53f7\u662f 2\u3002\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u53f7\u5728\u6267\u884c int \u6307\u4ee4\u524d\u4f1a\u88ab\u653e\u7f6e\u5728\u67d0\u4e2a\u56fa\u5b9a\u7684\u5bc4\u5b58\u5668\u91cc\uff0c\u5bf9\u5e94\u7684\u4e2d\u65ad\u4ee3\u7801\u4f1a\u53d6\u5f97\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u53f7\uff0c\u5e76\u4e14\u8c03\u7528\u6b63\u786e\u7684\u51fd\u6570\u3002\u4ee5 Linux \u7684 int 0x80 \u4e3a\u4f8b\uff0c\u7cfb\u7edf\u8c03\u7528\u53f7\u662f\u7531 eax \u6765\u4f20\u5165\u7684\u3002\u7528\u6237\u5c06\u7cfb\u7edf\u8c03\u7528\u53f7\u653e\u5165 eax\uff0c\u7136\u540e\u4f7f\u7528 int 0x80 \u8c03\u7528\u4e2d\u65ad\uff0c\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u5c31\u53ef\u4ee5\u4ece eax \u91cc\u53d6\u5f97\u7cfb\u7edf\u8c03\u7528\u53f7\uff0c\u8fdb\u800c\u8c03\u7528\u5bf9\u5e94\u7684\u51fd\u6570\u3002</p>"},{"location":"foundation/self-cultivation/system-call/#int-linux","title":"\u57fa\u4e8e int \u7684\u7ecf\u5178 linux \u7cfb\u7edf\u8c03\u7528","text":"<p>\u4e0b\u9762\u6211\u4eec\u4ecb\u7ecd\u4e00\u4e0b\uff0c\u5f53\u5e94\u7528\u7a0b\u5e8f\u8c03\u7528\u7cfb\u7edf\u8c03\u7528\u65f6\uff0c\u7a0b\u5e8f\u662f\u5982\u4f55\u4e00\u6b65\u6b65\u8fdb\u5165\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8c03\u7528\u76f8\u5e94\u51fd\u6570\u7684\u3002</p> <p></p> <ul> <li>\u89e6\u53d1\u4e2d\u65ad</li> <li>\u5207\u6362\u5806\u6808</li> <li>\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f</li> </ul> <p>\u6574\u4e2a\u8c03\u7528\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"foundation/self-cultivation/system-call/#linux_1","title":"linux \u7684\u65b0\u578b\u7cfb\u7edf\u8c03\u7528\u673a\u5236","text":"<p>\u7531\u4e8e\u57fa\u4e8e int \u6307\u4ee4\u7684\u7cfb\u7edf\u8c03\u7528\u5728\u5954\u817e4\u4ee3\u5904\u7406\u5668\u4e0a\u6027\u80fd\u4e0d\u4f73\uff0cLinux \u57282.5\u7248\u672c\u8d77\u5f00\u59cb\u652f\u6301\u4e00\u79cd\u65b0\u578b\u7684\u7cfb\u7edf\u8c03\u7528\u673a\u5236\u3002\u8fd9\u79cd\u65b0\u673a\u5236\u4f7f\u7528 Intel \u5728\u5954\u817e2\u4ee3\u5904\u7406\u5668\u5c31\u5f00\u59cb\u652f\u6301\u7684\u4e00\u7ec4\u4e13\u95e8\u9488\u5bf9\u7cfb\u7edf\u8c03\u7528\u7684\u6307\u4ee4\u2014\u2014 sysenter \u548c sysexit\u3002</p>"},{"location":"foundation/self-cultivation/system-call/#_7","title":"\u603b\u7ed3","text":"<p>\u7cfb\u7edf\u8c03\u7528\u662f\u5e94\u7528\u7a0b\u5e8f\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u4e4b\u95f4\u7684\u63a5\u53e3\uff0c\u5b83\u51b3\u5b9a\u4e86\u5e94\u7528\u7a0b\u5e8f\u662f\u5982\u4f55\u4e0e\u5185\u6838\u6253\u4ea4\u9053\u7684\u3002\u65e0\u8bba\u7a0b\u5e8f\u662f\u76f4\u63a5\u8fdb\u884c\u7cfb\u7edf\u8c03\u7528\uff0c\u8fd8\u662f\u901a\u8fc7\u8fd0\u884c\u5e93\uff0c\u6700\u7ec8\u8fd8\u662f\u4f1a\u5230\u8fbe\u7cfb\u7edf\u8c03\u7528\u8fd9\u4e2a\u5c42\u9762\u4e0a\u3002\u56e0\u6b64\u8981\u771f\u6b63\u4e86\u89e3\u7a0b\u5e8f\u7684\u8fd0\u884c\uff0c\u4e5f\u5f88\u6709\u5fc5\u8981\u4e86\u89e3\u4e00\u4e0b\u7cfb\u7edf\u8c03\u7528\u7684\u539f\u7406\u3002</p>"},{"location":"foundation/tools/native-hook/","title":"Native Hook \u5feb\u901f\u4e0a\u624b","text":""},{"location":"foundation/tools/native-hook/#_1","title":"\u524d\u8a00","text":"<p>Hook \u539f\u610f\u662f\u6307\u94a9\u5b50\uff0c\u5b83\u8868\u793a\u7684\u5c31\u662f\u5728\u67d0\u4e2a\u51fd\u6570\u7684\u4e0a\u4e0b\u6587\u505a\u81ea\u5b9a\u4e49\u7684\u5904\u7406\u6765\u5b9e\u73b0\u6211\u4eec\u60f3\u8981\u7684\u9ed1\u79d1\u6280</p> <p>\u5927\u5bb6\u53ef\u80fd\u6bd4\u8f83\u719f\u6089 Java \u5c42\u7684\u4e00\u4e9b Hook \u6280\u672f\uff0c\u6bd4\u5982\u53cd\u5c04\uff0c\u52a8\u6001\u4ee3\u7406\uff0c\u6216\u8005 ASM \u5b57\u8282\u7801\u63d2\u6869</p> <p>\u5728 Java \u5c42\u4e4b\u5916\uff0cAndroid \u7cfb\u7edf\u8fd8\u6709\u5f88\u5927\u4e00\u90e8\u5206\u5c5e\u4e8e Native \u5c42\uff0c\u6709\u65f6\u4e0d\u53ef\u907f\u514d\u7684\u9700\u8981\u7528\u5230 Native Hook \u6280\u672f</p> <p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd Native Hook \u662f\u4ec0\u4e48\uff0c\u4ee5\u53ca\u5982\u4f55\u901a\u8fc7\u4e00\u4e2a\u4f8b\u5b50\u5feb\u901f\u4e0a\u624b</p>"},{"location":"foundation/tools/native-hook/#native-hook_1","title":"Native Hook \u662f\u4ec0\u4e48\uff1f","text":"<p>Native Hook \u6280\u672f\u901a\u5e38\u6709\u4ee5\u4e0b\u4e24\u79cd\u5b9e\u73b0\u65b9\u5f0f</p> <ul> <li>PLT Hook\uff1a\u901a\u8fc7\u4fee\u6539 GOT \u8868\uff0c\u5c06\u76ee\u6807\u51fd\u6570\u7684\u5730\u5740\u6307\u5411\u81ea\u5b9a\u4e49\u7684 Hook \u51fd\u6570\u7684\u5730\u5740\uff0c\u4ece\u800c\u62e6\u622a\u548c\u4fee\u6539\u76ee\u6807\u51fd\u6570\u7684\u884c\u4e3a\u3002</li> <li>Inline Hook\uff1a\u76f4\u63a5\u5c06\u51fd\u6570\u5f00\u59cb\u5904\u7684\u6307\u4ee4\u66f4\u66ff\u4e3a\u8df3\u8f6c\u6307\u4ee4\uff0c\u4f7f\u5f97\u539f\u51fd\u6570\u76f4\u63a5\u8df3\u8f6c\u5230 Hook \u7684\u76ee\u6807\u51fd\u6570\u51fd\u6570</li> </ul> <p>\u6211\u4eec\u4e0b\u9762\u6765\u5206\u522b\u4ecb\u7ecd\u4e00\u4e0b</p>"},{"location":"foundation/tools/native-hook/#plt-hook","title":"PLT Hook","text":"<p>PLT Hook \u7528\u4e00\u53e5\u63cf\u8ff0\u5c31\u662f\uff1a\u901a\u8fc7\u4fee\u6539 GOT \u8868\uff0c\u5c06\u76ee\u6807\u51fd\u6570\u7684\u5730\u5740\u6307\u5411\u81ea\u5b9a\u4e49\u7684 Hook \u51fd\u6570\u7684\u5730\u5740\uff0c\u4ece\u800c\u62e6\u622a\u548c\u4fee\u6539\u76ee\u6807\u51fd\u6570\u7684\u884c\u4e3a\u3002\u90a3\u4e48 GOT \u8868\u662f\u4ec0\u4e48\u5462\uff1f\u8fd9\u9700\u8981\u6211\u4eec\u5bf9 SO \u5e93\u6587\u4ef6\u7684 ELF \u6587\u4ef6\u683c\u5f0f\u548c\u52a8\u6001\u94fe\u63a5\u8fc7\u7a0b\u6709\u6240\u4e86\u89e3\u3002</p> <p>ELF(Executable and Linkable Format) \u6587\u4ef6\u683c\u5f0f\u662f\u4e00\u79cd\u53ef\u6267\u884c\u6587\u4ef6\u548c\u53ef\u94fe\u63a5\u6587\u4ef6\u683c\u5f0f\uff0c\u5b83\u662f\u73b0\u4ee3Unix\u548cLinux\u7cfb\u7edf\u4e0a\u6700\u5e38\u89c1\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u683c\u5f0f\u4e4b\u4e00\uff0cso \u5e93\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a ELF \u6587\u4ef6</p> <p></p> <p>ELF \u6587\u4ef6\u683c\u5f0f\u4e5f\u6bd4\u8f83\u590d\u6742\uff0c\u6211\u4eec\u8fd9\u91cc\u4e3b\u8981\u5173\u5fc3<code>.plt</code>\u4e0e<code>.got</code>\u4e24\u4e2a\u8868</p> <ul> <li>The Global Offset Table/\u5168\u5c40\u504f\u79fb\u91cf\u8868 (GOT)\u3002\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u5728\u6570\u636e\u6bb5\u7684\u5730\u5740\u8868\uff0c\u5047\u5b9a\u6211\u4eec\u6709\u4e00\u4e9b\u4ee3\u7801\u6bb5\u7684\u6307\u4ee4\u5f15\u7528\u4e00\u4e9b\u5730\u5740\u53d8\u91cf\uff0c\u7f16\u8bd1\u5668\u4f1a\u5f15\u7528 GOT \u8868\u6765\u66ff\u4ee3\u76f4\u63a5\u5f15\u7528\u7edd\u5bf9\u5730\u5740\uff0c\u56e0\u4e3a\u7edd\u5bf9\u5730\u5740\u5728\u7f16\u8bd1\u671f\u662f\u65e0\u6cd5\u77e5\u9053\u7684\uff0c\u53ea\u6709\u91cd\u5b9a\u4f4d\u540e\u624d\u4f1a\u5f97\u5230 \uff0cGOT \u81ea\u5df1\u672c\u8eab\u5c06\u4f1a\u5305\u542b\u51fd\u6570\u5f15\u7528\u7684\u7edd\u5bf9\u5730\u5740\u3002</li> <li>The Procedure Linkage Table/\u8fc7\u7a0b\u94fe\u63a5\u8868 (PLT)\u3002PLT \u4e0d\u540c\u4e8e GOT\uff0c\u5b83\u4f4d\u4e8e\u4ee3\u7801\u6bb5\uff0c\u52a8\u6001\u5e93\u7684\u6bcf\u4e00\u4e2a\u5916\u90e8\u51fd\u6570\u90fd\u4f1a\u5728 PLT \u4e2d\u6709\u4e00\u6761\u8bb0\u5f55\uff0c\u6bcf\u4e00\u6761 PLT \u8bb0\u5f55\u90fd\u662f\u4e00\u5c0f\u6bb5\u53ef\u6267\u884c\u4ee3\u7801\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5916\u90e8\u4ee3\u7801\u90fd\u662f\u5728\u8c03\u7528 PLT \u8868\u91cc\u7684\u8bb0\u5f55\uff0c\u7136\u540e PLT \u7684\u76f8\u5e94\u8bb0\u5f55\u4f1a\u8d1f\u8d23\u8c03\u7528\u5b9e\u9645\u7684\u51fd\u6570\u3002\u6211\u4eec\u4e00\u822c\u628a\u8fd9\u79cd\u8bbe\u5b9a\u53eb\u4f5c\u201c\u8e66\u5e8a\u201d\uff08Trampoline\uff09\u3002</li> </ul> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u5bf9\u4e8e\u5176\u5b83 so \u4e2d\u7684\u51fd\u6570\uff0c\u5728\u7f16\u8bd1\u671f\u65e0\u6cd5\u786e\u5b9a\u5176\u5730\u5740\uff0c\u53ea\u6709\u5728\u8fd0\u884c\u65f6\u624d\u80fd\u83b7\u53d6\uff0c\u56e0\u6b64\u9700\u8981\u67e5\u8be2 GOT \u8868\u6765\u67e5\u8be2\u5916\u90e8\u51fd\u6570\u7684\u7edd\u5bf9\u5730\u5740\u3002\u5916\u90e8\u5e93\u51fd\u6570\u7684\u7edd\u5bf9\u5730\u5740\u5728 got \u8868\u4e2d\u7684\u521d\u59cb\u503c\u90fd\u662f 0 \uff0c\u53ea\u6709\u5f53\u5b9e\u9645\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u65f6\uff0cLinker \u7a0b\u5e8f\u624d\u4f1a\u5199\u5165\u5b9e\u9645\u7684\u5730\u5740\u3002</p> <p>\u56e0\u6b64\u5982\u679c\u6211\u4eec\u60f3\u8981\u5b9e\u73b0 native hook\uff0c\u53ea\u9700\u8981\u628a got \u8868\u4e2d\u7684\u76ee\u6807\u51fd\u6570\u7684\u5730\u5740\u4fee\u6539\u4e3a\u6211\u4eec\u81ea\u5b9a\u4e49\u7684\u5730\u5740\u5373\u53ef\u3002</p> <p>\u90a3\u4e48\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0cPLT \u8868\u7684\u4f5c\u7528\u53c8\u662f\u4ec0\u4e48\u5462\uff1f</p> <p>\u5b9e\u9645\u4e0a\uff0c\u5728\u51fd\u6570\u8c03\u7528\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5148\u8df3\u8f6c\u5230 PLT \u8868\uff0c\u5b83\u4f4d\u4e8e\u4ee3\u7801\u6bb5\uff0c\u6bcf\u4e00\u6761 PLT \u8bb0\u5f55\u90fd\u662f\u4e00\u5c0f\u6bb5\u53ef\u6267\u884c\u4ee3\u7801\uff0c\u8fd9\u6bb5\u4ee3\u7801\u4f1a\u67e5\u8be2 GOT \u8868\uff0c\u83b7\u53d6\u771f\u5b9e\u5730\u5740\u7136\u540e\u8df3\u8f6c\u5bf9\u5e94\u7684\u51fd\u6570</p> <p>\u542c\u8d77\u6765\u6709\u4e9b\u591a\u6b64\u4e00\u4e3e\uff0c\u5b9e\u9645\u4e0a PLT \u8868\u53ef\u4ee5\u8d77\u5230\u5ef6\u8fdf\u7ed1\u5b9a\u7684\u4f5c\u7528\uff0c\u53ea\u6709\u5f53\u771f\u6b63\u8c03\u7528\u76ee\u6807\u51fd\u6570\u65f6\uff0cgot \u8868\u4e2d\u624d\u4f1a\u53bb\u7ed1\u5b9a\u771f\u5b9e\u5730\u5740\uff0c\u5982\u679c\u6ca1\u6709\u8c03\u7528\u5219\u4e0d\u7ed1\u5b9a\u3002\u56e0\u4e3a\u5f88\u591a\u51fd\u6570\u53ef\u80fd\u5728\u7a0b\u5e8f\u6267\u884c\u5b8c\u65f6\u90fd\u4e0d\u4f1a\u88ab\u7528\u5230\uff0c\u90a3\u4e48\u4e00\u5f00\u59cb\u628a\u6240\u6709\u51fd\u6570\u90fd\u94fe\u63a5\u597d\u5b9e\u9645\u662f\u4e00\u79cd\u6d6a\u8d39\u3002\u8fd9\u5c31\u662f PLT \u8868\u8d77\u5230\u7684\u4f5c\u7528</p> <p>\u56e0\u6b64\u5728 So \u4e2d\u8c03\u7528\u5916\u90e8\u51fd\u6570\u7684\u5b9e\u9645\u8fc7\u7a0b\u5982\u4e0b\u6240\u793a:</p> <p></p> <p>\u5728\u4e86\u89e3\u4e86 PLT HOOK \u7684\u57fa\u672c\u539f\u7406\u4e4b\u540e\uff0c\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u81ea\u5df1\u89e3\u6790 got \u8868\u7136\u540e\u66ff\u6362\u4e3a\u81ea\u5b9a\u4e49\u7684\u51fd\u6570\u5730\u5740\u5b9e\u73b0 hook\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u5df2\u7ecf\u6bd4\u8f83\u6210\u719f\u7684\u5e93</p> <ul> <li>https://github.com/bytedance/bhook </li> <li>https://github.com/iqiyi/xHook</li> </ul> <p>\u672c\u6587\u540e\u9762\u7684\u5b9e\u6218\u90fd\u662f\u4f7f\u7528 bhook \u5b9e\u73b0 hook\u7684</p>"},{"location":"foundation/tools/native-hook/#inline-hook","title":"Inline Hook","text":"<p>\u4ece\u4e0a\u9762\u7684\u4ecb\u7ecd\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0cPLT Hook \u5b58\u5728\u4e00\u5b9a\u7684\u5c40\u9650\u6027\uff0c\u5b83\u53ea\u80fd hook \u5916\u90e8 so \u7684\u8c03\u7528\uff0c\u4f46\u5982\u679c\u8981 hook \u5f53\u524d\u7684 so \u5462\uff1f</p> <p>Hook so \u5185\u90e8\u8c03\u7528\u53ef\u4ee5\u901a\u8fc7 Inline Hook \u5b9e\u73b0</p> <p>Inline Hook \u662f\u901a\u8fc7\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u5185\u5b58\u4e2d\u7684\u6c47\u7f16\u6307\u4ee4\uff0c\u6765\u6539\u53d8\u7a0b\u5e8f\u6267\u884c\u6d41\u7a0b\u7684\u4e00\u79cd Hook \u65b9\u5f0f\uff0c\u5b83\u7684\u57fa\u672c\u539f\u7406\u662f\u76f4\u63a5\u5c06\u51fd\u6570\u5f00\u59cb\u5904\u7684\u6307\u4ee4\u66f4\u66ff\u4e3a\u8df3\u8f6c\u6307\u4ee4\uff0c\u4f7f\u5f97\u539f\u51fd\u6570\u76f4\u63a5\u8df3\u8f6c\u5230 Hook \u7684\u76ee\u6807\u51fd\u6570\u51fd\u6570\uff0c\u5e76\u4fdd\u7559\u88ab\u8986\u76d6\u7684\u539f\u6307\u4ee4\u4ee5\u5b8c\u6210\u540e\u7eed\u518d\u8c03\u7528\u56de\u6765\u7684\u76ee\u7684\u3002</p> <p></p> <p>Inline Hook \u7684\u57fa\u672c\u6d41\u7a0b\u5982\u4e0a\u6240\u793a\uff0c\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u51e0\u6b65</p> <ol> <li>\u62f7\u8d1d\u539f\u51fd\u6570\u7684\u5934\u90e8\u4e24\u6761\u6c47\u7f16\u6307\u4ee4\uff0c\u5e76\u8986\u76d6\u6210\u8df3\u8f6c\u5230\u81ea\u5b9a\u4e49\u51fd\u6570\u7684\u6307\u4ee4</li> <li>\u6267\u884c\u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u518d\u6267\u884c\u524d\u9762\u88ab\u8986\u76d6\u7684\u4e24\u6761\u6307\u4ee4</li> <li>\u6267\u884c\u540e\u7eed\u6307\u4ee4</li> </ol> <p>\u4e0e PLT Hook \u65b9\u5f0f\u76f8\u6bd4\uff0cInline Hook \u66f4\u52a0\u5f3a\u5927\uff0c\u51e0\u4e4e\u53ef\u4ee5 Hook \u4efb\u4f55\u51fd\u6570\uff0c\u4f46\u7531\u4e8e\u5176\u5b9e\u73b0\u5341\u5206\u590d\u6742\uff0c\u9700\u8981\u76f4\u63a5\u4fee\u6539\u6c47\u7f16\u6307\u4ee4\uff0c\u56e0\u6b64\u4f1a\u6709\u5f88\u591a\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u4e0d\u592a\u7a33\u5b9a\uff0c\u56e0\u6b64\u5982\u679c\u60f3\u8981\u4f7f\u7528\u7684\u8bdd\u63a8\u8350\u76f4\u63a5\u4f7f\u7528\u76f8\u5e94\u7684\u5f00\u6e90\u5e93\uff0c\u6bd4\u5982\u5b57\u8282\u5f00\u6e90\u7684\uff1ahttps://github.com/bytedance/android-inline-hook</p>"},{"location":"foundation/tools/native-hook/#_2","title":"\u5c0f\u7ed3","text":"<p>\u603b\u5f97\u6765\u8bf4\uff0c\u4e24\u79cd Native Hook \u65b9\u5f0f\u5404\u6709\u4f18\u52a3\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4f7f\u7528</p> <ul> <li>PLT HooK\u7684\u4f18\u70b9\u5728\u4e8e\u7a33\u5b9a\uff0c\u7f3a\u70b9\u5219\u5728\u4e8e\u53ea\u80fd Hook \u5916\u90e8\u51fd\u6570\u7684\u8c03\u7528</li> <li>Inline Hook\u7684\u4f18\u70b9\u5728\u4e8e\u53ef\u4ee5 hook so \u5185\u90e8\u8c03\u7528\uff0c\u7f3a\u70b9\u5219\u5728\u4e8e\u4e0d\u591f\u7a33\u5b9a\uff0c\u5b58\u5728\u4e00\u5b9a\u7684\u517c\u5bb9\u95ee\u9898</li> </ul>"},{"location":"foundation/tools/native-hook/#native-hook_2","title":"Native Hook \u5b9e\u6218","text":"<p>\u63a5\u4e0b\u6765\u6211\u4eec\u901a\u8fc7 Native Hook \u6280\u672f\u6765\u5b9e\u73b0\u5bf9 Native \u5185\u5b58\u7533\u8bf7\u7684\u76d1\u63a7\uff0c\u4e3b\u8981\u652f\u6301\u4ee5\u4e0b\u529f\u80fd</p> <ol> <li>\u6dfb\u52a0\u5bf9 malloc, free \u51fd\u6570\u7684 hook\uff0c\u652f\u6301\u7edf\u8ba1 so \u7684\u5185\u5b58\u7533\u8bf7\u4e0e\u91ca\u653e\u60c5\u51b5</li> <li>\u5f53\u7533\u8bf7\u8d85\u5927\u5185\u5b58\u65f6\uff0c\u652f\u6301\u83b7\u53d6 native \u5806\u6808\u4ee5\u5b9a\u4f4d\u95ee\u9898</li> <li>\u76f4\u63a5\u83b7\u53d6\u7684 native \u5806\u6808\u662f\u4e2a 16 \u8fdb\u5236\u6570\u7ec4\uff0c\u65e0\u6cd5\u770b\u51fa\u6709\u6548\u4fe1\u606f\uff0c\u56e0\u6b64\u8fd8\u9700\u8981\u5c06\u89e3\u6790\u5806\u6808\u8fd8\u539f\u51fa so \u540d\u4e0e\u51fd\u6570\u4fe1\u606f</li> </ol>"},{"location":"foundation/tools/native-hook/#hook","title":"Hook \u51fd\u6570","text":"<p>\u6211\u4eec\u8fd9\u91cc\u901a\u8fc7 bhook \u5e93\u6765\u5b9e\u73b0\u5bf9 malloc, free \u51fd\u6570\u7684 hook\uff0c\u5982\u4e0b\u6240\u793a</p> <pre><code>void *malloc_proxy(size_t len) {\n    BYTEHOOK_STACK_SCOPE();\n    Dl_info callerInfo = {};\n    if (dladdr(__builtin_return_address(0), &amp;callerInfo)) {\n        // \u7edf\u8ba1\u5206\u914d\u7684\u5185\u5b58\n        onMalloc(callerInfo.dli_fname, len);\n    }\n    // ...\n    void *object = BYTEHOOK_CALL_PREV(malloc_proxy, len);\n    objMap[object] = len;\n    return object;\n}\n\nvoid free_proxy(void *__ptr) {\n    BYTEHOOK_STACK_SCOPE();\n    Dl_info callerInfo = {};\n    if (dladdr(__builtin_return_address(0), &amp;callerInfo)) {\n        auto len = objMap.find(__ptr);\n        // \u7edf\u8ba1 free\u7684\u5185\u5b58\n        onFree(callerInfo.dli_fname, len-&gt;second);\n    }\n    return BYTEHOOK_CALL_PREV(free_proxy, __ptr);\n}\n\nvoid hookMemory() {\n    bytehook_hook_all(nullptr, \"malloc\", (void *) malloc_proxy,\n                      nullptr,\n                      nullptr);\n    bytehook_hook_all(nullptr, \"free\", (void *) free_proxy,\n                      nullptr,\n                      nullptr);\n}\n</code></pre> <p>hook \u7684\u903b\u8f91\u975e\u5e38\u7b80\u5355\uff0c\u901a\u8fc7\u8c03\u7528<code>bytehook_hook_all</code>\uff0c\u6307\u5b9a\u8981<code>hook</code>\u7684\u65b9\u6cd5\u4e0e\u4ee3\u7406\u65b9\u6cd5\uff0c\u6240\u6709\u7684<code>malloc</code>\u65b9\u6cd5\u8c03\u7528\u90fd\u4f1a\u88ab\u4ee3\u7406\u5230<code>malloc_proxy</code>\u65b9\u6cd5\uff0c\u6240\u6709\u7684<code>free</code>\u65b9\u6cd5\u8c03\u7528\u4e5f\u4f1a\u88ab\u4ee3\u7406\u5230<code>free_proxy</code>\u65b9\u6cd5\u4e2d</p> <p>\u7136\u540e\u6211\u4eec\u5728\u4ee3\u7406\u65b9\u6cd5\u4e2d\u52a0\u5165 so \u5206\u914d\u4e0e\u56de\u6536\u5185\u5b58\u7684\u76d1\u63a7\uff0c\u5c31\u53ef\u4ee5\u7edf\u8ba1\u51fa\u4e00\u4e2a so \u5e93\u4e00\u5171\u7533\u8bf7\u4e86\u591a\u5c11\u5185\u5b58\uff0c\u91ca\u653e\u4e86\u591a\u5c11\u5185\u5b58\uff0c\u6253\u5370\u51fa\u6765\u7684\u65e5\u5fd7\u5982\u4e0b\u6240\u793a</p> <pre><code>So /apex/com.android.art/lib64/libart-compiler.so allocated 581632 bytes, freed 2883686 bytes\nSo /apex/com.android.art/lib64/libc++.so allocated 2779694 bytes, freed 2640 bytes\nSo /apex/com.android.art/lib64/liblzma.so allocated 9071256 bytes, freed 9071256 bytes\nSo /apex/com.android.i18n/lib64/libicuuc.so allocated 36428 bytes, freed 1164 bytes\nSo /apex/com.android.runtime/lib64/bionic/libc.so allocated 33360 bytes, freed 0 bytes\nSo /apex/com.android.vndk.v30/lib64/libc++.so allocated 10944 bytes, freed 0 bytes\nSo /data/app/~~6Mf4VQY4K16aFji1rZ4dkg==/com.zj.android.performance-XHR75TrkIVbXU9GfDYgZGg==/lib/arm64/libandroid-performance.so allocated 184549424 bytes, freed 184549424 bytes\nSo /data/app/~~6Mf4VQY4K16aFji1rZ4dkg==/com.zj.android.performance-XHR75TrkIVbXU9GfDYgZGg==/lib/arm64/libmemory-hook.so allocated 3310960 bytes, freed 2776978 bytes\nSo /system/lib64/libbinder.so allocated 129408 bytes, freed 462200 bytes\nSo /system/lib64/libc++.so allocated 14428072 bytes, freed 864 bytes\nSo /system/lib64/libhwui.so allocated 725687 bytes, freed 11980415 bytes\nSo /system/lib64/libutils.so allocated 1896281 bytes, freed 2132345 bytes\nSo /system/lib64/libz.so allocated 565024 bytes, freed 565024 bytes\n</code></pre>"},{"location":"foundation/tools/native-hook/#native","title":"\u83b7\u53d6 native \u5806\u6808","text":"<p>\u9664\u4e86\u7edf\u8ba1 So \u5185\u5b58\u4f7f\u7528\u60c5\u51b5\u4e4b\u5916\uff0c\u5728\u7533\u8bf7\u8d85\u5927\u5185\u5b58\u65f6\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u83b7\u53d6 native \u5806\u6808\u4ee5\u65b9\u4fbf\u5b9a\u4f4d\u95ee\u9898</p> <p>\u76ee\u524d\uff0c\u5728 Android \u4e2d\u83b7\u53d6 Native \u5806\u6808\u7684\u65b9\u6cd5\u57fa\u672c\u4e0a\u90fd\u662f\u901a\u8fc7 CFI \u6765\u5b9e\u73b0\u7684\u3002CFI \u4ee3\u8868 Call Frame Information\uff0c\u5373\u5e27\u8c03\u7528\u4fe1\u606f\u3002\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u5f53 Native \u51fd\u6570\u6267\u884c\u8fdb\u5165\u6808\u6307\u4ee4\u65f6\uff0c\u5b83\u4f1a\u5c06\u5bf9\u5e94\u6307\u4ee4\u7684\u4fe1\u606f\uff08\u5373 CFI \uff09\u5199\u5165 so \u6587\u4ef6\u4e2d\u7684 .eh_frame \u548c .eh_frame_hdr \u6bb5\u4e2d\uff0c\u8fd9\u4e24\u4e2a\u6bb5\u662f so \u6587\u4ef6\u4e2d\u7684\u6bb5\u4e4b\u4e00\u3002\u56e0\u6b64\uff0c\u8981\u83b7\u53d6 Native \u5806\u6808\uff0c\u53ea\u9700\u8981\u8bfb\u53d6\u8fd9\u4e24\u4e2a\u6bb5\u4e2d\u7684\u6570\u636e\u5373\u53ef\u3002</p> <p>\u5728 Android \u7cfb\u7edf\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 libunwind \u5e93\u6765\u76f4\u63a5\u83b7\u53d6 Native \u5806\u6808\u4fe1\u606f\uff0c\u5176\u5e95\u5c42\u539f\u7406\u5b9e\u9645\u4e0a\u4e5f\u662f\u901a\u8fc7\u8bfb\u53d6 CFI \u6765\u5b9e\u73b0\u7684</p> <pre><code>#include &lt;unwind.h&gt; //\u5f15\u5165 unwind \u5e93\n\nstruct backtrace_stack {\n    void **current;\n    void **end;\n};\n\nstatic _Unwind_Reason_Code unwind_callback(struct _Unwind_Context *context, void *data) {\n    auto *state = (struct backtrace_stack *) (data);\n    uintptr_t pc = _Unwind_GetIP(context);  // \u83b7\u53d6 pc \u503c\uff0c\u5373\u7edd\u5bf9\u5730\u5740\n    if (pc) {\n        if (state-&gt;current == state-&gt;end) {\n            return _URC_END_OF_STACK;\n        } else {\n            *state-&gt;current++ = (void *) (pc);\n        }\n    }\n    return _URC_NO_REASON;\n}\n\nstatic size_t fill_backtraces_buffer(void **buffer, int max) {\n    struct backtrace_stack stack = {buffer, buffer + max};\n    _Unwind_Backtrace(unwind_callback, &amp;stack);\n    return stack.current - buffer;\n}\n\nvoid *malloc_proxy(size_t len) {\n    // ...\n    if (len &gt; 80 * 1024 * 1024) {\n        // \u5f53\u7533\u8bf7\u5185\u5b58\u5927\u5c0f\u5927\u4e8e 80M \u65f6\u83b7\u53d6\u5806\u6808\n        int maxStackSize = 30;\n        void *buffer[maxStackSize];\n        int count = fill_backtraces_buffer(buffer, maxStackSize);\n        dumpBacktrace(buffer, count);\n    }\n    // ...\n    return object;\n}\n</code></pre> <p>\u5982\u4e0a\u6240\u793a\uff0c\u5f53\u7533\u8bf7\u5185\u5b58\u5927\u5c0f\u5927\u4e8e 80M \u65f6\uff0c\u6211\u4eec\u901a\u8fc7 unwind \u6765\u83b7\u53d6\u5806\u6808\uff0c\u5c06\u5c06\u83b7\u53d6\u7684\u5806\u6808\u653e\u5165 buffer \u6570\u7ec4\u4e2d</p> <p>\u4f46\u662f\u6211\u4eec\u83b7\u5f97\u7684 buffer \u6570\u7ec4\u53ea\u662f 16 \u8fdb\u5236\u7684\u5730\u5740\uff0c\u6839\u672c\u770b\u4e0d\u51fa\u6709\u6548\u4fe1\u606f\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p> <p>\u56e0\u6b64\u6211\u4eec\u8fd8\u8981\u8fdb\u884c\u4e0b\u4e00\u6b65\uff0c\u8fd8\u539f\u5806\u6808\u4fe1\u606f</p>"},{"location":"foundation/tools/native-hook/#_3","title":"\u8fd8\u539f\u5806\u6808\u4fe1\u606f","text":"<p>\u8981\u5c0616\u8fdb\u5236\u7684\u5730\u5740\u5806\u6808\u8fd8\u539f\u6210\u5e26\u6709\u6548\u4fe1\u606f\u7684\u5806\u6808\uff0c\u901a\u5e38\u9700\u8981\u5b8c\u6210\u4ee5\u4e0b\u4e09\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li>\u9996\u5148\u8981\u786e\u8ba4\u76f8\u5173\u7684 so \u6587\u4ef6\u540d\u79f0\uff1b</li> <li>\u63a5\u4e0b\u6765\u9700\u8981\u8ba1\u7b97\u76f8\u5e94\u7684\u504f\u79fb\u5730\u5740\uff1b</li> <li>\u6700\u540e\uff0c\u57fa\u4e8e\u5e26\u7b26\u53f7\u8868\uff08ELF\u6587\u4ef6\u4e2d\u7684\u4e00\u5f20\u8868\uff0c\u5b58\u653e\u4e86\u51fd\u6570\u3001\u65b9\u6cd5\u3001\u53d8\u91cf\u7b49\u540d\u79f0\u7b26\u53f7\u4fe1\u606f\uff09\u7684so\u6587\u4ef6\uff0c\u8fd8\u539f\u6307\u9488\u5bf9\u5e94\u7684\u51fd\u6570\u540d\u548c\u884c\u6570\u3002</li> </ol>"},{"location":"foundation/tools/native-hook/#so","title":"\u786e\u8ba4 so \u6587\u4ef6\u540d\u79f0","text":"<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>dladdr</code>\u51fd\u6570\u6765\u67e5\u8be2 so \u6587\u4ef6\u540d\uff0c\u51fd\u6570\u5b9a\u4e49\u5982\u4e0b</p> <pre><code>int  dladdr ( void * addr , Dl_info * info ) ;\n\ntypedef struct {\n    const char *dli_fname;   //\u5730\u5740\u5bf9\u5e94\u7684 so \u540d\n    void       *dli_fbase;   //\u5bf9\u5e94so\u5e93\u7684\u57fa\u5730\u5740\n    const char *dli_sname;   //\u5982\u679cso\u5e93\u6709\u7b26\u53f7\u8868\uff0c\u8fd9\u4f1a\u663e\u793a\u79bb\u5730\u5740\u6700\u8fd1\u7684\u51fd\u6570\u540d\n    void       *dli_saddr;   //\u7b26\u53f7\u8868\u4e2d\uff0c\u79bb\u5730\u5740\u6700\u8fd1\u7684\u51fd\u6570\u7684\u5730\u5740\n} Dl_info;\n</code></pre> <p>\u6211\u4eec\u5c06\u51fd\u6570\u5730\u5740\u4f20\u5165<code>dladdr</code>\u51fd\u6570\uff0c\u5c31\u53ef\u4ee5\u83b7\u53d6\u76f8\u5e94\u7684 so \u5e93\u540d\u79f0\u4e0e\u57fa\u5730\u5740\uff0c\u5982\u4e0b\u6240\u793a\uff1a </p> <pre><code>void dumpBacktrace(void **buffer, size_t count) {\n    for (int i = 0; i &lt; count; ++i) {\n        void *addr = buffer[i];\n        Dl_info info = {};\n        if (dladdr(addr, &amp;info)) {\n            LOG(\"# %d : %p : %s(%s)(%p)\", i, addr, info.dli_fname,\n                info.dli_sname, info.dli_saddr);\n        }\n    }\n}\n</code></pre> <p>\u901a\u8fc7<code>dladdr</code>\u51fd\u6570\u83b7\u53d6\u7684\u5806\u6808\u6253\u5370\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code># 0 : 0x767174309c : /data/app/~~6Mf4VQY4K16aFji1rZ4dkg==/com.zj.android.performance-XHR75TrkIVbXU9GfDYgZGg==/lib/arm64/libmemory-hook.so(0x2609c)((null))(0x0)\n# 1 : 0x7671742ec8 : /data/app/~~6Mf4VQY4K16aFji1rZ4dkg==/com.zj.android.performance-XHR75TrkIVbXU9GfDYgZGg==/lib/arm64/libmemory-hook.so(0x25ec8)(_Z12malloc_proxym)(0x7671742dbc)\n# 2 : 0x76712f23d8 : /data/app/~~6Mf4VQY4K16aFji1rZ4dkg==/com.zj.android.performance-XHR75TrkIVbXU9GfDYgZGg==/lib/arm64/libandroid-performance.so(0x203d8)(Java_com_zj_android_performance_jni_NativeLibTest_testMalloc)(0x76712f23a8)\n# 3 : 0x7691222248 : /apex/com.android.art/lib64/libart.so(0x222248)((null))(0x0)\n# 4 : 0x7691218968 : /apex/com.android.art/lib64/libart.so(0x218968)((null))(0x0)\n# 5 : 0x7691285ff4 : /apex/com.android.art/lib64/libart.so(0x285ff4)(_ZN3art9ArtMethod6InvokeEPNS_6ThreadEPjjPNS_6JValueEPKc)(0x7691285f30)\n# 6 : 0x76913ea3ec : /apex/com.android.art/lib64/libart.so(0x3ea3ec)(_ZN3art11interpreter34ArtInterpreterToCompiledCodeBridgeEPNS_6ThreadEPNS_9ArtMethodEPNS_11ShadowFrameEtPNS_6JValueE)(0x76913ea254)\n# 7 : 0x76913e4f88 : /apex/com.android.art/lib64/libart.so(0x3e4f88)(_ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE)(0x76913e4c48)\n# 8 : 0x769175fd10 : /apex/com.android.art/lib64/libart.so(0x75fd10)(MterpInvokeVirtual)(0x769175f878)\n# 9 : 0x7691203818 : /apex/com.android.art/lib64/libart.so(0x203818)((null))(0x0)\n# 10 : 0x769176b3f4 : /apex/com.android.art/lib64/libart.so(\n# 11 : 0x7691203998 : /apex/com.android.art/lib64/libart.so(0x203998)((null))(0x0)\n# 12 : 0x769176b3f4 : /apex/com.android.art/lib64/libart.so(\n# 13 : 0x7691203998 : /apex/com.android.art/lib64/libart.so(0x203998)((null))(0x0)\n# 14 : 0x76913dcd30 : /apex/com.android.art/lib64/libart.so(0x3dcd30)((null))(0x0)\n\nmalloc 92274688 byte success\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u5728\u6709\u7b26\u53f7\u8868\u7684\u60c5\u51b5\u4e0b\uff0cso \u540d\u4e0e\u51fd\u6570\u540d\u90fd\u6b63\u786e\u7684\u6253\u5370\u51fa\u6765\u4e86\uff0c\u800c\u5bf9\u4e8e libart\uff0c\u7531\u4e8e\u5df2\u7ecf\u79fb\u9664\u4e86\u7b26\u53f7\u8868\uff0c\u5219\u663e\u793a\u4e3a null \uff0c\u5730\u5740\u4e5f\u4e3a 0 </p>"},{"location":"foundation/tools/native-hook/#_4","title":"\u8ba1\u7b97\u51fd\u6570\u504f\u79fb\u5730\u5740","text":"<p>\u901a\u8fc7<code>dladdr</code>\u51fd\u6570\uff0c\u6211\u4eec\u5df2\u7ecf\u83b7\u53d6\u4e86\u5806\u6808\u7684 so \u540d\u4e0e\u51fd\u6570\u540d\uff0c\u90a3\u53ef\u4e0d\u53ef\u4ee5\u5177\u4f53\u5b9a\u4f4d\u5230\u5230\u5e95\u662f\u51fd\u6570\u7684\u54ea\u4e00\u884c\u51fa\u73b0\u4e86\u95ee\u9898\u5417\uff1f</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 NDK \u7684 addr2line \u5de5\u5177\uff0c\u6839\u636e\u51fd\u6570\u504f\u79fb\u5730\u5740\uff0c\u83b7\u53d6\u5730\u5740\u5bf9\u5e94\u7684\u51fd\u6570\u540d\u3001\u884c\u53f7\u7b49\u4fe1\u606f</p> <pre><code>addr2line -C -f -e xxx.so \u51fd\u6570\u504f\u79fb\u5730\u5740\n\n-C:\u5c06\u4f4e\u7ea7\u522b\u7684\u7b26\u53f7\u540d\u89e3\u7801\u4e3a\u7528\u6237\u7ea7\u522b\u7684\u540d\u5b57\u3002\n-e:\u6307\u5b9a\u9700\u8981\u8f6c\u6362\u5730\u5740\u7684\u53ef\u6267\u884c\u6587\u4ef6\u540d\n-f:\u5728\u663e\u793a\u6587\u4ef6\u540d\u3001\u884c\u53f7\u4fe1\u606f\u7684\u540c\u65f6\u663e\u793a\u51fd\u6570\u540d\u3002\n</code></pre> <p>\u6211\u4eec\u5728\u5806\u6808\u4e2d\u83b7\u53d6\u7684\u5730\u5740\u662f\u51fd\u6570\u7684\u7edd\u5bf9\u5730\u5740\uff0c\u8981\u83b7\u53d6\u504f\u79fb\u5730\u5740\u51cf\u53bb so \u7684\u57fa\u5730\u5740\u5c31\u53ef\u4ee5\u4e86</p> <p>\u504f\u79fb\u5730\u5740 = \u51fd\u6570\u7684\u7edd\u5bf9\u5730\u5740 - \u5e93\u6587\u4ef6\u7684\u57fa\u5730\u5740</p> <pre><code>void dumpBacktrace(void **buffer, size_t count) {\n    for (int i = 0; i &lt; count; ++i) {\n        if (dladdr(addr, &amp;info)) {\n            // \u8ba1\u7b97\u504f\u79fb\u5730\u5740\n            const uintptr_t address_relative = (uintptr_t) addr - (uintptr_t) info.dli_fbase;\n            LOG(\"# %d : %p : %s(%p)(%s)(%p)\", i, addr, info.dli_fname, address_relative,\n                info.dli_sname, info.dli_saddr);\n        }\n    }\n}\n</code></pre> <p>\u4ece\u4e0a\u9762\u7684\u65e5\u5fd7\u4e5f\u53ef\u4ee5\u770b\u51fa\uff0c\u6709\u95ee\u9898\u7684<code>Java_com_zj_android_performance_jni_NativeLibTest_testMalloc</code>\u51fd\u6570\u7684\u504f\u79fb\u5730\u5740\u662f<code>0x203d8</code></p>"},{"location":"foundation/tools/native-hook/#_5","title":"\u8fd8\u539f\u51fd\u6570\u540d\u53ca\u884c\u53f7","text":"<p>\u73b0\u5728\uff0c\u6211\u4eec\u5df2\u7ecf\u5f97\u77e5\u4e86\u51fd\u6570\u7684\u504f\u79fb\u5730\u5740\uff0c\u63a5\u4e0b\u6765\u5c31\u53ef\u4ee5\u4f7f\u7528 addr2line \u5de5\u5177\u6765\u83b7\u53d6\u884c\u53f7\u4e86\u3002\u5728 Android \u7684 NDK \u4e2d\u5df2\u7ecf\u63d0\u4f9b\u4e86\u8fd9\u4e2a\u5de5\u5177\uff0c\u4f4d\u4e8e /ndk/xxx/toolchains/aarch64-linux-android-4.9/prebuilt/darwin-x86_64/bin \u76ee\u5f55\u4e2d\u3002\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f M1 \u7535\u8111\uff0c\u53ef\u4ee5\u9009\u62e9 aarch64 \u76ee\u5f55\u3002</p> <pre><code>arm-linux-androideabi-addr2line   -C -f -e libandroid_performance.so  0x203d8\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u91cc\u7684 so \u5fc5\u987b\u662f\u5e26\u7b26\u53f7\u8868\u7684\uff0c\u56e0\u6b64\u9700\u8981\u5728\u7f16\u8bd1\u4ea7\u7269\u4e2d\u7684 native_libs \u76ee\u5f55\u53bb\u627e(\u6ce8\u610f\u4e0d\u662f stripped_native_libs \u76ee\u5f55)</p> <p>\u8fd0\u884c\u4ee5\u4e0a\u547d\u4ee4\u540e\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u5982\u4e0b</p> <p></p> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u5df2\u7ecf\u5b9a\u4f4d\u5230\u4e86\u5177\u4f53\u7684\u51fd\u6570\u540d\u4e0e\u884c\u53f7</p>"},{"location":"foundation/tools/native-hook/#_6","title":"\u603b\u7ed3","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86 Native Hook \u662f\u4ec0\u4e48\u4ee5\u53ca\u5e38\u89c1\u5b9e\u73b0\u65b9\u6848\uff0c\u540c\u65f6\u901a\u8fc7\u4e00\u4e2a\u76d1\u63a7 native \u5185\u5b58\u7684\u4f8b\u5b50\u8fdb\u884c\u4e86\u5b9e\u8df5</p> <p>\u5728 Android \u5e94\u7528\u6027\u80fd\u4f18\u5316\u4e2d\uff0cNative Hook \u6280\u672f\u5e7f\u6cdb\u5e94\u7528\u4e8e\u5185\u5b58\u4f18\u5316\u3001\u542f\u52a8\u4f18\u5316\u7b49\u65b9\u9762\uff0c\u5982 bitmap hook\u3001pthread hook\u3001GC \u6291\u5236\u7b49\u3002\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u5e0c\u671b\u5728\u76f8\u5173\u9886\u57df\u8fdb\u884c\u6280\u672f\u4f18\u5316\uff0c\u638c\u63e1 Native Hook \u6280\u672f\u5c06\u662f\u975e\u5e38\u6709\u5fc5\u8981\u7684\u3002</p>"},{"location":"foundation/tools/native-hook/#_7","title":"\u53c2\u8003\u8d44\u6599","text":"<p>\u672c\u6587\u4e3b\u8981\u662f\u5bf9Android \u6027\u80fd\u4f18\u5316\u5c0f\u518c\u76f8\u5173\u5185\u5bb9\u7684\u5b66\u4e60\u5b9e\u8df5\uff0c\u611f\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u70b9\u51fb\u67e5\u770b</p>"},{"location":"foundation/tools/native-hook/#_8","title":"\u6e90\u7801","text":"<p>\u672c\u6587\u6240\u6709\u6e90\u7801\u53ef\u89c1\uff1ahttps://github.com/RicardoJiang/android-performance</p>"},{"location":"intro/htc/","title":"\u5982\u4f55\u53c2\u4e0e","text":"<p>\u4e00\u4e2a\u4eba\u7684\u529b\u91cf\u7ec8\u7a76\u662f\u6709\u9650\u7684\uff0c\u5982\u679c\u4f60\u4e5f\u6709 Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u5185\u5bb9\u60f3\u8981\u5206\u4eab\uff0c\u6b22\u8fce\u52a0\u5165</p>"},{"location":"intro/htc/#_2","title":"\u8d21\u732e\u6d41\u7a0b","text":"<ol> <li>pull \u6216\u8005 fork \u6700\u65b0\u4ee3\u7801</li> <li>\u4fee\u6539\u4ee3\u7801\u6216\u8005\u6587\u6863</li> <li>\u63d0\u4ea4 pull request \u5230 main \u5206\u652f</li> <li>\u63d0\u4ea4\u5408\u5e76\u540e\u4f1a\u81ea\u52a8\u6784\u5efa\u5e76\u53d1\u5e03\u5230 https://android-performance-optimization.github.io/</li> </ol>"},{"location":"news/2023/news-2023-07/","title":"Android \u6027\u80fd\u4f18\u5316\u6280\u672f\u6708\u62a5 | 2023 \u5e74 7 \u6708","text":"<p>\u6bcf\u4e2a\u6708\u90fd\u4f1a\u6709\u4e00\u4e9b Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u53d1\u5e03\uff0c\u7136\u800c\uff0c\u788e\u7247\u5316\u9605\u8bfb\u4f7f\u5f97\u8fd9\u4e9b\u77e5\u8bc6\u96be\u4ee5\u5f62\u6210\u5b8c\u6574\u4f53\u7cfb\uff0c\u4e14\u5bb9\u6613\u88ab\u9057\u5fd8\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4f7f\u7528\u6280\u672f\u6708\u62a5\u7684\u5f62\u5f0f\uff0c\u603b\u7ed3\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u5185\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u3002</p> <p>\u6708\u62a5\u7684\u4e3b\u8981\u5185\u5bb9\u5305\u62ec\uff1a\u6574\u7406\u5c55\u793a\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u6240\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u9886\u57df\u7684\u6700\u65b0\u6280\u672f\u52a8\u6001\u3001\u7cbe\u9009\u535a\u5ba2\uff0c\u7cbe\u9009\u89c6\u9891\u7b49\u5185\u5bb9\u3002</p>"},{"location":"news/2023/news-2023-07/#_1","title":"\u6700\u65b0\u52a8\u6001","text":""},{"location":"news/2023/news-2023-07/#btrace-20","title":"btrace 2.0 \u53d1\u5e03","text":"<p>\u91cd\u8981\u5347\u7ea7\uff01btrace 2.0 \u6280\u672f\u539f\u7406\u5927\u63ed\u79d8</p> <p>btrace \u662f\u5b57\u8282\u5f00\u6e90\u7684\u9ad8\u6027\u80fd Trace \u5de5\u5177\uff0c\u6bd4\u8d77 systrace \u6216\u8005 profile \u8981\u597d\u7528\u5f88\u591a\uff0c\u76ee\u524d btrace 2.0 \u7248\u672c\u5df2\u53d1\u5e03\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u5347\u7ea7</p> <ul> <li>\u4f7f\u7528\u4f53\u9a8c\uff1a\u652f\u6301 Windows \u5566\uff01\u6b64\u5916\u5c06\u811a\u672c\u5b9e\u73b0\u4ece Python \u5207\u81f3 Java \u5e76\u53bb\u9664\u5404\u79cd\u6743\u9650\u8981\u6c42\uff0c\u56e0\u811a\u672c\u5de5\u5177\u53ef\u7528\u6027\u95ee\u9898\u5f15\u8d77\u7684\u7528\u6237\u4f7f\u7528\u6253\u65ad\u6b21\u6570\u51e0\u4e4e\u964d\u4e3a 0\uff0c\u540c\u65f6\u8fd8\u5c06 Trace \u4ea7\u7269\u5207\u81f3 PB \u534f\u8bae\uff0c\u4ea7\u7269\u4f53\u79ef\u51cf\u5c0f 70%\uff0c\u7f51\u9875\u6253\u5f00\u901f\u5ea6\u63d0\u5347 7 \u500d\uff01</li> <li>\u6027\u80fd\u4f53\u9a8c\uff1a\u901a\u8fc7\u5927\u89c4\u6a21\u6539\u9020\u65b9\u6cd5 Trace \u903b\u8f91\uff0c\u5c06 App \u65b9\u6cd5 Trace \u5e95\u5c42\u7ed3\u6784\u7531\u5b57\u7b26\u4e32\u5207\u6362\u4e3a\u6574\u6570\uff0c\u5b9e\u73b0\u5185\u5b58\u5360\u7528\u51cf\u5c11 80%\uff0c\u5b58\u50a8\u6539\u4e3a mmap \u65b9\u5f0f\u3001\u4f18\u5316\u65e0\u9501\u961f\u5217\u903b\u8f91\u3001\u63d0\u4f9b\u7cbe\u51c6\u63d2\u6869\u7b56\u7565\u7b49\uff0c\u767e\u4e07\u91cf\u7ea7\u65b9\u6cd5\u5168\u63d2\u6869\u4e0b\u6027\u80fd\u635f\u8017\u8fdb\u4e00\u6b65\u964d\u4f4e\u81f3 15%\uff01</li> <li>\u76d1\u63a7\u6570\u636e\uff1a\u65b0\u589e 4 \u9879\u6570\u636e\u76d1\u63a7\u80fd\u529b\uff0c\u91cd\u78c5\u63a8\u51fa\u6e32\u67d3\u8be6\u60c5\u91c7\u96c6\u80fd\u529b\uff01\u540c\u65f6\u8fd8\u65b0\u589e Binder\u3001\u7ebf\u7a0b\u542f\u52a8\u3001Wait/Notify/Park/Unpark \u7b49\u8be6\u60c5\u6570\u636e\uff01</li> </ul>"},{"location":"news/2023/news-2023-07/#_2","title":"\u7cbe\u9009\u535a\u5ba2","text":""},{"location":"news/2023/news-2023-07/#app","title":"\u767e\u5ea6App\u542f\u52a8\u6027\u80fd\u4f18\u5316\u5b9e\u8df5\u7bc7","text":"<p>\u767e\u5ea6App\u542f\u52a8\u6027\u80fd\u4f18\u5316\u5b9e\u8df5\u7bc7</p> <p>\u672c\u7cfb\u5217\u6587\u7ae0\u4ecb\u7ecd\u4e86\u767e\u5ea6 App \u542f\u52a8\u4f18\u5316\u7684\u7ecf\u9a8c\uff0c\u5c06\u4f4e\u7aef\u673a\u542f\u52a8\u6027\u80fd\u4f18\u5316\u62c6\u5206\u4e3a\u4e86\u89c2\u6d4b\u8bbe\u65bd\u3001\u57fa\u7840\u8bbe\u65bd\u548c\u4e1a\u52a1\u4f18\u5316 3 \u4e2a\u5b50\u65b9\u5411\uff0c\u603b\u5f97\u6765\u8bf4\uff0c\u662f\u4e00\u4efd\u4e0d\u53ef\u591a\u5f97\u7684\u7cfb\u7edf\u5316\u7684\u542f\u52a8\u4f18\u5316\u6307\u5357</p> <ul> <li>\u89c2\u6d4b\u8bbe\u65bd\uff1a\u5efa\u8bbe\u4f4e\u7aef\u673a\u6807\u51c6\uff0c\u5efa\u8bbe\u542f\u52a8\u6027\u80fd\u8861\u91cf\u6307\u6807\uff1b\u5efa\u8bbe\u7ebf\u4e0a\u3001\u7ebf\u4e0b\u9632\u52a3\u5316\u673a\u5236\uff0c\u5b9e\u73b0\u7ebf\u4e0b\u968f\u7248\u7684\u6027\u80fd\u95ee\u9898\u524d\u7f6e\u548c\u7ebf\u4e0a\u95ee\u9898\u7684\u81ea\u52a8\u5316\u5206\u6790\u4e0e\u5f52\u56e0\uff1b</li> <li>\u57fa\u7840\u8bbe\u65bd\uff1a\u4e09\u9a7e\u9a6c\u8f66\uff0c\u9ad8\u6548\u6027\u80fd\u5de5\u5177\u3001\u9ad8\u6027\u80fd\u7ec4\u4ef6\u3001\u8c03\u5ea6\u6846\u67b6\u3002\u9ad8\u6548\u6027\u80fd\u5de5\u5177\u4e3b\u8981\u5305\u62ecTrace/Hook/TimeProfiler\uff0c\u670d\u52a1\u4e8e\u5feb\u901f\u53d1\u73b0\u5e76\u81ea\u52a8\u5316\u6027\u80fd\u95ee\u9898\uff1b\u9ad8\u6027\u80fd\u7ec4\u4ef6\u4e3b\u8981\u4f18\u5316\u624b-\u767e\u57fa\u7840\u6027\u80fd\u5e76\u8d4b\u80fd\u4e1a\u52a1\uff0c\u7a81\u7834\u7cfb\u7edf\u7ea6\u675f\u4e0e\u74f6\u9888\uff0c\u5efa\u8bbe\u884c\u4e1a\u5185\u9886\u5148\u7684\u57fa\u7840\u8bbe\u65bd\uff1b\u8c03\u5ea6\u673a\u5236\u4f5c\u4e3a\u4f18\u5316\u7684\u6838\u5fc3\u624b\u6bb5\uff0c\u4e1a\u52a1\u521d\u59cb\u5316\u4efb\u52a1\u53ef\u901a\u8fc7\u63a5\u5165\u8c03\u5ea6\u5668\u5feb\u901f\u5b9e\u73b0\u6027\u80fd\u4f18\u5316\uff1b</li> <li>\u4e1a\u52a1\u4f18\u5316\uff1a\u6839\u636e\u5de5\u5177\u8f93\u51fa\u6027\u80fd\u95ee\u9898\uff0c\u534f\u540c\u4e1a\u52a1\u4f18\u5316\u4e0d\u89c4\u8303\u8017\u65f6\u3001\u4e0d\u5408\u7406\u201c\u9884\u201d\uff0c\u521d\u59cb\u5316\u4efb\u52a1\u901a\u8fc7\u63a5\u5165\u8c03\u5ea6\u6846\u67b6\u65b9\u5f0f\u8fbe\u5230\u4f18\u5316\u6548\u679c\u3002</li> </ul> <p></p>"},{"location":"news/2023/news-2023-07/#android-bazel-gradle","title":"Android \u89c6\u89d2\u8c08 Bazel \u4e0e Gradle \u6784\u5efa\u7cfb\u7edf","text":"<p>Android \u89c6\u89d2\u8c08 Bazel \u4e0e Gradle \u6784\u5efa\u7cfb\u7edf</p> <p>Bazel \u662f Google \u6240\u5f00\u6e90\u7684\u4e00\u6b3e\u6784\u5efa\u7cfb\u7edf\uff0c\u5176\u5728 Google \u5185\u90e8\u7528\u4e8e\u652f\u6301\u8d85\u5927\u89c4\u6a21\uff08TB \u7ea7\u522b\uff09\u7684\u4ed3\u5e93\u6784\u5efa\uff0c\u8fd9\u5145\u5206\u8bc1\u660e\u4e86 Bazel \u6784\u5efa\u7cfb\u7edf\u5353\u8d8a\u7684\u6027\u80fd\u8868\u73b0\u3002\u867d\u7136\u73b0\u9636\u6bb5\u5927\u591a\u6570\u4eba\u53ef\u80fd\u4e0d\u4f1a\u7528\u5230 Bazel\uff0c\u4f46\u4e5f\u53ef\u4ee5\u4e86\u89e3\u4e00\u4e0b\uff0c\u5f00\u9614\u89c6\u91ce\u3002</p> <p>\u672c\u6587\u9996\u5148\u4ece\u6784\u5efa\u7cfb\u7edf\u8bbe\u8ba1\u548c\u7406\u5ff5\u7684\u89d2\u5ea6\u5bf9 Bazel \u548c Gradle \u8fdb\u884c\u4e86\u6df1\u5ea6\u7684\u5bf9\u6bd4\uff0c\u7136\u540e\u56f4\u7ed5 Android \u6784\u5efa\u65b9\u9762\u7684\u8868\u73b0\u4ece\u6027\u80fd\u548c\u751f\u6001\u4e24\u4e2a\u89d2\u5ea6\u8fdb\u884c\u4e86\u9610\u8ff0\uff0c\u603b\u5f97\u6765\u8bf4</p> <ul> <li>\u6027\u80fd\u89d2\u5ea6\uff1a\u5bf9\u4e8e\u8d85\u5927\u578b\u6216\u8005\u5de8\u578b\u5de5\u7a0b\u6765\u8bb2\uff0cBazel \u56e0\u5176\u4f18\u79c0\u7684\u8bbe\u8ba1\u7406\u5ff5\u800c\u4e0a\u9650\u66f4\u9ad8\u3002\u4f46\u8fd9\u4e2a\u8d85\u5927\u578b\u5de5\u7a0b\u7684\u5b9a\u4e49\uff0c\u636e\u4f5c\u8005\u6d4b\u7b97\uff0c\u5927\u6982\u91cf\u7ea7\u662f\u5728\u6296\u97f3 Android \u73b0\u6709\u89c4\u6a21\u7684 2-3 \u500d\u5de6\u53f3\uff0c\u800c\u73b0\u6709\u89c4\u6a21\u7684\u9879\u76ee Gradle \u7ecf\u8fc7\u4f18\u5316\u7684\u8868\u73b0\u4f9d\u7136\u6709\u7740\u8f83\u5927\u7684\u627f\u8f7d\u7a7a\u95f4\u3002</li> <li>\u751f\u6001\u89d2\u5ea6\uff1aBazel \u5728\u5f53\u524d Android \u6784\u5efa\u9886\u57df\u4e0d\u591f\u5b8c\u5584\u4e14\u7f3a\u4e4f\u5b98\u65b9\u652f\u6301\uff0c\u6bd4\u5982 AGP\uff0cKGP \u7b49\u5b98\u65b9\u63d2\u4ef6\u5bf9\u5e94\u5230 Bazel \u53ea\u80fd\u4f9d\u8d56\u4e8e\u793e\u533a\u7ef4\u62a4\uff0c\u957f\u671f\u6765\u770b\uff0c\u662f\u5426\u80fd\u8ba9\u751f\u6001\u6210\u957f\u8d77\u6765\u8fd8\u6709\u8f83\u5927\u7684\u4e0d\u786e\u5b9a\u6027\u3002</li> </ul>"},{"location":"news/2023/news-2023-07/#android-cpu","title":"Android CPU \u6027\u80fd\u4f18\u5316\u7684\u4e00\u4e9b\u601d\u8def","text":"<p>\u624b\u628a\u624b\u6559\u5973\u670b\u53cb\u505a Android CPU\u6027\u80fd\u4f18\u5316</p> <p>\u60f3\u8981\u505a\u597d\u6027\u80fd\u4f18\u5316\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u8981\u6c42\u6211\u4eec\u5728\u64cd\u4f5c\u7cfb\u7edf\u5c42\u548c\u5e94\u7528\u5c42\u5bf9\u5982\u4f55\u5229\u7528 CPU \u548c\u5b58\u50a8\u5668\u8fdb\u884c\u4f18\u5316\uff0c\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86 CPU \u6027\u80fd\u4f18\u5316\u7684\u4e00\u4e9b\u601d\u8def</p> <ul> <li>\u51cf\u5c11\u7a0b\u5e8f\u6307\u4ee4\u6570</li> <li>\u5229\u7528 CPU \u95f2\u7f6e\u65f6\u95f4</li> <li>\u51cf\u5c11 CPU \u7b49\u5f85</li> <li>\u964d\u4f4e\u65f6\u949f\u5468\u671f\u65f6\u95f4</li> <li>\u964d\u4f4e\u6bcf\u6761\u6307\u4ee4\u7684\u5e73\u5747\u65f6\u95f4\u5468\u671f</li> <li>\u63d0\u5347\u4efb\u52a1\u8c03\u5ea6\u4f18\u5148\u7ea7</li> </ul>"},{"location":"news/2023/news-2023-07/#android","title":"Android \u5185\u5b58\u4f18\u5316\u4e4b\u6781\u81f4\u6e05\u7406","text":"<p>Android \u5185\u5b58\u4f18\u5316\u4e4b\u6781\u81f4\u6e05\u7406</p> <p>\u5c0f\u7c73\u5c0f\u7ec4\u4ef6\u5ba1\u6838\u8981\u6c42\u8fdb\u7a0b\u5185\u5b58\u5360\u7528 PSS \u5fc5\u987b\u5c0f\u4e8e 35M\uff0c\u672c\u6587\u4ecb\u7ecd\u4e86\u4f5c\u8005\u5c06\u5c0f\u7ec4\u4ef6\u8fdb\u7a0b PSS \u5360\u7528\u4ece 135M \u964d\u4f4e\u5230 35M \u7684\u8fc7\u7a0b\uff0c\u5982\u679c\u4f60\u4e5f\u5728\u505a\u5c0f\u7ec4\u4ef6\u7684\u5185\u5b58\u4f18\u5316\uff0c\u672c\u6587\u5e94\u8be5\u5bf9\u4f60\u5f88\u6709\u5e2e\u52a9</p>"},{"location":"news/2023/news-2023-07/#remake","title":"\u5185\u5b58\u8ba4\u77e5ReMake","text":"<p>\u5185\u5b58\u8ba4\u77e5ReMake</p> <p>\u672c\u6587\u56fe\u6587\u5e76\u8302\u5730\u4ecb\u7ecd\u4e86 Android \u5185\u5b58\u76f8\u5173\u7684\u4e00\u4e9b\u77e5\u8bc6\u70b9\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9</p> <ul> <li>\u624b\u673a\u786c\u4ef6\u4e0a\u7684\u5185\u5b58</li> <li>\u4e3a\u4ec0\u4e48\u5185\u5b58\u4e0d\u80fd\u7206\u6ee1</li> <li>app \u8fd0\u884c\u65f6\u5185\u5b58\u7ed3\u6784</li> <li>\u7269\u7406\u5185\u5b58\u548c\u865a\u62df\u5185\u5b58</li> <li>\u5176\u5b83\u7684\u4e00\u4e9b\u5e38\u89c1\u95ee\u9898\u5206\u4eab</li> </ul>"},{"location":"news/2023/news-2023-07/#android_1","title":"Android \u5185\u5b58\u5360\u7528\u5e38\u7528\u5206\u6790\u65b9\u6cd5","text":"<p>Android \u5185\u5b58\u4f18\u5316\u65b9\u6cd5</p> <p>\u505a\u4f18\u5316\u76f8\u5173\u7684\u5de5\u4f5c\uff0c\u6700\u91cd\u8981\u7684\u5c31\u662f\u8981\u6709\u53ef\u4ee5\u91cf\u5316\u7684\u6307\u6807\u3002\u6240\u4ee5\u6211\u4eec\u5148\u8981\u77e5\u9053\u54ea\u4e9b\u53ef\u4ee5\u8861\u91cf\u7cfb\u7edf\u5360\u7528\u5185\u5b58\u7684\u65b9\u6cd5\u548c\u5de5\u5177\u3002\u672c\u6587\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u67e5\u770b\u5185\u5b58\u5360\u7528\u60c5\u51b5\u7684\u65b9\u6cd5\u548c\u5de5\u5177\uff1a</p> <ul> <li>dumpsys meminfo</li> <li>procrank</li> <li>/proc/pid/maps</li> <li>/proc/pid/smaps</li> <li>/proc/meminfo</li> <li>PageMap</li> <li>ion</li> <li>Kernel used</li> <li>Kernel reserved</li> <li>MAT</li> <li>malloc_debug</li> </ul>"},{"location":"news/2023/news-2023-07/#_3","title":"\u7cbe\u9009\u89c6\u9891","text":""},{"location":"news/2023/news-2023-07/#android-art","title":"\u7406\u89e3 Android ART \u865a\u62df\u673a","text":"<p>\u793e\u533a\u8bf4\uff5c\u7406\u89e3 Android ART \u865a\u62df\u673a</p> <p>\u672c\u89c6\u9891\u4e3b\u8981\u5206\u4eab\u4e86 ART \u865a\u62df\u673a\u5806\u7684\u7ec4\u6210\u548c\u521b\u5efa\uff0c\u5bf9\u8c61\u7533\u8bf7\u548c\u91ca\u653e\u6d41\u7a0b\uff0c\u4ee5\u53ca\u5806\u5185\u5b58\u4f18\u5316\u7b49\u5185\u5bb9\uff1a</p> <p></p>"},{"location":"news/2023/news-2023-07/#_4","title":"\u793e\u533a\u6d3b\u52a8","text":""},{"location":"news/2023/news-2023-07/#_5","title":"\u8d27\u62c9\u62c9\u79fb\u52a8\u6280\u672f\u5f00\u653e\u65e5","text":"<p>\u8d27\u62c9\u62c9\u79fb\u52a8\u6280\u672f\u5f00\u653e\u65e5\uff0c\u5206\u4eab\u5185\u5bb9\u5982\u4e0b\uff1a</p> <ul> <li>Android \u529f\u8017\u76d1\u63a7\u4e0e\u4f18\u5316\u5b9e\u8df5</li> <li>\u8d27\u62c9\u62c9\u4e91\u771f\u673a\u5e73\u53f0\u7684\u6f14\u8fdb\u4e0e\u5b9e\u8df5</li> <li>Android \u51fa\u6d77\u5e94\u7528\u5f00\u53d1\u90a3\u4e9b\u4e8b</li> <li>APP \u52a8\u6001\u5316\u8def\u7531\u8bbe\u8ba1\u4e0e\u5b9e\u8df5</li> <li>\u8d27\u62c9\u62c9 iOS \u7aef\u8def\u7531\u6846\u67b6\u5f00\u6e90</li> <li>AI\u6280\u672f\u5728\u53cd\u9988\u4e2d\u7684\u63a2\u7d22\u4e0e\u5e94\u7528</li> <li>\u672a\u6765\u5df2\u6765\uff01\u63a2\u7d22\u79fb\u52a8\u7aef\u65b0\u7684\u673a\u9047\u4e0e\u6311\u6218</li> </ul>"},{"location":"news/2023/news-2023-08/","title":"Android \u6027\u80fd\u4f18\u5316\u6280\u672f\u6708\u62a5 | 2023 \u5e74 8 \u6708","text":"<p>\u6bcf\u4e2a\u6708\u90fd\u4f1a\u6709\u4e00\u4e9b Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u53d1\u5e03\uff0c\u7136\u800c\uff0c\u788e\u7247\u5316\u9605\u8bfb\u4f7f\u5f97\u8fd9\u4e9b\u77e5\u8bc6\u96be\u4ee5\u5f62\u6210\u5b8c\u6574\u4f53\u7cfb\uff0c\u4e14\u5bb9\u6613\u88ab\u9057\u5fd8\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4f7f\u7528\u6280\u672f\u6708\u62a5\u7684\u5f62\u5f0f\uff0c\u603b\u7ed3\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u5185\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u3002</p> <p>\u6708\u62a5\u7684\u4e3b\u8981\u5185\u5bb9\u5305\u62ec\uff1a\u6574\u7406\u5c55\u793a\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u6240\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u9886\u57df\u7684\u6700\u65b0\u6280\u672f\u52a8\u6001\u3001\u7cbe\u9009\u535a\u5ba2\uff0c\u7cbe\u9009\u89c6\u9891\u7b49\u5185\u5bb9\u3002</p>"},{"location":"news/2023/news-2023-08/#_1","title":"\u7cbe\u9009\u535a\u5ba2","text":""},{"location":"news/2023/news-2023-08/#android","title":"\u5e38\u89c1\u7684 Android \u5361\u987f\u76d1\u63a7\u65b9\u6848","text":"<p>\u5e38\u89c1\u7684Android\u5e94\u7528\u5361\u987f\u76d1\u63a7\u65b9\u6848\u539f\u7406\u548c\u5bf9\u6bd4</p> <p>\u60f3\u8981\u76d1\u63a7\u5361\u987f\u6216\u8005\u662f\u76d1\u6d4b App \u7684\u6d41\u7545\u5ea6\uff0c\u5c31\u5fc5\u987b\u901a\u8fc7\u4ee3\u7801\u624b\u6bb5\u6765\u83b7\u53d6FPS\u6216\u8005\u6bcf\u5e27\u8017\u65f6\uff0c\u5e76\u8f6c\u5316\u6210\u53ef\u4ee5\u8861\u91cf\u5e94\u7528\u5361\u987f\u7a0b\u5ea6\u7684\u6307\u6807\u3002\u672c\u6587\u4ecb\u7ecd\u4e86\u4e09\u79cd\u5e38\u89c1\u7684 Android \u5361\u987f\u76d1\u63a7\u65b9\u6848\uff1a</p> <ul> <li>Choreographer \u7684 FrameCallback \u56de\u8c03</li> <li>Choreographer + Looper Hook \u65b9\u6848</li> <li>\u5b98\u65b9 JankStats \u65b9\u6848</li> </ul>"},{"location":"news/2023/news-2023-08/#_2","title":"\u5361\u987f\u7387\u5982\u4f55\u8ba1\u7b97","text":"<p>Jank\u5361\u987f\u53castutter\u5361\u987f\u7387\u8bf4\u660e</p> <p>\u5e27\u7387\u9ad8\uff0c\u672a\u5fc5\u6d41\u7545\uff0c\u56e0\u6b64\u4e0d\u80fd\u7b80\u5355\u7528\u5e27\u7387\u6765\u8868\u793a\u5361\u987f\u7a0b\u5ea6\u3002PerfDog \u63d0\u51fa\u4e86\u4e00\u79cd\u65b0\u7684\u5361\u987f\u8ba1\u7b97\u601d\u8def\uff1a</p> <p>\u8003\u8651\u89c6\u89c9\u60ef\u6027\uff0c\u5047\u8bbe\u4ee5\u524d\u4e09\u5e27\u7684\u5e73\u5747\u5e27\u8017\u65f6\u4e3a\u53c2\u8003\uff0c\u4f5c\u4e3avsync\u65f6\u95f4\u95f4\u9694\uff0c\u8fde\u7eed\u4e24\u6b21vsync\u6ca1\u6709\u65b0\u6e32\u67d3\u753b\u9762\u5237\u65b0\uff0c\u5219\u8ba4\u4e3a\u662f\u4e00\u6b21\u6f5c\u5728\u5361\u987f\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0b\u4e00\u5e27\u8017\u65f6\u5927\u4e8e\u524d\u4e09\u5e27\u5e73\u5747\u5e27\u8017\u65f62\u500d\uff0c\u5219\u8ba4\u4e3a\u4e00\u6b21\u6f5c\u5728\u5361\u987f\u3002\u540c\u65f6\u5355\u5e27\u8017\u65f6\u6ee1\u8db3\u5927\u4e8e\u4e24\u500d\u7535\u5f71\u5e27\u8017\u65f61000ms/24*2 (\u7531\u4e8e\u4eba\u773c\u4f4e\u4e8e24\u5e27\u624d\u80fd\u8fa8\u522b\u753b\u9762\u4e0d\u8fde\u7eed\u6027)\uff0c\u5219\u8ba4\u4e3a\u662f\u4e00\u6b21\u771f\u6b63\u5361\u987f\u3002\u540c\u65f6\u82e5\u5355\u5e27\u8017\u65f6\u5927\u4e8e3\u500d\u7535\u5f71\u5e27\u8017\u65f6\uff0c\u5219\u8ba4\u4e3a\u662f\u4e00\u6b21\u4e25\u91cd\u5361\u987f\u3002</p> <p>\u57fa\u4e8ePerfDog Jank\u7684\u57fa\u7840\u4e0a\uff0c\u4e00\u6b21Jank\u5361\u987f\uff0c\u4f1a\u6709\u4e00\u6b21\u5361\u987f\u65f6\u95f4Jank time\u3002\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u6709\u591a\u6b21Jank\u5361\u987f\uff0c\u5373\u6709\u591a\u6b21\u5361\u987f\u65f6\u95f4Jank time\u3002\u6d4b\u8bd5\u603b\u65f6\u957f\u4e3aTime\u3002\u56e0\u6b64\u53ef\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8ba1\u7b97\u51fa\u5361\u987f\u7387\uff1a</p> <p>Stutter(\u5361\u987f\u7387) = \u2211Jank time / Time</p>"},{"location":"news/2023/news-2023-08/#android-dlopen","title":"Android dlopen \u65b9\u6cd5\u7684\u4f7f\u7528\u9650\u5236\u53ca\u89e3\u51b3\u65b9\u6848","text":"<p>\u4e00\u4e9b\u5927\u578b App \u5728\u505a\u6027\u80fd\u76d1\u6d4b\u548c\u4f18\u5316\u65f6\uff0c\u7ecf\u5e38\u9700\u8981\u4f7f\u7528 dl \u51fd\u6570\u6253\u5f00\u7cfb\u7edf\u52a8\u6001\u5e93\u3002\u4f46\u4eceAndroid 7.0\u5f00\u59cb\uff0cAndroid\u7cfb\u7edf\u5f00\u59cb\u963b\u6b62App\u4e2d\u4f7f\u7528dlopen(), dlsym()\u7b49\u51fd\u6570\u6253\u5f00\u7cfb\u7edf\u52a8\u6001\u5e93\u3002\u5177\u4f53\u539f\u7406\u662f\u662f\u901a\u8fc7\u68c0\u67e5\u6267\u884cdlopen\u51fd\u6570\u65f6\u7684LR\u5bc4\u5b58\u5668\u503c\u662f\u4e0d\u662f\u7cfb\u7edf\u5e93\u7684\u5730\u5740\u3002</p> <p>\u5982\u4f55\u7a81\u7834\u5b98\u65b9\u7684\u9650\u5236\u5462\uff1f\u4e0b\u9762\u7684\u6587\u7ae0\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u7ed5\u8fc7 Android 7.0 \u4e4b\u540e\u7cfb\u7edf\u5e93\u8bbf\u95ee\u9650\u5236\u7684\u65b9\u6cd5:</p> <ul> <li>Android dlopen \u65b9\u6cd5\u7684\u4f7f\u7528\u9650\u5236\u53ca\u89e3\u51b3\u65b9\u6848</li> <li>\u53e6\u4e00\u79cd\u7ed5\u8fc7Android\u7cfb\u7edf\u5e93\u8bbf\u95ee\u9650\u5236\u7684\u65b9\u6cd5</li> </ul>"},{"location":"news/2023/news-2023-08/#app-application","title":"\u5f97\u7269App\u5b89\u5353\u51b7\u542f\u52a8\u4f18\u5316-Application\u7bc7","text":"<p>\u672c\u6587\u4ecb\u7ecd\u4e86\u5f97\u7269 APP \u7684\u51b7\u542f\u52a8\u4f18\u5316\u5b9e\u8df5\uff0c\u5f97\u7269\u6280\u672f\u56e2\u961f\u901a\u8fc7\u5bf9\u542f\u52a8\u9636\u6bb5\u7684\u7cfb\u7edf\u8d44\u6e90\u505a\u7edf\u4e00\u7ba1\u63a7\uff0c\u6309\u9700\u5206\u914d\u548c\u9519\u5cf0\u52a0\u8f7d\u7b49\u624b\u6bb5\u5c06\u5f97\u7269App\u7684\u7ebf\u4e0a\u542f\u52a8\u6307\u6807\u964d\u4f4e10%\uff0c\u7ebf\u4e0b\u6307\u6807\u964d\u4f4e34%\uff0c\u5e76\u5728\u540c\u7c7b\u578b\u7684\u7535\u5546App\u4e2d\u63d0\u5347\u81f3Top3\u3002\u672c\u6587\u5177\u4f53\u4ecb\u7ecd\u4e86\u5982\u4e0b\u7684\u4f18\u5316\u624b\u6bb5</p> <ul> <li>WebView \u4f18\u5316</li> <li>ARouter \u4f18\u5316</li> <li>\u9501\u4f18\u5316</li> <li>\u542f\u52a8\u6846\u67b6\u4f18\u5316</li> <li>\u9996\u9875\u4f18\u5316</li> </ul>"},{"location":"news/2023/news-2023-08/#perfetto","title":"\u4f7f\u7528Perfetto\u5b9a\u4f4d\u5e94\u7528\u542f\u52a8\u6027\u80fd\u7684\u74f6\u9888","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5982\u4f55\u4f7f\u7528 Perfetto \u5b9a\u4f4d\u542f\u52a8\u6027\u80fd\u95ee\u9898\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9</p> <ul> <li>TTID \u4e0e TTFD \u7684\u533a\u522b</li> <li>\u5982\u4f55\u4f7f\u7528 FFmpeg \u62c6\u5e27\u7cbe\u51c6\u83b7\u53d6\u542f\u52a8\u8017\u65f6</li> <li>Perfetto \u662f Android 10 \u5f15\u5165\u7684\u7cfb\u7edf\u7ea7\u8ddf\u8e2a\u5de5\u5177\uff0c\u652f\u6301 Android\uff0cLinux \u548c Chrome\uff0c\u7528\u4e8e\u53d6\u4ee3 Systrace</li> <li>\u5982\u4f55\u4f7f\u7528 Perfetto \u5206\u6790\u542f\u52a8\u6027\u80fd</li> <li>Perfetto \u5206\u6790\u5b9e\u8df5</li> </ul>"},{"location":"news/2023/news-2023-08/#_3","title":"\u7cbe\u9009\u89c6\u9891","text":""},{"location":"news/2023/news-2023-08/#android_1","title":"\u8ba4\u8bc6 Android \u52a8\u6001\u94fe\u63a5","text":"<p>\u793e\u533a\u8bf4\uff5c\u8ba4\u8bc6 Android \u52a8\u6001\u94fe\u63a5</p> <p>\u672c\u89c6\u9891\u4e3b\u8981\u4ecb\u7ecd\u4e86\u4ec0\u4e48\u662f\u52a8\u6001\u94fe\u63a5\uff0c\u52a8\u6001\u94fe\u63a5\u5b9e\u73b0\u7ec6\u8282\uff0c\u52a8\u6001\u94fe\u63a5\u5b9e\u4f8b\u5206\u6790\u7b49\u5185\u5bb9\u3002\u52a8\u6001\u94fe\u63a5\u662f Android \u6027\u80fd\u4f18\u5316\u4e2d\u5e38\u7528\u7684 Native Hook \u6280\u672f\u7684\u57fa\u7840\uff0c\u56e0\u6b64\u8fd8\u662f\u6709\u5fc5\u8981\u4e86\u89e3\u4e00\u4e0b\u7684</p> <p></p>"},{"location":"news/2023/news-2023-09/","title":"Android \u6027\u80fd\u4f18\u5316\u6280\u672f\u6708\u62a5 | 2023 \u5e74 9 \u6708","text":"<p>\u6bcf\u4e2a\u6708\u90fd\u4f1a\u6709\u4e00\u4e9b Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u53d1\u5e03\uff0c\u7136\u800c\uff0c\u788e\u7247\u5316\u9605\u8bfb\u4f7f\u5f97\u8fd9\u4e9b\u77e5\u8bc6\u96be\u4ee5\u5f62\u6210\u5b8c\u6574\u4f53\u7cfb\uff0c\u4e14\u5bb9\u6613\u88ab\u9057\u5fd8\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4f7f\u7528\u6280\u672f\u6708\u62a5\u7684\u5f62\u5f0f\uff0c\u603b\u7ed3\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u5185\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u3002</p> <p>\u6708\u62a5\u7684\u4e3b\u8981\u5185\u5bb9\u5305\u62ec\uff1a\u6574\u7406\u5c55\u793a\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u6240\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u9886\u57df\u7684\u6700\u65b0\u6280\u672f\u52a8\u6001\u3001\u7cbe\u9009\u535a\u5ba2\uff0c\u7cbe\u9009\u89c6\u9891\u7b49\u5185\u5bb9\u3002</p>"},{"location":"news/2023/news-2023-09/#_1","title":"\u7cbe\u9009\u535a\u5ba2","text":""},{"location":"news/2023/news-2023-09/#android","title":"Android \u589e\u91cf\u6784\u5efa\u7684\u79d1\u6280\u4e0e\u72e0\u6d3b","text":"<p>\u5bf9\u4e8e Android \u5e94\u7528\uff0c\u5c24\u5176\u662f\u5927\u578b\u5e94\u7528\u800c\u8a00\uff0c\u6784\u5efa\u8017\u65f6\u662f\u4ee4\u4eba\u5934\u75bc\u7684\u4e00\u4ef6\u4e8b\u3002\u52a8\u8f84\u51e0\u5206\u949f\u751a\u81f3\u5341\u51e0\u5206\u949f\u7684\u65f6\u95f4\u66f4\u662f\u4ee4\u5927\u90e8\u5206\u5f00\u53d1\u4eba\u5458\u82e6\u4e0d\u582a\u8a00\u3002\u800c\u5728\u5b9e\u9645\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u9762\u5bf9\u6700\u591a\u7684\u5c31\u662f\u672c\u5730\u7684\u589e\u91cf\u7f16\u8bd1\uff0c\u867d\u7136\u5b98\u65b9\u5bf9\u589e\u91cf\u7f16\u8bd1\u6709\u505a\u5904\u7406\uff0c\u4f46\u5728\u5177\u4f53\u9879\u76ee\uff0c\u5c24\u5176\u662f\u4e2d\u5927\u578b\u9879\u76ee\u4e2d\uff0c\u6548\u679c\u5176\u5b9e\u90fd\u4e0d\u592a\u7406\u60f3\u3002</p> <p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u7f51\u6613\u4e91\u97f3\u4e50\u5728\u589e\u91cf\u6784\u5efa\u65b9\u9762\u505a\u7684\u4e00\u7cfb\u5217\u4f18\u5316\uff1a</p> <ul> <li>\u901a\u8fc7\u5f00\u5173\u914d\u7f6e\u5728\u6d4b\u8bd5\u5305\u4e0d\u6253\u5f00\u4e0d\u5fc5\u8981\u7684 Transform</li> <li>Trasnform \u589e\u91cf\u6784\u5efa\u652f\u6301\u4e0e Hook</li> <li>dexMerge \u6d41\u7a0b\u5206\u6790</li> <li>dexMerge \u5982\u4f55\u652f\u6301\u589e\u91cf</li> </ul> <p>\u901a\u8fc7\u4ee5\u4e0a\u4f18\u5316\u7f51\u6613\u4e91\u97f3\u4e50\u539f\u6765\u8017\u65f6\u51e0\u5341\u79d2\u5230\u51e0\u5206\u949f\u7684 Transform \u57fa\u672c\u90fd\u80fd\u88ab\u538b\u7f29\u52301-2 s\u4ee5\u5185\uff0cdexMerge \u8017\u65f6\u7531 35-40 s \u7f29\u51cf\u52303 s \u5de6\u53f3\u3002</p> <p>\u53ef\u4ee5\u770b\u51fa\u5bf9\u4e8e\u5927\u578b\u5e94\u7528\u8fdb\u884c\uff0cTransform \u4f18\u5316\u4e0e dexMerge \u4f18\u5316\u8fd8\u662f\u6709\u5f88\u5927\u6536\u76ca\u7684\u3002</p>"},{"location":"news/2023/news-2023-09/#layout","title":"\u5305\u4f53\u79ef\uff1aLayout \u4e8c\u8fdb\u5236\u6587\u4ef6\u88c1\u526a\u4f18\u5316\uff5c\u5f97\u7269\u6280\u672f","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5f97\u7269\u901a\u8fc7 XML \u4e8c\u8fdb\u5236\u6587\u4ef6\u88c1\u526a\u5b9e\u73b0\u5305\u4f53\u79ef\u4f18\u5316\u7684\u4e00\u4e9b\u7ecf\u9a8c\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ol> <li>XML \u89e3\u6790\u6d41\u7a0b</li> <li>XML \u4e8c\u8fdb\u5236\u6587\u4ef6\u683c\u5f0f</li> <li>XML \u89e3\u6790\u8fc7\u7a0b\u4e3e\u4f8b</li> <li>\u88c1\u526a\u4f18\u5316\u5b9e\u73b0</li> </ol> <p>\u5f97\u7269\u901a\u8fc7\u88c1\u526a Layout \u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u5c5e\u6027\u5b57\u7b26\u4e32\u540d\u79f0\uff0c\u53ef\u4ee5\u83b7\u5f97 2.2 M \u5de6\u53f3\u7684\u4f18\u5316\u6548\u679c\uff0c\u5bf9\u4e8e\u5927\u578b APP \u6765\u8bf4\u6709\u4e00\u5b9a\u6536\u76ca\u3002</p>"},{"location":"news/2023/news-2023-09/#_2","title":"\u5d29\u6e83\u6355\u83b7\u8bbe\u8ba1\u5b9e\u8df5\u65b9\u6848","text":"<p>Android \u7684\u7a33\u5b9a\u6027\u662f Android \u6027\u80fd\u7684\u4e00\u4e2a\u91cd\u8981\u6307\u6807\uff0c\u5b83\u4e5f\u662fApp\u8d28\u91cf\u6784\u5efa\u4f53\u7cfb\u4e2d\u6700\u57fa\u672c\u548c\u6700\u5173\u952e\u7684\u4e00\u73af\u3002</p> <p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5982\u4f55\u4ece 0 \u5230 1 \u8bbe\u8ba1\u4e00\u4e2a\u5d29\u6e83\u6355\u83b7\u7684\u6846\u67b6\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li>\u6574\u4f53\u4ecb\u7ecd\u6982\u8ff0</li> <li>APP \u5d29\u6e83\u6d41\u7a0b</li> <li>\u5d29\u6e83\u5904\u7406\u5165\u53e3</li> <li>\u5d29\u6e83\u76d1\u542c\u601d\u8def</li> </ul> <p></p> <p>\u603b\u5f97\u6765\u8bf4\uff0c\u975e\u5e38\u5168\u9762\u7684\u4e00\u4efd Android \u5d29\u6e83\u6355\u83b7\u8bbe\u8ba1\u5b9e\u8df5\u65b9\u6848\uff0c\u540c\u65f6\u4e5f\u6709\u5f00\u6e90\u4ee3\u7801\uff0c\u975e\u5e38\u9002\u5408\u7528\u4e8e\u5b66\u4e60\u5d29\u6e83\u6355\u83b7\u7684\u539f\u7406</p>"},{"location":"news/2023/news-2023-09/#android_1","title":"\u9ad8\u5fb7Android\u9ad8\u6027\u80fd\u9ad8\u7a33\u5b9a\u6027\u4ee3\u7801\u8986\u76d6\u7387\u6280\u672f\u5b9e\u8df5","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u9ad8\u5fb7\u5730\u56fe\u5982\u4f55\u5b9e\u73b0\u751f\u4ea7\u73af\u5883\u4ee3\u7801\u8986\u76d6\u7387\u7684\u9ad8\u6027\u80fd\u91c7\u96c6\uff0c\u901a\u8fc7\u7ebf\u4e0a\u4ee3\u7801\u8986\u76d6\u7387\u6570\u636e\u7684\u91c7\u96c6\uff0c\u4e0d\u4ec5\u80fd\u4e3a\u6211\u4eec\u4e0b\u7ebf\u65e7\u4ee3\u7801\u63d0\u4f9b\u4f9d\u636e\uff0c\u540c\u65f6\u8fd8\u80fd\u53cd\u6620\u67d0\u4e2a\u529f\u80fd\u7684\u4f7f\u7528\u70ed\u5ea6\uff0c\u53ef\u4ee5\u4e3a\u8d44\u6e90\u5206\u914d\u3001\u8c03\u5ea6\u51b3\u7b56\u7b49\u63d0\u4f9b\u4f9d\u636e\uff0c\u662f\u8f6f\u4ef6\u5f00\u53d1\u4e2d\u4e00\u9879\u4e0d\u53ef\u6216\u7f3a\u7684\u91cd\u8981\u5de5\u5177\u3002</p> <p>\u76f8\u6bd4\u4e1a\u754c\u5176\u5b83\u65b9\u6848\uff0c\u9ad8\u5fb7\u65b9\u6848\u5c11Hack\uff0c\u5b9e\u73b0\u7b80\u5355\uff0c\u517c\u987e\u7a33\u5b9a\u6027\u548c\u6027\u80fd\uff0c\u540c\u65f6\u4e5f\u4e0d\u4f1a\u4fb5\u5165\u6253\u5305\u6d41\u7a0b\uff0c\u5e26\u6765\u5305\u4f53\u79ef\u5f71\u54cd\u7b49\uff0c\u503c\u5f97\u501f\u9274\u3002</p> <p></p>"},{"location":"news/2023/news-2023-09/#retrofit","title":"\u5982\u4f55\u9b54\u6539 Retrofit","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\uff0c\u7f51\u6613\u4e91\u97f3\u4e50\u51b7\u542f\u52a8\u4f18\u5316\u7684\u8fc7\u7a0b\u4e2d\u53d1\u73b0\uff0cRetrofit loadServiceMethod \u65b9\u6cd5\u5185\u90e8\u52a0\u4e86\u9501\uff0c\u9501+\u4e0d\u53ef\u907f\u514d\u7684\u8017\u65f6\uff0c\u5f15\u53d1\u7684\u5fc5\u7136\u7ed3\u679c\u662f\uff1a\u5728\u51b7\u542f\u52a8\u8fc7\u7a0b\u4e2d\uff0c\u901a\u8fc7 Retrofit \u53d1\u8d77\u7684\u7f51\u7edc\u8bf7\u6c42\uff0c\u4f1a\u90e8\u5206\u52a3\u5316\u6210\u4e00\u4e2a\u4e32\u884c\u8fc7\u7a0b\u3002</p> <p>\u53d1\u73b0\u4e86\u95ee\u9898\u4e4b\u540e\uff0c\u7f51\u6613\u4e91\u97f3\u4e50\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u4f18\u5316 Retrofit \u7684\u6027\u80fd\uff1a</p> <ul> <li>\u4f7f\u7528 Moshi \u539f\u751f\u5c31\u652f\u6301\u7684 @JsonClass \u6ce8\u89e3</li> <li>\u4fee\u6539 Retrofit \u52a0\u9501\u903b\u8f91</li> <li>Retrofit \u652f\u6301\u7f13\u5b58\u548c\u9884\u52a0\u8f7d\u7684\u5c01\u88c5</li> </ul>"},{"location":"news/2023/news-2023-09/#_3","title":"\u7cbe\u9009\u89c6\u9891","text":""},{"location":"news/2023/news-2023-09/#benchmark-app","title":"\u4f7f\u7528 benchmark \u4f18\u5316 app \u6027\u80fd","text":"<p>Improving app performance with benchmarking (Google I/O'19)</p> <p>\u8981\u505a\u6027\u80fd\u4f18\u5316\uff0cbenchmark \u975e\u5e38\u91cd\u8981\uff0c\u672c\u89c6\u9891\u4ecb\u7ecd\u4e86 Jetpack benchmark \u5e93\u7684\u4f7f\u7528\u4ee5\u53ca\u5176\u80cc\u540e\u7684\u539f\u7406</p> <p></p>"},{"location":"news/2023/news-2023-10/","title":"Android \u6027\u80fd\u4f18\u5316\u6280\u672f\u6708\u62a5 | 2023 \u5e74 10 \u6708","text":"<p>\u6bcf\u4e2a\u6708\u90fd\u4f1a\u6709\u4e00\u4e9b Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u53d1\u5e03\uff0c\u7136\u800c\uff0c\u788e\u7247\u5316\u9605\u8bfb\u4f7f\u5f97\u8fd9\u4e9b\u77e5\u8bc6\u96be\u4ee5\u5f62\u6210\u5b8c\u6574\u4f53\u7cfb\uff0c\u4e14\u5bb9\u6613\u88ab\u9057\u5fd8\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4f7f\u7528\u6280\u672f\u6708\u62a5\u7684\u5f62\u5f0f\uff0c\u603b\u7ed3\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u5185\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u3002</p> <p>\u6708\u62a5\u7684\u4e3b\u8981\u5185\u5bb9\u5305\u62ec\uff1a\u6574\u7406\u5c55\u793a\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u6240\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u9886\u57df\u7684\u6700\u65b0\u6280\u672f\u52a8\u6001\u3001\u7cbe\u9009\u535a\u5ba2\uff0c\u7cbe\u9009\u89c6\u9891\u7b49\u5185\u5bb9\u3002</p>"},{"location":"news/2023/news-2023-10/#_1","title":"\u6700\u65b0\u52a8\u6001","text":""},{"location":"news/2023/news-2023-10/#android","title":"\u300aAndroid \u5e94\u7528\u7a33\u5b9a\u6027\u5256\u6790\u4e0e\u4f18\u5316\u300b\u5c0f\u518c\u53d1\u5e03","text":"<p> Android \u5e94\u7528\u7a33\u5b9a\u6027\u5256\u6790\u4e0e\u4f18\u5316</p> <p>\u6027\u80fd\u4f18\u5316\u662f Android \u5f00\u53d1\u5fc5\u5907\u6280\u80fd\u4e4b\u4e00\uff0c\u672c\u5c0f\u518c\u9488\u5bf9\u6027\u80fd\u4f18\u5316\u4e2d\u201c\u7a33\u5b9a\u6027\u201d\u8fd9\u4e00\u4e3b\u9898\uff0c\u4ece\u57fa\u7840\u4f18\u5316\u6280\u672f\u51fa\u53d1\uff0c\u5230\u5b9e\u9645\u4f18\u5316\u6848\u4f8b\u5b9e\u8df5\u3002\u5171\u6db5\u76d6 4 \u4e2a\u5e38\u89c1\u7684\u3001\u4e5f\u662f\u6700\u53ef\u80fd\u5bfc\u81f4\u7591\u96be\u6742\u75c7\u4ea7\u751f\u7684\u4e3b\u9898\uff0c\u5305\u62ec APM \u4e2d\u7a33\u5b9a\u6027\u5efa\u8bbe\u3001\u5185\u5b58\u76f8\u5173\u7a33\u5b9a\u6027\u3001\u7ebf\u7a0b\u7a33\u5b9a\u6027\u4ee5\u53ca Binder \u7a33\u5b9a\u6027\u7b49\u9010\u4e00\u5b66\u4e60\u4f18\u5316&amp;\u76d1\u63a7\u6280\u5de7\u3002</p> <p></p>"},{"location":"news/2023/news-2023-10/#_2","title":"\u7cbe\u9009\u535a\u5ba2","text":""},{"location":"news/2023/news-2023-10/#android_1","title":"\u4e00\u79cdAndroid\u5df2\u52a0\u8f7d\u7c7b\u68c0\u6d4b\u65b9\u6cd5","text":"<p>\u4e0a\u4e2a\u6708\u4ecb\u7ecd\u4e86\u9ad8\u5fb7\u590d\u5236ClassTable\u6307\u9488\uff0c\u901a\u8fc7\u6807\u51c6 API \u95f4\u63a5\u8bbf\u95ee\u7c7b\u52a0\u8f7d\u72b6\u6001\uff0c\u4ee5\u7edf\u8ba1\u7ebf\u4e0a\u4ee3\u7801\u8986\u76d6\u7387\u7684\u65b9\u6848\uff0c\u4f46\u662f\u4e0a\u6587\u4e2d\u5e76\u6ca1\u6709\u8be6\u7ec6\u4ecb\u7ecd\u8be5\u65b9\u6848\u5177\u4f53\u662f\u5982\u4f55\u5b9e\u73b0\u7684\u3002</p> <p>\u672c\u6587\u4ecb\u7ecd\u4e00\u79cd\u9002\u7528\u4e8e\u7ebf\u4e0a\u7684\uff0c\u4f4e\u4fb5\u5165\u7684\uff0c\u65e0\u5305\u4f53\u5f71\u54cd\u7684 ,\u9ad8\u6548\u5168\u9762\u7a33\u5b9a\u7684\u5df2\u52a0\u8f7d\u7c7b\u68c0\u6d4b\u65b9\u6cd5\uff0c\u4ec5\u9700plt hook\u4e00\u5904\u65b9\u6cd5\u8c03\u7528\u3002\u5177\u4f53\u65b9\u5f0f\u662f\u901a\u8fc7\u5bf9<code>android::base::LogMessage::stream()</code>\u65b9\u6cd5 \u8fdb\u884c hook \uff0c\u62e6\u622a\u52a0\u8f7d\u7c7b\u7684\u65e5\u5fd7\u6253\u5370\u5e76\u4e0a\u62a5\u3002</p>"},{"location":"news/2023/news-2023-10/#android_2","title":"\u5f97\u7269 Android \u5305\u4f53\u79ef\u8d44\u6e90\u4f18\u5316\u5b9e\u8df5","text":"<p>\u5f97\u7269\u5305\u4f53\u79ef\u8d44\u6e90\u4f18\u5316\u5b9e\u8df5\u7684\u4e00\u4e9b\u65b9\u6848\uff0c\u5177\u4f53\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li>\u56fe\u7247\u538b\u7f29\uff1a\u4f7f\u7528 cwebp \u5bf9\u56fe\u7247\u8fdb\u884cwebp\u8f6c\u6362\uff0c\u4f7f\u7528 guetzli \u5bf9JPEG\u8fdb\u884c\u538b\u7f29\uff0c\u4f7f\u7528pngquant\u5bf9PNG \u8fdb\u884c\u538b\u7f29\uff0c\u4f7f\u7528 gifsicle \u5bf9gif\u8fdb\u884c\u538b\u7f29\u3002</li> <li>\u8d44\u6e90\u53bb\u91cd\uff1a\u627e\u5230\u8d44\u6e90\u6587\u4ef6\u76ee\u5f55\u4e0b\u4e0d\u540c\u540d\u7684\u76f8\u540c\u7684\u6587\u4ef6\uff0c\u7136\u540e\u5220\u9664\u6389\u91cd\u590d\u7684\u6587\u4ef6\uff0c\u6700\u540e\u5230 arsc \u4e2d\u4fee\u6539\u8bb0\u5f55\uff0c\u5c06\u5220\u9664\u7684\u6587\u4ef6\u7d22\u5f15\u540d\u79f0\u8fdb\u884c\u66ff\u6362\u3002</li> <li>\u8d44\u6e90\u6df7\u6dc6\uff1a\u7528\u957f\u8def\u5f84\u66ff\u6362\u77ed\u8def\u5f84\uff0c\u4e00\u6765\u51cf\u5c0f\u6587\u4ef6\u540d\u5927\u5c0f\uff0c\u4e8c\u6765\u964d\u4f4earsc\u4e2d\u5e38\u91cf\u6c60\u4e2d\u4e8c\u8fdb\u5236\u6587\u4ef6\u5927\u5c0f\u3002</li> <li>\u8d44\u6e90\u4e0b\u53d1\uff1a\u8d44\u6e90\u4e0b\u53d1\u7684\u4e3b\u4f53\u4e3b\u8981\u662f so \u6587\u4ef6\u548c\u56fe\u7247\uff0c\u80fd\u4e0b\u53d1\u7684\u8d44\u6e90\u5c31\u4e0b\u53d1\u662f\u5305\u4f53\u4f18\u5316\u7684\u4e00\u5927\u5229\u5668\u3002</li> <li>\u65e0\u7528\u8d44\u6e90\u79fb\u9664\uff1a\u53ca\u65f6\u6e05\u7406\u65e0\u7528\u8d44\u6e90\uff0c\u9632\u6b62\u65e0\u7528\u8d44\u6e90\u7684\u6301\u7eed\u6076\u5316\u3002</li> </ul> <p>\u76f8\u6bd4\u4e8e\u5176\u4ed6\u5305\u4f53\u79ef\u4f18\u5316\u65b9\u6848\uff0c\u8d44\u6e90\u4f18\u5316\u5f80\u5f80\u5b9e\u73b0\u8d77\u6765\u66f4\u52a0\u7b80\u5355\uff0c\u6548\u679c\u4e5f\u66f4\u52a0\u660e\u663e\uff0c\u8fd8\u662f\u975e\u5e38\u5b9e\u7528\u7684\u3002</p>"},{"location":"news/2023/news-2023-10/#android_3","title":"Android \u5e94\u7528\u5185\u5b58\u5360\u7528\u5206\u6790","text":"<p>Android Memory(\u4e8c) -- \u5e94\u7528\u5185\u5b58\u5360\u7528\u5206\u6790</p> <p>\u5927\u5bb6\u6700\u719f\u6089\u7684\u5185\u5b58\u5206\u6790\u5de5\u5177\u5e94\u8be5\u662f Android Studio \u81ea\u5e26\u7684 Memory Profiler\uff0cProfiler \u867d\u7136\u4f7f\u7528\u8d77\u6765\u65b9\u4fbf\uff0c\u4f46\u662f\u529f\u80fd\u4e0a\u5e76\u4e0d\u5168\u9762\uff0c\u65e0\u6cd5\u4e86\u89e3\u8be6\u7ec6\u7684\u5185\u5b58\u5360\u7528\u60c5\u51b5\uff0c\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u4e09\u79cd\u5185\u5b58\u5360\u7528\u5206\u6790\u65b9\u6cd5\uff0c\u5206\u522b\u662f\uff1a</p> <ul> <li>\u901a\u8fc7Android Studio\u81ea\u5e26\u7684Memory Profiler\u67e5\u770b\u5185\u5b58</li> <li>\u901a\u8fc7 adb shell dumpsys meminfo ${PROCESS_NAME} \u67e5\u770b\u5185\u5b58\u60c5\u51b5</li> <li>\u901a\u8fc7adb shell run-as com.transsion.phoenix \"cat /proc/${PID}/smaps \u67e5\u770bSmap\u6570\u636e</li> </ul>"},{"location":"news/2023/news-2023-10/#appmmkv","title":"\u5ea6\u52a0\u526a\u8f91App\u7684MMKV\u5e94\u7528\u4f18\u5316\u5b9e\u8df5","text":"<p>\u79fb\u52a8\u7aef\u5f00\u53d1\u4e2d\uff0cIO \u5bc6\u96c6\u95ee\u9898\u5728\u5f88\u591a\u65f6\u5019\u6ca1\u6709\u5f97\u5230\u5145\u8db3\u7684\u91cd\u89c6\u548c\u89e3\u51b3\uff0c\u8d38\u7136\u7684\u628a IO \u5bfc\u81f4\u7684\u5361\u987f\u653e\u5230\u5f02\u6b65\u7ebf\u7a0b\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u771f\u6b63\u7684\u95ee\u9898\u88ab\u63a9\u76d6\uff0c\u524d\u4eba\u6316\u5751\u540e\u4eba\u8e29\u3002\u5176\u5b9e\u9996\u5148\u8981\u60f3\u7684\u662f\uff0c\u6570\u636e\u5b58\u50a8\u65b9\u5f0f\u662f\u5426\u5408\u7406\uff0c\u6570\u636e\u7684\u4f7f\u7528\u65b9\u5f0f\u662f\u5426\u5408\u7406\u3002</p> <p>\u672c\u6587\u4ecb\u7ecd\u4e86\u5ea6\u52a0\u526a\u8f91 App \u4e2d\u5bf9\u6587\u4ef6\u78c1\u76d8 IO \u8fd9\u90e8\u5206\u7684\u4f7f\u7528\u548c\u4f18\u5316\uff0c\u4e3b\u8981\u6d89\u53ca MMKV \u7684\u5e94\u7528\u3002MMKV \u57fa\u4e8e mmap \u5185\u5b58\u6620\u5c04\u6280\u672f\uff0c\u907f\u514d\u4e86\u6570\u636e\u5728\u7528\u6237\u6001\u8ddf\u5185\u6838\u6001\u5927\u91cf\u7684\u62f7\u8d1d\u5207\u6362,\u6781\u5927\u7684\u63d0\u5347\u4e86\u8bfb\u5199\u6548\u7387\u3002\u7136\u800c\uff0cMMKV\u4f9d\u7136\u6709\u4e0d\u5c11IO\u64cd\u4f5c\u53d1\u751f\u5728\u4e3b\u7ebf\u7a0b\uff0c\u4e14\u78c1\u76d8\u76f8\u5bf9\u662f\u4f4e\u901f\u8bbe\u5907\uff0c\u540c\u6b65\u65f6\u6548\u7387\u8f83\u4f4e\uff0c\u6709\u65f6\u96be\u514d\u4f1a\u51fa\u73b0\u6027\u80fd\u95ee\u9898\u3002</p> <p>\u672c\u6587\u4ecb\u7ecd\u4e86\u5728\u4f7f\u7528 MMKV \u8fc7\u7a0b\u4e2d\u53d1\u73b0\u7684\u5982\u4e0b\u95ee\u9898\uff0c\u5e76\u63d0\u4f9b\u4e86\u4e00\u4e9b\u89e3\u51b3\u65b9\u6848</p> <ul> <li>\u5b58\u50a8\u8f83\u957f\u7684\u5b57\u7b26\u4e32\uff0c\u4f8b\u5982\u4e91\u63a7json \u65f6\uff0c\u7531\u4e8e MMKV\u7684\u91cd\u5199\u548c\u6269\u5bb9\u673a\u5236\u6709\u65f6\u4f1a\u5bfc\u81f4\u5361\u987f</li> <li>\u65b0 MMKV_ID \u7b2c\u4e00\u6b21\u5b58\u50a8key-value\u6570\u636e\u65f6\uff0c \u4f1a\u8bef\u89e6\u4e00\u6b21 msync \u7cfb\u7edf\u8c03\u7528\uff0c\u5bfc\u81f4\u5361\u987f</li> <li>MMKV \u521d\u59cb\u5316\u65f6\u53ef\u80fd\u5bfc\u81f4\u5361\u987f</li> <li>MMKV \u5b58\u50a8\u5927\u6570\u636e\u5bfc\u81f4\u5bfc\u81f4\u5360\u7528\u589e\u591a\uff0c\u5bb9\u6613 OOM</li> </ul>"},{"location":"news/2023/news-2023-10/#android_4","title":"\u804a\u804aAndroid\u7ebf\u7a0b\u4f18\u5316\u8fd9\u4ef6\u4e8b","text":"<p>\u5728\u65e5\u5e38\u5f00\u53d1APP\u7684\u8fc7\u7a0b\u4e2d\uff0c\u96be\u514d\u9700\u8981\u4f7f\u7528\u7b2c\u4e8c\u65b9\u5e93\u548c\u7b2c\u4e09\u65b9\u5e93\u6765\u5e2e\u52a9\u5f00\u53d1\u8005\u5feb\u901f\u5b9e\u73b0\u4e00\u4e9b\u529f\u80fd\uff0c\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u3002\u4f46\u662f\uff0c\u8fd9\u4e9b\u5e93\u4e5f\u53ef\u80fd\u4f1a\u7ed9\u7ebf\u7a0b\u5e26\u6765\u4e00\u5b9a\u7684\u538b\u529b\uff0c\u4e3b\u8981\u8868\u73b0\u5728\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a</p> <ul> <li>\u7ebf\u7a0b\u6570\u91cf\u589e\u591a\uff1a\u4e00\u4e9b\u5e93\u53ef\u80fd\u4f1a\u5728\u540e\u53f0\u542f\u52a8\u4e00\u4e9b\u7ebf\u7a0b\u6765\u6267\u884c\u4efb\u52a1\uff0c\u8fd9\u6837\u4f1a\u589e\u52a0\u7cfb\u7edf\u4e2d\u7ebf\u7a0b\u7684\u6570\u91cf\uff0c\u4ece\u800c\u5bfc\u81f4\u7cfb\u7edf\u8d44\u6e90\u7684\u6d6a\u8d39\u3002</li> <li>\u7ebf\u7a0b\u7ade\u4e89\uff1a\u4e00\u4e9b\u5e93\u53ef\u80fd\u4f1a\u5728\u540c\u4e00\u65f6\u95f4\u542f\u52a8\u591a\u4e2a\u7ebf\u7a0b\u6765\u6267\u884c\u4efb\u52a1\uff0c\u8fd9\u6837\u4f1a\u5bfc\u81f4\u7ebf\u7a0b\u4e4b\u95f4\u7684\u7ade\u4e89\uff0c\u4ece\u800c\u5f71\u54cd\u7a0b\u5e8f\u7684\u6267\u884c\u6548\u7387\u3002</li> <li>\u7ebf\u7a0b\u963b\u585e\uff1a\u4e00\u4e9b\u5e93\u53ef\u80fd\u4f1a\u5728\u6267\u884c\u4efb\u52a1\u65f6\u963b\u585e\u4e3b\u7ebf\u7a0b\uff0c\u4ece\u800c\u5bfc\u81f4\u7a0b\u5e8f\u7684\u5361\u987f\u548c\u54cd\u5e94\u901f\u5ea6\u53d8\u6162\u3002</li> </ul> <p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u8d27\u62c9\u62c9\u4e3a\u4e86\u89e3\u51b3\u4f7f\u7528\u7b2c\u4e8c\u65b9\u5e93\u548c\u7b2c\u4e09\u65b9\u5e93\u4ee3\u7406\u7684\u7ebf\u7a0b\u95ee\u9898\uff0c\u5728\u7ebf\u7a0b\u4f18\u5316\u65b9\u9762\u505a\u7684\u4e00\u4e9b\u5de5\u4f5c</p> <ol> <li>\u7ebf\u7a0b\u68c0\u6d4b\uff0c\u8bc4\u4f30\u4f18\u5316\u7a7a\u95f4\u3002</li> <li>\u7ebf\u7a0b\u7edf\u8ba1\uff0c\u6536\u96c6\u4f18\u5316\u8303\u56f4\u3002</li> <li>\u7ebf\u7a0b\u548c\u7ebf\u7a0b\u6c60\u4f18\u5316\uff0c\u7ebf\u7a0b\u6570\u6536\u655b\u3002</li> <li>\u7ebf\u7a0b\u6808\u88c1\u526a\uff0c\u51cf\u5c11\u7ebf\u7a0b\u5185\u5b58\u3002</li> </ol> <p>\u672c\u6587\u4ece\u68c0\u6d4b\u5230\u7edf\u8ba1\u5230\u4f18\u5316\uff0c\u4e00\u6b65\u4e00\u6b65\uff0c\u6df1\u5165\u6d45\u51fa Android \u7ebf\u7a0b\u4f18\u5316\uff0c\u975e\u5e38\u5177\u6709\u5b9e\u64cd\u6027\u3002</p>"},{"location":"news/2023/news-2023-10/#_3","title":"\u4e00\u6587\u5e26\u4f60\u8d70\u8fdb\u5f97\u7269\u89c6\u9891","text":"<p>\u968f\u7740\u79fb\u52a8\u7f51\u7edc\u7684\u666e\u53ca\u548c\u4e92\u8054\u7f51\u5e26\u5bbd\u7684\u4e0d\u65ad\u63d0\u5347\uff0c\u89c6\u9891\u89c2\u770b\u5df2\u6210\u4e3a\u4e92\u8054\u7f51\u7684\u4e3b\u8981\u5e94\u7528\u4e4b\u4e00\uff0c\u9762\u5bf9\u6d77\u91cf\u7684\u89c6\u9891\u5185\u5bb9\uff0c\u7528\u6237\u4eec\u63d0\u51fa\u4e86\u8d8a\u6765\u8d8a\u9ad8\u7684\u8981\u6c42\uff0c\u5982\u9700\u8981\u66f4\u5feb\u7684\u52a0\u8f7d\u901f\u5ea6\u3001\u66f4\u6d41\u7545\u7684\u64ad\u653e\u4f53\u9a8c\u3001\u66f4\u9ad8\u7684\u753b\u8d28\u548c\u5206\u8fa8\u7387\u7b49\uff0c\u8fd9\u4e9b\u8981\u6c42\u53c8\u4ea7\u751f\u4e86\u4e00\u7cfb\u5217\u6311\u6218\u3002</p> <p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5f97\u7269\u89c6\u9891\u5728\u89c6\u9891\u4f53\u9a8c\u4f18\u5316\u65b9\u9762\u505a\u7684\u4e00\u7cfb\u7edf\u5de5\u4f5c\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li>\u5efa\u7acb\u6027\u80fd\u57fa\u7ebf\uff1a\u9488\u5bf9\u89c6\u9891\u64ad\u653e\u573a\u666f\u5efa\u7acb FPS\uff0cCPU\uff0c\u5185\u5b58\uff0c\u53d1\u70ed\uff0c\u5931\u8d25\u7387\u7b49\u6570\u636e\u57fa\u7ebf\u5e76\u6301\u7eed\u4f18\u5316</li> <li>\u89c6\u9891\u8d28\u91cf\u63d0\u5347\uff1a\u89c6\u9891\u8f6c\u7801\u79c1\u6709\u5316\u90e8\u7f72\uff0c\u9ad8\u5e27\u7387\u89c6\u9891\u652f\u6301\u7b49</li> <li>\u89c6\u9891\u5361\u987f\u7387\u4f18\u5316\uff1a\u89c6\u9891\u64ad\u653e\u5668\u7f13\u5b58\u5e93\u4f18\u5316\uff0c\u89c6\u9891\u9884\u52a0\u8f7d\uff0c\u9884\u7f13\u5b58\u7b56\u7565\u4f18\u5316\u7b49</li> <li>\u89c6\u9891\u79d2\u5f00\u4f18\u5316\uff1a\u89c6\u9891\u64ad\u653e\u5668\u5f02\u6b65\u521d\u59cb\u5316\uff0c\u64ad\u653e\u5668\u5168\u5c40\u5b9e\u4f8b\u5316\uff0c\u9996\u5e27\u4f18\u5316\uff0cseek \u540e\u9996\u5e27\u4f18\u5316\u7b49</li> </ul>"},{"location":"news/2023/news-2023-11/","title":"Android \u6027\u80fd\u4f18\u5316\u6280\u672f\u6708\u62a5 | 2023 \u5e74 11 \u6708","text":"<p>\u6bcf\u4e2a\u6708\u90fd\u4f1a\u6709\u4e00\u4e9b Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u53d1\u5e03\uff0c\u7136\u800c\uff0c\u788e\u7247\u5316\u9605\u8bfb\u4f7f\u5f97\u8fd9\u4e9b\u77e5\u8bc6\u96be\u4ee5\u5f62\u6210\u5b8c\u6574\u4f53\u7cfb\uff0c\u4e14\u5bb9\u6613\u88ab\u9057\u5fd8\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4f7f\u7528\u6280\u672f\u6708\u62a5\u7684\u5f62\u5f0f\uff0c\u603b\u7ed3\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u5185\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u3002</p> <p>\u6708\u62a5\u7684\u4e3b\u8981\u5185\u5bb9\u5305\u62ec\uff1a\u6574\u7406\u5c55\u793a\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u6240\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u9886\u57df\u7684\u6700\u65b0\u6280\u672f\u52a8\u6001\u3001\u7cbe\u9009\u535a\u5ba2\uff0c\u7cbe\u9009\u89c6\u9891\u7b49\u5185\u5bb9\u3002</p>"},{"location":"news/2023/news-2023-11/#_1","title":"\u7cbe\u9009\u535a\u5ba2","text":""},{"location":"news/2023/news-2023-11/#_2","title":"\u6296\u97f3\u6d88\u606f\u8c03\u5ea6\u4f18\u5316\u542f\u52a8\u901f\u5ea6\u65b9\u6848\u5b9e\u8df5","text":"<p>\u6296\u97f3\u7684\u542f\u52a8\u4f18\u5316\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u4e00\u4e9b\u88ab post \u5728\u8fd9\u4e9b\u751f\u547d\u5468\u671f\u4e4b\u95f4\u7684\u4e3b\u7ebf\u7a0b\u8017\u65f6\u6d88\u606f\u4e5f\u4f1a\u5bf9\u542f\u52a8\u901f\u5ea6\u9020\u6210\u5f71\u54cd\u3002\u6bd4\u5982 Application \u548c Activity \u4e4b\u95f4\u3001Activity \u548c UI \u6e32\u67d3\u4e4b\u95f4\u3002\u8fd9\u4e9b\u4e3b\u7ebf\u7a0b\u6d88\u606f\u4f1a\u5bfc\u81f4\u6211\u4eec\u540e\u7eed\u7684\u751f\u547d\u5468\u671f\u88ab\u5ef6\u540e\u6267\u884c\uff0c\u5f71\u54cd\u542f\u52a8\u901f\u5ea6\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u5b83\u4eec\u8fdb\u884c\u4f18\u5316\u3002</p> <ul> <li>\u901a\u8fc7\u5728\u5173\u952e\u6d41\u7a0b\uff0c\u5982\u542f\u52a8\u9875\u9762\u3001\u9875\u9762\u9996\u5e27\u7ed8\u5236\u9636\u6bb5\uff0c\u4f18\u5316\u76f8\u5e94\u6d88\u606f\u7684\u987a\u5e8f, \u53ef\u4ee5\u63d0\u9ad8\u76f8\u5e94\u6d41\u7a0b\u7684\u901f\u5ea6\uff0c\u907f\u514d\u56e0\u4e3a\u5176\u4ed6\u6d88\u606f\u963b\u585e\u4e86\u5173\u952e\u6d41\u7a0b\u3002</li> <li>\u6d88\u606f\u987a\u5e8f\u7684\u4fee\u6539\u53ea\u80fd\u4f18\u5316\u5c40\u90e8\u95ee\u9898\uff0c\u4ece\u6574\u4f53\u4e0a\u770b\uff0c\u8017\u65f6\u95ee\u9898\u5e76\u6ca1\u6709\u89e3\u51b3\uff0c\u53ea\u662f\u5c06\u95ee\u9898\u5ef6\u540e\u4e86\u3002</li> <li>\u6d88\u606f\u8017\u65f6\u7684\u76d1\u63a7\u53ca\u6cbb\u7406\u662f\u89e3\u51b3\u6839\u672c\u95ee\u9898\u7684\u65b9\u5f0f</li> </ul> <p></p>"},{"location":"news/2023/news-2023-11/#gradle","title":"Gradle \u901f\u5ea6\u4f18\u5316\u539f\u7406\u89e3\u6790\u4e0e\u6027\u80fd\u5bf9\u6bd4","text":"<p>An In-depth Look at Gradle's Approach to Faster Compilation</p> <p>\u672c\u6587\u4ecb\u7ecd\u4e86 Gradle \u662f\u5982\u4f55\u901a\u8fc7\u7f16\u8bd1\u907f\u514d\u4f18\u5316\u7f16\u8bd1\u901f\u5ea6\u7684\uff0c\u540c\u65f6\u6bd4\u8f83\u4e86 Bazel \u548c Gradle \u5728\u5904\u7406 ABI \u53d8\u5316\u548c\u975e ABI \u53d8\u5316\u7684\u4e24\u79cd\u60c5\u51b5\u4e0b\u7684\u6784\u5efa\u65f6\u95f4\u3002\u7ed3\u679c\u663e\u793a\uff0cGradle \u5728\u5904\u7406 ABI \u53d8\u5316\u7684\u60c5\u51b5\u4e0b\u6bd4 Bazel \u5feb\u5f97\u591a\uff0c\u56e0\u4e3a\u5b83\u4e0d\u9700\u8981\u751f\u6210\u65b0\u7684\u5934 JAR\u3002Gradle \u5728\u5904\u7406\u975eABI\u53d8\u5316\u7684\u60c5\u51b5\u4e0b\u4e5f\u6bd4 Bazel \u5feb\uff0c\u8fd9\u5f97\u76ca\u4e8e Gradle \u7684\u4e00\u4e9b\u6700\u65b0\u4f18\u5316\uff0c\u5982\u914d\u7f6e\u7f13\u5b58\uff08Gradle 8.1\u4e2d\u7a33\u5b9a\uff09\u548c\u6301\u4e45\u5316\u7f16\u8bd1\u5668\u5b88\u62a4\u8fdb\u7a0b\uff08Gradle 8.3\u4e2d\u9ed8\u8ba4\u542f\u7528\uff09</p> <p></p>"},{"location":"news/2023/news-2023-11/#android","title":"\u5982\u4f55\u79d1\u5b66\u7684\u8fdb\u884cAndroid\u5305\u4f53\u79ef\u4f18\u5316","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u8109\u8109 App \u5c06\u5305\u4f53\u79ef\u4ece 168 M \u4f18\u5316\u5230 49 M \u7684\u8fc7\u7a0b\uff0c\u6bd4\u8f83\u7cfb\u7edf\u5168\u9762\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a</p> <ul> <li>\u8bc4\u4f30\u4f18\u5316\u9700\u6c42\uff1a\u901a\u8fc7\u5bf9\u6807\u7ade\u54c1\u548c\u4e1a\u5185\u4eba\u6c14 App\uff0c\u5224\u65ad\u662f\u5426\u9700\u8981\u8fdb\u884c\u4f18\u5316\u548c\u4f18\u5316\u7684\u76ee\u6807\u3002</li> <li>\u5305\u4f53\u79ef\u4f18\u5316\u57fa\u672c\u601d\u60f3\uff1a\u6293\u4f4f\u5404\u4e2a\u73af\u8282\uff0c\u7cfb\u7edf\u5316\u65b9\u6848\u5148\u884c\uff0c\u660e\u786e\u98ce\u9669\u6536\u76ca\u6bd4\u548c\u6210\u672c\u6536\u76ca\u6bd4\uff0c\u660e\u786e\u6307\u6807\u548c\u76d1\u63a7\u9632\u52a3\u5316\u4f53\u7cfb\uff0c\u628a\u5305\u4f53\u79ef\u8fd9\u4e2a\u6307\u6807\u523b\u5728\u8111\u5b50\u91cc\u3002</li> <li>\u81ea\u5bb6 App \u5305\u4f53\u79ef\u4e00\u89c8\uff1a\u5206\u6790 APK \u7684\u7ed3\u6784\u548c\u5404\u4e2a\u90e8\u5206\u7684\u5927\u5c0f\uff0c\u627e\u51fa\u4f18\u5316\u7684\u91cd\u70b9\u548c\u65b9\u5411\u3002</li> <li>\u4f18\u5316\u65b9\u6848\u8349\u6848\uff1a\u6839\u636e APK \u7684\u73b0\u72b6\uff0c\u8c03\u7814\u4e1a\u5185\u5e38\u89c4\u548c\u975e\u5e38\u89c4\u7684\u4f18\u5316\u624b\u6bb5\uff0c\u5236\u5b9a\u53ef\u5b9e\u73b0\u3001\u4f4e\u98ce\u9669\u3001\u9ad8\u6536\u76ca\u7684\u65b9\u6848\u3002</li> <li>\u57fa\u4e8e\u98ce\u9669\u6536\u76ca\u6bd4\u548c\u6210\u672c\u6536\u76ca\u6bd4\u6572\u5b9a\u6700\u7ec8\u5b9e\u73b0\u65b9\u6848\uff1a\u5bf9\u6bcf\u4e2a\u65b9\u6848\u8fdb\u884c\u8be6\u7ec6\u7684\u5206\u6790\uff0c\u8003\u8651\u9884\u671f\u6548\u679c\u3001\u6210\u672c\u548c\u98ce\u9669\uff0c\u9009\u62e9\u6700\u5408\u9002\u7684\u65b9\u6848\u8fdb\u884c\u5b9e\u65bd\u3002</li> <li>\u786e\u5b9a\u4f18\u5316\u6548\u679c\uff1a\u901a\u8fc7\u5bf9\u6bd4\u56fe\u5c55\u793a\u4f18\u5316\u524d\u540e\u7684\u5305\u4f53\u79ef\u53d8\u5316\uff0c\u91cf\u5316\u4f18\u5316\u7684\u6536\u76ca\u3002</li> <li>\u603b\u7ed3\uff1a\u603b\u7ed3\u505a\u5f97\u597d\u7684\u65b9\u9762\u548c\u9700\u8981\u6539\u8fdb\u7684\u65b9\u9762\uff0c\u7ed9\u51fa\u4e00\u4e9b\u53cd\u601d\u548c\u5efa\u8bae\u3002</li> <li>\u5c55\u671b\uff1a\u5c55\u671b\u672a\u6765\u7684\u4f18\u5316\u65b9\u5411\u548c\u8ba1\u5212\uff0c\u7ed9\u51fa\u4e00\u4e9b\u66f4\u6781\u81f4\u7684\u4f18\u5316\u65b9\u6848\u3002</li> </ul>"},{"location":"news/2023/news-2023-11/#_3","title":"\u7cbe\u9009\u89c6\u9891","text":""},{"location":"news/2023/news-2023-11/#android_1","title":"\u6296\u97f3\u521b\u4f5c\u5de5\u5177 Android \u67b6\u6784\u601d\u8003\u4e0e\u5b9e\u8df5","text":"<p>\u6296\u97f3\u521b\u4f5c\u5de5\u5177 Android \u67b6\u6784\u601d\u8003\u4e0e\u5b9e\u8df5\uff0c\u53ef\u4ee5\u770b\u4e00\u4e0b\u5927\u578b App \u662f\u600e\u4e48\u505a\u67b6\u6784\u4f18\u5316\u7684</p> <p></p>"},{"location":"news/2023/news-2023-11/#app","title":"\u4e00\u6b3e\u5927\u578b APP \u662f\u5982\u4f55\u8fdb\u884c\u6027\u80fd\u4f18\u5316\u7684\uff1f","text":"<p>\u505a\u5ba2\u6237\u7aef\u5f00\u53d1\u90fd\u57fa\u672c\u90fd\u505a\u8fc7\u6027\u80fd\u4f18\u5316\uff0c\u6bd4\u5982\u63d0\u5347\u81ea\u5df1\u6240\u8d1f\u8d23\u7684\u4e1a\u52a1\u7684\u901f\u5ea6\u6216\u6d41\u7545\u6027\uff0c\u4f18\u5316\u5185\u5b58\u5360\u7528\u7b49\u7b49\uff0c\u4f46\u662f\u5927\u90e8\u5206\u5f00\u53d1\u8005\u6240\u505a\u7684\u6027\u80fd\u4f18\u5316\u53ef\u80fd\u90fd\u662f\u9488\u5bf9\u4e2d\u5c0f\u578b APP \u7684\uff0c\u5927\u578b APP \u7684\u6027\u80fd\u4f18\u5316\u7ecf\u9a8c\u5e76\u4e0d\u4f1a\u592a\u591a\u3002\u672c\u89c6\u9891\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5927\u578b app \u76f8\u6bd4\u4e8e\u4e2d\u5c0f\u578b app \u5728\u505a\u6027\u80fd\u4f18\u5316\u65f6\u7684\u5f02\u540c\u70b9\uff0c\u4ee5\u53ca\u5927\u578b app \u6027\u80fd\u4f18\u5316\u7684\u601d\u8def</p> <p></p>"},{"location":"news/2023/news-2023-12/","title":"Android \u6027\u80fd\u4f18\u5316\u6280\u672f\u6708\u62a5 | 2023 \u5e74 12 \u6708","text":"<p>\u6bcf\u4e2a\u6708\u90fd\u4f1a\u6709\u4e00\u4e9b Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u53d1\u5e03\uff0c\u7136\u800c\uff0c\u788e\u7247\u5316\u9605\u8bfb\u4f7f\u5f97\u8fd9\u4e9b\u77e5\u8bc6\u96be\u4ee5\u5f62\u6210\u5b8c\u6574\u4f53\u7cfb\uff0c\u4e14\u5bb9\u6613\u88ab\u9057\u5fd8\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4f7f\u7528\u6280\u672f\u6708\u62a5\u7684\u5f62\u5f0f\uff0c\u603b\u7ed3\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u5185\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u3002</p> <p>\u6708\u62a5\u7684\u4e3b\u8981\u5185\u5bb9\u5305\u62ec\uff1a\u6574\u7406\u5c55\u793a\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u6240\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u9886\u57df\u7684\u6700\u65b0\u6280\u672f\u52a8\u6001\u3001\u7cbe\u9009\u535a\u5ba2\uff0c\u7cbe\u9009\u89c6\u9891\u7b49\u5185\u5bb9\u3002</p>"},{"location":"news/2023/news-2023-12/#_1","title":"\u6700\u65b0\u52a8\u6001","text":""},{"location":"news/2023/news-2023-12/#_2","title":"\u706b\u70ed\u62a5\u540d\u4e2d | \u6296\u97f3\u5ba2\u6237\u7aef\u57fa\u7840\u6280\u672f\u5927\u63ed\u79d8","text":"<p>2024\u5e741\u670813\uff5e14\u65e5\u4e24\u5929\uff0c\u65b0\u5e74\u6700\u65b0\u4e00\u671f\u300e\u6296\u97f3\u5ba2\u6237\u7aef\u57fa\u7840\u6280\u672f\u5927\u63ed\u79d8\u300f\u6280\u672f\u6c99\u9f99\u6d3b\u52a8\u91cd\u78c5\u6765\u88ad\uff0c\u57fa\u4e8e\u6296\u97f3\u5ba2\u6237\u7aef\u5b9e\u8df5\u9a71\u52a8\u7684 iOS \u548c Android \u4e24\u573a\u6280\u672f\u5206\u4eab\u534f\u52a9\u60a8\u5f00\u542f\u65b0\u7684\u4e00\u5e74\u6280\u672f\u4e4b\u65c5\u3002</p> <p>Android \u4e13\u573a\u5177\u4f53\u5305\u62ec\u5982\u4e0b\u5185\u5bb9:</p> <ul> <li>\u6296\u97f3 ANR \u81ea\u52a8\u5f52\u56e0\u5e73\u53f0\u5efa\u8bbe\u5b9e\u8df5</li> <li>\u6296\u97f3 Android \u542f\u52a8\u8c03\u5ea6\u6846\u67b6\u63a2\u7d22</li> <li>\u6296\u97f3 Android \u7ebf\u4e0b\u8d28\u91cf\u4f53\u7cfb\u5efa\u8bbe\u5b9e\u8df5</li> <li>\u6296\u97f3\u5b89\u5353ART\u865a\u62df\u673a\u4f18\u5316\u7b56\u7565\u4e0e\u5b9e\u8df5</li> <li>\u6296\u97f3Android\u5382\u5546\u5408\u4f5c\u4f18\u5316\u63a2\u7d22\u4e0e\u5b9e\u8df5</li> </ul>"},{"location":"news/2023/news-2023-12/#_3","title":"\u7cbe\u9009\u535a\u5ba2","text":""},{"location":"news/2023/news-2023-12/#webview","title":"\u8fd9\u662f\u4f60\u4eec\u9879\u76ee\u4e2dWebView\u7684\u6837\u5b50\u5417\uff1f","text":"<p>\u4f60\u4eec\u9879\u76ee\u4e2d\u6216\u8005\u7406\u60f3\u4e2d\u7684WebView\u7684\u4f7f\u7528\u59ff\u52bf\u662f\u5982\u4f55\u7684\uff1f\u6709\u54ea\u4e9b\u89c4\u8303\u3001\u529f\u80fd\uff1f\u672c\u6587\u4ecb\u7ecd\u4e86\u4f5c\u8005\u5bf9\u4e8e\u4e00\u4e2aWebView\u4f7f\u7528\u7684\u4e00\u4e9b\u7406\u89e3</p> <ul> <li>\u53ef\u76d1\u63a7\u662f WebView \u5f88\u91cd\u8981\u7684\u4e00\u4e2a\u529f\u80fd\uff0c\u5305\u62ec\u8017\u65f6\u76d1\u63a7\uff0c\u9519\u8bef\u76d1\u63a7\u7b49</li> <li>\u4e0e\u524d\u7aef\u7684\u4ea4\u4e92\u4e5f\u662f WebView \u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u628a\u524d\u7aef\u8c03\u7528\u5b89\u5353\u7684\u5165\u53e3\u6536\u655b\u5230\u4e00\u4e2a\uff0c\u7136\u540e\u901a\u8fc7\u4f20\u5165\u65b9\u6cd5\u540d\u6765\u5206\u53d1\u5230\u4e0d\u540c\u65b9\u6cd5\u4e0a</li> <li>WebView \u7684<code>WebViewClient</code>,<code>WebChromeClient</code>\u4e2d\u5f80\u5f80\u4f1a\u5305\u542b\u5f88\u591a\u81ea\u5b9a\u4e49\u903b\u8f91\uff0c\u5f88\u591a\u9879\u76ee\u90fd\u662f\u76f4\u63a5\u5c01\u88c5\u4e00\u4e2a BaseWebViewClient\uff0c\u7136\u540e\u5728\u91cc\u9762\u505a\u4e00\u5806\u903b\u8f91\u5904\u7406\uff0c\u6bd4\u5982\u4e0a\u9762\u8bf4\u7684\u76d1\u63a7\u65b9\u6cd5\uff0c\u6216\u8005 loading \u64cd\u4f5c\u7b49\uff0cBaseWebViewClient \u5f80\u5f80\u4f1a\u53d8\u5f97\u81c3\u80bf\uff0c\u53ef\u4ee5\u4f7f\u7528\u7528\u62e6\u622a\u5668\u7684\u601d\u8def\u4f18\u5316\u3002</li> </ul> <p></p>"},{"location":"news/2023/news-2023-12/#android-gc","title":"Android GC \u6291\u5236","text":"<p>Android 2.3 \u5f15\u5165\u4e86\u5e76\u53d1 GC\u3002\u5e76\u53d1 GC \u7684\u597d\u5904\uff0c\u662f\u51cf\u5c11\u4e86 GC \u7684\u505c\u987f\u65f6\u95f4\uff0c\u51cf\u8f7b GC \u505c\u987f\u5bfc\u81f4\u7528\u6237\u611f\u53d7\u5230\u7684\u5361\u987f\u3002</p> <p>\u4f46\u662f\uff0c\u5e76\u53d1 GC\uff0c\u6709\u65f6\u5019\u8fd8\u662f\u4f1a\u62a2\u5360 CPU\uff0c\u5bfc\u81f4\u4e3b\u7ebf\u7a0b\u3001RenderThread \u7b49\u88ab\u8feb\u5207\u6362\u5230\u5c0f\u6838\u4e0a\uff0c\u6216\u8005\u62a2\u4e0d\u5230 CPU \u65f6\u95f4\u7247\uff0c\u5bfc\u81f4\u9875\u9762\u5361\u987f\u3002\u7531\u6b64\uff0c\u4e3a\u4e86\u4f18\u5316\u4e00\u4e9b\u6838\u5fc3\u573a\u666f\u7684\u4f53\u9a8c\uff0c\u574a\u95f4\u5f00\u59cb\u6d41\u884c\u8d77 \"GC \u6291\u5236\"\u3002</p> <p>GC \u6291\u5236\u7684\u6838\u5fc3\u601d\u60f3\uff0c\u662f\u77ed\u65f6\u95f4\u5185\u5e72\u6270\uff0c\u751a\u81f3\u505c\u6b62\u5e76\u53d1 GC\uff0c\u907f\u514d\u5e76\u53d1 GC \u5e26\u6765\u7684\u62a2\u5360 CPU \u95ee\u9898\u3002\u800c\u77ed\u65f6\u95f4\u5185\u7684 GC \u6291\u5236\uff0c\u901a\u5e38\u4e0d\u4f1a\u5bfc\u81f4 OOM \u7b49\u95ee\u9898\u3002</p> <p>\u672c\u6587\u4e3b\u8981\u63a2\u8ba8 Android 5.0 \u4ee5\u540e\u7684 GC \u6291\u5236\u3002\u5177\u4f53\u5206\u4e09\u4e2a\u65b9\u9762\uff1a</p> <ul> <li>GC \u6291\u5236\u7684\u6536\u76ca</li> <li>GC \u6291\u5236\u7684\u4e24\u79cd\u5b9e\u73b0\u65b9\u6848: \u6302\u8d77 GC \u7ebf\u7a0b\u4e0e\u8c03\u5927 heap \u89e6\u53d1 GC \u7684\u9608\u503c</li> <li>GC \u6291\u5236\u7684\u5e94\u7528\u573a\u666f</li> </ul> <p>\u603b\u5f97\u6765\u8bf4\uff0c\u5e94\u7528\u5f00\u53d1\u8005\u5b9e\u73b0 GC \u6291\u5236\u6bd4\u8f83\u56f0\u96be\uff0c\u65e0\u8bba\u662f inline hook \u8fd8\u662f\u865a\u51fd\u6570 hook\uff0c\u8017\u65f6\u90fd\u8981\u51e0\u6beb\u79d2\uff0c\u751a\u81f3\u5341\u51e0\u6beb\u79d2\u3002\u800c\u5728\u5e94\u7528\u542f\u52a8\u7684\u573a\u666f\u4e2d\uff0c\u4e0d\u4e00\u5b9a\u4f1a\u53d1\u751f GC\u3002\u5bb9\u6613\u9020\u6210\u8d1f\u4f18\u5316\uff0c\u4e3b\u8981\u8fd8\u662f\u5b66\u4e60\u5404\u79cd\u6280\u672f\u601d\u8def\u53ca\u65b9\u6848\u5b9e\u73b0\u4e3a\u4e3b\u3002</p>"},{"location":"news/2023/news-2023-12/#appvs2023","title":"App\u8de8\u5e73\u53f0\u6846\u67b6VS\u539f\u751f\u5f00\u53d1\u6df1\u5ea6\u8bc4\u6d4b\u4e4b2023\u7248","text":"<p>App\u8de8\u5e73\u53f0\u6846\u67b6\u5386\u53f2\u60a0\u4e45\uff0c\u4ececordova\u3001react native\u3001flutter\uff0c\u76f4\u5230\u6700\u8fd1\u7684uni-app x\u3002\u6c5f\u5c71\u4ee3\u6709\u624d\u4eba\u51fa\uff0c\u6bcf\u4e2a\u90fd\u8bd5\u56fe\u98a0\u8986\u539f\u751f\uff0c\u4f46\u8fc7\u53bb\u5374\u4e00\u76f4\u672a\u6210\u529f\u3002</p> <p>\u8fc7\u53bb\u7684\u95ee\u9898\u5230\u5e95\u5728\u54ea\u91cc\uff1f\u672c\u6587\u4f5c\u8005\u5bf9\u6bd4\u4e86\u5404\u79cd\u6280\u672f\u8def\u7ebf\uff0c\u5206\u6790\u8fd9\u4e9b\u8de8\u5e73\u53f0\u5f00\u53d1\u6846\u67b6\u548c\u539f\u751f\u5e94\u7528\u7684\u5dee\u522b\u5177\u4f53\u5728\u54ea\u91cc\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u672c\u6587\u4f5c\u8005\u662f DCloud \u7684\u67b6\u6784\u5e08\uff0c\u4e5f\u5c31\u662f uni-app \u4e0e uni-app x \u7684\u5f00\u53d1\u8005\uff0c\u867d\u7136\u96be\u514d\u6709\u81ea\u5356\u81ea\u5938\u4e4b\u5acc\uff0c\u4f46\u76f8\u4fe1\u4e5f\u53ef\u4ee5\u4e3a\u5927\u5bb6\u5728\u6280\u672f\u9009\u578b\u65f6\u5e26\u6765\u4e00\u4e9b\u542f\u53d1\u3002</p> <p></p>"},{"location":"news/2023/news-2023-12/#100io","title":"100\u884c\u4ee3\u7801\u642d\u5efa\u4e00\u4e2aIO\u6cc4\u9732\u76d1\u6d4b\u6846\u67b6","text":"<p>IO \u4e00\u822c\u5c31\u662f\u6307\u7684\u5e38\u89c1\u7684\u6587\u4ef6\u6d41\u8bfb\u5199\u3001\u6570\u636e\u5e93\u8bfb\u5199\uff0c\u76f8\u4fe1\u6bcf\u4e2a\u4eba\u90fd\u77e5\u9053\uff0c\u5b8c\u6210\u8bfb\u5199\u540e\u90fd\u5e94\u8be5\u624b\u52a8\u8c03\u7528\u6d41\u7684 close() \u65b9\u6cd5\u5173\u95ed\uff0c\u4e00\u65e6\u5fd8\u8bb0\u5c31\u5f15\u8d77\u4e86 io \u6cc4\u6f0f\u4e86\u3002</p> <p>\u5982\u679c\u9879\u76ee\u4e2d\u8fd9\u79cd\u95ee\u9898\u573a\u666f\u6bd4\u8f83\u591a\uff0c\u5c31\u4f1a\u5bfc\u81f4 fd \u65e0\u8282\u5236\u7684\u589e\u52a0\uff0c\u5bfc\u81f4\u5e94\u7528\u5185\u5b58\u7d27\u5f20\uff0c\u4e25\u91cd\u751a\u81f3\u5f15\u53d1 OOM\uff0c\u975e\u5e38\u5f71\u54cd\u7528\u6237\u4f53\u9a8c\u3002</p> <p>java \u4e2d\u7684<code>AutoCloseable</code>\u642d\u914d<code>try-with-resource</code>\u4e0e Kotlin \u4e2d\u7684<code>use</code>\u90fd\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5b9e\u73b0\u81ea\u52a8\u5316\u7684\u5173\u95ed\u6d41\u3002\u4f46\u662f\u771f\u6b63\u5230\u5199\u4ee3\u7801\u65f6\u6709\u65f6\u8fd8\u662f\u4f1a\u5fd8\u8bb0\uff1b\u800c\u4e14\u9879\u76ee\u4e2d\u8fd8\u53ef\u80fd\u5b58\u5728\u5386\u53f2\u4ee3\u7801\u4e5f\u5fd8\u8bb0\u4e86\u5173\u95ed\u6d41\uff0c\u67e5\u627e\u8d77\u6765\u4e5f\u662f\u6beb\u65e0\u5934\u7eea\u7684\u3002</p> <p>\u56e0\u6b64\u642d\u5efa\u4e00\u4e2a IO \u6cc4\u6f0f\u76d1\u6d4b\u6846\u67b6\u8fd8\u662f\u5f88\u6709\u5fc5\u8981\u7684\uff0c\u672c\u6587\u5c31\u4ecb\u7ecd\u4e86\u5982\u4f55\u501f\u52a9\u52a8\u6001\u4ee3\u7406\u548c\u53cd\u5c04\uff0c\u4ec5\u7528100\u884c\u4ee3\u7801\u6765\u5b9e\u73b0 IO \u6cc4\u9732\u7684\u76d1\u63a7\u3002</p>"},{"location":"news/2023/news-2023-12/#_4","title":"\u4e00\u79cd\u9e3f\u8499\u5e94\u7528\u7f51\u7edc\u6570\u636e\u76d1\u63a7\u65b9\u6cd5","text":"<p>\u672c\u6587\u5206\u6790\u4e86\u9e3f\u8499\u7684\u7f51\u7edc\u5e93\u8bf7\u6c42\u903b\u8f91\u5728 libhttp.z.so \u4e2d,\u5185\u90e8\u4f7f\u7528 curl \u5b9e\u73b0\u3002\u5982\u679c\u6211\u4eec\u60f3\u505a\u63a5\u53e3\u6027\u80fd\u76d1\u63a7\u6bd4\u5982 dns \u89e3\u6790\u8017\u65f6\uff0c\u5efa\u8fde\u8017\uff0c\u5c31\u53ef\u4ee5\u5229\u7528curl\u63d0\u4f9b\u7684\u80fd\u529b\u53bb\u505a\u3002</p> <p>\u540c\u65f6\u7531\u4e8e\u9e3f\u8499\u6a21\u62df\u5668\u53ca\u771f\u673a\u65e0\u6cd5\u5b89\u88c5 CA \u8bc1\u4e66\uff0c\u6293\u5305\u4e0d\u4fbf\uff0c\u672c\u6587\u4e5f\u901a\u8fc7 hook curl \u5b9e\u73b0\u4e86\u6253\u5370\u7f51\u7edc\u8bf7\u6c42\u5185\u5bb9\uff0c\u7f13\u89e3\u4e86\u9e3f\u8499\u4e0a\u8c03\u8bd5\u63a5\u53e3\u65f6\u62ff\u4e0d\u5230\u63a5\u53e3\u8c03\u8bd5\u6570\u636e\u7684\u56f0\u96be\u3002</p> <p></p>"},{"location":"news/2024/news-2024-01/","title":"Android \u6027\u80fd\u4f18\u5316\u6280\u672f\u6708\u62a5 | 2024 \u5e74 1 \u6708","text":"<p>\u6bcf\u4e2a\u6708\u90fd\u4f1a\u6709\u4e00\u4e9b Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u53d1\u5e03\uff0c\u7136\u800c\uff0c\u788e\u7247\u5316\u9605\u8bfb\u4f7f\u5f97\u8fd9\u4e9b\u77e5\u8bc6\u96be\u4ee5\u5f62\u6210\u5b8c\u6574\u4f53\u7cfb\uff0c\u4e14\u5bb9\u6613\u88ab\u9057\u5fd8\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4f7f\u7528\u6280\u672f\u6708\u62a5\u7684\u5f62\u5f0f\uff0c\u603b\u7ed3\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u5185\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u3002</p> <p>\u6708\u62a5\u7684\u4e3b\u8981\u5185\u5bb9\u5305\u62ec\uff1a\u6574\u7406\u5c55\u793a\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u6240\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u9886\u57df\u7684\u6700\u65b0\u6280\u672f\u52a8\u6001\u3001\u7cbe\u9009\u535a\u5ba2\uff0c\u7cbe\u9009\u89c6\u9891\u7b49\u5185\u5bb9\u3002</p>"},{"location":"news/2024/news-2024-01/#_1","title":"\u7cbe\u9009\u535a\u5ba2","text":""},{"location":"news/2024/news-2024-01/#javaandroid","title":"\u638c\u63e1Java\u548cAndroid\u865a\u62df\u673a","text":"<p>\u200b\u6211\u4eec\u77e5\u9053\u7684\u865a\u62df\u673a\u6709\u5f88\u591a\uff0c\u8fd0\u884cJava\u7684JVM\u865a\u62df\u673a\uff0c\u8fd0\u884cAndroid\u7a0b\u5e8f\u7684Davlik\u548cArt\u865a\u62df\u673a\u7b49\u3002\u672c\u6587\u4ee5JVM\uff0cDavlik\u548cArt\u4e09\u6b3e\u865a\u62df\u673a\u4e3a\u4f8b\uff0c\u4ecb\u7ecd\u4e86\u4e00\u4e2a\u865a\u62df\u673a\u5e94\u8be5\u5177\u5907\u4ec0\u4e48\u6837\u7684\u80fd\u529b\u3002</p> <ul> <li>\u57fa\u4e8e\u5b57\u8282\u7801\u7684\u7f16\u8bd1\u6a21\u5757\uff1a\u8be5\u6a21\u5757\u4e3b\u8981\u662f\u5bf9\u6e90\u4ee3\u7801\u8fdb\u884c\u8bcd\u6cd5\uff0c\u8bed\u6cd5\uff0c\u8bed\u4e49\u5206\u6790\u751f\u6210 AST\uff0c\u5e76\u5c06 AST \u751f\u6210\u4e2d\u95f4\u6587\u4ef6\uff0cjvm \u7684\u7f16\u8bd1\u6a21\u5757\u662f javac\uff0cAndroid \u865a\u62df\u673a\u7684\u7f16\u8bd1\u6a21\u5757\u662f javac \u548c dx \u6216d8</li> <li>\u52a0\u8f7d\u5668\u6a21\u5757\uff1a\u52a0\u8f7d\u5b57\u8282\u7801\u7684\u4e8c\u8fdb\u5236\u6d41\uff0c\u5e76\u89e3\u6790\u6620\u5c04\u81f3\u5806\u5185\u5b58\u4e2d</li> <li>\u89e3\u91ca\u5668\u6a21\u5757\uff1a\u89e3\u91ca\u6267\u884c\u51fd\u6570\u5b57\u8282\u7801\u6307\u4ee4\uff0c\u865a\u62df\u673a\u901a\u8fc7\u89e3\u91ca\u6267\u884c\u5b57\u8282\u7801\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u5177\u4f53\u53ef\u4ee5\u5206\u4e3a\u57fa\u4e8e\u6808\u7684 JVM \u548c Davlik \u4e0e\u57fa\u4e8e\u5bc4\u5b58\u5668\u7684 Art</li> <li>\u57fa\u4e8e\u673a\u5668\u7801\u7684\u7f16\u8bd1\u5668\u6a21\u5757\uff1a\u662f\u865a\u62df\u673a\u6267\u884c\u5b57\u8282\u7801\u7684\u53e6\u4e00\u79cd\u65b9\u5f0f\uff0c\u5c06\u5b57\u8282\u7801\u8f6c\u5316\u4e3a\u672c\u5730\u673a\u5668\u4ee3\u7801\u540e\u6267\u884c\uff0c\u5982 JIT \u548c AOT\u3002</li> <li>\u5185\u5b58\u7ba1\u7406\u6a21\u5757\uff1a\u865a\u62df\u673a\u5806\u5185\u5b58\u5728\u8fd0\u884c\u65f6\u88ab\u5212\u5206\u4e3a\u4e0d\u540c\u7684\u5185\u5b58\u533a\u57df(LargeObjSpace\uff0cMainAlloocSpace\uff0cNonMovingSpace\u7b49)\u4ee5\u53ca\u5783\u573e\u56de\u6536\u673a\u5236</li> </ul>"},{"location":"news/2024/news-2024-01/#_2","title":"\u7cbe\u9009\u89c6\u9891","text":""},{"location":"news/2024/news-2024-01/#anr","title":"\u6296\u97f3 ANR \u81ea\u52a8\u5f52\u56e0\u5e73\u53f0\u5efa\u8bbe\u5b9e\u8df5","text":"<p>\u76f8\u6bd4\u4e8e Crash \u95ee\u9898\uff0cANR \u95ee\u9898\u5b58\u5728\u7f3a\u5c11\u4fe1\u606f\u5f52\u56e0\u56f0\u96be\uff0cANR \u53d1\u751f\u65f6\u5806\u6808\u6293\u53d6\u4e0d\u51c6\u786e\u7b49\u95ee\u9898\uff0c\u672c\u89c6\u9891\u4ecb\u7ecd\u4e86\u6296\u97f3 ANR \u81ea\u52a8\u5316\u5f52\u56e0\u5e73\u53f0\u5efa\u8bbe\u7684\u4e00\u4e9b\u7ecf\u9a8c\u3002</p> <p></p>"},{"location":"news/2024/news-2024-01/#android","title":"\u6296\u97f3 Android \u542f\u52a8\u8c03\u5ea6\u6846\u67b6\u63a2\u7d22","text":"<p>\u542f\u52a8\u4f18\u5316\u662f\u6027\u80fd\u4f18\u5316\u4e2d\u7684\u5e38\u89c1\u4e3b\u9898\uff0c\u672c\u89c6\u9891\u4ecb\u7ecd\u4e86\u6296\u97f3\u5728 Android \u542f\u52a8\u8c03\u5ea6\u6846\u67b6\u65b9\u9762\u505a\u7684\u4e00\u4e9b\u5b9e\u8df5\u3002</p> <p></p>"},{"location":"news/2024/news-2024-01/#art","title":"\u6296\u97f3 ART \u865a\u62df\u673a\u4f18\u5316","text":"<p>\u5185\u5b58\u4f18\u5316\u662f\u6027\u80fd\u4f18\u5316\u4e2d\u7684\u4e00\u4e2a\u91cd\u8981\u65b9\u5411\uff0c\u672c\u89c6\u9891\u4ecb\u7ecd\u4e86\u6296\u97f3\u5728 ART \u865a\u62df\u673a\u4f18\u5316\u65b9\u9762\u7684\u4e00\u4e9b\u5b9e\u8df5\u3002</p> <p></p>"},{"location":"news/2024/news-2024-01/#_3","title":"\u6296\u97f3\u5382\u5546\u5408\u4f5c\u6027\u80fd\u4f18\u5316","text":"<p>\u5728\u505a\u6027\u80fd\u4f18\u5316\u65f6\uff0c\u9664\u4e86 app \u672c\u8eab\u7684\u4f18\u5316\uff0c\u6709\u65f6\u4e0e\u5382\u5546\u5408\u4f5c\uff0c\u4e5f\u4f1a\u6709\u4e0d\u9519\u7684\u6548\u679c\uff0c\u672c\u89c6\u9891\u4ecb\u7ecd\u4e86\u6296\u97f3\u4e0e\u5382\u5546\u5408\u4f5c\u505a\u7684\u4e00\u4e9b\u6027\u80fd\u4f18\u5316\u3002</p> <p></p>"},{"location":"news/2024/news-2024-02/","title":"Android \u6027\u80fd\u4f18\u5316\u6280\u672f\u6708\u62a5 | 2024 \u5e74 2 \u6708","text":"<p>\u6bcf\u4e2a\u6708\u90fd\u4f1a\u6709\u4e00\u4e9b Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u53d1\u5e03\uff0c\u7136\u800c\uff0c\u788e\u7247\u5316\u9605\u8bfb\u4f7f\u5f97\u8fd9\u4e9b\u77e5\u8bc6\u96be\u4ee5\u5f62\u6210\u5b8c\u6574\u4f53\u7cfb\uff0c\u4e14\u5bb9\u6613\u88ab\u9057\u5fd8\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4f7f\u7528\u6280\u672f\u6708\u62a5\u7684\u5f62\u5f0f\uff0c\u603b\u7ed3\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u5185\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u3002</p> <p>\u6708\u62a5\u7684\u4e3b\u8981\u5185\u5bb9\u5305\u62ec\uff1a\u6574\u7406\u5c55\u793a\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u6240\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u9886\u57df\u7684\u6700\u65b0\u6280\u672f\u52a8\u6001\u3001\u7cbe\u9009\u535a\u5ba2\uff0c\u7cbe\u9009\u89c6\u9891\u7b49\u5185\u5bb9\u3002</p>"},{"location":"news/2024/news-2024-02/#_1","title":"\u7cbe\u9009\u535a\u5ba2","text":""},{"location":"news/2024/news-2024-02/#sdk","title":"\u5f00\u53d1\u4e00\u6b3e SDK \u9700\u8981\u6ce8\u610f\u54ea\u4e9b\u95ee\u9898","text":"<p>\u6709\u65f6\u6211\u4eec\u9700\u8981\u5c06\u4ee3\u7801\u5c01\u88c5\u6210 SDK \u4ee5\u4f9b\u4e1a\u52a1\u65b9\u8c03\u7528\uff0c\u672c\u6587\u4ecb\u7ecd\u4e86\u5f53\u6211\u4eec\u5f00\u53d1\u4e00\u6b3e SDK \u65f6\u5e94\u8be5\u6ce8\u610f\u7684\u5185\u5bb9\uff1a</p> <ul> <li>Java \u7248\u672c\u95ee\u9898</li> <li>kotlin \u7248\u672c\u95ee\u9898</li> <li>minSdkVersion \u7248\u672c\u95ee\u9898</li> <li>\u4f9d\u8d56\u6df7\u6dc6: \u914d\u7f6e proguard-rules.pro \u6df7\u6dc6\uff0ckeep \u4f4f\u5bf9\u5916\u7684\u63a5\u53e3\u4e0e\u65b9\u6cd5\uff0c\u6df7\u6dc6\u5b9e\u73b0\u7c7b\uff0cSDK \u53d1\u5e03\u65f6\uff0c\u4e0d\u5e26\u4e0a sourceJar\uff0c\u5916\u90e8\u53ea\u80fd\u67e5\u770b class \u6587\u4ef6\uff0c\u8fdb\u4e00\u6b65\u589e\u52a0\u5916\u90e8\u89c2\u6469 SDK \u6838\u5fc3\u4ee3\u7801\u96be\u5ea6</li> <li>\u5411\u4e0b\u517c\u5bb9: SDK \u5bf9\u5916\u65b9\u6cd5\u5c3d\u91cf\u5411\u4e0b\u517c\u5bb9\uff0c\u5982\u9047\u5230\u5fc5\u987b\u8981\u79fb\u9664\u7684\uff0c\u53ef\u63d0\u524d\u51e0\u4e2a\u7248\u672c\u5c06\u65b9\u6cd5\u6807\u6ce8 @Deprecated \u8fc7\u671f\uff0c\u5e76\u63d0\u4f9b\u7684\u65b0\u7684\u8c03\u7528\u65b9\u6cd5</li> <li>\u975e\u7a7a\u5904\u7406: \u5bf9\u5916\u63a5\u53e3\u5fc5\u987b\u6807\u660e\u5165\u53c2\u4e0e\u8fd4\u56de\u503c\u7684\u53ef\u7a7a\u4e0e\u975e\u7a7a\uff0c\u907f\u514d\u4e1a\u52a1\u65b9\u53d1\u751f NPE \u95ee\u9898</li> <li>\u6e05\u6670\u7684\u6ce8\u91ca</li> <li>\u7248\u672c\u7edf\u4e00: \u5982\u679c\u5bf9\u5916\u63d0\u4f9b\u7684 SDK \u6709\u591a\u4e2a\u4f9d\u8d56\uff0c\u5e76\u4e14\u4e0d\u540c\u7248\u672c\u53ef\u80fd\u4f1a\u51fa\u73b0\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 Bom \u6765\u7ba1\u7406\u7248\u672c</li> <li>DIP \u4f9d\u8d56\u5012\u7f6e\u539f\u5219: SDK \u63d0\u4f9b\u62bd\u8c61\u63a5\u53e3\uff0c\u4e1a\u52a1\u65b9\u4f9d\u8d56\u63a5\u53e3\u8c03\u7528</li> <li>\u7cfb\u7edf\u517c\u5bb9\u5224\u65ad: \u5982\u679c SDK \u6709\u9488\u5bf9\u4e00\u4e9b\u7cfb\u7edf\u7248\u672c\u517c\u5bb9\u7684\u5904\u7406\uff0c\u5219\u4e0d\u4ec5\u4ec5\u901a\u8fc7 Build.VERSION.SDK_INT \u6765\u5224\u65ad\u673a\u578b\u7248\u672c\u5c31\u591f\u4e86\uff0c\u8fd8\u8981\u5224\u65ad\u5e94\u7528\u7684 targetSdkVersion \u7248\u672c\uff0c\u907f\u514d\u4e1a\u52a1\u65b9\u4f7f\u7528\u7684 targetSdkVersion \u6bd4\u7cfb\u7edf\u517c\u5bb9\u7248\u672c\u4f4e\u800c\u5bfc\u81f4\u6ca1\u6709\u6548\u679c\u7684\u73b0\u8c61\u3002</li> <li>\u4f9d\u8d56\u51b2\u7a81: \u5c3d\u91cf\u51cf\u5c11\u4e09\u65b9\u5e93\u4f9d\u8d56, \u5982\u679c\u4e09\u65b9\u5e93\u6781\u5176\u4e0d\u7a33\u5b9a\u53c8\u4e0d\u5f97\u4e0d\u7528\uff0c\u5219\u53ef\u4ee5\u4e0b\u8f7d\u5176\u6e90\u7801\uff0c\u66f4\u6539\u5305\u540d\uff0c\u91cd\u65b0\u7f16\u8bd1\u4f9d\u8d56\u3002</li> </ul>"},{"location":"news/2024/news-2024-02/#apph5","title":"\u5fc3\u9047APP\u7ad9\u5185\u73a9\u6cd5H5\u4f53\u9a8c\u4f18\u5316\u5b9e\u8df5","text":"<p>\u5fc3\u9047 APP \u5728H5\u7684\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u5b9e\u8df5\u4e86\u5f88\u591a\u624b\u6bb5\u5bf9H5\u8fdb\u884c\u6027\u80fd\u63d0\u5347\uff0c\u5177\u4f53\u5305\u62ec\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ul> <li>\u79bb\u7ebf\u5305\u62c6\u5305\uff1a\u5bf9\u4e8e\u73a9\u6cd5\u7c7bH5\uff0c\u9759\u6001\u8d44\u6e90\u5f80\u5f80\u6bd4\u8f83\u591a\uff0c\u6bd4\u5982\u5728\u6211\u4eec\u7684\u4e24\u4e2a\u73a9\u6cd5\u91cc\uff0c\u56fe\u7247\u7ecf\u8fc7\u538b\u7f29\u540e\uff0c\u6253\u5305\u7684\u603b\u4f53\u79ef\u4ecd\u7136\u4f1a\u8fbe\u5230 10M \u4ee5\u4e0a\u3002\u7531\u4e8e\u79bb\u7ebf\u5305 diff \u7684\u7248\u672c\u53ef\u80fd\u6709\u9650\uff0c\u78b0\u5230\u5ba2\u6237\u7aef\u7f13\u5b58\u7684\u7248\u672c\u5df2\u7ecf\u8d85\u8fc7\u79bb\u7ebf\u5305 diff \u7248\u672c\u9650\u5236\u65f6\uff0c\u5219\u9700\u8981\u4e0b\u8f7d\u5168\u91cf\u7684\u79bb\u7ebf\u5305\uff0c\u8fd9\u4e2a\u5168\u91cf\u5305\u7684\u6d41\u91cf\u4e0d\u5e94\u8be5\u662f\u7528\u6237\u5e94\u8be5\u627f\u62c5\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u9009\u62e9\u5bf9\u79bb\u7ebf\u5305\u8fdb\u884c\u201c\u62c6\u5305\u201d\u3002</li> <li>\u9759\u6001\u56fe\u7247\u4f18\u5316\uff1a\u7c7b\u4f3c\u4e8e\u63a5\u53e3\u9884\u52a0\u8f7d\u7684\u601d\u8def\uff0c\u6211\u4eec\u4f7f\u7528 web worker \u6280\u672f\uff0c\u5c06\u6838\u5fc3\u6b21\u7ea7\u6a21\u5757\u4e2d\u7684\u5927\u56fe\u8fdb\u884c\u63d0\u524d\u52a0\u8f7d\uff0c\u7531\u4e8e web worker \u7684\u975e\u963b\u585e\u6027\u548c\u6d4f\u89c8\u5668\u672c\u8eab\u7684\u8d44\u6e90\u7f13\u5b58\u80fd\u529b\uff0c\u8fd9\u4e9b\u6b21\u7ea7\u6a21\u5757\u7684\u80cc\u666f\u56fe\u4f1a\u88ab\u63d0\u524d\u52a0\u8f7d\u5e76\u7f13\u5b58\u5728\u6d4f\u89c8\u5668\u7684\u5185\u5b58\u4e2d</li> <li>\u52a8\u6001\u56fe\u7247\u4f18\u5316\uff1a\u6839\u636e UI \u7a3f\u9650\u5236\u7528\u6237\u4e0e\u540e\u53f0\u4e0a\u4f20\u56fe\u7247\u7684\u5bbd\u9ad8\uff0c\u540c\u65f6\u4f7f\u7528 CDN \u88c1\u526a\uff0c\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u50cf\u7d20\u6e32\u67d3\u3002</li> </ul> <p></p>"},{"location":"news/2024/news-2024-02/#android-gc","title":"\u51e0\u884c\u4ee3\u7801\u8f7b\u677e\u76d1\u63a7Android GC \u60c5\u51b5","text":"<p>gc \u7684\u9891\u7387\u662f\u5f71\u54cd app \u6d41\u7545\u6027\u7684\u4e00\u4e2a\u91cd\u8981\u6307\u6807\uff0c\u90a3\u4e48 Android \u5982\u4f55\u76d1\u63a7 gc \u6b21\u6570\u5462\uff1f</p> <pre><code>object GcWatcher {\n    private var gcWatcher: WeakReference&lt;GcWatcherInternal&gt;? = null\n    // \u5728\u4f60application\u542f\u52a8\u7684\u65f6\u5019 init\u5c31\u884c\n    @JvmStatic\n    fun init() {\n        if (gcWatcher == null) {\n            gcWatcher = WeakReference(GcWatcherInternal())\n        } else {\n            Log.v(TAG, \"GCWatcher() is inited,dont need init again\")\n        }\n    }\n\n    class GcWatcherInternal {\n        @kotlin.jvm.Throws(Throwable::class)\n        protected fun finalize() {\n            // \u6bcf\u6b21gc\u90fd\u4f1a\u8d70\u8fd9\u91cc \u53ef\u4ee5\u5728\u8fd9\u91cc\u7edf\u8ba1\u4f60\u60f3\u8981\u7684\u6b21\u6570/\u9891\u7387\u7b49\u4fe1\u606f\n            Log.v(TAG, \"GcWatcherInternal detect vm do gc !!!!!\")\n            gcWatcher = WeakReference(GcWatcherInternal())\n\n        }\n    }\n}\n</code></pre>"},{"location":"news/2024/news-2024-02/#clean-android","title":"Clean \u67b6\u6784\u4e0b\u7684\u73b0\u4ee3 Android \u67b6\u6784\u6307\u5357","text":"<p>Clean \u67b6\u6784\u662f Uncle Bob \u63d0\u51fa\u7684\u4e00\u79cd\u8f6f\u4ef6\u67b6\u6784\uff0c\u4f46\u662f\u5bf9\u4e8e Android \u5f00\u53d1\u6765\u8bf4\u7565\u663e\u590d\u6742\uff0c\u672c\u6587\u4ecb\u7ecd\u4e86\u9488\u5bf9 Android \u5355\u4f53\u5e94\u7528\u5f00\u53d1\u66f4\u8d34\u5207\u66f4\u7cbe\u786e\u7684 Clean \u67b6\u6784\u56fe</p> <p> </p> <ul> <li>\u4f9d\u8d56\u5173\u7cfb: Clean \u67b6\u6784\u57fa\u672c\u51c6\u5219\u662f\u6e90\u7801\u7ea7\u522b\u7684\u5185\u5c42\u4e0d\u4f9d\u8d56\u5916\u5c42\uff0c\u4f9d\u8d56\u5173\u7cfb\u6c38\u8fdc\u662f\u5355\u5411\u7684\uff0c\u5916\u5c42\u5411\u5185\u5c42\u4f9d\u8d56\u3002</li> <li>Model (\u9886\u57df\u6a21\u578b): \u4e1a\u52a1\u6a21\u578b\uff0c\u6216\u8005\u53eb\u9886\u57df\u6a21\u578b\uff0c\u662f\u6839\u636e\u8f6f\u4ef6\u4e1a\u52a1\u8bbe\u8ba1\u51fa\u6765\u7684\u5177\u4f53\u6a21\u578b\uff0c\u4e00\u822c\u6765\u8bf4\u4f1a\u662f\u4e2a data class\uff0c\u5176\u4e2d\u4e0d\u5305\u542b\u4efb\u4f55\u4e1a\u52a1\u903b\u8f91\uff0c\u53ea\u662f\u4e2a\u5355\u7eaf\u7684\u6a21\u578b\u5bf9\u8c61\u3002</li> <li>Adapter (\u6570\u636e\u9002\u914d\u5668)\uff1a \u6570\u636e\u9002\u914d\u5668\u5c42\u4e3b\u8981\u7528\u6765\u505a\u6570\u636e\u8f6c\u6362\uff0c\u4e3b\u8981\u6709\u4e24\u4e2a\u804c\u8d23\uff1a\u8f6c\u6362\u7f51\u7edc\u63a5\u53e3\u5b9e\u4f53\u6570\u636e\u7c7b\u548c\u9886\u57df\u6a21\u578b\u4e0e\u9886\u57df\u6a21\u578b\u4e4b\u95f4\u7684\u4e92\u76f8\u8f6c\u6362\u3002</li> <li>Repo\uff1a\u5bf9\u4e8e\u6211\u4eec Android \u5f00\u53d1\u6765\u8bf4\uff0cRepo \u5c42\u5e94\u8be5\u662f\u5bf9\u7f51\u7edc\u63a5\u53e3\u6216\u672c\u5730\u78c1\u76d8\u7684\u6570\u636e\u8bfb\u5199\u7684\u5c01\u88c5\uff0c\u5bf9\u4e8e Repo \u7684\u4f7f\u7528\u8005\u6765\u8bf4\uff0c\u4e0d\u9700\u8981\u5173\u6ce8\u5177\u4f53\u7684\u5b9e\u73b0\uff0c\u4e14 Repo \u4e2d\u4e00\u822c\u4e0d\u5177\u5907\u590d\u6742\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u53ea\u80fd\u5305\u542b\u7b80\u5355\u7684\u6570\u636e\u5904\u7406\u903b\u8f91\u3002</li> <li>UseCase (\u7528\u4f8b)\uff1aUseCase \u4e00\u822c\u662f\u6307\u7279\u5b9a\u5e94\u7528\u573a\u666f\u4e0b\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u7528\u4f8b\u5f15\u5bfc\u4e86\u6570\u636e\u5728\u6a21\u578b\u4e4b\u95f4\u7684\u8f93\u5165\u8f93\u51fa\uff0c\u5e76\u4e14\u6307\u6325\u7740\u4e1a\u52a1\u5b9e\u4f53\u5229\u7528\u5176\u4e2d\u7684\u5173\u952e\u4e1a\u52a1\u903b\u8f91\u6765\u5b9e\u73b0\u7528\u4f8b\u7684\u8bbe\u8ba1\u76ee\u6807\u3002\u56e0\u6b64\uff0c\u4e00\u4e2a UseCase \u5f80\u5f80\u53ea\u5305\u542b\u4e00\u6bb5\u5177\u4f53\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u4ed6\u7684\u8f93\u5165\u662f\u57fa\u672c\u7c7b\u578b\u6216\u8005\u9886\u57df\u6a21\u578b\uff0c\u8f93\u51fa\u4e5f\u662f\uff0c\u5e76\u4e14\u662f\u5e42\u7b49\u51fd\u6570\uff0c\u4e5f\u5c31\u662f\u7eaf\u51fd\u6570\uff0c\u6240\u4ee5 Google \u5efa\u8bae\u6211\u4eec\u6bcf\u4e2a UseCase \u53ea\u5305\u542b\u4e00\u4e2a\u516c\u5f00\u7684\u51fd\u6570\u3002</li> <li>UiState: UiState \u662f\u7528\u6765\u63cf\u8ff0\u5f53\u524d UI \u72b6\u6001\u7684\u96c6\u5408\u7c7b\uff0c\u4e00\u822c\u6765\u8bf4\u5e94\u8be5\u662f\u4e2a data class\u3002</li> <li>ViewModel: ViewModel \u8d1f\u8d23\u7ba1\u7406 UI \u72b6\u6001\uff0c\u6267\u884c\u5bf9\u5e94\u7684\u4e1a\u52a1\u903b\u8f91\u3002</li> <li>UI \u5c42: UI \u5c42\u5e94\u8be5\u5b8c\u5168\u662f\u6570\u636e\u9a71\u52a8\u7684\uff0cUI \u5c42\u7684\u4f5c\u7528\u5c31\u662f\u767e\u5206\u4e4b\u767e\u7684\u5c06 UiState \u6e32\u67d3\u51fa\u6765\uff0cUiState \u53d1\u751f\u53d8\u5316\uff0cUI \u4e5f\u8ddf\u7740\u53d8\u5316\uff0c\u8fd9\u4e00\u70b9\u58f0\u660e\u5f0f UI \u6846\u67b6\u505a\u7684\u5f88\u597d\u3002</li> </ul>"},{"location":"news/2024/news-2024-02/#_2","title":"\u7cbe\u9009\u89c6\u9891","text":""},{"location":"news/2024/news-2024-02/#_3","title":"\u62fc\u591a\u591a\u51b7\u542f\u771f\u7684\u79d2\u5f00","text":"<p>\u672c\u89c6\u9891\u5bf9\u6bd4\u4e86\u62fc\u591a\u591a\uff0c\u6dd8\u5b9d\uff0c\u4eac\u4e1c\uff0c\u95f2\u9c7c\u7b49\u8d2d\u7269 app \u7684\u542f\u52a8\u901f\u5ea6\uff0c\u53ef\u4ee5\u770b\u51fa\u62fc\u591a\u591a\u5728\u542f\u52a8\u901f\u5ea6\u65b9\u9762\u9065\u9065\u9886\u5148\uff0c\u540c\u65f6\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u5e38\u89c1\u7684\u542f\u52a8\u901f\u5ea6\u4f18\u5316\u65b9\u6cd5\uff1a</p> <ul> <li>Application attachBaseContext \u4f18\u5316\uff1aMultiDex \u4f18\u5316</li> <li>ContentProvider \u4f18\u5316\uff1a\u901a\u8fc7 App Startup \u4f18\u5316</li> <li>Application \u4f18\u5316: \u7cbe\u7b80 Application \u542f\u52a8\u4efb\u52a1\u53ca\u542f\u52a8\u94fe\u8def\u4efb\u52a1\u7f16\u6392</li> <li>\u9996\u9875\u4f18\u5316\uff1a\u6570\u636e\u4f7f\u7528\u7f13\u5b58\uff0cxml \u4f18\u5316\u6216\u8005\u9884\u52a0\u8f7d</li> <li>\u540e\u53f0\u4efb\u52a1\u4f18\u5316: \u51cf\u5c11\u540e\u53f0\u7ebf\u7a0b\u4e0d\u5fc5\u8981\u4efb\u52a1\uff0c\u7ebf\u7a0b\u6536\u655b\uff0cgc \u6291\u5236</li> </ul> <p></p>"},{"location":"news/2024/news-2024-03/","title":"Android \u6027\u80fd\u4f18\u5316\u6280\u672f\u6708\u62a5 | 2024 \u5e74 3 \u6708","text":"<p>\u6bcf\u4e2a\u6708\u90fd\u4f1a\u6709\u4e00\u4e9b Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u53d1\u5e03\uff0c\u7136\u800c\uff0c\u788e\u7247\u5316\u9605\u8bfb\u4f7f\u5f97\u8fd9\u4e9b\u77e5\u8bc6\u96be\u4ee5\u5f62\u6210\u5b8c\u6574\u4f53\u7cfb\uff0c\u4e14\u5bb9\u6613\u88ab\u9057\u5fd8\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4f7f\u7528\u6280\u672f\u6708\u62a5\u7684\u5f62\u5f0f\uff0c\u603b\u7ed3\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u5185\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u3002</p> <p>\u6708\u62a5\u7684\u4e3b\u8981\u5185\u5bb9\u5305\u62ec\uff1a\u6574\u7406\u5c55\u793a\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u6240\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u9886\u57df\u7684\u6700\u65b0\u6280\u672f\u52a8\u6001\u3001\u7cbe\u9009\u535a\u5ba2\uff0c\u7cbe\u9009\u89c6\u9891\u7b49\u5185\u5bb9\u3002</p>"},{"location":"news/2024/news-2024-03/#_1","title":"\u6700\u65b0\u52a8\u6001","text":""},{"location":"news/2024/news-2024-03/#android","title":"\u300aAndroid\u6027\u80fd\u4f18\u5316\u5165\u95e8\u4e0e\u5b9e\u6218\u300b\u5df2\u4e0a\u67b6","text":"<p>Android\u6027\u80fd\u4f18\u5316\u5165\u95e8\u4e0e\u5b9e\u6218\u300b\u5df2\u4e0a\u67b6, \u4e66\u7c4d\u5185\u5bb9\u4e3b\u8981\u5305\u62ec\u300c\u5e02\u573a\u9700\u6c42\u3001\u8ba4\u8bc6\u6027\u80fd\u4f18\u5316/\u6d4b\u8bd5\u3001\u4e13\u9879\u4f18\u5316\u300d\u4e09\u90e8\u5206\uff0c\u5206\u522b\u4ecb\u7ecd\uff1a</p> <ul> <li>\u4e0d\u540c\u7ea7\u522b\u5b89\u5353\u9700\u8981\u5177\u5907\u7684\u77e5\u8bc6\u70b9\u3001\u4f18\u79c0\u7684\u5f00\u53d1\u8005\u7d20\u8d28\u662f\u4ec0\u4e48</li> <li>\u6027\u80fd\u4f18\u5316\u548c\u6027\u80fd\u6d4b\u8bd5\u7684\u65b9\u6cd5\u8bba</li> <li>\u5185\u5b58/\u5361\u987f/\u542f\u52a8\u4f18\u5316\u7684\u7ebf\u4e0a\u7ebf\u4e0b\u4f18\u5316\u65b9\u5f0f\u7b49</li> </ul> <p></p>"},{"location":"news/2024/news-2024-03/#_2","title":"\u7cbe\u9009\u535a\u5ba2","text":""},{"location":"news/2024/news-2024-03/#32-64","title":"32 \u4f4d\u4e0e 64 \u4f4d\u5230\u5e95\u6709\u4ec0\u4e48\u533a\u522b?","text":"<p>\u5927\u5bb6\u90fd\u77e5\u9053 32 \u4f4d\u5e94\u7528\u865a\u62df\u5185\u5b58\u5360\u7528\u6700\u591a\u662f4G\uff0c\u800c 64 \u4f4d\u5e94\u7528\u865a\u62df\u5185\u5b58\u5360\u7528\u6700\u591a\u53ef\u8fbe 256TB\u3002\u90a3\u4e48 32 \u4f4d CPU \u4e0e 64 \u4f4d CPU \u662f\u5982\u4f55\u5f71\u54cd\u5e94\u7528\u865a\u62df\u5185\u5b58\u4e0a\u9650\u7684\u5462\uff1f</p> <p>CPU \u548c\u5185\u5b58\u4ee5\u53ca\u5176\u4ed6\u8bbe\u5907\u4e4b\u95f4\uff0c\u9700\u8981\u901a\u4fe1\uff0c\u56e0\u6b64\u6211\u4eec\u7528\u4e00\u79cd\u7279\u6b8a\u7684\u8bbe\u5907\u8fdb\u884c\u63a7\u5236\uff0c\u5c31\u662f\u603b\u7ebf\u3002\u603b\u7ebf\u5206\u6210 3 \u79cd\uff1a</p> <ul> <li>\u5730\u5740\u603b\u7ebf\uff0c\u4e13\u95e8\u7528\u6765\u6307\u5b9a CPU \u5c06\u8981\u64cd\u4f5c\u7684\u5185\u5b58\u5730\u5740</li> <li>\u6570\u636e\u603b\u7ebf\uff0c\u7528\u6765\u8bfb\u5199\u5185\u5b58\u4e2d\u7684\u6570\u636e</li> <li>\u63a7\u5236\u603b\u7ebf\uff0c\u7528\u6765\u53d1\u9001\u548c\u63a5\u6536\u5173\u952e\u4fe1\u53f7\uff0c\u6bd4\u5982\u4e2d\u65ad\u4fe1\u53f7\uff0c\u8fd8\u6709\u8bbe\u5907\u590d\u4f4d\u3001\u5c31\u7eea\u7b49\u4fe1\u53f7\uff0c\u90fd\u662f\u901a\u8fc7\u63a7\u5236\u603b\u7ebf\u4f20\u8f93\u3002CPU \u9700\u8981\u5bf9\u8fd9\u4e9b\u4fe1\u53f7\u8fdb\u884c\u54cd\u5e94\uff0c\u8fd9\u4e5f\u9700\u8981\u63a7\u5236\u603b\u7ebf\u3002</li> </ul> <p>32\u4f4dCPU\u548c64\u4f4dCPU\u7684\u533a\u522b\u4e4b\u4e00\u5c31\u662f\uff0cCPU \u7684\u4f4d\u5bbd\u51b3\u5b9a\u80fd\u63a7\u5236\u7684\u603b\u7ebf\u6839\u6570\uff0c\u800c\u603b\u7ebf\u7684\u6839\u6570\u51b3\u5b9a\u5bfb\u5740\u80fd\u529b\u300232\u4f4d\u6700\u5927\u63a7\u5236\u7684\u603b\u7ebf\u4e3a32\u6839\uff0c\u6700\u5927\u5bfb\u5740\u80fd\u529b\u662f4G\uff0c64\u4f4d\u6700\u5927\u63a7\u5236\u7684\u603b\u7ebf\u4e3a64\u6839\uff0c\u6700\u5927\u5bfb\u5740\u80fd\u529b\u662f256TB\u3002</p> <p></p>"},{"location":"news/2024/news-2024-03/#_3","title":"\u4e3a\u4ec0\u4e48\u8981\u6709\u865a\u62df\u5185\u5b58\uff1f","text":"<p>\u4e3a\u4e86\u5728\u591a\u8fdb\u7a0b\u73af\u5883\u4e0b\uff0c\u4f7f\u5f97\u8fdb\u7a0b\u4e4b\u95f4\u7684\u5185\u5b58\u5730\u5740\u4e0d\u53d7\u5f71\u54cd\uff0c\u76f8\u4e92\u9694\u79bb\uff0c\u4e8e\u662f\u64cd\u4f5c\u7cfb\u7edf\u5c31\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u72ec\u7acb\u5206\u914d\u4e00\u5957\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u6bcf\u4e2a\u7a0b\u5e8f\u53ea\u5173\u5fc3\u81ea\u5df1\u7684\u865a\u62df\u5730\u5740\u5c31\u53ef\u4ee5\uff0c\u5b9e\u9645\u4e0a\u5927\u5bb6\u7684\u865a\u62df\u5730\u5740\u90fd\u662f\u4e00\u6837\u7684\uff0c\u4f46\u5206\u5e03\u5230\u7269\u7406\u5730\u5740\u5185\u5b58\u662f\u4e0d\u4e00\u6837\u7684\u3002\u4f5c\u4e3a\u7a0b\u5e8f\uff0c\u4e5f\u4e0d\u7528\u5173\u5fc3\u7269\u7406\u5730\u5740\u7684\u4e8b\u60c5\u3002</p> <p>\u90a3\u65e2\u7136\u6709\u4e86\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u90a3\u5fc5\u7136\u8981\u628a\u865a\u62df\u5730\u5740\u300c\u6620\u5c04\u300d\u5230\u7269\u7406\u5730\u5740\uff0c\u8fd9\u4e2a\u4e8b\u60c5\u901a\u5e38\u7531\u64cd\u4f5c\u7cfb\u7edf\u6765\u7ef4\u62a4\u3002\u90a3\u4e48\u5bf9\u4e8e\u865a\u62df\u5730\u5740\u4e0e\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u53ef\u4ee5\u6709\u5206\u6bb5\u548c\u5206\u9875\u7684\u65b9\u5f0f\uff0c\u540c\u65f6\u4e24\u8005\u7ed3\u5408\u90fd\u662f\u53ef\u4ee5\u7684\u3002</p> <p>\u5185\u5b58\u5206\u6bb5\u662f\u6839\u636e\u7a0b\u5e8f\u7684\u903b\u8f91\u89d2\u5ea6\uff0c\u5206\u6210\u4e86\u6808\u6bb5\u3001\u5806\u6bb5\u3001\u6570\u636e\u6bb5\u3001\u4ee3\u7801\u6bb5\u7b49\uff0c\u8fd9\u6837\u53ef\u4ee5\u5206\u79bb\u51fa\u4e0d\u540c\u5c5e\u6027\u7684\u6bb5\uff0c\u540c\u65f6\u662f\u4e00\u5757\u8fde\u7eed\u7684\u7a7a\u95f4\u3002\u4f46\u662f\u6bcf\u4e2a\u6bb5\u7684\u5927\u5c0f\u90fd\u4e0d\u662f\u7edf\u4e00\u7684\uff0c\u8fd9\u5c31\u4f1a\u5bfc\u81f4\u5916\u90e8\u5185\u5b58\u788e\u7247\u548c\u5185\u5b58\u4ea4\u6362\u6548\u7387\u4f4e\u7684\u95ee\u9898\u3002</p> <p>\u4e8e\u662f\uff0c\u5c31\u51fa\u73b0\u4e86\u5185\u5b58\u5206\u9875\uff0c\u628a\u865a\u62df\u7a7a\u95f4\u548c\u7269\u7406\u7a7a\u95f4\u5206\u6210\u5927\u5c0f\u56fa\u5b9a\u7684\u9875\uff0c\u5982\u5728 Linux \u7cfb\u7edf\u4e2d\uff0c\u6bcf\u4e00\u9875\u7684\u5927\u5c0f\u4e3a 4KB\u3002\u7531\u4e8e\u5206\u4e86\u9875\u540e\uff0c\u5c31\u4e0d\u4f1a\u4ea7\u751f\u7ec6\u5c0f\u7684\u5185\u5b58\u788e\u7247\uff0c\u89e3\u51b3\u4e86\u5185\u5b58\u5206\u6bb5\u7684\u5916\u90e8\u5185\u5b58\u788e\u7247\u95ee\u9898\u3002\u540c\u65f6\u5728\u5185\u5b58\u4ea4\u6362\u7684\u65f6\u5019\uff0c\u5199\u5165\u786c\u76d8\u4e5f\u5c31\u4e00\u4e2a\u9875\u6216\u51e0\u4e2a\u9875\uff0c\u8fd9\u5c31\u5927\u5927\u63d0\u9ad8\u4e86\u5185\u5b58\u4ea4\u6362\u7684\u6548\u7387\u3002\u518d\u6765\uff0c\u4e3a\u4e86\u89e3\u51b3\u7b80\u5355\u5206\u9875\u4ea7\u751f\u7684\u9875\u8868\u8fc7\u5927\u7684\u95ee\u9898\uff0c\u5c31\u6709\u4e86\u591a\u7ea7\u9875\u8868\u3002</p> <p>Linux \u7cfb\u7edf\u4e3b\u8981\u91c7\u7528\u4e86\u5206\u9875\u7ba1\u7406\uff0c\u4f46\u662f\u7531\u4e8e Intel \u5904\u7406\u5668\u7684\u53d1\u5c55\u53f2\uff0cLinux \u7cfb\u7edf\u65e0\u6cd5\u907f\u514d\u5206\u6bb5\u7ba1\u7406\u3002\u4e8e\u662f Linux \u5c31\u628a\u6240\u6709\u6bb5\u7684\u57fa\u5730\u5740\u8bbe\u4e3a 0\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u6240\u6709\u7a0b\u5e8f\u7684\u5730\u5740\u7a7a\u95f4\u90fd\u662f\u7ebf\u6027\u5730\u5740\u7a7a\u95f4\uff08\u865a\u62df\u5730\u5740\uff09\uff0c\u76f8\u5f53\u4e8e\u5c4f\u853d\u4e86 CPU \u903b\u8f91\u5730\u5740\u7684\u6982\u5ff5\uff0c\u6240\u4ee5\u6bb5\u53ea\u88ab\u7528\u4e8e\u8bbf\u95ee\u63a7\u5236\u548c\u5185\u5b58\u4fdd\u62a4\u3002\u53e6\u5916\uff0cLinux \u7cfb\u7edf\u4e2d\u865a\u62df\u7a7a\u95f4\u5206\u5e03\u53ef\u5206\u4e3a\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u4e24\u90e8\u5206\uff0c\u5176\u4e2d\u7528\u6237\u6001\u7684\u5206\u5e03\uff1a\u4ee3\u7801\u6bb5\u3001\u5168\u5c40\u53d8\u91cf\u3001BSS\u3001\u51fd\u6570\u6808\u3001\u5806\u5185\u5b58\u3001\u6620\u5c04\u533a\u3002</p>"},{"location":"news/2024/news-2024-03/#aosp","title":"\u7ecf\u9a8c | \u5411AOSP\u8d21\u732e\u865a\u62df\u673a\u7684\u4f18\u5316","text":"<p>\u672c\u6587\u4e3b\u8981\u8bb2\u8ff0\u4e86\u4f5c\u8005\u5411AOSP\uff08Android Open Source Project\uff09\u8d21\u732e\u865a\u62df\u673a\u4f18\u5316\u7684\u7ecf\u9a8c\u3002</p> <p>\u6587\u7ae0\u8be6\u7ec6\u8bb0\u5f55\u4e86\u4ece\u6700\u521d\u7684\u60f3\u6cd5\u5230\u6700\u7ec8\u4ee3\u7801\u63d0\u4ea4\u7684\u5168\u8fc7\u7a0b\uff0c\u5305\u62ec\u786e\u5b9a\u65b9\u6848\u3001\u4e0b\u8f7d\u4ee3\u7801\u3001\u914d\u7f6e\u73af\u5883\u3001\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u6d4b\u7b97\u6548\u679c\u3001\u4f18\u5316\u4ee3\u7801\u683c\u5f0f\u548c\u6027\u80fd\u3001\u63d0\u4ea4\u4ee5\u53ca\u56de\u64a4\u7b49\u6b65\u9aa4\u3002</p> <p>\u4f5c\u8005\u5206\u4eab\u4e86\u81ea\u5df1\u5728\u8fd9\u4e00\u8fc7\u7a0b\u4e2d\u7684\u5fc3\u5f97\u4f53\u4f1a\uff0c\u7279\u522b\u662f\u5728ART\uff08Android Runtime\uff09\u865a\u62df\u673a\u5185\u90e8\u8fdb\u884c\u7cfb\u7edf\u6027\u5f00\u53d1\u7684\u7ecf\u9a8c\u3002\u6587\u7ae0\u4e5f\u63d0\u5230\u4e86\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u6311\u6218\u548c\u89e3\u51b3\u65b9\u6848\uff0c\u4ee5\u53ca\u4e0eGoogle\u5de5\u7a0b\u5e08\u7684\u534f\u4f5c\u7ecf\u5386\u3002</p> <p>\u603b\u5f97\u6765\u8bf4\uff0c\u770b\u4e0d\u592a\u61c2\uff0c\u53ea\u80fd\u8bf4\u4f5c\u8005\u592a\u725b\u4e86\u3002</p>"},{"location":"news/2024/news-2024-03/#_4","title":"\u7cbe\u9009\u89c6\u9891","text":""},{"location":"news/2024/news-2024-03/#b","title":"\u793e\u533a\u8bf4\uff5c\u6211\u5728 B \u7ad9\u505a\u5de5\u7a0b\u6548\u80fd","text":"<p>\u672c\u89c6\u9891\u4ece\u54d4\u54e9\u54d4\u54e9\u5f53\u524d\u7684\u5de5\u7a0b\u6548\u80fd\u4f53\u7cfb\u51fa\u53d1\uff0c\u4ecb\u7ecd\u54d4\u54e9\u54d4\u54e9\u5982\u4f55\u5728 MonoRepo \u4e2d\u7684\u7f16\u8bd1\u6784\u5efa\u76f8\u5173\u7684\u4f18\u5316\uff0c\u4ee5\u53ca\u5bf9\u4e8e\u5de5\u7a0b\u7ed3\u6784\u7684\u4e00\u7cfb\u5217\u7406\u89e3\u3002</p> <p></p> <p></p>"},{"location":"news/2024/news-2024-03/#_5","title":"\u793e\u533a\u8bf4\uff5c\u5feb\u624b\u7684\u79d2\u7ea7\u7f16\u8bd1\u63a2\u7d22\u4e4b\u8def","text":"<p>\u5728\u5feb\u624b\u8fd9\u7c7b\u8d85\u5927\u578bAndroid\u9879\u76ee\u4e2d\uff0c\u5e38\u89c4\u7684\u7f16\u8bd1\u4f18\u5316\u624b\u6bb5\u5df2\u7ecf\u65e0\u6cd5\u89e3\u51b3\u6784\u5efa\u52a3\u5316\u95ee\u9898\u3002\u672c\u89c6\u9891\u4ecb\u7ecd\u4e86\u5feb\u624b\u56e2\u961f\u662f\u5982\u4f55\u5728\u8d85\u5927\u578b\u9879\u76ee\u4e2d\u5b9e\u73b0\u79d2\u7ea7\u7f16\u8bd1\u7684\u3002</p> <p></p> <p></p>"},{"location":"news/2024/news-2024-04/","title":"Android \u6027\u80fd\u4f18\u5316\u6280\u672f\u6708\u62a5 | 2024 \u5e74 4 \u6708","text":"<p>\u6bcf\u4e2a\u6708\u90fd\u4f1a\u6709\u4e00\u4e9b Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u53d1\u5e03\uff0c\u7136\u800c\uff0c\u788e\u7247\u5316\u9605\u8bfb\u4f7f\u5f97\u8fd9\u4e9b\u77e5\u8bc6\u96be\u4ee5\u5f62\u6210\u5b8c\u6574\u4f53\u7cfb\uff0c\u4e14\u5bb9\u6613\u88ab\u9057\u5fd8\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4f7f\u7528\u6280\u672f\u6708\u62a5\u7684\u5f62\u5f0f\uff0c\u603b\u7ed3\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u5185\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u3002</p> <p>\u6708\u62a5\u7684\u4e3b\u8981\u5185\u5bb9\u5305\u62ec\uff1a\u6574\u7406\u5c55\u793a\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u6240\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u9886\u57df\u7684\u6700\u65b0\u6280\u672f\u52a8\u6001\u3001\u7cbe\u9009\u535a\u5ba2\uff0c\u7cbe\u9009\u89c6\u9891\u7b49\u5185\u5bb9\u3002</p>"},{"location":"news/2024/news-2024-04/#_1","title":"\u7cbe\u9009\u535a\u5ba2","text":""},{"location":"news/2024/news-2024-04/#android","title":"Android \u79bb\u7ebf\u52a0\u8f7d\u843d\u5730","text":"<p>\u5728\u4f7f\u7528WebView\u65f6\uff0c\u4f1a\u6709\u4e00\u4e2a\u8001\u751f\u5e38\u8c08\u7684\u8bdd\u9898\u2014\u2014\u201cWebView\u52a0\u8f7d\u4f18\u5316\u201d\u3002\u90a3WebView\u52a0\u8f7d\u4f18\u5316\uff0c\u4e00\u822c\u6709\u51e0\u4e2a\u65b9\u5411\uff1aWebView\u7684\u9884\u521b\u5efa\u548c\u590d\u7528\uff0cWebView\u4ee3\u7406\u8bf7\u6c42\uff0cWebView\u7684\u79bb\u7ebf\u52a0\u8f7d</p> <p>\u79bb\u7ebf\u52a0\u8f7d\u7684\u539f\u7406\u662f\uff0c\u62e6\u622aWebView\u7684\u8bf7\u6c42\uff0c\u8f6c\u800c\u5728\u7aef\u5185\u6784\u9020\u5bf9\u5e94\u7684\u54cd\u5e94\u6765\u8fdb\u884c\u8fd4\u56de\u3002\u6240\u4ee5\uff0c\u79bb\u7ebf\u52a0\u8f7d\u8282\u7701\u7684\u662f\u8bf7\u6c42\u8d44\u6e90\u7684\u8017\u65f6\uff0c\u52a0\u901f\u9875\u9762\u7684\u6e32\u67d3\uff0c\u4e3b\u8981\u901a\u8fc7<code>shouldInterceptRequest</code>\u65b9\u6cd5\u6765\u5b9e\u73b0\uff1a</p> <pre><code>public class LocalH5WebHook extends SimpleWebHook {\n     //... \u7701\u7565\u5176\u4ed6\u4ee3\u7801\n     public WebResourceResponse shouldInterceptRequest(WebView view, WebResourceRequest request) {\n        WebResourceResponse webResourceResponse = fetchResource(request);\n        if (webResourceResponse != null) {\n            return webResourceResponse;\n        }\n        return super.shouldInterceptRequest(view, request);\n    }\n}\n</code></pre> <p></p>"},{"location":"news/2024/news-2024-04/#h5-","title":"\u4f4e\u6210\u672c\u7684 H5 \u79d2\u5f00\u65b9\u6848-\u63a5\u53e3\u9884\u8bf7\u6c42","text":"<p>\u5f53\u6211\u4eec\u6253\u5f00\u5728 APP \u5185\u7684 H5 \u9875\u9762\u65f6\uff0c\u4e00\u822c\u4f1a\u7ecf\u8fc7\u539f\u751f\u5207\u9875\u9762\u52a8\u753b\u3001\u521b\u5efa\u65b0\u9875\u9762\u3001\u52a0\u8f7d webview\u3001\u52a0\u8f7d HTML\u3001\u8bf7\u6c42\u9759\u6001\u8d44\u6e90\u5e76\u89e3\u6790\u3001\u83b7\u53d6\u9996\u5c4f\u6570\u636e\u3001\u6e32\u67d3\u5185\u5bb9\u3001\u4e0b\u8f7d\u56fe\u7247\u7b49\u6b65\u9aa4\u3002</p> <p>\u5176\u5b9e\u5728\u52a0\u8f7d\u7684\u540c\u65f6\uff0c\u53ef\u4ee5\u5229\u7528 APP \u5728\u5e2e\u52a9 H5 \u83b7\u53d6\u9996\u5c4f\u6570\u636e\uff0c\u8fd9\u6837\u5728 H5 \u9875\u9762\u52a0\u8f7d\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 APP \u5df2\u8bf7\u6c42\u7684\u9996\u5c4f\u6570\u636e\u8fdb\u884c\u6e32\u67d3\uff0c\u8fd9\u6837\u5c31\u8282\u7701\u4e86\u83b7\u53d6\u9996\u5c4f\u6570\u636e\u7684\u65f6\u95f4\u3002\u9996\u5c4f\u6570\u636e\u63a5\u53e3\u8d8a\u6162\uff0c\u8be5\u65b9\u6848\u7684\u4ef7\u503c\u5c31\u8d8a\u5927\u3002</p> <p></p> <ul> <li>\u65e2\u7136\u6211\u4eec\u8981\u5229\u7528 APP \u6765\u5e2e\u52a9 H5 \u83b7\u53d6\u9996\u5c4f\u6570\u636e\uff0c\u800c\u6211\u4eec\u7684 H5 \u9875\u9762\u4e5f\u4e0d\u6b62\u4e00\u4e2a\uff0c\u5e76\u4e14\u6bcf\u4e2a\u9875\u9762\u7684\u53c2\u6570\u90fd\u4e0d\u4e00\u6837\u3002 \u90a3\u7b2c\u4e00\u4e2a\u8981\u89e3\u51b3\u7684\u95ee\u9898\u5c31\u662f\u600e\u4e48\u544a\u8bc9 APP \u5728\u6253\u5f00\u90a3\u4e9b\u9875\u9762\u65f6\u9700\u8981\u540c\u6b65\u8bf7\u6c42\u90a3\u4e9b\u63a5\u53e3\uff0c\u8fd9\u4e9b\u63a5\u53e3\u7684\u5165\u53c2\u662f\u4ec0\u4e48\u6837\u7684\uff1f</li> <li>\u5f53 APP \u8bf7\u6c42\u5b8c\u6210\u540e\uff0c\u8981\u89e3\u51b3\u7684\u7b2c\u4e8c\u4e2a\u95ee\u9898\u662f\u600e\u4e48\u628a\u8bf7\u6c42\u7ed3\u679c\u53ca\u65f6\u901a\u77e5\u7ed9 H5 \u9875\u9762\uff0c\u5e76\u4e14\u9632\u6b62 H5 \u9875\u9762\u81ea\u8eab\u53d1\u8d77\u91cd\u590d\u8bf7\u6c42\uff0c\u589e\u52a0\u670d\u52a1\u7aef\u8d1f\u62c5\uff1f</li> <li>\u7b2c\u4e09\u4e2a\u8981\u89e3\u51b3\u7684\u662f\u5982\u679c H5 \u4fee\u6539\u4e86\u4ee3\u7801\uff0c\u66f4\u65b0\u4e86\u53c2\u6570\uff0c\u800c\u544a\u77e5 APP \u5165\u53c2\u7684\u914d\u7f6e\u8fd8\u672a\u66f4\u65b0\uff0c\u600e\u4e48\u907f\u514d\u4f7f\u7528\u65e7\u914d\u7f6e\u8bf7\u6c42\u7684\u7ed3\u679c\uff1f</li> </ul> <p></p> <p>\u5728\u4f7f\u7528\u63a5\u53e3\u9884\u8bf7\u6c42\u540e\uff0c\u7edd\u5927\u90e8\u5206\u9875\u9762\u6709 200~600ms \u7684\u63d0\u5347\uff0c\u4e3b\u8981\u4f7f\u7528\u7684 CMS \u6d3b\u52a8\u9875\uff0c\u5b89\u5353\u63d0\u5347\u4e86 27%\uff0ciOS \u63d0\u5347\u4e86 43%\uff0c\u5e73\u5747 FMP \u5728 900ms \u5de6\u53f3(FMP \u6307\u7684\u662f\u4ece\u7528\u6237\u5728 APP \u70b9\u51fb H5 \u94fe\u63a5\u5230\u4e3b\u5185\u5bb9\u6e32\u67d3\u5b8c\u6210\u7684\u65f6\u95f4)\u3002</p>"},{"location":"news/2024/news-2024-04/#agp80-transform","title":"AGP8.0 \u65f6\u4ee3\u7684 Transform \u5b9e\u8df5","text":"<p>\u4f17\u6240\u5468\u77e5, Transform \u63a5\u53e3\u5728 AGP8.0 \u4e2d\u5df2\u7ecf\u88ab\u79fb\u9664\u4e86, \u800c\u4ee5\u5f80\u7684\u5927\u91cf\u5de5\u7a0b\u5b9e\u8df5\u90fd\u9700\u8981\u4f7f\u7528\u8be5\u63a5\u53e3\u7ed3\u5408 ASM \u5bf9\u5b57\u8282\u7801\u8fdb\u884c\u64cd\u4f5c, \u4f8b\u5982: \u4ee3\u7801\u63d2\u6869, \u4ee3\u7801\u66ff\u6362\u7b49.\u90a3\u4e48\u5728 AGP 8.0 \u4e2d\u6211\u4eec\u8be5\u5982\u4f55\u9002\u914d\u5462\uff1f</p> <p>Instrumentation \u4f5c\u4e3a Google \u9996\u63a8\u7684 Transform \u66ff\u4ee3\u65b9\u6848, \u53ea\u9700\u8981\u5b9e\u73b0 AsmClassVisitorFactory \u63a5\u53e3\u5373\u5b9e\u73b0\u5bf9\u5b57\u8282\u7801\u5904\u7406.</p> <p></p> <p>\u76f8\u8f83\u4e8e Transform \u5904\u7406\u6d41\u7a0b, Instrumentation \u6d41\u7a0b\u514d\u53bb\u5bf9\u4e2d\u95f4\u4ea7\u7269\u7684\u8bfb\u5199, \u5e76\u4e14\u4e00\u5b9a\u662f\u4ee5 Jar/classes \u6587\u4ef6\u4e3a\u5355\u4f4d\u7684\u589e\u91cf\u5904\u7406, \u4f7f\u5f97\u5168\u91cf\u7f16\u8bd1\u548c\u589e\u91cf\u7f16\u8bd1\u901f\u5ea6\u90fd\u6709\u8f83\u5927\u7684\u63d0\u5347.</p> <p>\u901a\u8fc7 Instrumentation \u786e\u5b9e\u80fd\u5f88\u65b9\u4fbf\u7684\u5b9e\u73b0\u63d2\u6869\u4e0e\u66ff\u6362\u903b\u8f91, \u4f46\u662f\u7406\u60f3\u5f88\u4e30\u6ee1\uff0c\u73b0\u5b9e\u5f88\u9aa8\u611f, \u5f88\u591a\u65f6\u5019\u5e76\u4e0d\u80fd\u6ee1\u8db3\u9700\u6c42, \u4f8b\u5982:</p> <ul> <li>\u5148\u5206\u6790\u518d\u64cd\u4f5c: \u5728\u5b9e\u73b0 hook \u6846\u67b6\u65f6, \u901a\u5e38\u9700\u8981\u5148\u5bf9\u5de5\u7a0b\u4e2d\u7684\u6240\u6709 class \u8fdb\u884c\u4e00\u6b21\u904d\u5386\u5206\u6790\u540e, \u518d\u5bf9\u76f8\u5173\u7684 class \u6587\u4ef6\u8fdb\u884c\u5b57\u8282\u7801\u64cd\u4f5c.</li> <li>\u8f93\u51fa\u6587\u4ef6\u4ea7\u7269: \u6bd4\u5982\u5728\u63d2\u6869\u65f6\u5728\u8c03\u7528 Trace#beginSection \u65f6\u4f20\u5165\u4e86\u5b8c\u6574\u7684\u7c7b\u540d\u4e0e\u65b9\u6cd5\u540d, \u8fd9\u5f80\u5f80\u4f1a\u5bfc\u81f4\u751f\u6210\u7684 trace \u6587\u4ef6\u8fc7\u5927. \u5de5\u7a0b\u5b9e\u8df5\u4e2d\u4e00\u822c\u4f1a\u751f\u6210 methodId \u4e0e\u7c7b\u540d#\u65b9\u6cd5\u540d\u7684\u6620\u5c04, \u5728 Trace#beginSection \u8c03\u7528\u65f6\u4ec5\u4ec5\u4f20\u5165 methodId, \u8fd9\u65f6\u5c31\u9700\u8981\u5728\u63d2\u6869\u7ed3\u675f\u540e\u4fdd\u5b58\u5f53\u524d\u7684 methodId \u4e0e\u7c7b\u540d#\u65b9\u6cd5\u540d\u7684\u6620\u5c04\u6587\u4ef6\u3002</li> </ul> <p>\u8fd9\u79cd\u60c5\u51b5\u5c31\u9700\u8981\u901a\u8fc7 Artifacts API \u5904\u7406\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>variant.artifacts.forScope(ScopedArtifacts.Scope.ALL)\n    .use(taskProvider)\n    .toTransform(\n        ScopedArtifact.CLASSES,\n        ModifyClassesTask::allJars,\n        ModifyClassesTask::allDirectories,\n        ModifyClassesTask::output,\n    )\n</code></pre>"},{"location":"news/2024/news-2024-04/#gcc-llvm","title":"GCC \u4e0e LLVM \u6709\u4ec0\u4e48\u533a\u522b?","text":"<p>\u8be6\u89e3\u4e09\u5927\u7f16\u8bd1\u5668\uff1agcc\u3001llvm \u548c clang</p> <p>\u3010\u7f16\u8bd1\u539f\u7406\u3011GCC/Clang/LLVM\u7684\u533a\u522b\u4e0e\u8054\u7cfb</p> <p>GCC\uff08GNU Compiler Collection\uff0cGNU \u7f16\u8bd1\u5668\u5957\u88c5\uff09\uff0c\u662f\u4e00\u5957\u7531 GNU \u5f00\u53d1\u7684\u7f16\u7a0b\u8bed\u8a00\u7f16\u8bd1\u5668\u3002GCC \u53ef\u4ee5\u5206\u4e3a\u524d\u7aef\uff0c\u4f18\u5316\u5668\uff0c\u540e\u7aef\u4e09\u90e8\u5206\uff1a</p> <ul> <li>\u524d\u7aef\uff1a\u89e3\u6790\u6e90\u4ee3\u7801\u3001\u68c0\u67e5\u8bed\u6cd5\u9519\u8bef\u3001\u7ffb\u8bd1\u4e3a\u62bd\u8c61\u7684\u8bed\u6cd5\u6811</li> <li>\u4f18\u5316\u5668\uff1a\u5c06\u62bd\u8c61\u8bed\u6cd5\u6811\u7ffb\u8bd1\u751f\u6210\u4e2d\u95f4\u4ee3\u7801\uff0c\u5e76\u5bf9\u4e2d\u95f4\u4ee3\u7801\u8fdb\u884c\u4f18\u5316</li> <li>\u540e\u7aef\uff1a\u5c06\u4f18\u5316\u5668\u4f18\u5316\u540e\u7684\u4e2d\u95f4\u4ee3\u7801\u8f6c\u6362\u4e3a\u76ee\u6807\u673a\u5668\u7684\u4ee3\u7801\uff0c\u901a\u7528\u529f\u80fd\u5305\u62ec\u6307\u4ee4\u9009\u62e9\u3001\u5bc4\u5b58\u5668\u5206\u914d\u548c\u6307\u4ee4\u8c03\u5ea6</li> </ul> <p></p> <p>\u901a\u8fc7\u4e0a\u8ff0\u67b6\u6784\uff0cGCC \u65b0\u589e\u652f\u6301\u8bed\u8a00\u53ea\u9700\u8981\u65b0\u589e\u4e00\u4e2a\u524d\u7aef\uff0c\u65b0\u589e\u652f\u6301\u76ee\u6807\u673a\u5668\u53ea\u9700\u8981\u65b0\u589e\u4e00\u4e2a\u540e\u7aef\u3002\u82f9\u679c\u516c\u53f8\u4e00\u76f4\u4f7f\u7528 GCC \u4f5c\u4e3a\u5b98\u65b9\u7684\u7f16\u8bd1\u5668\u3002GCC \u4f5c\u4e3a\u4e00\u6b3e\u5f00\u6e90\u7684\u7f16\u8bd1\u5668\uff0c\u4e00\u76f4\u505a\u5f97\u4e0d\u9519\uff0c\u4f46 Apple \u5bf9\u7f16\u8bd1\u5de5\u5177\u4f1a\u63d0\u51fa\u66f4\u9ad8\u7684\u8981\u6c42\u3002\u539f\u56e0\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e24\u70b9\uff1a</p> <ul> <li>Apple \u5bf9 Objective-C \u8bed\u8a00\uff08\u5305\u62ec\u540e\u6765\u5bf9 C \u8bed\u8a00\uff09\u65b0\u589e\u5f88\u591a\u7279\u6027\uff0cGCC \u5e76\u6ca1\u6709\u652f\u6301\uff0c\u5bfc\u81f4\u51fa\u73b0\u7248\u672c\u5206\u53c9</li> <li>GCC \u7684\u4e09\u6bb5\u5f0f\u6a21\u5757\u5fc5\u987b\u914d\u5957\u4f7f\u7528\uff0c\u5f88\u96be\u505a\u5230\u90e8\u5206\u91cd\u7528</li> </ul> <p>\u56e0\u6b64 Apple \u63a8\u51fa\u4e86 LLVM\uff0cLLVM\u662f\u4e09\u6bb5\u5f0f\u7f16\u8bd1\u5668\u4f18\u5316\u5668+\u540e\u7aef\u7684SDK\u96c6\u5408\uff0c\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u5bf9\u5916\u63a5\u53e3\u4f9b\u5f00\u53d1\u8005\u8c03\u7528</p> <p></p> <ul> <li>\u524d\u7aef\uff1a\u652f\u6301\u5404\u79cd\u7ec4\u4ef6\u7684\u524d\u7aef\uff08Clang\u3001llvm-gcc\u3001GHC\uff09\uff0c\u9700\u8981\u9075\u5b88LLVM\u7684\u89c4\u5219\uff0c\u8f93\u51fa\u4e2d\u95f4\u4ee3\u7801LLVM IR</li> <li>\u4f18\u5316\u5668\uff1aLLVM IR\u901a\u8fc7\u4e00\u7cfb\u5217\u5206\u6790\u548c\u4f18\u5316\u4ece\u800c\u6539\u8fdb\u4ee3\u7801\uff0c\u7136\u540e\u8f93\u5165\u4ee3\u7801\u751f\u6210\u5668\u751f\u6210\u76ee\u6807\u673a\u5668\u7801</li> <li>\u540e\u7aef\uff1a\u5c06\u4f18\u5316\u5668\u4f18\u5316\u540e\u7684\u4e2d\u95f4\u4ee3\u7801\u8f6c\u6362\u4e3a\u76ee\u6807\u673a\u5668\u7684\u4ee3\u7801</li> </ul> <p>LLVM \u4e0e\u5176\u5b83\u7f16\u8bd1\u5668\u6700\u5927\u7684\u5dee\u522b\u662f\uff0c\u5b83\u4e0d\u4ec5\u4ec5\u662f Compiler Collection\uff0c\u4e5f\u662f Libraries Collection\u3002LLVM \u4e0d\u4ec5\u4ec5\u662f\u7f16\u8bd1\u5668\uff0c\u4e5f\u662f\u4e00\u4e2a SDK\uff0cLLVM \u63d0\u4f9b\u4e86\u7075\u6d3b\u7684\u4ee3\u7801\u590d\u7528\u80fd\u529b\uff0c\u5c06\u7f16\u8bd1\u540e\u7aef\u7684\u7b97\u6cd5\u5c01\u88c5\u6210\u4e3a\u4e86\u4e00\u4e2a\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\u5e76\u63d0\u4f9b\u5bf9\u5916\u63a5\u53e3\uff0c\u800cGCC\u4f20\u7edf\u7f16\u8bd1\u5668\u8026\u5408\u5f88\u91cd\uff0c\u5f88\u96be\u5c0f\u7c92\u5ea6\u590d\u7528\u4ee3\u7801</p>"},{"location":"news/2024/news-2024-05/","title":"Android \u6027\u80fd\u4f18\u5316\u6280\u672f\u6708\u62a5 | 2024 \u5e74 5 \u6708","text":"<p>\u6bcf\u4e2a\u6708\u90fd\u4f1a\u6709\u4e00\u4e9b Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u53d1\u5e03\uff0c\u7136\u800c\uff0c\u788e\u7247\u5316\u9605\u8bfb\u4f7f\u5f97\u8fd9\u4e9b\u77e5\u8bc6\u96be\u4ee5\u5f62\u6210\u5b8c\u6574\u4f53\u7cfb\uff0c\u4e14\u5bb9\u6613\u88ab\u9057\u5fd8\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4f7f\u7528\u6280\u672f\u6708\u62a5\u7684\u5f62\u5f0f\uff0c\u603b\u7ed3\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u5185\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u4f18\u8d28\u5185\u5bb9\u3002</p> <p>\u6708\u62a5\u7684\u4e3b\u8981\u5185\u5bb9\u5305\u62ec\uff1a\u6574\u7406\u5c55\u793a\u6211\u5728\u6700\u8fd1\u4e00\u4e2a\u6708\u6240\u67e5\u9605\u7684 Android \u6027\u80fd\u4f18\u5316\u9886\u57df\u7684\u6700\u65b0\u6280\u672f\u52a8\u6001\u3001\u7cbe\u9009\u535a\u5ba2\uff0c\u7cbe\u9009\u89c6\u9891\u7b49\u5185\u5bb9\u3002</p>"},{"location":"news/2024/news-2024-05/#_1","title":"\u7cbe\u9009\u535a\u5ba2","text":""},{"location":"news/2024/news-2024-05/#_2","title":"\u652f\u4ed8\u5b9d\u662f\u5982\u4f55\u76d1\u6d4b\u3001\u6cbb\u7406\u8017\u65f6\u7c7b\u95ee\u9898\u7684\uff1f","text":"<p>\u652f\u4ed8\u5b9d\u4ecb\u7ecd\u7aef\u5185\u6027\u80fd\u76d1\u63a7\u4e0e\u6cbb\u7406\u7684\u6587\u7ae0\uff0c\u6bd4\u8f83\u6709\u610f\u601d\u7684\u662f\u652f\u4ed8\u5b9d\u542f\u52a8\u8017\u65f6\u7684\u4f18\u5316\u624b\u6bb5\uff1a\u652f\u4ed8\u5b9d\u9996\u9875\u8d34\u56fe\u6280\u672f\u3002</p> <p>\u9996\u9875\u8d34\u56fe\u7684\u539f\u7406\uff0c\u5c31\u662f\u5e94\u7528\u51b7\u542f\u52a8\u540e\uff0c\u7ed9\u7528\u6237\u5c55\u793a\u4e0a\u4e00\u6b21\u9996\u5c55\u793a\u7684\u5185\u5bb9\uff0c\u5176\u5b9e\u5c31\u662f\u56fe\u7247\uff0c\u8fd9\u4e9b\u56fe\u7247\u8bb0\u5f55\u7740\u5404\u4e2a\u533a\u57df\u7684\u70b9\u51fb\u4e8b\u4ef6\u3002\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u70b9\u51fb\u9875\u9762\u4efb\u4f55\u533a\u57df\u3002\u8fd9\u6837\u5c31\u51cf\u5c11\u4e86\u9875\u9762\u5237\u65b0\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u6781\u5927\u63d0\u5347\u4e86\u51b7\u542f\u52a8\u901f\u5ea6\u3002</p> <p>\u8d34\u56fe\u6280\u672f\u7684\u539f\u7406\u5c31\u662f\u628a\u9996\u9875\u62c6\u6210\u51e0\u4e2a\u90e8\u5206\uff0c\u6bd4\u5982\u56db\u5927\u91d1\u521a\u3001\u4e5d\u5bab\u683c\u3001\u6d88\u606f\u63d0\u9192\u3001\u8170\u5c01\u5e7f\u544a\u3001\u9996\u9875\u63a8\u8350 feed \u6d41\u3002\u5728\u7528\u6237\u4f7f\u7528\u5b8c\u652f\u4ed8\u5b9d\u540e\uff0c\u538b\u540e\u53f0\u7684\u65f6\u673a\uff0c\u628a\u5bf9\u5e94\u533a\u57df\u7684\u56fe\u7247\u622a\u56fe\uff0c\u5e76\u4fdd\u5b58\u3002\u4e0b\u4e00\u6b21\u51b7\u542f\u52a8\u7684\u65f6\u5019\u4f1a\u5224\u65ad\u662f\u5426\u622a\u56fe\u6210\u529f\uff0c\u5982\u679c\u6210\u529f\u5c31\u76f4\u63a5\u8d34\u56fe\u3002</p> <p></p>"},{"location":"news/2024/news-2024-05/#androidsonative","title":"Android\u5d29\u5728so\u91cc\u9762\uff0c\u600e\u4e48\u5b9a\u4f4dNative\u5806\u6808\u5462\uff1f","text":"<p>\u5728Android\u7cfb\u7edf\u4e2d\uff0c\u6211\u4eec\u6709\u65f6\u9700\u8981\u83b7\u53d6Native\u5c42\u7684\u5806\u6808\u4fe1\u606f\uff0c\u4f8b\u5982\u5728\u8fdb\u884c\u6027\u80fd\u5206\u6790\u3001\u95ee\u9898\u5b9a\u4f4d\u548c\u8c03\u8bd5\u7b49\u573a\u666f\u3002</p> <p>Android NDK\u63d0\u4f9b\u4e86unwind.h\u5934\u6587\u4ef6\uff0c\u5176\u4e2d\u5b9a\u4e49\u4e86unwind\u51fd\u6570\uff0c\u53ef\u4ee5\u7528\u4e8e\u83b7\u53d6\u4efb\u610f\u7ebf\u7a0b\u7684\u5806\u6808\u4fe1\u606f\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>#include &lt;unwind.h&gt;\n#include &lt;dlfcn.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct BacktraceState {\n    void** current;\n    void** end;\n};\n\n_Unwind_Reason_Code unwind_callback(struct _Unwind_Context* context, void* arg) {\n    BacktraceState* state = static_cast&lt;BacktraceState*&gt;(arg);\n    uintptr_t pc = _Unwind_GetIP(context);\n    if (pc) {\n        if (state-&gt;current == state-&gt;end) {\n            return _URC_END_OF_STACK;\n        } else {\n            *state-&gt;current++ = reinterpret_cast&lt;void*&gt;(pc);\n        }\n    }\n    return _URC_NO_REASON;\n}\n\nvoid capture_backtrace(void** buffer, int max) {\n    BacktraceState state = {buffer, buffer + max};\n    _Unwind_Backtrace(unwind_callback, &amp;state);\n}\n\nvoid print_backtrace(void** buffer, int count) {\n    for (int idx = 0; idx &lt; count; ++idx) {\n        const void* addr = buffer[idx];\n        const char* symbol = \"\";\n\n        Dl_info info;\n        if (dladdr(addr, &amp;info) &amp;&amp; info.dli_sname) {\n            symbol = info.dli_sname;\n        }\n\n        // \u8ba1\u7b97\u76f8\u5bf9\u5730\u5740\n        void* relative_addr = reinterpret_cast&lt;void*&gt;(reinterpret_cast&lt;uintptr_t&gt;(addr) - reinterpret_cast&lt;uintptr_t&gt;(info.dli_fbase));\n\n        printf(\"%-3d %p %s (relative addr: %p)\\n\", idx, addr, symbol, relative_addr);\n    }\n}\n\nint main() {\n    const int max_frames = 128;\n    void* buffer[max_frames];\n\n    capture_backtrace(buffer, max_frames);\n    print_backtrace(buffer, max_frames);\n\n    return 0;\n}\n</code></pre> <p>_Unwind_Backtrace\u548c_Unwind_GetIP\u51fd\u6570\u662f\u5728libunwind\u5e93\u4e2d\u5b9a\u4e49\u7684\uff0c\u8fd9\u4e2a\u5e93\u662fGNU C Library\uff08glibc\uff09\u7684\u4e00\u90e8\u5206\u3002\u7136\u800c\uff0cAndroid\u7cfb\u7edf\u5e76\u4e0d\u4f7f\u7528glibc\uff0c\u800c\u662f\u4f7f\u7528\u4e00\u4e2a\u66f4\u8f7b\u91cf\u7ea7\u7684C\u5e93\uff0c\u53eb\u505aBionic libc\u3002\u56e0\u6b64\uff0c_Unwind_Backtrace\u548c_Unwind_GetIP\u51fd\u6570\u5728Android\u7cfb\u7edf\u4e2d\u7684\u53ef\u7528\u6027\u53d6\u51b3\u4e8eBionic libc\u7684\u7248\u672c\u548cAndroid\u7cfb\u7edf\u7684\u7248\u672c\u3002</p> <p>\u5728\u65e9\u671f\u7684Android\u7248\u672c\u4e2d\uff08\u4f8b\u5982Android 4.x\uff09\uff0cBionic libc\u5e76\u672a\u5b8c\u5168\u5b9e\u73b0libunwind\u5e93\u7684\u529f\u80fd\uff0c\u56e0\u6b64_Unwind_Backtrace\u548c_Unwind_GetIP\u51fd\u6570\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002\u5728\u8fd9\u4e9b\u7248\u672c\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u9700\u8981\u4f7f\u7528\u5176\u4ed6\u65b9\u6cd5\u6765\u83b7\u53d6\u5806\u6808\u4fe1\u606f\uff0c\u4f8b\u5982\u624b\u52a8\u904d\u5386\u6808\u5e27\u6216\u8005\u4f7f\u7528\u7b2c\u4e09\u65b9\u7684\u5e93\u3002</p> <p>\u4eceAndroid 5.0\uff08Lollipop\uff09\u5f00\u59cb\uff0cBionic libc\u5f00\u59cb\u63d0\u4f9b\u66f4\u5b8c\u6574\u7684libunwind\u5e93\u7684\u652f\u6301\uff0c\u5305\u62ec_Unwind_Backtrace\u548c_Unwind_GetIP\u51fd\u6570\u3002\u56e0\u6b64\uff0c\u5728Android 5.0\u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e24\u4e2a\u51fd\u6570\u6765\u83b7\u53d6\u5806\u6808\u4fe1\u606f\u3002</p>"},{"location":"news/2024/news-2024-05/#_3","title":"\u3010\u601d\u8003\u3011\u5b66\u4e60\u6e90\u7801\u7684\u4e09\u91cd\u5883\u754c","text":"<p>\u672c\u6587\u8bb2\u8ff0\u4e86\u4f5c\u8005\u5728\u5b66\u4e60\u6e90\u7801\u8fc7\u7a0b\u4e2d\u7684\u4e09\u4e2a\u9636\u6bb5\u3002</p> <ul> <li>\u9996\u5148\u662f\u201c\u770b\u5c71\u662f\u5c71\u201d\uff0c\u6307\u7684\u662f\u521d\u5b66\u8005\u4e13\u6ce8\u4e8e\u6e90\u7801\u7684\u7ec6\u8282\uff0c\u4e86\u89e3\u5176\u8868\u9762\u77e5\u8bc6\u3002</li> <li>\u5176\u6b21\u662f\u201c\u770b\u5c71\u4e0d\u662f\u5c71\u201d\uff0c\u5728\u8fd9\u4e00\u9636\u6bb5\uff0c\u5b66\u4e60\u8005\u5f00\u59cb\u4ece\u5b8f\u89c2\u89d2\u5ea6\u7406\u89e3\u6e90\u7801\uff0c\u63a2\u7d22\u8bbe\u8ba1\u80cc\u540e\u7684\u610f\u56fe\uff0c\u5e76\u8003\u8651\u7248\u672c\u53d8\u5316\u3002</li> <li>\u6700\u540e\u662f\u201c\u770b\u5c71\u4e0d\u5982\u4e0a\u5c71\u201d\uff0c\u5f3a\u8c03\u901a\u8fc7\u5b9e\u8df5\u6765\u6df1\u5165\u7406\u89e3\u6e90\u7801\uff0c\u4f8b\u5982\u901a\u8fc7\u7f16\u5199\u4ee3\u7801\u6216\u53c2\u4e0e\u5f00\u6e90\u9879\u76ee\u3002</li> </ul> <p>\u4f5c\u8005\u5f3a\u8c03\u4e86\u6e90\u7801\u5b66\u4e60\u7684\u91cd\u8981\u6027\uff0c\u5efa\u8bae\u8bfb\u8005\u4e0d\u4ec5\u8981\u901a\u8fc7\u4e66\u7c4d\u548c\u535a\u5ba2\u5b66\u4e60\uff0c\u8fd8\u8981\u6df1\u5165\u6e90\u7801\u4ee5\u83b7\u5f97\u66f4\u6df1\u5c42\u6b21\u7684\u7406\u89e3\u3002</p>"},{"location":"news/2024/news-2024-05/#anr","title":"\u7a33\u5b9a\u6027\u4f18\u5316\uff1aANR\u76d1\u63a7\u65b9\u6848","text":"<p>\u5728\u7a0b\u5e8f\u53d1\u751f ANR \u65f6\uff0c\u7cfb\u7edf\u4f1a\u5f39\u51fa ANR \u7684\u5f39\u7a97\uff0c\u5e76\u5c06 ANR \u65e5\u5fd7\u4fe1\u606f\u5199\u5165\u5230 /data/anr/ \u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u4e2d\uff0c\u4f46\u662f\u6211\u4eec\u5e76\u6ca1\u6709\u76f4\u63a5\u7684\u63a5\u53e3\u53bb\u611f\u77e5\u5230 ANR \u53d1\u751f\u4e86\uff0c\u4e5f\u6ca1\u6709\u6743\u9650\u53bb\u8bfb\u53d6 /data/anr/ \u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u3002\u672c\u6587\u4ecb\u7ecd\u4e86\u5982\u4f55\u5b9e\u73b0\u4e00\u5957 ANR \u76d1\u63a7\u65b9\u6848\u3002</p> <ul> <li>\u4fe1\u53f7\u6355\u83b7\u68c0\u6d4b\u65b9\u6848: ANR \u53d1\u751f\u65f6\uff0c\u7cfb\u7edf\u4f1a\u7ed9\u5bf9\u5e94\u7684\u8fdb\u7a0b\u53d1\u9001\u4e00\u4e2a SIGQUIT \u4fe1\u53f7\uff0c\u901a\u5e38\u6211\u4eec\u53ef\u4ee5\u5728 sigaction \u51fd\u6570\u4e2d\u5904\u7406\u4fe1\u53f7\u7684\u6355\u83b7\uff0c\u4f46\u662f\u7cfb\u7edf\u5c4f\u853d\u4e86 SIGQUIT \u4fe1\u53f7\uff0c\u4e0d\u5141\u8bb8 sigaction \u63a5\u6536 SIGQUIT \u4fe1\u53f7\uff0c\u800c\u662f\u4f1a\u542f\u52a8\u4e00\u4e2a SignalCatcher \u7ebf\u7a0b\uff0c\u8be5\u7ebf\u7a0b\u4f1a\u901a\u8fc7 sigwait \u51fd\u6570\u963b\u585e\u76d1\u542c SIGQUIT \u4fe1\u53f7\u3002\u89e3\u51b3\u65b9\u6848\u662f\u4f7f\u7528 pthread_sigmask \u51fd\u6570\u5c06 SIGQUIT \u4fe1\u53f7\u4ece\u5f53\u524d\u7ebf\u7a0b\u7684\u4fe1\u53f7\u5c4f\u853d\u96c6\u4e2d\u79fb\u9664\uff0c\u7136\u540e\u904d\u5386 /proc/{pid}/task \u76ee\u5f55\u4e0b\u6240\u8bb0\u5f55\u7684\u8be5\u8fdb\u7a0b\u4e0b\u6240\u6709\u7684\u7ebf\u7a0b\u6570\u636e\uff0c\u62ff\u5230\u540d\u79f0\u4e3a \u201cSignalCatcher\u201d \u7ebf\u7a0b\u5bf9\u5e94\u7684\u7ebf\u7a0b id\uff0c\u5f80 SignalCatcher \u7ebf\u7a0b\u53d1\u751f\u4e00\u4e2a SIGQUIT \u4fe1\u53f7\u3002</li> <li>ActivityManagerService\uff08AMS\uff09\u63a5\u53e3\u8fdb\u884c\u4e8c\u6b21\u786e\u8ba4\uff1a\u5f53\u8fdb\u7a0b\u6536\u5230\u4e86 SIGQUIT \u4fe1\u53f7\uff0c\u53ea\u80fd\u8bf4\u660e\u5f53\u524d\u8fdb\u7a0b\u6709\u53ef\u80fd\u53d1\u751f\u4e86 ANR \uff0c\u4f46\u662f\u5e76\u4e0d\u80fd\u591f\u767e\u5206\u767e\u786e\u5b9a\u53d1\u751f\u4e86 ANR\uff0c\u6bd4\u5982\u5176\u4ed6\u5e94\u7528\u53d1\u751f ANR \u65f6\uff0c CPU \u4f7f\u7528\u7387\u5360\u7528\u6bd4\u8f83\u9ad8\u7684\u8fdb\u7a0b\u4e5f\u4f1a\u6536\u5230 SIGQUIT \u4fe1\u53f7\uff0c\u56e0\u6b64\u9700\u8981\u8fdb\u884c\u4e8c\u6b21\u786e\u8ba4\u3002\u901a\u8fc7 ActivityManager.getProcessesInErrorState \u53ef\u4ee5\u83b7\u53d6\u5f53\u524d\u8fdb\u7a0b\u7684\u9519\u8bef\u72b6\u6001\uff0c\u5982\u679c\u8fdb\u7a0b\u662f NOT_RESPONDING \u72b6\u6001\uff0c\u5219\u8bf4\u660e\u8fdb\u7a0b\u53d1\u751f\u4e86 ANR\u3002</li> <li>\u6293\u53d6 Trace \u6587\u4ef6\uff1a\u5728\u660e\u786e\u4e86 ANR \u53d1\u751f\u540e\uff0c\u63a5\u4e0b\u6765\u5c31\u662f /data/anr/traces.txt \u6587\u4ef6\u7684\u8bfb\u53d6\u3002SignalCatcher \u7ebf\u7a0b\u5728\u6536\u5230 SIGQUIT \u4fe1\u53f7\u540e\u4f1a\u83b7\u53d6\u5404\u4e2a\u7ebf\u7a0b\u7684 Trace \u4fe1\u606f\uff0c\u5e76\u4e14\u901a\u8fc7\u7cfb\u7edf\u7684 write \u51fd\u6570\u6765\u628a Trace \u7684\u6570\u636e\u5199\u5165\u5230 /data/anr/traces.txt \u6587\u4ef6\u4e2d\u3002\u6211\u4eec\u901a\u8fc7 PLT Hook \u8fd9\u4e2a write \u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u83b7\u53d6\u5199\u5165\u5230 traces.txt \u6587\u4ef6\u4e2d\u7684 ANR Trace \u6570\u636e\u4e86\u3002</li> </ul>"},{"location":"news/2024/news-2024-05/#_4","title":"\u6027\u80fd\u65e0\u635f\u7ebf\u4e0a\u4ee3\u7801\u8986\u76d6\u7387\u91c7\u96c6\uff0c\u5b9e\u73b0\u5e94\u7528\u52a8\u6001\u76d1\u63a7\uff01","text":"<p>\u524d\u9762\u4ecb\u7ecd\u8fc7\u4e24\u79cd\u7ebf\u4e0a\u4ee3\u7801\u8986\u76d6\u7387\u91c7\u96c6\u7684\u65b9\u6848\uff0c\u4e00\u79cd\u662f\u57fa\u4e8e\u63d2\u6869\u65b9\u6848\uff0c\u5bf9\u6027\u80fd\u4f1a\u6709\u4e00\u5b9a\u635f\u8017\uff0c\u53e6\u4e00\u79cd\u662f Hack classTable\uff0c\u4f7f\u7528\u8d77\u6765\u6bd4\u8f83\u9ebb\u70e6\u3002\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7 JVMTI \u6765\u5b9e\u73b0\u7ebf\u4e0a\u4ee3\u7801\u8986\u76d6\u7387\u91c7\u96c6\uff0c</p> <p>JVMTI\uff08JVM Tool Interface\uff09\u662f Java \u865a\u62df\u673a\u6240\u63d0\u4f9b\u7684 Native \u7f16\u7a0b\u63a5\u53e3\u3002\u901a\u8fc7\u8fd9\u4e9b\u63a5\u53e3\uff0c\u5f00\u53d1\u4eba\u5458\u4e0d\u4ec5\u53ef\u4ee5\u8c03\u8bd5\u5728\u865a\u62df\u673a\u4e0a\u8fd0\u884c\u7684 Java \u7a0b\u5e8f\uff0c\u8fd8\u80fd\u67e5\u770b\u5b83\u4eec\u8fd0\u884c\u7684\u72b6\u6001\u3001\u63a7\u5236\u73af\u5883\u53d8\u91cf\uff0c\u751a\u81f3\u4fee\u6539\u4ee3\u7801\u903b\u8f91\uff0c\u4ece\u800c\u5e2e\u52a9\u5f00\u53d1\u4eba\u5458\u76d1\u63a7\u548c\u4f18\u5316\u7a0b\u5e8f\u6027\u80fd\u3002\u4f46\u5728Android\uff08ART\uff09\u4e0a\u88abGoogle\u5b98\u65b9\u5728Release\u6a21\u5f0f\u4e2d\u7981\u7528\u6389\u4e86\uff0c\u5982\u679c\u9700\u8981\u4f7f\u7528\u5219\u9700\u8981hack\uff0c\u540c\u65f6\u5bf9\u4e8e\u7cfb\u7edf\u7248\u672c\u6709\u4e00\u5b9a\u8981\u6c42\uff08&gt;=Android8\uff09\u3002</p> <p></p> <p>JVMTI \u53ef\u4ee5\u5b9e\u73b0\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ul> <li>\u91cd\u5b9a\u4e49 Class</li> <li>\u8ddf\u8e2a\u5bf9\u8c61\u5206\u914d\u548c\u5783\u573e\u56de\u6536\u8fc7\u7a0b</li> <li>\u9075\u5faa\u5bf9\u8c61\u7684\u5f15\u7528\u6811\uff0c\u904d\u5386\u5806\u4e2d\u7684\u6240\u6709\u5bf9\u8c61</li> <li>\u68c0\u67e5 Java \u8c03\u7528\u5806\u6808</li> <li>\u6682\u505c\u548c\u6062\u590d\u6240\u6709\u7ebf\u7a0b</li> <li>\u5176\u4ed6\u529f\u80fd</li> </ul> <p>\u4ee3\u7801\u8986\u76d6\u7387\u91c7\u96c6\u529f\u80fd\u4f7f\u7528 jvmti \u63d0\u4f9b\u7684\u4e00\u4e2a\u51fd\u6570 GetLoadedClasses \u65b9\u6cd5\uff0c\u6211\u4eec\u901a\u8fc7 hack \u65b9\u6cd5\u5f00\u542f\u7ebf\u4e0a JVMTI \u68c0\u6d4b\u540e\uff0c\u5728\u5408\u9002\u7684\u65f6\u673a\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u5373\u53ef\u3002</p>"},{"location":"practical/code-quality/kotlin-detekt/","title":"\u843d\u5730 Kotlin \u4ee3\u7801\u89c4\u8303\uff0cDeteKt \u4e86\u89e3\u4e00\u4e0b","text":""},{"location":"practical/code-quality/kotlin-detekt/#_1","title":"\u524d\u8a00","text":"<p>\u5404\u4e2a\u56e2\u961f\u591a\u5c11\u90fd\u6709\u4e00\u4e9b\u81ea\u5df1\u7684\u4ee3\u7801\u89c4\u8303\uff0c\u4f46\u5236\u5b9a\u4ee3\u7801\u89c4\u8303\u7b80\u5355\uff0c\u56f0\u96be\u7684\u662f\u5982\u4f55\u843d\u5730\u3002\u5982\u679c\u5b8c\u5168\u4f9d\u8d56\u4eba\u529b<code>Code Review</code>\u96be\u514d\u6709\u6240\u9057\u6f0f\u3002</p> <p>\u8fd9\u4e2a\u65f6\u5019\u5c31\u9700\u8981\u901a\u8fc7\u9759\u6001\u4ee3\u7801\u68c0\u67e5\u5de5\u5177\u5728\u6bcf\u6b21\u63d0\u4ea4\u4ee3\u7801\u65f6\u81ea\u52a8\u68c0\u67e5\uff0c\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528<code>DeteKt</code>\u843d\u5730<code>Kotlin</code>\u4ee3\u7801\u89c4\u8303\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9</p> <ol> <li>\u4e3a\u4ec0\u4e48\u4f7f\u7528<code>DeteKt</code>?</li> <li><code>IDE</code>\u63a5\u5165<code>DeteKt</code>\u63d2\u4ef6</li> <li><code>CLI</code>\u547d\u4ee4\u884c\u65b9\u5f0f\u63a5\u5165<code>DeteKt</code></li> <li><code>Gradle</code>\u65b9\u5f0f\u63a5\u5165<code>DeteKt</code></li> <li>\u81ea\u5b9a\u4e49<code>Detekt</code>\u68c0\u6d4b\u89c4\u5219</li> <li><code>Github Action</code>\u96c6\u6210<code>Detekt</code>\u68c0\u6d4b</li> </ol>"},{"location":"practical/code-quality/kotlin-detekt/#detekt","title":"\u4e3a\u4ec0\u4e48\u4f7f\u7528<code>DeteKt</code>?","text":"<p>\u8bf4\u8d77\u9759\u6001\u4ee3\u7801\u68c0\u67e5\uff0c\u5927\u5bb6\u9996\u5148\u60f3\u8d77\u6765\u7684\u53ef\u80fd\u662f<code>lint</code>\uff0c\u76f8\u6bd4<code>DeteKt</code>\u53ea\u652f\u6301<code>Kotlin</code>\u4ee3\u7801\uff0c<code>lint</code>\u4e0d\u4ec5\u652f\u6301<code>Kotlin</code>\uff0c<code>Java</code>\u4ee3\u7801\uff0c\u4e5f\u652f\u6301\u8d44\u6e90\u6587\u4ef6\u89c4\u8303\u68c0\u67e5\uff0c\u90a3\u4e48\u6211\u4eec\u4e3a\u4ec0\u4e48\u4e0d\u4f7f\u7528<code>Lint</code>\u5462\uff1f</p> <p>\u5728\u6211\u770b\u6765\uff0c<code>Lint</code>\u5728\u4f7f\u7528\u4e0a\u4e3b\u8981\u6709\u4e24\u4e2a\u95ee\u9898\uff1a   </p> <ol> <li>\u4e0e<code>IDE</code>\u96c6\u6210\u4e0d\u591f\u597d\uff0c\u81ea\u5b9a\u4e49<code>lint</code>\u89c4\u5219\u7684\u8b66\u544a\u53ea\u6709\u5728\u8fd0\u884c<code>./gradlew lint</code>\u540e\u624d\u4f1a\u5728<code>IDE</code>\u4e0a\u5c55\u793a\u51fa\u6765\uff0c\u5728<code>clean</code>\u4e4b\u540e\u53c8\u4f1a\u6d88\u5931</li> <li><code>lint</code>\u68c0\u67e5\u901f\u5ea6\u8f83\u6162\uff0c\u5c24\u5176\u662f\u5927\u578b\u9879\u76ee\uff0c\u53ea\u5bf9\u589e\u91cf\u4ee3\u7801\u8fdb\u884c\u68c0\u67e5\u7684\u903b\u8f91\u9700\u8981\u81ea\u5b9a\u4e49</li> </ol> <p>\u800c<code>DeteKt</code>\u63d0\u4f9b\u4e86<code>IDE</code>\u63d2\u4ef6\uff0c\u5f00\u542f\u540e\u53ef\u76f4\u63a5\u5728<code>IDE</code>\u4e2d\u67e5\u770b\u8b66\u544a\uff0c\u8fd9\u6837\u53ef\u4ee5\u5728\u7b2c\u4e00\u65f6\u95f4\u53d1\u73b0\u95ee\u9898\uff0c\u907f\u514d\u540e\u7eed\u68c0\u67e5\u53d1\u73b0\u95ee\u9898\u540e\u518d\u4fee\u6539\u6d41\u7a0b\u8fc7\u957f\u7684\u95ee\u9898</p> <p>\u540c\u65f6<code>Detekt</code>\u652f\u6301<code>CLI</code>\u547d\u4ee4\u884c\u65b9\u5f0f\u63a5\u5165\u4e0e<code>Gradle</code>\u65b9\u5f0f\u63a5\u5165\uff0c\u652f\u6301\u53ea\u68c0\u67e5\u65b0\u589e\u4ee3\u7801\uff0c\u5728\u68c0\u67e5\u901f\u5ea6\u4e0a\u6bd4\u8d77<code>lint</code>\u4e5f\u6709\u4e00\u5b9a\u7684\u4f18\u52bf</p>"},{"location":"practical/code-quality/kotlin-detekt/#idedetekt","title":"<code>IDE</code>\u63a5\u5165<code>DeteKt</code>\u63d2\u4ef6","text":"<p>\u5982\u679c\u80fd\u5728<code>IDE</code>\u4e2d\u63d0\u793a\u4ee3\u7801\u4e2d\u5b58\u5728\u7684\u95ee\u9898\uff0c\u5e94\u8be5\u662f\u6700\u5feb\u53d1\u73b0\u95ee\u9898\u7684\u65b9\u5f0f\uff0c<code>DeteKt</code>\u4e5f\u8d34\u5fc3\u7684\u4e3a\u6211\u4eec\u51c6\u5907\u4e86\u63d2\u4ef6\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p> <p>\u4e3b\u8981\u53ef\u4ee5\u914d\u7f6e\u4ee5\u4e0b\u5185\u5bb9\uff1a   1. <code>DeteKt</code>\u5f00\u5173 2. \u683c\u5f0f\u5316\u5f00\u5173\uff0c<code>DeteKt</code>\u76f4\u63a5\u4f7f\u7528\u4e86<code>ktlint</code>\u7684\u89c4\u5219 3. <code>Configuration file</code>\uff1a\u89c4\u5219\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u5728\u5176\u4e2d\u914d\u7f6e\u5404\u79cd\u89c4\u5219\u7684\u5f00\u5173\u4e0e\u53c2\u6570\uff0c\u9ed8\u8ba4\u914d\u7f6e\u53ef\u89c1\uff1adefault-detekt-config.yml 4. <code>Baseline file</code>\uff1a\u57fa\u7ebf\u6587\u4ef6\uff0c\u8df3\u8fc7\u65e7\u4ee3\u7801\u95ee\u9898\uff0c\u6709\u4e86\u8fd9\u4e2a\u57fa\u7ebf\u6587\u4ef6\uff0c\u4e0b\u6b21\u626b\u63cf\u65f6\uff0c\u5c31\u4f1a\u7ed5\u8fc7\u6587\u4ef6\u4e2d\u5217\u51fa\u7684\u57fa\u7ebf\u95ee\u9898\uff0c\u800c\u53ea\u63d0\u793a\u65b0\u589e\u95ee\u9898\u3002 5. <code>Plugin jar</code>: \u81ea\u5b9a\u4e49\u89c4\u5219<code>jar</code>\u5305\uff0c\u5728\u81ea\u5b9a\u4e49\u89c4\u5219\u540e\u6253\u51fa<code>jar</code>\u5305\uff0c\u5728\u626b\u63cf\u65f6\u5c31\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u89c4\u5219\u4e86</p> <p><code>DeteKt IDE</code>\u63d2\u4ef6\u53ef\u4ee5\u5b9e\u65f6\u63d0\u793a\u95ee\u9898(\u5305\u62ec\u81ea\u5b9a\u4e49\u89c4\u5219)\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u6211\u4eec\u6dfb\u52a0\u4e86\u81ea\u5b9a\u4e49\u7981\u6b62\u4f7f\u7528<code>kae</code>\u7684\u89c4\u5219\uff1a  </p> <p></p> <p>\u5bf9\u4e8e\u4e00\u4e9b\u652f\u6301\u81ea\u52a8\u4fee\u590d\u7684\u683c\u5f0f\u95ee\u9898\uff0c<code>DeteKt</code>\u63d2\u4ef6\u652f\u6301\u81ea\u52a8\u683c\u5f0f\u5316\uff0c\u540c\u65f6\u4e5f\u53ef\u4ee5\u914d\u7f6e\u5feb\u6377\u952e\uff0c\u4e00\u952e\u81ea\u52a8\u683c\u5f0f\u5316\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p>"},{"location":"practical/code-quality/kotlin-detekt/#clidetekt","title":"<code>CLI</code>\u547d\u4ee4\u884c\u65b9\u5f0f\u63a5\u5165<code>DeteKt</code>","text":"<p><code>DeteKt</code>\u652f\u6301\u901a\u8fc7<code>CLI</code>\u547d\u4ee4\u884c\u65b9\u5f0f\u63a5\u5165\uff0c\u652f\u6301\u53ea\u68c0\u6d4b\u51e0\u4e2a\u6587\u4ef6\uff0c\u6bd4\u5982\u672c\u6b21<code>commit</code>\u63d0\u4ea4\u7684\u6587\u4ef6</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\uff0c\u4e0b\u8f7d<code>DeteKt</code>\u7684<code>jar</code>\u7136\u540e\u4f7f\u7528</p> <pre><code>curl -sSLO https://github.com/detekt/detekt/releases/download/v1.22.0-RC1/detekt-cli-1.22.0-RC1.zip\nunzip detekt-cli-1.22.0-RC1.zip\n./detekt-cli-1.22.0-RC1/bin/detekt-cli --help\n</code></pre> <p><code>DeteKt CLI</code>\u652f\u6301\u5f88\u591a\u53c2\u6570\uff0c\u4e0b\u9762\u5217\u51fa\u4e00\u4e9b\u5e38\u7528\u7684\uff0c\u5176\u4ed6\u53ef\u4ee5\u53c2\u89c1\uff1aRun detekt using Command Line Interface</p> <pre><code>Usage: detekt [options]\n  Options:\n    --auto-correct, -ac\n      \u652f\u6301\u81ea\u52a8\u683c\u5f0f\u5316\u7684\u89c4\u5219\u81ea\u52a8\u683c\u5f0f\u5316\uff0c\u9ed8\u8ba4\u4e3afalse\n      Default: false\n    --baseline, -b\n      \u5982\u679c\u4f20\u5165\u4e86baseline\u6587\u4ef6\uff0c\u53ea\u6709\u4e0d\u5728baseline\u6587\u4ef6\u4e2d\u7684\u95ee\u9898\u624d\u4f1a\u6398\u51fa\u6765\n    --classpath, -cp\n      \u5b9e\u9a8c\u7279\u6027\uff1a\u4f20\u5165\u4f9d\u8d56\u7684class\u8def\u5f84\u548cjar\u7684\u8def\u5f84\uff0c\u7528\u4e8e\u7c7b\u578b\u89e3\u6790\n    --config, -c\n      \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u914d\u7f6e\u89c4\u5219\u5f00\u5173\u53ca\u53c2\u6570\n    --create-baseline, -cb\n      \u521b\u5efabaseline\uff0c\u9ed8\u8ba4false\uff0c\u5982\u679c\u5f00\u542f\u4f1a\u521b\u5efa\u51fa\u4e00\u4e2abaseline\u6587\u4ef6\uff0c\u4f9b\u540e\u7eed\u4f7f\u7528\n    --input, -i\n      \u8f93\u5165\u6587\u4ef6\u8def\u5f84\uff0c\u591a\u4e2a\u8def\u5f84\u4e4b\u95f4\u7528\u9017\u53f7\u8fde\u63a5\n    --jvm-target\n      EXPERIMENTAL: Target version of the generated JVM bytecode that was \n      generated during compilation and is now being used for type resolution \n      (1.6, 1.8, 9, 10, 11, 12, 13, 14, 15, 16 or 17)\n      Default: 1.8\n    --language-version\n      \u4e3a\u652f\u6301\u7c7b\u578b\u89e3\u6790\uff0c\u9700\u8981\u4f20\u5165java\u7248\u672c\n    --plugins, -p\n      \u81ea\u5b9a\u4e49\u89c4\u5219jar\u8def\u5f84\uff0c\u591a\u4e2a\u8def\u5f84\u4e4b\u95f4\u7528,\u6216\u8005;\u8fde\u63a5\n</code></pre> <p>\u5728\u547d\u4ee4\u884c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u68c0\u67e5</p> <pre><code>java -jar /path/to/detekt-cli-1.21.0-all.jar # detekt-cli-1.21.0-all.jar\u6240\u5728\u8def\u5f84\n-c /path/to/detekt_1.21.0_format.yml # \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u6240\u5728\u8def\u5f84\n--plugins /path/to/detekt-formatting-1.21.0.jar # \u683c\u5f0f\u5316\u89c4\u5219jar\uff0c\u4e3b\u8981\u57fa\u4e8ektlint\u5c01\u88c5\n-ac # \u5f00\u542f\u81ea\u52a8\u683c\u5f0f\u5316\n-i $FilePath$ # \u9700\u8981\u626b\u63cf\u7684\u6e90\u6587\u4ef6\uff0c\u591a\u4e2a\u8def\u5f84\u4e4b\u95f4\u7528,\u6216\u8005;\u8fde\u63a5\n</code></pre> <p>\u901a\u8fc7\u5982\u4e0a\u65b9\u5f0f\u8fdb\u884c\u4ee3\u7801\u68c0\u67e5\u901f\u5ea6\u662f\u975e\u5e38\u5feb\u7684\uff0c\u6839\u636e\u7ecf\u9a8c\u6765\u8bf4\u4e00\u822c\u5c31\u662f\u51e0\u79d2\u4e4b\u5185\u53ef\u4ee5\u5b8c\u6210\uff0c\u56e0\u6b64\u6211\u4eec\u5b8c\u6210\u53ef\u4ee5\u5c06<code>DeteKt</code>\u4e0e<code>git hook</code>\u7ed3\u5408\u8d77\u6765\uff0c\u5728\u6bcf\u6b21\u63d0\u4ea4<code>commit</code>\u7684\u65f6\u5019\u8fdb\u884c\u68c0\u6d4b\uff0c\u800c\u5982\u679c\u662f\u4e00\u4e9b\u6bd4\u8f83\u8017\u65f6\u7684\u5de5\u5177\u6bd4\u5982<code>lint</code>\uff0c\u5e94\u8be5\u662f\u505a\u4e0d\u5230\u8fd9\u4e00\u70b9\u7684</p>"},{"location":"practical/code-quality/kotlin-detekt/#_2","title":"\u7c7b\u578b\u89e3\u6790","text":"<p>\u4e0a\u9762\u6211\u4eec\u63d0\u5230\u4e86\uff0c<code>DeteKt</code>\u7684<code>--classpth</code>\u53c2\u6570\u4e0e<code>--language-version</code>\u53c2\u6570\uff0c\u8fd9\u4e9b\u662f\u7528\u4e8e\u7c7b\u578b\u89e3\u6790\u7684\u3002</p> <p>\u7c7b\u578b\u89e3\u6790\u662f<code>DeteKt</code>\u7684\u4e00\u9879\u529f\u80fd\uff0c\u5b83\u5141\u8bb8 <code>Detekt</code> \u5bf9\u60a8\u7684 <code>Kotlin</code> \u6e90\u4ee3\u7801\u6267\u884c\u66f4\u9ad8\u7ea7\u7684\u9759\u6001\u5206\u6790\u3002</p> <p>\u901a\u5e38\uff0c<code>Detekt</code> \u5728\u7f16\u8bd1\u671f\u95f4\u65e0\u6cd5\u8bbf\u95ee\u7f16\u8bd1\u5668\u8bed\u4e49\u5206\u6790\u7684\u7ed3\u679c\uff0c\u6211\u4eec\u53ea\u80fd\u83b7\u53d6<code>Kotlin</code>\u6e90\u4ee3\u7801\u7684\u62bd\u8c61\u8bed\u6cd5\u6811\uff0c\u5374\u65e0\u6cd5\u77e5\u9053\u8bed\u6cd5\u6811\u4e0a\u7b26\u53f7\u7684\u8bed\u4e49\uff0c\u8fd9\u9650\u5236\u4e86\u6211\u4eec\u7684\u68c0\u67e5\u80fd\u529b\uff0c\u6bd4\u5982\u6211\u4eec\u65e0\u6cd5\u5224\u65ad\u7b26\u53f7\u7684\u7c7b\u578b\uff0c\u4e24\u4e2a\u7b26\u53f7\u7a76\u7adf\u662f\u4e0d\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\u7b49</p> <p>\u901a\u8fc7\u542f\u7528\u7c7b\u578b\u89e3\u6790\uff0c<code>Detekt</code> \u53ef\u4ee5\u83b7\u53d6<code>Kotlin</code>\u7f16\u8bd1\u5668\u8bed\u4e49\u5206\u6790\u7684\u7ed3\u679c\uff0c\u8fd9\u8ba9\u6211\u4eec\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e9b\u66f4\u9ad8\u7ea7\u7684\u68c0\u67e5\u3002</p> <p>\u800c\u8981\u83b7\u53d6\u7c7b\u578b\u4e0e\u8bed\u4e49\uff0c\u5f53\u7136\u8981\u4f20\u5165\u4f9d\u8d56\u7684<code>class</code>\uff0c\u4e5f\u5c31\u662f<code>classpath</code>\uff0c\u6bd4\u5982<code>android</code>\u9879\u76ee\u4e2d\u5e38\u5e38\u9700\u8981\u4f20\u5165<code>android.jar</code>\u4e0e<code>kotlin-stdlib.jar</code></p>"},{"location":"practical/code-quality/kotlin-detekt/#gradledetekt","title":"<code>Gradle</code>\u65b9\u5f0f\u63a5\u5165<code>DeteKt</code>","text":"<p><code>CLI</code>\u65b9\u5f0f\u68c0\u6d4b\u867d\u7136\u5feb\uff0c\u4f46\u662f\u9700\u8981\u624b\u52a8\u4f20\u5165<code>classpath</code>\uff0c\u6bd4\u8f83\u9ebb\u70e6\uff0c\u5c24\u5176\u662f\u6709\u65f6\u5019\u81ea\u5b9a\u4e49\u89c4\u5219\u9700\u8981\u89e3\u6790\u6211\u4eec\u81ea\u5df1\u7684\u7c7b\u800c\u4e0d\u662f<code>kotlin-stdlib.jar</code>\u4e2d\u7684\u7c7b\u65f6\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u5c06\u9879\u76ee\u4e2d\u7684\u4ee3\u7801\u7684\u7f16\u8bd1\u7ed3\u679c\u4f20\u5165\u4f5c\u4e3a<code>classpath</code>\u4e86\uff0c\u8fd9\u6837\u5c31\u66f4\u9ebb\u70e6\u4e86</p> <p><code>DeteKt</code>\u540c\u6837\u652f\u6301<code>Gradle</code>\u63d2\u4ef6\u65b9\u5f0f\u63a5\u5165\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u9700\u8981\u6211\u4eec\u53e6\u5916\u518d\u914d\u7f6e<code>classpath</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06<code>CLI</code>\u547d\u4ee4\u884c\u65b9\u5f0f\u4e0e<code>Gradle</code>\u65b9\u5f0f\u7ed3\u5408\u8d77\u6765\uff0c\u5728\u672c\u5730\u901a\u8fc7<code>CLI</code>\u65b9\u5f0f\u5feb\u901f\u68c0\u6d4b\uff0c\u5728<code>CI</code>\u4e0a\u901a\u8fc7<code>Gradle</code>\u63d2\u4ef6\u8fdb\u884c\u5b8c\u6574\u7684\u68c0\u6d4b</p>"},{"location":"practical/code-quality/kotlin-detekt/#_3","title":"\u63a5\u5165\u6b65\u9aa4","text":"<pre><code>// 1. \u5f15\u5165\u63d2\u4ef6\nplugins {\n    id(\"io.gitlab.arturbosch.detekt\").version(\"[version]\")\n}\n\nrepositories {\n    mavenCentral()\n}\n\n// 2. \u914d\u7f6e\u63d2\u4ef6\ndetekt {\n    config = files(\"$projectDir/config/detekt.yml\") // \u89c4\u5219\u914d\u7f6e\n    baseline = file(\"$projectDir/config/baseline.xml\") // baseline\u914d\u7f6e\n    parallel = true\n}\n\n// 3. \u81ea\u5b9a\u4e49\u89c4\u5219\ndependencies {\n    detektPlugins \"io.gitlab.arturbosch.detekt:detekt-formatting:1.21.0\"\n    detektPlugins project(\":customRules\")\n}\n\n// 4. \u914d\u7f6e jvmTarget\ntasks.withType(Detekt).configureEach {\n    jvmTarget = \"1.8\"\n}\n// DeteKt Task\u7528\u4e8e\u68c0\u6d4b\uff0cDetektCreateBaselineTask\u7528\u4e8e\u521b\u5efaBaseline\ntasks.withType(DetektCreateBaselineTask).configureEach {\n    jvmTarget = \"1.8\"\n}\n\n// 5. \u53ea\u5206\u6790\u6307\u5b9a\u6587\u4ef6\ntasks.withType&lt;io.gitlab.arturbosch.detekt.Detekt&gt;().configureEach {\n    // include(\"**/special/package/**\") //  \u53ea\u5206\u6790 src/main/kotlin \u4e0b\u9762\u7684\u6307\u5b9a\u76ee\u5f55\u6587\u4ef6\n    exclude(\"**/special/package/internal/**\") // \u8fc7\u6ee4\u6307\u5b9a\u76ee\u5f55\n}\n\n</code></pre> <p>\u5982\u4e0a\u6240\u793a\uff0c\u63a5\u5165\u4e3b\u8981\u9700\u8981\u505a\u8fd9\u4e48\u51e0\u4ef6\u4e8b\uff1a  </p> <ol> <li>\u5f15\u5165\u63d2\u4ef6</li> <li>\u914d\u7f6e\u63d2\u4ef6\uff0c\u4e3b\u8981\u662f\u914d\u7f6e<code>config</code>\u4e0e<code>baseline</code>\uff0c\u5373\u89c4\u5219\u5f00\u5173\u4e0e\u8001\u4ee3\u7801\u8fc7\u6ee4</li> <li>\u5f15\u5165<code>detekt-formatting</code>\u4e0e\u81ea\u5b9a\u4e49\u89c4\u5219\u7684\u4f9d\u8d56</li> <li>\u914d\u7f6e<code>JvmTarget</code>\uff0c\u7528\u4e8e\u7c7b\u578b\u89e3\u6790\uff0c\u4f46\u4e0d\u7528\u518d\u914d\u7f6e<code>classpath</code>\u4e86\u3002</li> <li>\u9664\u4e86<code>baseline</code>\u4e4b\u5916\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7<code>include</code>\u4e0e<code>exclude</code>\u7684\u65b9\u5f0f\u6307\u5b9a\u53ea\u626b\u63cf\u6307\u5b9a\u6587\u4ef6\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u589e\u91cf\u68c0\u6d4b</li> </ol> <p>\u901a\u8fc7\u4ee5\u4e0a\u65b9\u5f0f\u5c31\u63a5\u5165\u6210\u529f\u4e86\uff0c\u8fd0\u884c<code>./gradlew detektDebug</code>\u5c31\u53ef\u4ee5\u5f00\u59cb\u68c0\u6d4b\u4e86\uff0c\u626b\u63cf\u7ed3\u679c\u53ef\u5728\u7ec8\u7aef\u76f4\u63a5\u67e5\u770b\uff0c\u5e76\u53ef\u4ee5\u76f4\u63a5\u5b9a\u4f4d\u5230\u95ee\u9898\u4ee3\u7801\u5904\uff0c\u4e5f\u53ef\u4ee5\u5728<code>build/reprots/</code>\u8def\u5f84\u4e0b\u67e5\u770b\u8f93\u51fa\u7684\u62a5\u544a\u6587\u4ef6\uff1a</p> <p></p>"},{"location":"practical/code-quality/kotlin-detekt/#detekt_1","title":"\u81ea\u5b9a\u4e49<code>Detekt</code>\u68c0\u6d4b\u89c4\u5219","text":"<p>\u8981\u843d\u5730\u81ea\u5df1\u5236\u5b9a\u7684\u4ee3\u7801\u89c4\u8303\uff0c\u4e0d\u53ef\u907f\u514d\u7684\u9700\u8981\u81ea\u5b9a\u4e49\u89c4\u5219\uff0c\u5f53\u7136\u6211\u4eec\u9996\u5148\u8981\u770b\u4e0b<code>DeteKt</code>\u81ea\u5e26\u7684\u89c4\u5219\uff0c\u662f\u5426\u5df2\u7ecf\u6709\u6211\u4eec\u9700\u8981\u7684\uff0c\u53ea\u9700\u628a\u5f00\u5173\u6253\u5f00\u5373\u53ef.</p>"},{"location":"practical/code-quality/kotlin-detekt/#detekt_2","title":"<code>DeteKt</code>\u81ea\u5e26\u89c4\u5219","text":"<p><code>DeteKt</code>\u81ea\u5e26\u7684\u89c4\u5219\u90fd\u53ef\u4ee5\u901a\u8fc7\u5f00\u5173\u914d\u7f6e\uff0c\u5982\u679c\u6ca1\u6709\u5728 <code>Detekt</code> \u95ed\u5305\u4e2d\u6307\u5b9a <code>config</code> \u5c5e\u6027\uff0c<code>detekt</code> \u4f1a\u4f7f\u7528\u9ed8\u8ba4\u7684\u89c4\u5219\u3002\u8fd9\u4e9b\u89c4\u5219\u91c7\u7528 <code>yaml</code> \u6587\u4ef6\u63cf\u8ff0\uff0c\u8fd0\u884c <code>./gradlew detektGenerateConfig</code> \u4f1a\u751f\u6210 <code>config/detekt/detekt.yml</code> \u6587\u4ef6\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u8fd9\u4e2a\u6587\u4ef6\u7684\u57fa\u7840\u4e0a\u5236\u5b9a\u4ee3\u7801\u89c4\u8303\u51c6\u5219\u3002</p> <p><code>detekt.yml</code> \u4e2d\u7684\u6bcf\u6761\u89c4\u5219\u5f62\u5982\uff1a</p> <pre><code>complexity: # \u5927\u7c7b\n  active: true\n  ComplexCondition: # \u89c4\u5219\u540d\n    active: true  # \u662f\u5426\u542f\u7528\n    threshold: 4  # \u6709\u4e9b\u89c4\u5219\uff0c\u53ef\u4ee5\u8bbe\u5b9a\u4e00\u4e2a\u9608\u503c\n# ...\n</code></pre> <p>\u66f4\u591a\u5173\u4e8e\u914d\u7f6e\u6587\u4ef6\u7684\u4fee\u6539\u65b9\u5f0f\uff0c\u8bf7\u53c2\u8003\u5b98\u65b9\u6587\u6863-\u914d\u7f6e\u6587\u4ef6</p> <p><code>Detekt</code> \u7684\u89c4\u5219\u96c6\u5212\u5206\u4e3a 9 \u4e2a\u5927\u7c7b\uff0c\u6bcf\u4e2a\u5927\u7c7b\u4e0b\u6709\u5177\u4f53\u7684\u89c4\u5219\uff1a</p> \u89c4\u5219\u5927\u7c7b \u8bf4\u660e comments \u4e0e\u6ce8\u91ca\u3001\u6587\u6863\u6709\u5173\u7684\u89c4\u8303\u68c0\u67e5 complexity \u68c0\u67e5\u4ee3\u7801\u590d\u6742\u5ea6\uff0c\u590d\u6742\u5ea6\u8fc7\u9ad8\u7684\u4ee3\u7801\u4e0d\u5229\u4e8e\u7ef4\u62a4 coroutines \u4e0e\u534f\u7a0b\u6709\u5173\u7684\u89c4\u8303\u68c0\u67e5 empty-blocks \u7a7a\u4ee3\u7801\u5757\u68c0\u67e5\uff0c\u7a7a\u4ee3\u7801\u5e94\u8be5\u5c3d\u91cf\u907f\u514d exceptions \u4e0e\u5f02\u5e38\u629b\u51fa\u548c\u6355\u83b7\u6709\u5173\u7684\u89c4\u8303\u68c0\u67e5 formatting \u683c\u5f0f\u5316\u95ee\u9898\uff0cdetekt\u76f4\u63a5\u5f15\u7528\u7684 ktlint \u7684\u683c\u5f0f\u5316\u89c4\u5219\u96c6 naming \u7c7b\u540d\u3001\u53d8\u91cf\u547d\u540d\u76f8\u5173\u7684\u89c4\u8303\u68c0\u67e5 performance \u68c0\u67e5\u6f5c\u5728\u7684\u6027\u80fd\u95ee\u9898 potentail-bugs \u68c0\u67e5\u6f5c\u5728\u7684BUG style \u7edf\u4e00\u56e2\u961f\u7684\u4ee3\u7801\u98ce\u683c\uff0c\u4e5f\u5305\u62ec\u4e00\u4e9b\u7531 Detekt \u5b9a\u4e49\u7684\u683c\u5f0f\u5316\u95ee\u9898 <p>\u8868\u683c\u5f15\u7528\u81ea\uff1ahttps://cloud.tencent.com/developer/article/1811025</p> <p>\u66f4\u7ec6\u8282\u7684\u89c4\u5219\u8bf4\u660e\uff0c\u8bf7\u53c2\u8003\uff1a\u5b98\u65b9\u6587\u6863-\u89c4\u5219\u96c6\u8bf4\u660e</p>"},{"location":"practical/code-quality/kotlin-detekt/#_4","title":"\u81ea\u5b9a\u4e49\u89c4\u5219","text":"<p>\u63a5\u4e0b\u6765\u6211\u4eec\u81ea\u5b9a\u4e49\u4e00\u4e2a\u68c0\u6d4b<code>KAE</code>\u4f7f\u7528\u7684\u89c4\u5219\uff0c\u5982\u4e0b\u6240\u793a\uff1a </p> <pre><code>//  \u5165\u53e3\nclass CustomRuleSetProvider : RuleSetProvider {\n    override val ruleSetId: String = \"detekt-custom-rules\"\n    override fun instance(config: Config): RuleSet = RuleSet(\n        ruleSetId,\n        listOf(\n            NoSyntheticImportRule(),\n        )\n    )\n}\n\n// \u81ea\u5b9a\u4e49\u89c4\u5219\nclass NoSyntheticImportRule : Rule() {\n    override val issue = Issue(\n        \"NoSyntheticImport\",\n        Severity.Maintainability,\n        \"Don\u2019t import Kotlin Synthetics as it is already deprecated.\",\n        Debt.TWENTY_MINS\n    )\n\n    override fun visitImportDirective(importDirective: KtImportDirective) {\n        val import = importDirective.importPath?.pathStr\n        if (import?.contains(\"kotlinx.android.synthetic\") == true) {\n            report(\n                CodeSmell(\n                    issue,\n                    Entity.from(importDirective),\n                    \"'$import' \u4e0d\u8981\u4f7f\u7528kae\uff0c\u63a8\u8350\u4f7f\u7528viewbinding\"\n                )\n            )\n        }\n    }\n}\n</code></pre> <p>\u4ee3\u7801\u5176\u5b9e\u5e76\u4e0d\u590d\u6742\uff0c\u4e3b\u8981\u505a\u4e86\u8fd9\u4e48\u51e0\u4ef6\u4e8b\uff1a  1. \u6dfb\u52a0<code>CustomRuleSetProvider</code>\u4f5c\u4e3a\u81ea\u5b9a\u4e49\u89c4\u5219\u7684\u5165\u53e3\uff0c\u5e76\u5c06<code>NoSyntheticImportRule</code>\u6dfb\u52a0\u8fdb\u53bb 2. \u5b9e\u73b0<code>NoSyntheticImportRule</code>\u7c7b\uff0c\u4e3b\u8981\u5305\u62ec<code>issue</code>\u4e0e\u5404\u79cd<code>visitXXX</code>\u65b9\u6cd5 3. <code>issue</code>\u5c5e\u6027\u7528\u4e8e\u5b9a\u4e49\u5728\u63a7\u5236\u53f0\u6216\u4efb\u4f55\u5176\u4ed6\u8f93\u51fa\u683c\u5f0f\u4e0a\u6253\u5370\u7684<code>ID</code>\u3001\u4e25\u91cd\u6027\u548c\u63d0\u793a\u4fe1\u606f 4. <code>visitImportDirective</code>\u5373\u901a\u8fc7\u8bbf\u95ee\u8005\u6a21\u5f0f\u8bbf\u95ee\u8bed\u6cd5\u6811\u7684\u56de\u8c03\uff0c\u5f53\u8bbf\u95ee\u5230<code>import</code>\u65f6\u4f1a\u56de\u8c03\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u68c0\u6d4b\u6709\u6ca1\u6709\u6dfb\u52a0<code>kotlinx.android.synthetic</code>\uff0c\u53d1\u73b0\u5b58\u5728\u5219\u62a5\u544a\u5f02\u5e38</p>"},{"location":"practical/code-quality/kotlin-detekt/#_5","title":"\u652f\u6301\u7c7b\u578b\u89e3\u6790\u7684\u81ea\u5b9a\u4e49\u89c4\u5219","text":"<p>\u4e0a\u9762\u7684\u89c4\u5219\u6ca1\u6709\u7528\u5230\u7c7b\u578b\u89e3\u6790\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0d\u4f20\u5165<code>classpath</code>\u4e5f\u80fd\u4f7f\u7528\uff0c\u6211\u4eec\u73b0\u5728\u6765\u770b\u4e00\u4e2a\u9700\u8981\u4f7f\u7528\u7c7b\u578b\u89e3\u6790\u7684\u81ea\u5b9a\u4e49\u89c4\u5219</p> <p>\u6bd4\u5982\u6211\u4eec\u9700\u8981\u5728\u9879\u76ee\u4e2d\u7981\u6b62\u76f4\u63a5\u4f7f\u7528<code>android.widget.Toast.show</code>\uff0c\u800c\u662f\u4f7f\u7528\u6211\u4eec\u7edf\u4e00\u5c01\u88c5\u7684\u5de5\u5177\u7c7b\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5982\u4e0b\u89c4\u5219\uff1a   </p> <pre><code>class AvoidToUseToastRule : Rule() {\n    override val issue = Issue(\n        \"AvoidUseToastRule\",\n        Severity.Maintainability,\n        \"Don\u2019t use android.widget.Toast.show\",\n        Debt.TWENTY_MINS\n    )\n\n    override fun visitReferenceExpression(expression: KtReferenceExpression) {\n        super.visitReferenceExpression(expression)\n        if (expression.text == \"makeText\") {\n            // \u901a\u8fc7bindingContext\u83b7\u53d6\u8bed\u4e49\n            val referenceDescriptor = bindingContext.get(BindingContext.REFERENCE_TARGET, expression)\n            val packageName = referenceDescriptor?.containingPackage()?.asString()\n            val className = referenceDescriptor?.containingDeclaration?.name?.asString()\n            if (packageName == \"android.widget\" &amp;&amp; className == \"Toast\") {\n                report(\n                    CodeSmell(\n                        issue, Entity.from(expression), \"\u7981\u6b62\u76f4\u63a5\u4f7f\u7528Toast\uff0c\u5efa\u8bae\u4f7f\u7528xxxUtils\"\n                    )\n                )\n            }\n        }\n    }\n}\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u6211\u4eec\u5728<code>visitReferenceExpression</code>\u56de\u8c03\u4e2d\u68c0\u6d4b\u8868\u8fbe\u5f0f\uff0c\u6211\u4eec\u4e0d\u4ec5\u9700\u8981\u5224\u65ad\u662f\u5426\u5b58\u5728<code>Toast.makeTest</code>\u8868\u8fbe\u5f0f\uff0c\u56e0\u4e3a\u53ef\u80fd\u5b58\u5728\u540c\u540d\u7c7b\uff0c\u66f4\u9700\u8981\u5224\u65ad<code>Toast</code>\u7c7b\u7684\u5177\u4f53\u7c7b\u578b\uff0c\u800c\u8fd9\u5c31\u9700\u8981\u83b7\u53d6\u8bed\u4e49\u4fe1\u606f</p> <p>\u6211\u4eec\u8fd9\u91cc\u901a\u8fc7<code>bindingContext</code>\u6765\u83b7\u53d6\u8868\u8fbe\u5f0f\u7684\u8bed\u4e49\uff0c\u8fd9\u91cc\u7684<code>bindingContext</code>\u5176\u5b9e\u5c31\u662f<code>Kotlin</code>\u7f16\u8bd1\u5668\u5b58\u50a8\u8bed\u4e49\u4fe1\u606f\u7684\u8868\uff0c\u8be6\u7ec6\u7684\u53ef\u4ee5\u53c2\u9605\uff1aK2 \u7f16\u8bd1\u5668\u662f\u4ec0\u4e48\uff1f\u4e16\u754c\u7b2c\u4e8c\u9ad8\u5cf0\u53c8\u662f\u54ea\u5ea7\uff1f</p> <p>\u5f53\u6211\u4eec\u83b7\u53d6\u4e86\u8bed\u4e49\u4fe1\u606f\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u83b7\u53d6<code>Toast</code>\u7684\u5177\u4f53\u7c7b\u578b\uff0c\u5c31\u53ef\u4ee5\u5224\u65ad\u51fa\u8fd9\u4e2a<code>Toast</code>\u662f\u4e0d\u662f<code>android.widget.Toast</code>\uff0c\u4e5f\u5c31\u53ef\u4ee5\u5b8c\u6210\u68c0\u6d4b\u4e86</p>"},{"location":"practical/code-quality/kotlin-detekt/#github-actiondetekt","title":"<code>Github Action</code>\u96c6\u6210<code>Detekt</code>\u68c0\u6d4b","text":"<p>\u5728\u5b8c\u6210\u4e86<code>DeteKt</code>\u63a5\u5165\u4e0e\u81ea\u5b9a\u4e49\u89c4\u5219\u4e4b\u540e\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u6bcf\u6b21\u63d0\u4ea4\u4ee3\u7801\u65f6\u5728<code>CI</code>\u4e0a\u8fdb\u884c\u68c0\u6d4b\u4e86</p> <p>\u4e00\u4e9b\u5927\u7684\u5f00\u6e90\u9879\u76ee\u6bcf\u6b21\u63d0\u4ea4<code>PR</code>\u90fd\u4f1a\u8fdb\u884c\u4e00\u7cfb\u5217\u7684\u68c0\u6d4b\uff0c\u6211\u4eec\u4e5f\u7528<code>Github Action</code>\u6765\u5b9e\u73b0\u4e00\u4e2a</p> <p>\u6211\u4eec\u5728<code>.github/workflows</code>\u76ee\u5f55\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801</p> <pre><code>name: Android CI\n\non:\n  push:\n    branches: [ \"main\" ]\n  pull_request:\n    branches: [ \"main\" ]\n\njobs:\n  detekt-code-check:\n\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v3\n    - name: set up JDK 11\n      uses: actions/setup-java@v3\n      with:\n        java-version: '11'\n        distribution: 'temurin'\n        cache: gradle\n\n    - name: Grant execute permission for gradlew\n      run: chmod +x gradlew\n    - name: DeteKt Code Check\n      run: ./gradlew detektDebug\n</code></pre> <p>\u8fd9\u6837\u5728\u6bcf\u6b21\u63d0\u4ea4<code>PR</code>\u7684\u65f6\u5019\uff0c\u5c31\u90fd\u4f1a\u81ea\u52a8\u8c03\u7528\u8be5<code>workflow</code>\u8fdb\u884c\u68c0\u6d4b\u4e86\uff0c\u68c0\u6d4b\u4e0d\u901a\u8fc7\u5219\u4e0d\u5141\u8bb8\u5408\u5e76\uff0c\u5982\u4e0b\u6240\u793a\uff1a  </p> <p></p> <p>\u70b9\u8fdb\u53bb\u4e5f\u53ef\u4ee5\u770b\u5230\u8be6\u7ec6\u7684\u62a5\u9519\uff0c\u5177\u4f53\u662f\u54ea\u4e00\u884c\u4ee3\u7801\u68c0\u6d4b\u4e0d\u901a\u8fc7\uff0c\u5982\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"practical/code-quality/kotlin-detekt/#_6","title":"\u603b\u7ed3","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86<code>DeteKt</code>\u7684\u63a5\u5165\u4e0e\u5982\u4f55\u81ea\u5b9a\u4e49\u89c4\u5219\uff0c\u901a\u8fc7<code>IDE</code>\u96c6\u6210\uff0c<code>CLI</code>\u547d\u4ee4\u884c\u65b9\u5f0f\u4e0e<code>Gradle</code>\u63d2\u4ef6\u65b9\u5f0f\u63a5\u5165\uff0c\u4ee5\u53ca<code>CI</code>\u81ea\u52a8\u68c0\u6d4b\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u4ee3\u7801\u89c4\u8303\uff0c<code>IDE</code>\u63d0\u793a\uff0c<code>CI</code>\u68c0\u6d4b\u4e09\u8005\u7684\u7edf\u4e00\uff0c\u65b9\u4fbf\u63d0\u524d\u66b4\u9732\u95ee\u9898\uff0c\u63d0\u9ad8\u4ee3\u7801\u8d28\u91cf\u3002</p> <p>\u5982\u679c\u672c\u6587\u5bf9\u4f60\u6709\u6240\u5e2e\u52a9\uff0c\u6b22\u8fce\u70b9\u8d5e~</p>"},{"location":"practical/code-quality/kotlin-detekt/#_7","title":"\u793a\u4f8b\u4ee3\u7801","text":"<p>\u672c\u6587\u6240\u6709\u4ee3\u7801\u53ef\u89c1\uff1ahttps://github.com/RicardoJiang/android-workflow</p>"},{"location":"practical/code-quality/kotlin-detekt/#_8","title":"\u53c2\u8003\u8d44\u6599","text":"<p>https://detekt.dev/docs/intro \u4ee3\u7801\u8d28\u91cf\u582a\u5fe7\uff1f\u7528 detekt \u5440\uff0c\u62ff\u634f\u5f97\u6b7b\u6b7b\u7684~</p>"},{"location":"practical/compile/compile-acceleration/","title":"\u7f16\u8bd1\u52a0\u901f\u76848\u4e2a\u5b9e\u7528\u6280\u5de7","text":""},{"location":"practical/compile/compile-acceleration/#_1","title":"\u524d\u8a00","text":"<p>\u5173\u4e8e <code>Android</code> \u7f16\u8bd1\u52a0\u901f\u7684\u6587\u7ae0\u76f8\u4fe1\u5927\u5bb6\u90fd\u770b\u8fc7\u4e0d\u5c11\uff0c\u4f46\u5e38\u5e38\u8981\u4e48\u662f\u597d\u51e0\u5e74\u524d\u5199\u7684\uff0c\u76ee\u524d\u770b\u6765\u6709\u4e9b\u8fc7\u65f6\uff1b\u8981\u4e48\u4ecb\u7ecd\u4e86\u4e00\u5927\u5806\u914d\u7f6e\uff0c\u6700\u540e\u4e00\u5b9e\u8df5\u53d1\u73b0\u5e76\u6ca1\u6709\u591a\u5927\u6548\u679c\uff1b\u8981\u4e48\u5c31\u662f\u5927\u5382\u9ed1\u79d1\u6280\uff0c\u4f46\u662f\u6ca1\u6709\u5f00\u6e90\u3002</p> <p>\u4eca\u5929\u6211\u4eec\u5c31\u4e00\u8d77\u6765\u770b\u770b\uff0c\u57282022\u5e74<code>AGP7.0</code>\u65f6\u4ee3\uff0c\u9664\u4e86\u4f20\u7edf\u7684\u5f00\u542f<code>build-cache</code>\uff0c\u6253\u5f00\u5e76\u884c\u7f16\u8bd1\uff0c\u8c03\u6574<code>Gradle</code>\u5806\u5185\u5b58\u5927\u5c0f\u7b49\u5e38\u7528\u624b\u6bb5\u4e4b\u5916\uff0c\u8fd8\u6709\u54ea\u4e9b\u53ef\u4ee5\u843d\u5730\u7684\u7f16\u8bd1\u52a0\u901f\u5b9e\u7528\u6280\u5de7</p>"},{"location":"practical/compile/compile-acceleration/#_2","title":"\u4f7f\u7528\u6700\u65b0\u7248\u672c\u7f16\u8bd1\u5de5\u5177\u94fe","text":"<p>\u65e2\u7136\u662f2022\u5e74\u7f16\u8bd1\u52a0\u901f\u7684\u5b9e\u7528\u6280\u5de7\uff0c\u9996\u5148\u5c31\u662f\u8981\u6c42\u7f16\u8bd1\u5de5\u5177\u94fe\u7684\u7248\u672c\u6bd4\u8f83\u65b0\uff0c\u540e\u9762\u4ecb\u7ecd\u7684\u6280\u5de7\u5927\u90e8\u5206\u4e5f\u662f\u65b0\u5f15\u5165\u7684\u7279\u6027</p> <p>\u51e0\u4e4e\u6bcf\u6b21\u66f4\u65b0\u65f6\uff0c<code>Android</code> \u7f16\u8bd1\u5de5\u5177\u94fe\u90fd\u4f1a\u5f97\u5230\u4e00\u5b9a\u6027\u80fd\u4e0a\u7684\u4f18\u5316\u6216\u8005\u662f\u5f15\u5165\u65b0\u7684\u529f\u80fd\uff0c\u56e0\u6b64\u6211\u4eec\u5e94\u8be5\u53ca\u65f6\u8ddf\u8fdb<code>Gradle</code>\uff0c<code>Android Gradle Plugin</code>\u548c<code>Kotlin Gradle Plugin</code>\u7b49\u5de5\u5177\u7684\u66f4\u65b0\uff0c\u624d\u80fd\u53ca\u65f6\u83b7\u5f97\u5230\u76f8\u5e94\u7684\u6027\u80fd\u63d0\u5347</p>"},{"location":"practical/compile/compile-acceleration/#transformasmclassvisitorfactory","title":"<code>Transform</code>\u8fc1\u79fb\u5230<code>AsmClassVisitorFactory</code>","text":"<p><code>Transform API</code>\u662f<code>AGP1.5</code>\u5c31\u5f15\u5165\u7684\u7279\u6027\uff0c\u4e3b\u8981\u7528\u4e8e\u5728<code>Android</code>\u6784\u5efa\u8fc7\u7a0b\u4e2d\uff0c\u5728<code>Class</code>\u8f6c<code>Dex</code>\u7684\u8fc7\u7a0b\u4e2d\u4fee\u6539<code>Class</code>\u5b57\u8282\u7801\u3002\u5229\u7528<code>Transform API</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u62ff\u5230\u6240\u6709\u53c2\u4e0e\u6784\u5efa\u7684<code>Class</code>\u6587\u4ef6\uff0c\u7136\u540e\u53ef\u4ee5\u501f\u52a9<code>ASM</code> \u7b49\u5b57\u8282\u7801\u7f16\u8f91\u5de5\u5177\u8fdb\u884c\u4fee\u6539\uff0c\u63d2\u5165\u81ea\u5b9a\u4e49\u903b\u8f91\u3002</p> <p>\u56fd\u5185\u5f88\u591a\u56e2\u961f\u90fd\u6216\u591a\u6216\u5c11\u7684\u7528<code>AGP</code>\u7684<code>Transform API</code>\u6765\u641e\u70b9\u513f\u9ed1\u79d1\u6280\uff0c\u6bd4\u5982\u65e0\u75d5\u57cb\u70b9\uff0c\u8017\u65f6\u7edf\u8ba1\uff0c\u65b9\u6cd5\u66ff\u6362\u7b49\u3002\u4f46\u662f\u5728<code>AGP7.0</code>\u4e2d<code>Transform</code>\u5df2\u7ecf\u88ab\u6807\u8bb0\u4e3a\u5e9f\u5f03\u4e86\uff0c\u5e76\u4e14\u5c06\u5728<code>AGP8.0</code>\u4e2d\u79fb\u9664</p> <p>\u5728<code>AGP7.0</code>\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528<code>AsmClassVisitorFactory</code>\u6765\u505a\u63d2\u6869\uff0c\u6839\u636e\u5b98\u65b9\u7684\u8bf4\u6cd5\uff0c<code>AsmClassVisitoFactory</code>\u4f1a\u5e26\u6765\u7ea618%\u7684\u6027\u80fd\u63d0\u5347\uff0c\u540c\u65f6\u53ef\u4ee5\u51cf\u5c11\u7ea65\u500d\u4ee3\u7801</p> <p></p> <p><code>AsmClassVisitorFactory</code>\u4e4b\u6240\u4ee5\u6bd4<code>Transform</code>\u5728\u6027\u80fd\u4e0a\u6709\u4f18\u52bf\uff0c\u4e3b\u8981\u5728\u4e8e\u8282\u7701\u4e86<code>IO</code>\u7684\u65f6\u95f4\u3002</p> <p></p> <p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u591a\u4e2a<code>Transform</code>\u76f8\u4e92\u72ec\u7acb\uff0c\u90fd\u9700\u8981\u901a\u8fc7<code>IO</code>\u8bfb\u53d6\u8f93\u5165\uff0c\u4fee\u6539\u5b57\u8282\u7801\u540e\u5c06\u7ed3\u679c\u901a\u8fc7<code>IO</code>\u8f93\u51fa\uff0c\u4f9b\u4e0b\u4e00\u4e2a<code>Transform</code>\u4f7f\u7528\uff0c\u5982\u679c\u6bcf\u4e2a<code>Transform</code>\u64cd\u4f5c<code>IO</code>\u8017\u65f6+10s\u7684\u8bdd\uff0c\u5404\u4e2a<code>Transform</code>\u53e0\u5728\u4e00\u8d77\uff0c\u7f16\u8bd1\u8017\u65f6\u5c31\u4f1a\u5448\u7ebf\u6027\u589e\u957f</p> <p></p> <p>\u800c\u4f7f\u7528<code>AsmClassVisitorFactory</code>\u5219\u4e0d\u9700\u8981\u6211\u4eec\u624b\u52a8\u8fdb\u884c<code>IO</code>\u64cd\u4f5c\uff0c\u8fd9\u662f\u56e0\u4e3a<code>AsmInstrumentationManager</code>\u4e2d\u5df2\u7ecf\u505a\u4e86\u7edf\u4e00\u5904\u7406\uff0c\u53ea\u9700\u8981\u8fdb\u884c\u4e00\u6b21<code>IO</code>\u64cd\u4f5c\uff0c\u7136\u540e\u4ea4\u7ed9<code>ClassVisitor</code>\u5217\u8868\u5904\u7406\uff0c\u5b8c\u6210\u540e\u7edf\u4e00\u8f93\u51fa</p> <p>\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u51cf\u5c11<code>IO</code>\u64cd\u4f5c\uff0c\u51cf\u5c11\u8017\u65f6\u3002\u5176\u5b9e\u56fd\u5185\u4e4b\u524d\u6ef4\u6ef4\u5f00\u6e90\u7684<code>Booster</code>\u4e0e\u5b57\u8282\u5f00\u6e90\u7684<code>Bytex</code>\uff0c\u90fd\u662f\u901a\u8fc7\u8fd9\u79cd\u601d\u8def\u6765\u4f18\u5316<code>Transform</code>\u6027\u80fd\u7684\uff0c\u73b0\u5728\u5b98\u65b9\u7ec8\u4e8e\u8ddf\u8fdb\u4e86</p> <p>\u603b\u5f97\u6765\u8bf4\uff0c<code>AsmClassVisitorFactory</code>\u5728\u6027\u80fd\u4e0a\u4e0e\u6613\u7528\u6027\u4e0a\u90fd\u6709\u4e00\u5b9a\u7684\u63d0\u5347\uff0c\u5177\u4f53\u7528\u6cd5\u53ef\u53c2\u89c1\uff1aTransform \u88ab\u5e9f\u5f03\uff0cASM \u5982\u4f55\u9002\u914d?</p>"},{"location":"practical/compile/compile-acceleration/#kapt-ksp","title":"KAPT \u8fc1\u79fb\u5230 KSP","text":"<p>\u6ce8\u89e3\u5904\u7406\u5668\u662f<code>Android</code>\u5f00\u53d1\u4e2d\u4e00\u79cd\u5e38\u7528\u7684\u6280\u672f\uff0c\u5f88\u591a\u5e38\u7528\u7684\u6846\u67b6\u6bd4\u5982<code>ButterKnife</code>\uff0c<code>ARouter</code>\uff0c<code>Glide</code>\u4e2d\u90fd\u4f7f\u7528\u5230\u4e86\u6ce8\u89e3\u5904\u7406\u5668\u76f8\u5173\u6280\u672f</p> <p>\u4f46\u662f\u5982\u679c\u9879\u76ee\u6bd4\u8f83\u5927\u7684\u8bdd\uff0c\u4f1a\u5f88\u5bb9\u6613\u53d1\u73b0<code>KAPT</code>\u662f\u62d6\u6162\u7f16\u8bd1\u901f\u5ea6\u7684\u5e38\u89c1\u539f\u56e0\uff0c\u8fd9\u4e5f\u662f\u8c37\u6b4c\u63a8\u51fa<code>KSP</code>\u53d6\u4ee3<code>KAPT</code>\u7684\u539f\u56e0</p> <p></p> <p>\u4ece\u4e0a\u9762\u8fd9\u5f20\u56fe\u5176\u5b9e\u5c31\u53ef\u4ee5\u770b\u51fa<code>KAPT</code>\u6162\u7684\u539f\u56e0\u4e86\uff0c<code>KAPT</code> \u901a\u8fc7\u4e0e <code>Java</code> \u6ce8\u89e3\u5904\u7406\u57fa\u7840\u67b6\u6784\u76f8\u7ed3\u5408\uff0c\u8ba9\u5927\u90e8\u5206<code>Java</code>\u8bed\u8a00\u6ce8\u89e3\u5904\u7406\u5668\u80fd\u591f\u5728<code>Kotlin</code>\u4e2d\u5f00\u7bb1\u5373\u7528\u3002</p> <p>\u4e3a\u6b64\uff0c<code>KAPT</code> \u9996\u5148\u9700\u8981\u5c06 <code>Kotlin</code> \u4ee3\u7801\u7f16\u8bd1\u6210 <code>JavaStubs</code>\uff0c\u8fd9\u4e9b<code>JavaStubs</code>\u4e2d\u4fdd\u7559\u4e86<code>Java</code>\u6ce8\u89e3\u5904\u7406\u5668\u5173\u6ce8\u7684\u4fe1\u606f\u3002</p> <p>\u8fd9\u610f\u5473\u7740\u7f16\u8bd1\u5668\u5fc5\u987b\u591a\u6b21\u89e3\u6790\u7a0b\u5e8f\u4e2d\u7684\u6240\u6709\u7b26\u53f7 (\u4e00\u6b21\u751f\u6210<code>JavaStubs</code>\uff0c\u53e6\u4e00\u6b21\u5b8c\u6210\u5b9e\u9645\u7f16\u8bd1)\uff0c\u4f46\u662f\u751f\u6210<code>JavaStubs</code>\u7684\u8fc7\u7a0b\u662f\u975e\u5e38\u8017\u65f6\u7684\uff0c\u5f80\u5f80\u751f\u6210<code>Java Stubs</code>\u7684\u65f6\u95f4\u6bd4<code>APT</code>\u771f\u6b63\u5904\u7406\u6ce8\u89e3\u7684\u65f6\u95f4\u8981\u957f</p> <p>\u800c<code>KSP</code>\u4e0d\u9700\u8981\u751f\u6210<code>JavaStubs</code>\uff0c\u800c\u662f\u4f5c\u4e3a<code>Kotlin</code>\u7f16\u8bd1\u5668\u63d2\u4ef6\u8fd0\u884c\u3002\u5b83\u53ef\u4ee5\u76f4\u63a5\u5904\u7406<code>Kotlin</code>\u7b26\u53f7\uff0c\u800c\u4e0d\u9700\u8981\u4f9d\u8d56<code>Java</code>\u6ce8\u89e3\u5904\u7406\u57fa\u7840\u67b6\u6784\u3002</p> <p>\u56e0\u4e3a<code>KSP</code>\u76f8\u6bd4<code>KAPT</code>\u5c11\u4e86\u751f\u6210<code>JavaStubs</code>\u7684\u8fc7\u7a0b\uff0c\u56e0\u6b64\u901a\u5e38\u53ef\u4ee5\u5f97\u5230100%\u4ee5\u4e0a\u7684\u901f\u5ea6\u63d0\u5347\u3002\u5173\u4e8e<code>KSP</code>\u7684\u5177\u4f53\u4f7f\u7528\u65b9\u6cd5\u53ef\u53c2\u89c1\uff1a\u4f7f\u7528 Kotlin Symbol Processing 1.0 \u7f29\u77ed Kotlin \u6784\u5efa\u65f6\u95f4</p>"},{"location":"practical/compile/compile-acceleration/#_3","title":"\u8fc1\u79fb\u65b9\u6848","text":"<p>\u76ee\u524d<code>KSP</code>\u5df2\u7ecf\u53d1\u5e03\u4e86\u7a33\u5b9a\u7248\u4e86\uff0c\u50cf<code>Room</code>\uff0c<code>Moshi</code>\u7b49\u5e93\u4e5f\u5df2\u7ecf\u505a\u4e86\u9002\u914d\uff0c\u5bf9\u4e8e\u8fd9\u4e9b\u5df2\u7ecf\u9002\u914d\u4e86\u7684\u5e93\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8fc1\u79fb\u3002</p> <p>\u4f46\u8fd8\u662f\u6709\u4e00\u4e9b\u5e38\u7528\u7684\u5e93\u6bd4\u5982<code>Glide</code>\uff0c<code>ARouter</code>\u8fd8\u6ca1\u6709\u505a\u9002\u914d\uff0c\u8fd9\u4e9b\u5e93\u662f\u6211\u4eec\u79fb\u9664<code>KAPT</code>\u6700\u5927\u7684\u969c\u788d\u3002</p> <p>\u4e0b\u9762\u7ed9\u51fa\u4e00\u4e9b\u8fd8\u4e0d\u652f\u6301<code>KSP</code>\u7684\u5e93\u7684\u8fc7\u6e21\u8fc1\u79fb\u65b9\u6cd5</p> <ol> <li><code>KAPT</code>\u4e00\u822c\u5c31\u662f\u7528\u6765\u751f\u6210\u4ee3\u7801\uff0c\u50cf<code>Glide</code>\u8fd9\u79cd\u751f\u6210\u7684\u4ee3\u7801\u6bd4\u8f83\u7a33\u5b9a\u7684\u5e93(\u901a\u5e38\u53ea\u6709\u51e0\u4e2a<code>@GlideModule</code>)\uff0c\u53ef\u4ee5\u76f4\u63a5\u628a\u751f\u6210\u7684\u4ee3\u7801\u4ece<code>build</code>\u76ee\u5f55\u62f7\u8d1d\u5230\u9879\u76ee\u4e2d\u6765\uff0c\u7136\u540e\u79fb\u9664<code>KAPT</code>\uff0c\u540e\u7eed\u5982\u679c\u6709\u65b0\u7684<code>@GlideModule</code>\u518d\u66f4\u65b0\u4e0b\u751f\u6210\u7684\u6587\u4ef6\uff08\u5f53\u7136\u8fd9\u6837\u53ef\u80fd\u4e0d\u592a\u65b9\u4fbf\uff0c\u53ea\u662f\u4e00\u79cd\u8fc7\u6e21\u7684\u65b9\u5f0f\uff0c\u7b49\u5f85<code>Glide</code>\u5b98\u65b9\u66f4\u65b0\uff09</li> <li>\u5bf9\u4e8e<code>ARouter</code>\u8fd9\u79cd\u751f\u6210\u4ee3\u7801\u4e0d\u65ad\u589e\u52a0\u7684\u5e93(\u4e0d\u65ad\u6709\u65b0\u7684<code>@ARouter</code>\u6ce8\u89e3)\uff0c\u4e0a\u9762\u7684\u65b9\u5f0f\u5c31\u4e0d\u592a\u9002\u7528\u4e86\u3002\u8003\u8651\u5230<code>ARoutr</code>\u5df2\u7ecf\u5f88\u4e45\u6ca1\u6709\u66f4\u65b0\u4e86\uff0c\u53ef\u4ee5\u8003\u8651\u8fc1\u79fb\u5230\u4e00\u4e2a\u4e0d\u4f7f\u7528<code>KAPT</code>\u7684\u65b0\u7684\u8def\u7531\u5e93</li> </ol> <p>\u66f4\u65b0\uff1a <code>Glide</code>\u6700\u65b0\u7248\u672c\u5df2\u7ecf\u652f\u6301\u4e86<code>KSP</code>\uff0c\u53ef\u4ee5\u76f4\u63a5\u5347\u7ea7\u63a5\u5165\u4e86</p>"},{"location":"practical/compile/compile-acceleration/#configuration-cache","title":"\u5f00\u542f<code>Configuration Cache</code>","text":"<p>\u6211\u4eec\u77e5\u9053\uff0c<code>Gradle</code> \u7684\u751f\u547d\u5468\u671f\u53ef\u4ee5\u5206\u4e3a\u5927\u7684\u4e09\u4e2a\u90e8\u5206\uff1a\u521d\u59cb\u5316\u9636\u6bb5\uff08<code>Initialization Phase</code>)\uff0c\u914d\u7f6e\u9636\u6bb5\uff08<code>Configuration Phase</code>\uff09\uff0c\u6267\u884c\u9636\u6bb5\uff08<code>Execution Phase</code>\uff09\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5728\u4efb\u52a1\u6267\u884c\u9636\u6bb5\uff0c<code>Gradle</code>\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u5f0f\u5b9e\u73b0<code>Task</code>\u7684\u7f13\u5b58\u4e0e\u91cd\u7528\uff08\u5982<code>up-to-date</code>\u68c0\u6d4b\uff0c\u589e\u91cf\u7f16\u8bd1\uff0c<code>build-cache</code>\u7b49\uff09</p> <p>\u9664\u4e86\u4efb\u52a1\u6267\u884c\u9636\u6bb5\uff0c\u4efb\u52a1\u914d\u7f6e\u9636\u6bb5\u6709\u65f6\u4e5f\u6bd4\u8f83\u8017\u65f6\uff0c\u76ee\u524d<code>AGP</code>\u4e5f\u652f\u6301\u4e86\u914d\u7f6e\u9636\u6bb5\u7f13\u5b58<code>Configuration Cache</code>,\u5b83\u53ef\u4ee5\u7f13\u5b58\u914d\u7f6e\u9636\u6bb5\u7684\u7ed3\u679c\uff0c\u5f53\u811a\u672c\u6ca1\u6709\u53d1\u751f\u6539\u53d8\u65f6\u53ef\u4ee5\u91cd\u7528\u4e4b\u524d\u7684\u7ed3\u679c</p> <p>\u5728\u8d8a\u5927\u7684\u9879\u76ee\u4e2d\u914d\u7f6e\u9636\u6bb5\u7f13\u5b58\u7684\u6536\u76ca\u8d8a\u5927\uff0c<code>module</code>\u6bd4\u8f83\u591a\u7684\u9879\u76ee\u53ef\u80fd\u6bcf\u6b21\u6267\u884c\u90fd\u8981\u5148\u914d\u7f6e20\u523030\u79d2\uff0c\u5c24\u5176\u662f\u589e\u91cf\u7f16\u8bd1\u65f6\uff0c\u914d\u7f6e\u7684\u8017\u65f6\u53ef\u80fd\u90fd\u8ddf\u6267\u884c\u7684\u8017\u65f6\u5dee\u4e0d\u591a\u4e86\uff0c\u800c\u8fd9\u6b63\u662f<code>configuration-cache</code>\u7684\u7528\u6b66\u4e4b\u5730</p> <p>\u76ee\u524d<code>Configuration-cache</code>\u8fd8\u662f\u5b9e\u9a8c\u7279\u6027\uff0c\u5982\u679c\u4f60\u60f3\u8981\u5f00\u542f\u7684\u8bdd\u53ef\u4ee5\u5728<code>gradle.properties</code>\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801</p> <pre><code># configuration cache\norg.gradle.unsafe.configuration-cache=true\norg.gradle.unsafe.configuration-cache-problems=warn\n</code></pre> <p>\u5f00\u542f\u4e86<code>Configuration cache</code>\u4e4b\u540e\u6548\u679c\u8fd8\u662f\u6bd4\u8f83\u660e\u663e\u7684\uff0c\u5982\u679c\u6784\u5efa\u811a\u672c\u6ca1\u6709\u53d1\u751f\u53d8\u5316\u53ef\u4ee5\u76f4\u63a5\u8df3\u8fc7\u914d\u7f6e\u9636\u6bb5</p> <p></p> <p><code>Android</code>\u5b98\u65b9\u7ed9\u51fa\u4e86\u4e00\u4e2a\u5f00\u542f<code>Configuration cache</code>\u524d\u540e\u7684\u5bf9\u6bd4\uff0c\u53ef\u4ee5\u770b\u51fa\u5728\u8fd9\u4e2a<code>benchmark</code>\u4e2d\u53ef\u4ee5\u5f97\u5230\u7ea630%\u7684\u63d0\u5347(\u5f53\u7136\u662f\u5728\u914d\u7f6e\u9636\u6bb5\u8017\u65f6\u5360\u6bd4\u8d8a\u9ad8\u7684\u65f6\u5019\u6548\u679c\u8d8a\u660e\u663e\uff0c\u5168\u91cf\u7f16\u8bd1\u65f6\u5e94\u8be5\u4e0d\u4f1a\u6709\u8fd9\u6837\u7684\u6bd4\u4f8b)</p>"},{"location":"practical/compile/compile-acceleration/#configuration-cache_1","title":"<code>Configuration Cache</code>\u9002\u914d","text":"<p>\u5f53\u7136\u6253\u5f00<code>Configuration Cache</code>\u4e4b\u540e\u53ef\u80fd\u4f1a\u6709\u4e00\u4e9b\u9002\u914d\u95ee\u9898\uff0c\u5982\u679c\u662f\u7b2c\u4e09\u65b9\u63d2\u4ef6\uff0c\u53d1\u73b0\u5e38\u7528\u63d2\u4ef6\u51fa\u73b0\u4e0d\u652f\u6301\u7684\u60c5\u51b5\uff0c\u53ef\u5148\u641c\u7d22\u662f\u5426\u6709\u76f8\u540c\u7684\u95ee\u9898\u5df2\u7ecf\u51fa\u73b0\u5e76\u4fee\u590d</p> <p>\u5982\u679c\u662f\u9879\u76ee\u4e2d\u81ea\u5b9a\u4e49<code>Task</code>\u4e0d\u652f\u6301\u7684\u8bdd\uff0c\u8fd8\u9700\u8981\u9002\u914d\u4e00\u4e0b<code>Configuration Cache</code>\uff0c\u9002\u914d<code>Configuration Cache</code>\u7684\u6838\u5fc3\u601d\u8def\u5176\u5b9e\u5f88\u7b80\u5355\uff1a\u4e0d\u8981\u5728<code>Task</code>\u6267\u884c\u9636\u6bb5\u8c03\u7528\u5916\u90e8\u4e0d\u53ef\u5e8f\u5217\u5316\u7684\u5bf9\u8c61(\u6bd4\u5982<code>Project</code>\u4e0e<code>Variant</code>)</p> <p>\u4e0d\u8fc7\u5982\u679c\u4f60\u7684\u9879\u76ee\u4e2d\u81ea\u5b9a\u4e49<code>Task</code>\u6bd4\u8f83\u591a\u7684\u8bdd\uff0c\u9002\u914d<code>Configuration Cache</code>\u53ef\u80fd\u662f\u4e2a\u4f53\u529b\u6d3b\uff0c\u6bd4\u5982 <code>AGP</code> \u517c\u5bb9 <code>Configuration Cache</code> \u5c31\u4fee\u4e86 400 \u591a\u4e2a <code>ISSUE</code></p> <p>\u5982\u9700\u8be6\u7ec6\u4e86\u89e3\u914d\u7f6e\u7f13\u5b58\uff0c\u8bf7\u53c2\u9605\u914d\u7f6e\u7f13\u5b58\u6df1\u5ea6\u89e3\u6790\u548c\u6709\u5173\u914d\u7f6e\u7f13\u5b58\u7684 Gradle \u6587\u6863</p>"},{"location":"practical/compile/compile-acceleration/#jetifier","title":"\u79fb\u9664<code>Jetifier</code>","text":"<p><code>Jetifier</code>\u662f<code>android support</code>\u5305\u8fc1\u79fb\u5230<code>androidX</code>\u7684\u5de5\u5177\uff0c\u5f53\u4f60\u5728\u9879\u76ee\u4e2d\u542f\u52a8\u7528<code>Jetifier</code>\u65f6 \uff0c<code>Gradle</code>\u63d2\u4ef6\u4f1a\u5728\u6784\u5efa\u65f6\u5c06\u4e09\u65b9\u5e93\u91cc\u7684<code>Support</code>\u8f6c\u6362\u6210<code>AndroidX</code>\uff0c\u56e0\u6b64\u4f1a\u5bf9\u6784\u5efa\u901f\u5ea6\u4ea7\u751f\u5f71\u54cd\u3002</p> <p>\u540c\u65f6<code>Jetfier</code>\u4e5f\u4f1a\u5bf9<code>sync</code>\u8017\u65f6\u4ea7\u751f\u6bd4\u8f83\u5927\u7684\u5f71\u54cd\uff0c\u8be6\u60c5\u53ef\u89c1B\u7ad9\u5927\u4f6c\u7684\u5206\u6790\uff1a\u54d4\u54e9\u54d4\u54e9 Android \u540c\u6b65\u4f18\u5316\u2022Jetifier</p> <p><code>Jetifier</code>\u5728<code>AndroidX</code>\u521a\u51fa\u73b0\u65f6\u662f\u4e00\u4e2a\u975e\u5e38\u5b9e\u7528\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u7684\u8fc1\u79fb\u5230<code>AndroidX</code>\u3002\u4f46\u662f\u5230\u4e862022\u5e74\uff0c\u76f8\u4fe1\u7edd\u5927\u591a\u6570\u5e93\u90fd\u5df2\u7ecf\u8fc1\u79fb\u5230\u4e86<code>AndroidX</code>\uff0c<code>Jetifier</code>\u7684\u5386\u53f2\u4f7f\u547d\u53ef\u4ee5\u8bf4\u5df2\u7ecf\u5b8c\u6210\u4e86\uff0c\u56e0\u6b64\u662f\u65f6\u5019\u79fb\u9664<code>Jetifier</code>\u4e86</p>"},{"location":"practical/compile/compile-acceleration/#jetifier_1","title":"\u68c0\u6d4b\u4e0d\u652f\u6301<code>Jetifier</code>\u7684\u5e93","text":"<p><code>AGP7.0</code>\u5df2\u7ecf\u63d0\u4f9b\u4e86\u5de5\u5177\u4f9b\u6211\u4eec\u68c0\u67e5\u6bcf\u4e2a<code>module</code>\u80fd\u5426\u79fb\u9664<code>Jetifier</code>\uff0c\u76f4\u63a5\u8fd0\u884c<code>./gradlew checkJetifier</code>\u5373\u53ef\uff0c\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u68c0\u67e5\u6240\u6709<code>module</code>\u7684<code>Jetifier</code>\u4f7f\u7528\u60c5\u51b5</p> <pre><code>task checkJetifierAll(group: \"verification\") { }\n\nsubprojects { project -&gt;\n    project.tasks.whenTaskAdded { task -&gt;\n        if (task.name == \"checkJetifier\") {\n            checkJetifierAll.dependsOn(task)\n        }\n    }\n}\n</code></pre> <p>\u901a\u8fc7\u8fd0\u884c<code>./gradlew checkJetifierAll</code>\u5c31\u53ef\u4ee5\u6253\u5370\u51fa\u6240\u6709<code>module</code>\u7684<code>Jetifier</code>\u4f7f\u7528\u60c5\u51b5</p>"},{"location":"practical/compile/compile-acceleration/#_4","title":"\u8fc1\u79fb\u65b9\u6848","text":"<p>\u5728\u660e\u786e\u4e86\u54ea\u4e9b\u5e93\u8fd8\u4e0d\u652f\u6301<code>Jetifier</code>\u4e4b\u540e\uff0c\u53ef\u4ee5\u4e00\u6b65\u6b65\u5f00\u59cb\u8fc1\u79fb\u4e86</p> <ol> <li>\u68c0\u6d4b\u5e93\u6709\u6ca1\u6709\u5df2\u7ecf\u652f\u6301\u4e86<code>androidX</code>\u7684\u6700\u65b0\u7248\u672c\uff0c \u5982\u679c\u6709\u76f4\u63a5\u5347\u7ea7\u5373\u53ef</li> <li>\u5982\u679c\u6709\u6e90\u7801\uff0c\u6dfb\u52a0<code>android.useAndroidX = true</code>\uff0c\u8fc1\u79fb\u5230<code>AndroidX</code>\uff0c\u7136\u540e\u5347\u7ea7\u6240\u6709\u7684\u4f9d\u8d56\uff0c\u53d1\u5e03\u4e2a\u65b0\u7248\u672c\u5c31\u53ef\u4ee5\u4e86\u3002     </li> <li>\u5982\u679c\u4f60\u6ca1\u6709\u6e90\u7801\uff0c\u6216\u5bf9\u4e8e\u4f60\u7684\u9879\u76ee\u6765\u8bf4\uff0c\u5b83\u592a\u8001\u4e86\u3002\u4f60\u53ef\u4ee5\u7528jetifier-standalone\u547d\u4ee4\u884c\u5de5\u5177\u628a<code>AAR/JAR</code>\u8f6c\u6210<code>jetified</code>\u4e4b\u540e\u7684<code>AAR/JAR</code>\u3002\u8fd9\u4e2a\u547d\u4ee4\u884c\u7684\u8f6c\u6362\u6548\u679c\u548c\u4f60\u5728\u4ee3\u7801\u91cc\u5f00\u542f<code>android.enableJetifier</code>\u7684\u6548\u679c\u662f\u4e00\u6837\u7684\u3002\u547d\u4ee4\u884c\u5982\u4e0b\uff1a</li> </ol> <pre><code>// https://developer.android.com/studio/command-line/jetifier    \n./jetifier-standalone -i &lt;source-library&gt; -o &lt;output-library&gt;  \n</code></pre>"},{"location":"practical/compile/compile-acceleration/#r","title":"\u5173\u95ed<code>R</code>\u6587\u4ef6\u4f20\u9012","text":"<p>\u5728 <code>apk</code> \u6253\u5305\u7684\u8fc7\u7a0b\u4e2d\uff0c<code>module</code> \u4e2d\u7684 <code>R</code> \u6587\u4ef6\u91c7\u7528\u5bf9\u4f9d\u8d56\u5e93\u7684<code>R</code>\u8fdb\u884c\u7d2f\u8ba1\u53e0\u52a0\u7684\u65b9\u5f0f\u751f\u6210\u3002\u5982\u679c\u6211\u4eec\u7684 <code>app</code> \u67b6\u6784\u5982\u4e0b\uff1a</p> <p></p> <p>\u7f16\u8bd1\u6253\u5305\u65f6\u6bcf\u4e2a\u6a21\u5757\u751f\u6210\u7684<code>R</code>\u6587\u4ef6\u5982\u4e0b\uff1a</p> <pre><code>1. R_lib1 = R_lib1;\n2. R_lib2 = R_lib2;\n3. R_lib3 = R_lib3;\n4. R_biz1 = R_lib1 + R_lib2 + R_lib3 + R_biz1(biz1\u672c\u8eab\u7684R)\n5. R_biz2 = R_lib2 + R_lib3 + R_biz2(biz2\u672c\u8eab\u7684R)\n6. R_app = R_lib1 + R_lib2 + R_lib3 + R_biz1 + R_biz2 + R_app(app\u672c\u8eabR)\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\u5404\u4e2a\u6a21\u5757\u7684R\u6587\u4ef6\u90fd\u4f1a\u5305\u542b\u4e0a\u5c42\u7ec4\u4ef6\u7684<code>R</code>\u6587\u4ef6\u5185\u5bb9\uff0c\u8fd9\u4e0d\u4ec5\u4f1a\u5e26\u6765\u5305\u4f53\u79ef\u95ee\u9898\uff0c\u4e5f\u4f1a\u7ed9\u7f16\u8bd1\u901f\u5ea6\u5e26\u6765\u4e00\u5b9a\u7684\u5f71\u54cd\u3002\u6bd4\u5982\u6211\u4eec\u5728<code>R_lib1</code>\u4e2d\u6dfb\u52a0\u4e86\u8d44\u6e90\uff0c\u6240\u6709\u4e0b\u6e38\u6a21\u5757\u7684<code>R</code>\u6587\u4ef6\u90fd\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u3002</p> <ol> <li>\u5173\u95ed<code>R</code>\u6587\u4ef6\u4f20\u9012\u53ef\u4ee5\u901a\u8fc7\u7f16\u8bd1\u907f\u514d\u7684\u65b9\u5f0f\u83b7\u5f97\u66f4\u5feb\u7684\u7f16\u8bd1\u901f\u5ea6</li> <li>\u5173\u95ed<code>R</code>\u6587\u4ef6\u4f20\u9012\u6709\u52a9\u4e8e\u786e\u4fdd\u6bcf\u4e2a\u6a21\u5757\u7684<code>R</code>\u7c7b\u4ec5\u5305\u542b\u5bf9\u5176\u81ea\u8eab\u8d44\u6e90\u7684\u5f15\u7528\uff0c\u907f\u514d\u65e0\u610f\u4e2d\u5f15\u7528\u5176\u4ed6\u6a21\u5757\u8d44\u6e90\uff0c\u660e\u786e\u6a21\u5757\u8fb9\u754c\u3002</li> <li>\u5173\u95ed<code>R</code>\u6587\u4ef6\u4f20\u9012\u4e5f\u53ef\u4ee5\u51cf\u5c11\u5f88\u5927\u4e00\u90e8\u5206\u5305\u4f53\u79ef\u4e0e<code>dex</code>\u6570\u91cf</li> </ol>"},{"location":"practical/compile/compile-acceleration/#_5","title":"\u8fc1\u79fb\u65b9\u6848","text":"<p>\u4ece <code>Android Studio Bumblebee</code> \u5f00\u59cb\uff0c\u65b0\u9879\u76ee\u7684\u975e\u4f20\u9012 <code>R</code> \u7c7b\u9ed8\u8ba4\u5904\u4e8e\u5f00\u542f\u72b6\u6001\u3002\u5373<code>gradle.properties</code>\u6587\u4ef6\u4e2d\u90fd\u5f00\u542f\u4e86\u5982\u4e0b\u6807\u8bb0</p> <pre><code>android.nonTransitiveRClass=true\n</code></pre> <p>\u5bf9\u4e8e\u4f7f\u7528\u65e9\u671f\u7248\u672c\u7684 <code>Studio</code> \u521b\u5efa\u7684\u9879\u76ee\uff0c\u60a8\u53ef\u4ee5\u4f9d\u6b21\u524d\u5f80 <code>Refactor &gt; Migrate to Non-transitive R Classes</code>\uff0c\u5c06\u9879\u76ee\u66f4\u65b0\u4e3a\u4f7f\u7528\u975e\u4f20\u9012 <code>R</code> \u7c7b\u3002</p>"},{"location":"practical/compile/compile-acceleration/#kotlin","title":"\u5f00\u542f<code>Kotlin</code>\u8de8\u6a21\u5757\u589e\u91cf\u7f16\u8bd1","text":"<p>\u4f7f\u7528\u7ec4\u4ef6\u5316\u591a\u6a21\u5757\u5f00\u53d1\u7684\u540c\u5b66\u90fd\u6709\u7ecf\u9a8c\uff0c\u5f53\u6211\u4eec\u4fee\u6539\u5e95\u5c42\u6a21\u5757(\u6bd4\u5982<code>util</code>\u6a21\u5757)\u65f6\uff0c\u6240\u6709\u4f9d\u8d56\u4e8e\u8fd9\u4e2a\u6a21\u5757\u7684\u4e0a\u5c42\u6a21\u5757\u90fd\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\uff0c<code>Kotlin</code>\u7684\u589e\u91cf\u7f16\u8bd1\u5728\u8fd9\u79cd\u60c5\u51b5\u5f80\u5f80\u662f\u4e0d\u751f\u6548\u7684\uff0c\u8fd9\u79cd\u65f6\u5019\u7684\u7f16\u8bd1\u5f80\u5f80\u975e\u5e38\u8017\u65f6</p> <p>\u5728<code>Kotlin 1.7.0</code>\u4e2d\uff0c<code>Kotlin</code>\u7f16\u8bd1\u5668\u5bf9\u4e8e\u8de8\u6a21\u5757\u589e\u91cf\u7f16\u8bd1\u4e5f\u505a\u4e86\u652f\u6301\uff0c\u5e76\u4e14\u4e0e<code>Gradle</code>\u6784\u5efa\u7f13\u5b58\u517c\u5bb9\uff0c\u5bf9\u7f16\u8bd1\u907f\u514d\u7684\u652f\u6301\u4e5f\u5f97\u5230\u4e86\u6539\u8fdb\u3002\u8fd9\u4e9b\u6539\u8fdb\u51cf\u5c11\u4e86\u6a21\u5757\u548c\u6587\u4ef6\u91cd\u65b0\u7f16\u8bd1\u7684\u6b21\u6570\uff0c\u8ba9\u6574\u4f53\u7f16\u8bd1\u66f4\u52a0\u8fc5\u901f</p>"},{"location":"practical/compile/compile-acceleration/#_6","title":"\u4f18\u5316\u6548\u679c","text":"<p>\u9996\u5148\u6765\u770b\u4e0b<code>Kotlin</code>\u5b98\u65b9\u7684\u6570\u636e\uff0c\u4ee5\u4e0b\u57fa\u51c6\u6d4b\u8bd5\u7ed3\u679c\u662f\u5728<code>Kotlin</code>\u9879\u76ee\u4e2d\u7684<code>kotlin-gradle-plugin</code>\u6a21\u5757\u4e0a\u6d4b\u5f97\uff1a</p> <p></p> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u5f53\u7f13\u5b58\u547d\u4e2d\u65f6\u670986%\u523096%\u7684\u52a0\u901f\u6548\u679c\uff0c\u5f53\u7f13\u5b58\u6ca1\u6709\u547d\u4e2d\u65f6\u4e5f\u670926%\u7684\u52a0\u901f\u6548\u679c</p> <p>\u6211\u5728\u9879\u76ee\u4e2d\u5f00\u542f\u540e\u5b9e\u6d4b\u6548\u679c\u4e5f\u5f88\u4e0d\u9519\uff0c\u4fee\u6539\u4e00\u4e2a\u5e95\u5c42\u6a21\u5757\uff0c\u5728\u7279\u6027\u5f00\u542f\u524d\u9700\u8981\u8017\u65f64\u5206\u949f\u5de6\u53f3\uff0c\u5f00\u542f\u540e\u589e\u91cf\u7f16\u8bd1\u8017\u65f6\u51cf\u5c11\u523030\u523040s\uff0c\u52a0\u901f\u7ea685%</p>"},{"location":"practical/compile/compile-acceleration/#_7","title":"\u5982\u4f55\u5f00\u542f","text":"<p>\u5728 <code>gradle.properties</code> \u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4ee5\u4e0b\u9009\u9879\u5373\u53ef\u4f7f\u7528\u65b0\u65b9\u5f0f\u8fdb\u884c\u589e\u91cf\u7f16\u8bd1\uff1a</p> <pre><code>kotlin.incremental.useClasspathSnapshot=true // \u5f00\u542f\u8de8\u6a21\u5757\u589e\u91cf\u7f16\u8bd1\nkotlin.build.report.output=file // \u53ef\u9009\uff0c\u542f\u7528\u6784\u5efa\u62a5\u544a\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u5f00\u542f\u6b65\u9aa4\u8fd8\u662f\u975e\u5e38\u7b80\u5355\u7684\uff0c\u5173\u4e8e<code>Kotlin</code>\u8de8\u6a21\u5757\u589e\u91cf\u7f16\u8bd1\u7684\u539f\u7406\u53ef\u53c2\u89c1\uff1aKotlin \u589e\u91cf\u7f16\u8bd1\u7684\u65b0\u65b9\u5f0f</p> <p>\u5bf9\u4e8e\u589e\u91cf\u7f16\u8bd1\uff0c\u7a33\u5b9a\u6027\u548c\u53ef\u9760\u6027\u81f3\u5173\u91cd\u8981\u3002\u6709\u65f6\u589e\u91cf\u7f16\u8bd1\u603b\u4f1a\u5931\u6548\uff0c<code>Kotlin 1.7</code>\u540c\u6837\u652f\u6301\u4e3a\u7f16\u8bd1\u4efb\u52a1\u521b\u5efa\u7f16\u8bd1\u62a5\u544a\uff0c\u62a5\u544a\u5305\u542b\u4e0d\u540c\u7f16\u8bd1\u9636\u6bb5\u7684\u6301\u7eed\u65f6\u95f4\u4ee5\u53ca\u65e0\u6cd5\u4f7f\u7528\u589e\u91cf\u7f16\u8bd1\u7684\u539f\u56e0\uff0c\u53ef\u4ee5\u5e2e\u52a9\u4f60\u5b9a\u4f4d\u4e3a\u4ec0\u4e48\u589e\u91cf\u7f16\u8bd1\u5931\u6548\u4e86</p> <p>\u5173\u4e8e\u7f16\u8bd1\u62a5\u544a\u7684\u542f\u7528\u4e0e\u4f7f\u7528\u53ef\u89c1\uff1a\u9686\u91cd\u63a8\u51fa Kotlin \u6784\u5efa\u62a5\u544a</p>"},{"location":"practical/compile/compile-acceleration/#_8","title":"\u5347\u7ea7\u4f60\u7684\u7535\u8111\u914d\u7f6e","text":"<p>\u9664\u4e86\u4e0a\u8ff0\u7684\u8f6f\u4ef6\u65b9\u5411\u7684\u4e00\u7cfb\u5217\u4f18\u5316\uff0c\u4e5f\u53ef\u4ee5\u4ece\u786c\u4ef6\u65b9\u5411\u8fdb\u884c\u4f18\u5316\uff0c\u4e5f\u5c31\u662f\u5347\u7ea7\u4f60\u7684\u7535\u8111\u914d\u7f6e</p> <p>\u4e2a\u4eba\u611f\u89c9\u5f71\u54cd\u7f16\u8bd1\u901f\u5ea6\u7684\u5173\u952e\u57fa\u672c\u914d\u7f6e\u5982\u4e0b\uff1a</p> <ul> <li><code>CPU</code>\uff1a2022\u5e74\u4e86\uff0c\u6700\u597d\u76f4\u63a5\u4e0a<code>M1</code>\u5427\uff0c\u7684\u786e\u8981\u5feb\u4e0d\u5c11\uff0c\u76f8\u4fe1\u5927\u5bb6\u5e94\u8be5\u770b\u5230\u8fc7\u4e00\u4e9b\u8bf4\u6362<code>M1</code>\u540e\u7f16\u8bd1\u901f\u5ea6\u53d8\u5feb\u7684\u5e16\u5b50</li> <li>\u5185\u5b58\uff1a\u81f3\u5c11\u898116G\uff0c\u6709\u6761\u4ef6\u5efa\u8bae\u4e0a32G\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u5927\u578b\u9879\u76ee\uff0c\u5185\u5b58\u751a\u81f3\u6bd4<code>CPU</code>\u66f4\u91cd\u8981\uff0c\u56e0\u4e3a<code>Gradle</code>\u5b88\u62a4\u8fdb\u7a0b\u5360\u7528\u7684\u5185\u5b58\u53ef\u4ee5\u975e\u5e38\u5927</li> <li>\u786c\u76d8\uff1a\u5fc5\u987b\u662f<code>SSD</code>\u56fa\u6001\u786c\u76d8\uff0c256G\u52c9\u5f3a\u591f\u7528\uff0c\u6700\u597d\u662f512G\uff0c<code>Gradle</code>\u6784\u5efa\u7f13\u5b58(<code>build-cache</code>)\u5360\u7528\u7684\u7a7a\u95f4\u4e5f\u633a\u5927\u7684</li> </ul> <p>\u4ece\u786c\u4ef6\u65b9\u5411\u5165\u624b\uff0c\u6709\u65f6\u4e5f\u53ef\u4ee5\u5f97\u5230\u4e0d\u9519\u7684\u4f18\u5316\u6548\u679c\uff0c\u5145\u94b1\u662f\u771f\u7684\u53ef\u4ee5\u53d8\u5f3a\u7684</p>"},{"location":"practical/compile/compile-acceleration/#_9","title":"\u603b\u7ed3","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u7f16\u8bd1\u52a0\u901f\u76848\u4e2a\u5b9e\u7528\u6280\u5de7\uff0c\u6709\u7684\u63a5\u5165\u8d77\u6765\u975e\u5e38\u7b80\u5355\uff0c\u6709\u7684\u5219\u9700\u8981\u4e00\u5b9a\u7684\u9002\u914d\u6210\u672c\uff0c\u4f46\u90fd\u662f\u53ef\u4ee5\u843d\u5730\u7684\u5e76\u4e14\u6709\u4e00\u5b9a\u6548\u679c\u7684\u7f16\u8bd1\u52a0\u901f\u6280\u5de7</p> <p>\u603b\u5f97\u6765\u8bf4\uff0c\u4e3a\u4e86\u5145\u5206\u5229\u7528\u6700\u65b0\u7684\u4f18\u5316\u6280\u5de7\u4e0e\u5404\u79cd\u65b0\u529f\u80fd\uff0c\u6211\u4eec\u5e94\u8be5\u53ca\u65f6\u8ddf\u8fdb<code>android</code>\u7f16\u8bd1\u5de5\u5177\u94fe\u7684\u66f4\u65b0</p> <p>\u5982\u679c\u672c\u6587\u5bf9\u4f60\u6709\u6240\u5e2e\u52a9\uff0c\u6b22\u8fce\u70b9\u8d5e\u6536\u85cf~</p>"},{"location":"practical/compile/compile-acceleration/#_10","title":"\u66f4\u591a","text":"<p>Android\u5b98\u65b9\u6587\u6863 - \u4f18\u5316\u6784\u5efa\u901f\u5ea6 How we reduced our Gradle build times by over 80% 10 ideas to improve your Gradle build times</p>"},{"location":"practical/compile/now-in-android/","title":"nowinandroid \u6784\u5efa\u811a\u672c\u5b66\u4e60","text":""},{"location":"practical/compile/now-in-android/#_1","title":"\u524d\u8a00","text":"<p>nowinandroid \u9879\u76ee\u662f\u8c37\u6b4c\u5f00\u6e90\u7684\u793a\u4f8b\u9879\u76ee\uff0c\u5b83\u9075\u5faa Android \u8bbe\u8ba1\u548c\u5f00\u53d1\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u5e76\u65e8\u5728\u6210\u4e3a\u5f00\u53d1\u4eba\u5458\u7684\u6709\u7528\u53c2\u8003</p> <p>\u8fd9\u4e2a\u9879\u76ee\u5728\u67b6\u6784\u6f14\u8fdb\uff0c\u6a21\u5757\u5316\u65b9\u6848\uff0c\u5355\u5143\u6d4b\u8bd5\uff0cJetpack Compose\uff0c\u542f\u52a8\u4f18\u5316\u7b49\u591a\u4e2a\u65b9\u9762\u90fd\u505a\u4e86\u5f88\u597d\u7684\u793a\u4f8b\uff0c\u7684\u786e\u662f\u4e00\u4e2a\u503c\u5f97\u5b66\u4e60\u7684\u597d\u9879\u76ee</p> <p>\u4eca\u5929\u6211\u4eec\u6765\u5b66\u4e60\u4e00\u4e0b nowinandroid \u9879\u76ee\u7684\u6784\u5efa\u811a\u672c\uff0c\u770b\u4e00\u4e0b\u90fd\u6709\u54ea\u4e9b\u503c\u5f97\u5b66\u4e60\u7684\u5730\u65b9</p>"},{"location":"practical/compile/now-in-android/#gradleproperties","title":"gradle.properties \u4e2d\u7684\u914d\u7f6e","text":"<p>\u8981\u770b\u4e00\u4e2a\u9879\u76ee\u7684\u6784\u5efa\u811a\u672c\uff0c\u6211\u4eec\u9996\u5148\u770b\u4e00\u4e0b gradle.properties</p> <pre><code># Enable configuration caching between builds.\norg.gradle.unsafe.configuration-cache=true\n\nandroid.useAndroidX=true\n\n# Non-transitive R classes is recommended and is faster/smaller\nandroid.nonTransitiveRClass=true\n\n# Disable build features that are enabled by default,\n# https://developer.android.com/studio/releases/gradle-plugin#buildFeatures\nandroid.defaults.buildfeatures.buildconfig=false\nandroid.defaults.buildfeatures.aidl=false\nandroid.defaults.buildfeatures.renderscript=false\nandroid.defaults.buildfeatures.resvalues=false\nandroid.defaults.buildfeatures.shaders=false\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\uff0cnowinandroid \u9879\u76ee\u4e3b\u8981\u505a\u4e86\u4ee5\u4e0b\u51e0\u4e2a\u914d\u7f6e</p> <ol> <li>\u5f00\u542f\u914d\u7f6e\u9636\u6bb5\u7f13\u5b58</li> <li>\u5f00\u542f <code>androidX</code>\uff0c\u5e76\u4e14\u79fb\u9664\u4e86 <code>Jetifier</code></li> <li>\u5173\u95ed <code>R</code> \u6587\u4ef6\u4f20\u9012</li> <li>\u5173\u95ed <code>build features</code></li> </ol> <p>\u524d\u97623\u4e2a\u914d\u7f6e\u4e4b\u524d\u90fd\u4ecb\u7ecd\u8fc7\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u5173\u95ed <code>build features</code></p> <p>AGP 4.0.0 \u5f15\u5165\u4e86\u4e00\u79cd\u65b0\u65b9\u6cd5\u6765\u63a7\u5236\u60a8\u8981\u542f\u7528\u548c\u505c\u7528\u54ea\u4e9b\u6784\u5efa\u529f\u80fd\uff0c\u5982<code>ViewBinding</code>\uff0c<code>BuildConfig</code>\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u5728 gradle.properties \u4e2d\u5168\u5c40\u5f00\u542f\u6216\u5173\u95ed\u67d0\u4e9b\u529f\u80fd\uff0c\u4e5f\u53ef\u4ee5\u5728\u6a21\u5757\u7ea7 build.gradle \u6587\u4ef6\u4e2d\u4e3a\u6bcf\u4e2a\u6a21\u5757\u8bbe\u7f6e\u76f8\u5e94\u7684\u9009\u9879\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>\nandroid {\n    // The default value for each feature is shown below. You can change the value to\n    // override the default behavior.\n    buildFeatures {\n        // Determines whether to generate a BuildConfig class.\n        buildConfig = true\n        // Determines whether to support View Binding.\n        // Note that the viewBinding.enabled property is now deprecated.\n        viewBinding = false\n        // Determines whether to support Data Binding.\n        // Note that the dataBinding.enabled property is now deprecated.\n    }\n}\n</code></pre> <p>\u901a\u8fc7\u505c\u7528\u4e0d\u9700\u8981\u7684\u6784\u5efa\u53ef\u80fd\uff0c\u53ef\u4ee5\u63d0\u5347\u6211\u4eec\u7684\u6784\u5efa\u6027\u80fd\uff0c\u6bd4\u5982\u6211\u4eec\u6700\u719f\u6089\u7684<code>BuildConfig</code>\uff0c\u6bcf\u4e2a\u6a21\u5757\u90fd\u4f1a\u751f\u6210\u8fd9\u6837\u4e00\u4e2a\u7c7b\uff0c\u4f46\u5176\u5b9e\u6211\u4eec\u5728\u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u662f\u7528\u4e0d\u5230\u7684\uff0c\u56e0\u6b64\u5176\u5b9e\u53ef\u4ee5\u5c06\u5176\u9ed8\u8ba4\u5173\u95ed\uff08\u5728 AGP 8.0 \u4e2d BuildConfig \u751f\u6210\u5df2\u7ecf\u53d8\u6210\u9ed8\u8ba4\u5173\u95ed\u4e86\uff09</p>"},{"location":"practical/compile/now-in-android/#git-hook","title":"\u81ea\u52a8\u5b89\u88c5 git hook","text":"<p>\u6709\u65f6\u6211\u4eec\u4f1a\u6dfb\u52a0\u4e00\u4e9b git hook\uff0c\u7528\u4e8e\u5728\u4ee3\u7801\u63d0\u4ea4\u6216\u8005 push \u65f6\u505a\u4e00\u4e9b\u68c0\u67e5</p> <p>\u4f46\u4f7f\u7528 git hook \u7684\u4e00\u4e2a\u95ee\u9898\u5728\u4e8e\uff0c\u6bcf\u6b21\u62c9\u53d6\u65b0\u9879\u76ee\u4e4b\u540e\uff0c\u90fd\u9700\u8981\u624b\u52a8\u5b89\u88c5\u4e00\u4e0b git hook\uff0c\u8fd9\u4e00\u70b9\u5e38\u5e38\u5bb9\u6613\u88ab\u5fd8\u8bb0</p> <p>\u90a3\u4e48\u6709\u6ca1\u6709\u4ec0\u4e48\u529e\u6cd5\u53ef\u4ee5\u81ea\u52a8\u5b89\u88c5 git hook \u5462\uff1fnowinandroid \u9879\u76ee\u63d0\u4f9b\u4e86\u4e00\u4e2a\u793a\u4f8b</p> <pre><code>// settings.gradle.kts\n\nval prePushHook = file(\".git/hooks/pre-push\")\nval commitMsgHook = file(\".git/hooks/commit-msg\")\nval hooksInstalled = commitMsgHook.exists()\n    &amp;&amp; prePushHook.exists()\n    &amp;&amp; prePushHook.readBytes().contentEquals(file(\"tools/pre-push\").readBytes())\n\nif (!hooksInstalled) {\n    exec {\n        commandLine(\"tools/setup.sh\")\n        workingDir = rootProject.projectDir\n    }\n}\n</code></pre> <p>\u5176\u5b9e\u539f\u7406\u5f88\u7b80\u5355\uff0c\u5728<code>settings.gradle.kts</code>\u4e2d\u6dfb\u52a0\u4ee5\u4e0a\u4ee3\u7801\uff0c\u8fd9\u6837\u5728 Gradle \u540c\u6b65\u65f6\uff0c\u5c31\u4f1a\u81ea\u52a8\u5224\u65ad git hook \u6709\u6ca1\u6709\u88ab\u5b89\u88c5\uff0c\u5982\u679c\u6ca1\u6709\u88ab\u5b89\u88c5\u5219\u81ea\u52a8\u5b89\u88c5</p>"},{"location":"practical/compile/now-in-android/#includebuild-buildsrc","title":"\u4f7f\u7528 includeBuild \u800c\u4e0d\u662f buildSrc","text":"<pre><code>pluginManagement {\n    includeBuild(\"build-logic\")\n    repositories {\n        google()\n        mavenCentral()\n        gradlePluginPortal()\n    }\n}\n</code></pre> <p>\u4e3a\u4e86\u652f\u6301\u5728\u4e0d\u540c\u7684\u6a21\u5757\u95f4\u5171\u4eab\u6784\u5efa\u903b\u8f91\uff0c\u6b64\u524d\u6211\u4eec\u5e38\u5e38\u4f1a\u6dfb\u52a0\u4e00\u4e2a buildSrc \u6a21\u5757</p> <p>\u4f46\u662f buildSrc \u6a21\u5757\u7684\u95ee\u9898\u5728\u4e8e\u6bcf\u6b21\u53d1\u751f\u4fee\u6539\u90fd\u4f1a\u5bfc\u81f4\u9879\u76ee\u7684\u7edd\u5927\u591a\u6570\u7f13\u5b58\u5931\u6548\uff0c\u4ece\u800c\u5bfc\u81f4\u6784\u5efa\u901f\u5ea6\u53d8\u5f97\u6781\u6162</p> <p>\u56e0\u6b64\u5b98\u65b9\u73b0\u5728\u66f4\u63a8\u8350\u6211\u4eec\u4f7f\u7528 includeBuild\uff0c\u6bd4\u5982 nowinandroid \u7684\u6784\u5efa\u903b\u8f91\u5c31\u901a\u8fc7 includeBuild \u653e\u5728\u4e86 <code>build-logic</code> \u76ee\u5f55</p>"},{"location":"practical/compile/now-in-android/#buildgradle","title":"\u5982\u4f55\u590d\u7528 build.gradle \u4ee3\u7801","text":"<p>\u5176\u5b9e\u6211\u4eec\u9879\u76ee\u4e2d\u7684\u5404\u4e2a\u6a21\u5757\u7684 build.gradle \u4e2d\u7684\u4ee3\u7801\uff0c\u5927\u90e8\u5206\u662f\u91cd\u590d\u7684\uff0c\u505a\u7684\u90fd\u662f\u4e00\u4e9b\u91cd\u590d\u7684\u914d\u7f6e\uff0c\u5f53\u8981\u4fee\u6539\u65f6\u5c31\u9700\u8981\u4e00\u4e2a\u4e00\u4e2a\u53bb\u4fee\u6539\u4e86</p> <p>nowinandroid \u901a\u8fc7\u62bd\u53d6\u91cd\u590d\u914d\u7f6e\u7684\u65b9\u5f0f\u5927\u5e45\u5ea6\u7684\u51cf\u5c11\u4e86 build.gradle \u4e2d\u7684\u4ee3\u7801\uff0c\u5982\u4e0b\u6240\u793a</p> <pre><code>plugins {\n    id(\"nowinandroid.android.feature\")\n    id(\"nowinandroid.android.library.compose\")\n    id(\"nowinandroid.android.library.jacoco\")\n}\n\nandroid {\n    namespace = \"com.google.samples.apps.nowinandroid.feature.author\"\n}\n\ndependencies {\n    implementation(libs.kotlinx.datetime)\n}\n</code></pre> <p>\u8fd9\u662f nowinandroid \u7684\u4e00\u4e2a feature \u6a21\u5757\uff0c\u53ef\u4ee5\u770b\u51fa\u9664\u4e86\u6bcf\u4e2a\u6a21\u5757\u4e0d\u540c\u7684<code>namespace</code>\u4e0e\u5404\u4e2a\u6a21\u5757\u7684\u4f9d\u8d56\u4e4b\u5916\uff0c\u5176\u4ed6\u7684\u5185\u5bb9\u90fd\u62bd\u53d6\u5230<code>nowinandroid.android.feature</code>\u7b49\u63d2\u4ef6\u4e2d\u53bb\u4e86\uff0c\u800c\u8fd9\u4e9b\u63d2\u4ef6\u7684\u4ee3\u7801\u90fd\u5b58\u653e\u5728<code>build-logic</code> \u76ee\u5f55\u4e2d\uff0c\u901a\u8fc7 includeBuild \u5f15\u5165\uff0c\u5927\u5bb6\u53ef\u81ea\u884c\u67e5\u770b</p> <p>\u603b\u5f97\u6765\u8bf4\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5927\u5e45\u51cf\u5c11\u91cd\u590d\u914d\u7f6e\u4ee3\u7801\uff0c\u5f53\u914d\u7f6e\u9700\u8981\u8fc1\u79fb\u65f6\u4e5f\u66f4\u52a0\u65b9\u4fbf</p>"},{"location":"practical/compile/now-in-android/#version-catalog","title":"\u4f7f\u7528 Version Catalog","text":"<p>\u5728 build.gradle \u4e2d\u6dfb\u52a0\u4f9d\u8d56\u6709\u4ee5\u4e0b\u51e0\u4e2a\u75db\u70b9</p> <ol> <li>\u9879\u76ee\u4f9d\u8d56\u7edf\u4e00\u7ba1\u7406\uff0c\u5728\u5355\u72ec\u6587\u4ef6\u4e2d\u914d\u7f6e</li> <li>\u4e0d\u540cModule\u4e2d\u7684\u4f9d\u8d56\u7248\u672c\u53f7\u7edf\u4e00</li> <li>\u6dfb\u52a0\u4f9d\u8d56\u65f6\u652f\u6301\u4ee3\u7801\u63d0\u793a</li> </ol> <p>\u9488\u5bf9\u8fd9\u51e0\u79cd\u9700\u6c42\uff0cGradle7.0 \u63a8\u51fa\u4e86\u4e00\u4e2a\u65b0\u7684\u7279\u6027\uff0c\u4f7f\u7528 Version Catalog \u7edf\u4e00\u4f9d\u8d56\u7248\u672c\uff0c\u5b83\u652f\u6301\u4ee5\u4e0b\u7279\u6027\uff1a</p> <ul> <li>\u5bf9\u6240\u6709 module \u53ef\u89c1\uff0c\u53ef\u7edf\u4e00\u7ba1\u7406\u6240\u6709module\u7684\u4f9d\u8d56</li> <li>\u652f\u6301\u58f0\u660e\u4f9d\u8d56bundles,\u5373\u603b\u662f\u4e00\u8d77\u4f7f\u7528\u7684\u4f9d\u8d56\u53ef\u4ee5\u7ec4\u5408\u5728\u4e00\u8d77</li> <li>\u652f\u6301\u7248\u672c\u53f7\u4e0e\u4f9d\u8d56\u540d\u5206\u79bb\uff0c\u53ef\u4ee5\u5728\u591a\u4e2a\u4f9d\u8d56\u95f4\u5171\u4eab\u7248\u672c\u53f7</li> <li>\u652f\u6301\u5728\u5355\u72ec\u7684libs.versions.toml\u6587\u4ef6\u4e2d\u914d\u7f6e\u4f9d\u8d56</li> <li>\u652f\u6301\u4ee3\u7801\u63d0\u793a(\u4ec5 kts)</li> </ul> <p></p> <p>noinandroid \u4e2d\u76ee\u524d\u5df2\u7ecf\u5168\u9762\u542f\u7528\u4e86 Version Catalog\uff0c\u5982\u4e0a\u6240\u793a\uff0c\u7edf\u4e00\u4f9d\u8d56\u7248\u672c\uff0c\u652f\u6301\u4ee3\u7801\u63d0\u793a\uff0c\u4f53\u9a8c\u8fd8\u662f\u4e0d\u9519\u7684</p> <p>\u5173\u4e8e Version Catalog \u7684\u5177\u4f53\u4f7f\u7528\u53ef\u4ee5\u67e5\u770b\uff1a\u3010Gradle7.0\u3011\u4f9d\u8d56\u7edf\u4e00\u7ba1\u7406\u7684\u5168\u65b0\u65b9\u5f0f\uff0c\u4e86\u89e3\u4e00\u4e0b~</p>"},{"location":"practical/compile/now-in-android/#_2","title":"\u4ee3\u7801\u683c\u5f0f\u68c0\u67e5","text":"<p>nowinandroid \u4f5c\u4e3a\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\uff0c\u4e0d\u53ef\u907f\u514d\u5730\u4f1a\u6709\u7b2c\u4e09\u65b9\u8d21\u732e\u4e00\u4e9b\u4ee3\u7801\uff0c\u56e0\u6b64\u4e5f\u9700\u8981\u5728\u4ee3\u7801\u5408\u5e76\u524d\u505a\u4e00\u4e9b\u683c\u5f0f\u68c0\u67e5\uff0c\u4fdd\u8bc1\u4ee3\u7801\u98ce\u683c\u7684\u7edf\u4e00</p> <p>nowinandroid \u901a\u8fc7 spotless \u6765\u68c0\u67e5\u4ee3\u7801\u683c\u5f0f\uff0c\u4e3b\u8981\u662f\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u89e6\u53d1    </p> <ol> <li>\u901a\u8fc7\u4e0a\u9762\u63d0\u5230\u7684 git hook\uff0c\u5728\u4ee3\u7801 push \u65f6\u89e6\u53d1\u68c0\u67e5</li> <li>\u901a\u8fc7 github workflow\uff0c\u5728\u4ee3\u7801 push \u5230 main \u5206\u652f\u65f6\u89e6\u53d1\u68c0\u67e5</li> </ol> <p>\u4e0a\u9762\u4e24\u79cd\u65b9\u5f0f\u90fd\u4f1a\u8c03\u7528\u4ee5\u4e0b\u547d\u4ee4</p> <pre><code>./gradlew spotlessCheck --init-script gradle/init.gradle.kts --no-configuration-cache --stacktrace\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u91cc\u4e3b\u8981\u662f\u6267\u884c spotlessCheck \u4efb\u52a1\uff0c\u5e76\u4e14\u6307\u5b9a\u4e86 init-script\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e0b init.gradle.kts \u91cc\u9762\u505a\u4e86\u4ec0\u4e48</p> <pre><code>// init.gradle.kts\nrootProject {\n    subprojects {\n        apply&lt;com.diffplug.gradle.spotless.SpotlessPlugin&gt;()\n        extensions.configure&lt;com.diffplug.gradle.spotless.SpotlessExtension&gt; {\n            kotlin {\n                target(\"**/*.kt\")\n                targetExclude(\"**/build/**/*.kt\")\n                ktlint(ktlintVersion).userData(mapOf(\"android\" to \"true\"))\n                licenseHeaderFile(rootProject.file(\"spotless/copyright.kt\"))\n            }\n            format(\"kts\") {\n                target(\"**/*.kts\")\n                targetExclude(\"**/build/**/*.kts\")\n                // Look for the first line that doesn't have a block comment (assumed to be the license)\n                licenseHeaderFile(rootProject.file(\"spotless/copyright.kts\"), \"(^(?![\\\\/ ]\\\\*).*$)\")\n            }\n            format(\"xml\") {\n                target(\"**/*.xml\")\n                targetExclude(\"**/build/**/*.xml\")\n                // Look for the first XML tag that isn't a comment (&lt;!--) or the xml declaration (&lt;?xml)\n                licenseHeaderFile(rootProject.file(\"spotless/copyright.xml\"), \"(&lt;[^!?])\")\n            }\n        }\n    }\n}\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u91cc\u6307\u5b9a\u4e86\u5bf9\u4e8e kotlin , kts , xml \u7b49\u6587\u4ef6\u7684\u683c\u5f0f\u8981\u6c42\uff0c\u6bd4\u5982 kotlin \u4ee3\u7801\u9700\u8981\u9075\u5b88 ktlint \u89c4\u8303\uff0c\u5e76\u4e14\u6587\u4ef6\u5f00\u5934\u5fc5\u987b\u662f license \u58f0\u660e</p>"},{"location":"practical/compile/now-in-android/#lint","title":"\u81ea\u5b9a\u4e49 lint \u68c0\u67e5","text":"<p>\u9664\u4e86\u4ee3\u7801\u98ce\u683c\u7684\u7edf\u4e00\uff0cnowinandroid \u9879\u76ee\u8fd8\u81ea\u5b9a\u4e49\u4e86\u4e00\u4e9b lint \u68c0\u67e5\uff0c\u8ddf spoltess \u4e00\u6837\uff0c\u4e5f\u662f\u901a\u8fc7 git hook \u4e0e github workflow \u4e24\u79cd\u65b9\u5f0f\u89e6\u53d1\uff0c\u4e24\u79cd\u65b9\u5f0f\u90fd\u4f1a\u89e6\u53d1\u4ee5\u4e0b\u4ee3\u7801</p> <pre><code>./gradlew lintDemoDebug --stacktrace\n</code></pre> <p>nowinandroid \u4e2d\u6709\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684 lint \u6a21\u5757\uff0c\u81ea\u5b9a\u4e49 lint \u89c4\u5219\u5c31\u5b9a\u4e49\u5728\u8fd9\u91cc\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>class DesignSystemDetector : Detector(), Detector.UastScanner {\n\n    override fun createUastHandler(context: JavaContext): UElementHandler {\n        return object : UElementHandler() {\n            override fun visitCallExpression(node: UCallExpression) {\n                val name = node.methodName ?: return\n                val preferredName = METHOD_NAMES[name] ?: return\n                reportIssue(context, node, name, preferredName)\n            }\n\n            override fun visitQualifiedReferenceExpression(node: UQualifiedReferenceExpression) {\n                val name = node.receiver.asRenderString()\n                val preferredName = RECEIVER_NAMES[name] ?: return\n                reportIssue(context, node, name, preferredName)\n            }\n        }\n    }\n\n    companion object {\n        @JvmField\n        val ISSUE: Issue = Issue.create(\n            id = \"DesignSystem\",\n            briefDescription = \"Design system\",\n            explanation = \"This check highlights calls in code that use Compose Material \" +\n                \"composables instead of equivalents from the Now in Android design system \" +\n                \"module.\"\n        )\n\n        // Unfortunately :lint is a Java module and thus can't depend on the :core-designsystem\n        // Android module, so we can't use composable function references (eg. ::Button.name)\n        // instead of hardcoded names.\n        val METHOD_NAMES = mapOf(\n            \"MaterialTheme\" to \"NiaTheme\",\n            \"Button\" to \"NiaFilledButton\",\n            \"OutlinedButton\" to \"NiaOutlinedButton\",\n            // ...\n        )\n        val RECEIVER_NAMES = mapOf(\n            \"Icons\" to \"NiaIcons\"\n        )\n\n        fun reportIssue(\n            context: JavaContext, node: UElement, name: String, preferredName: String\n        ) {\n            context.report(\n                ISSUE, node, context.getLocation(node),\n                \"Using $name instead of $preferredName\"\n            )\n        }\n    }\n}\n</code></pre> <p>\u603b\u5f97\u6765\u8bf4\uff0c\u8fd9\u4e2a\u81ea\u5b9a\u4e49\u89c4\u5219\u662f\u68c0\u67e5\u662f\u5426\u4f7f\u7528\u4e86 Compose \u7684\u9ed8\u8ba4 Material \u7ec4\u4ef6\u800c\u6ca1\u6709\u4f7f\u7528 nowinandroid \u5c01\u88c5\u597d\u7684\u7ec4\u4ef6\uff0c\u5982\u679c\u68c0\u67e5\u4e0d\u901a\u8fc7\u5219\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u63d0\u9192\u5f00\u53d1\u8005\u4fee\u6539</p>"},{"location":"practical/compile/now-in-android/#_3","title":"\u603b\u7ed3","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86 nowinandroid \u9879\u76ee\u6784\u5efa\u811a\u672c\u4e2d\u7684\u4e00\u7cfb\u5217\u5c0f\u6280\u5de7\uff0c\u5177\u4f53\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9</p> <ol> <li>gradle.properties \u4e2d\u7684\u914d\u7f6e</li> <li>\u81ea\u52a8\u5b89\u88c5 git hook</li> <li>\u4f7f\u7528 includeBuild \u800c\u4e0d\u662f buildSrc</li> <li>\u5982\u4f55\u590d\u7528 build.gradle \u4ee3\u7801</li> <li>\u4f7f\u7528 Version Catalog</li> <li>\u4ee3\u7801\u683c\u5f0f\u68c0\u67e5</li> <li>\u81ea\u5b9a\u4e49 lint \u68c0\u67e5</li> </ol> <p>\u5e0c\u671b\u5bf9\u4f60\u6709\u6240\u5e2e\u52a9~</p>"},{"location":"practical/compile/now-in-android/#_4","title":"\u9879\u76ee\u5730\u5740","text":"<p>https://github.com/android/nowinandroid</p>"},{"location":"practical/memory/memory-usage-analyse/","title":"App \u5185\u5b58\u5360\u7528\u5206\u6790","text":""},{"location":"practical/speed/json-serialization-speed/","title":"\u5e38\u7528 JSON \u5e93\u6027\u80fd\u5bf9\u6bd4","text":"<p>\u53cd\u5e8f\u5217\u5316\u662f Android \u5f00\u53d1\u4e2d\u5fc5\u5907\u4e14\u975e\u5e38\u9ad8\u9891\u7684\u9700\u6c42\uff0c\u56e0\u6b64\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684\u53cd\u5e8f\u5217\u5316\u6846\u67b6\u5c31\u975e\u5e38\u91cd\u8981\u4e86\uff0c\u90a3\u4e48\u5728\u5e38\u7528\u7684 Gson, Moshi, Jackson, Kotlin Serialization, FastJson \u7b49\u6846\u67b6\u4e2d\uff0c\u5230\u5e95\u8c01\u6bd4\u8f83\u5feb?</p>"},{"location":"practical/speed/json-serialization-speed/#_1","title":"\u6d4b\u8bd5\u65b9\u5f0f","text":"<ul> <li>\u901a\u8fc7 Jetpack Microbenchmark \u5e93\u8fdb\u884c\u57fa\u51c6\u6d4b\u8bd5\uff0c\u4ee5\u907f\u514d CPU \u964d\u9891\uff0cJIT \u4f18\u5316\u5bf9\u6d4b\u8bd5\u7ed3\u679c\u7684\u5f71\u54cd</li> <li>\u6d4b\u8bd5\u7528\u4f8b\u8f93\u5165\u5305\u62ec 12kb, 78kb, 238kb \u5927\u5c0f\u7684\u4e09\u4e2a json \u6587\u4ef6\uff0c\u4ee5\u6d4b\u8bd5 json \u5927\u5c0f\u5bf9\u53cd\u5e8f\u5217\u5316\u901f\u5ea6\u7684\u5f71\u54cd</li> <li>\u6d4b\u8bd5\u7ed3\u679c\u5206\u4e3a\u591a\u6b21\u8fd0\u884c\u5145\u5206\u9884\u70ed\u4e0e\u4e00\u6b21\u8fd0\u884c\u65e0\u9884\u70ed\u4e24\u79cd\u60c5\u51b5\uff0c\u4ee5\u6d4b\u8bd5\u5728\u51b7\u542f\u52a8\u60c5\u51b5\u4e0b\u53cd\u5e8f\u5217\u5316\u901f\u5ea6\u7684\u5dee\u5f02</li> </ul>"},{"location":"practical/speed/json-serialization-speed/#_2","title":"\u6d4b\u8bd5\u4ee3\u7801","text":"<p>\u6d4b\u8bd5\u4ee3\u7801\u53ef\u89c1\uff1ahttps://github.com/RicardoJiang/json-benchmark</p>"},{"location":"practical/speed/json-serialization-speed/#_3","title":"\u6d4b\u8bd5\u7ed3\u679c","text":""},{"location":"practical/speed/json-serialization-speed/#_4","title":"\u591a\u6b21\u8fd0\u884c\u6d4b\u8bd5\u7ed3\u679c","text":"small json medium json large json Kotlin Serialization 165,936   ns 997,228   ns 2,933,098   ns JSONReader 190,902   ns 1,164,605   ns 3,412,914   ns FastJson 196,860   ns 1,417,077   ns 4,218,987   ns JSONObject 258,789   ns 1,690,190   ns 4,788,937   ns Moshi 303,056   ns 1,411,364   ns 3,955,789   ns Gson 412,421   ns 1,356,564   ns 3,557,943   ns Jackson 1,073,504   ns 1,798,989   ns 3,543,983   ns <p>\u4ece\u67f1\u72b6\u56fe\u53ef\u4ee5\u5f88\u660e\u663e\u7684\u770b\u51fa\u5404\u4e2a\u6846\u67b6\u7684\u901f\u5ea6\u5bf9\u6bd4</p> <ul> <li>Kotlin Serialization \u770b\u8d77\u6765\u662f\u6700\u9002\u5408 Kotlin \u7684\u53cd\u5e8f\u5217\u5316\u6846\u67b6\uff0c\u5728\u5404\u4e2a\u6846\u67b6\u4e2d\u8868\u73b0\u6700\u597d</li> <li>JSONReader \u4e0e JSONObject \u5728\u5c0f\u6570\u636e\u4e0a\u8868\u73b0\u4e5f\u4e0d\u9519\uff0c\u5728\u5927\u6570\u636e\u4e0a JSONReader \u4e0e\u5176\u5b83\u6846\u67b6\u76f8\u5dee\u4e0d\u5927\uff0c\u800c JSONObject \u7531\u4e8e\u8981\u5c06 InputStream \u8f6c\u5316\u6210 String\uff0c\u8868\u73b0\u8f83\u5dee</li> <li>FastJson \u5728\u5c0f\u6570\u636e\u65f6\u7684\u786e\u6bd4\u8f83\u5feb\uff0c\u4f46\u662f\u5728\u5927\u6570\u636e\u65f6\u76f8\u6bd4\u5176\u5b83\u6846\u67b6\u6ca1\u6709\u4ec0\u4e48\u4f18\u52bf\uff0c\u540c\u65f6\u5728\u6ca1\u6709\u65e0\u53c2\u6784\u9020\u51fd\u6570\u65f6\uff0cFastJson \u4f1a\u4f7f\u7528 Kotlin \u53cd\u5c04\u6765\u53cd\u5e8f\u5217\u5316\uff0c\u6b64\u65f6\u901f\u5ea6\u53cd\u5e8f\u5217\u5316\u901f\u5ea6\u5c06\u5927\u5e45\u4e0b\u964d</li> <li>Moshi \u4e0e Gson \u5728\u53cd\u5e8f\u5217\u5316\u901f\u5ea6\u4e0a\u5dee\u8ddd\u4e0d\u5927\uff0c\u57fa\u672c\u4e0a\u662f\u4e00\u4e2a\u91cf\u7ea7</li> <li>Jackson \u5728\u5c0f\u6570\u636e\u53cd\u5e8f\u5316\u901f\u5ea6\u76f8\u6bd4\u5176\u5b83\u6846\u67b6\u660e\u663e\u8f83\u6162\uff0c\u5728\u5927\u6570\u636e\u60c5\u51b5\u4e0b\u5219\u76f8\u5dee\u4e0d\u5927</li> </ul>"},{"location":"practical/speed/json-serialization-speed/#_5","title":"\u4e00\u6b21\u8fd0\u884c\u6d4b\u8bd5\u7ed3\u679c","text":"small json medium json large json Kotlin Serialization 4,114,323   ns 15,739,688   ns 17,428,906   ns JSONReader 630,469   ns 2,052,501   ns 5,630,261   ns FastJson 61,629,844   ns 6,756,823   ns 10,529,791   ns JSONObject 580,469   ns 2,227,290   ns 6,311,667   ns Moshi 4,460,886   ns 13,854,792   ns 18,951,198   ns Gson 3,319,688   ns 5,568,906   ns 10,264,635   ns Jackson 15,070,469   ns 13,625,521   ns 17,914,687   ns <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u4e00\u6b21\u8fd0\u884c\u6d4b\u8bd5\u7ed3\u679c\u4e0e\u591a\u6b21\u8fd0\u884c\u6d4b\u8bd5\u7ed3\u679c\u660e\u663e\u4e0d\u540c</p> <ul> <li>JSONReader \u4e0e JSONObject \u76f8\u6bd4\u5176\u5b83\u6846\u67b6\u4f18\u52bf\u660e\u663e\uff0c\u5728\u51b7\u542f\u52a8\u573a\u666f\u4f7f\u7528\u8fd9\u4e9b\u7cfb\u7edf\u539f\u751f API \u5e94\u8be5\u4f1a\u6709\u4e00\u5b9a\u4f18\u52bf\uff0c\u8fd9\u4e5f\u662f MSON \u6846\u67b6\u63d0\u5347\u53cd\u5e8f\u5217\u5316\u901f\u5ea6\u7684\u539f\u7406</li> <li>FastJson \u5728\u9996\u6b21\u8fd0\u884c\u65f6\u663e\u8457\u6162\u4e8e\u5176\u5b83\u6846\u67b6\uff0c\u540e\u7eed\u5219\u6062\u590d\u6b63\u5e38\u901f\u5ea6\uff0c\u4e0e Gson \u901f\u5ea6\u5dee\u4e0d\u591a\uff0c\u5feb\u4e8e Moshi</li> <li>\u5728\u51b7\u542f\u52a8\u573a\u666f\uff0cMoshi \u4e0e Kotlin Serialization \u901f\u5ea6\u5dee\u4e0d\u591a\uff0c\u76f8\u6bd4 Gson \u5219\u7565\u6162</li> <li>Jackson \u9996\u6b21\u8fd0\u884c\u65f6\u8f83\u6162\uff0c\u540e\u7eed\u4e0e Moshi \u901f\u5ea6\u7c7b\u4f3c</li> </ul>"},{"location":"practical/speed/json-serialization-speed/#protobuf","title":"\u4e0e Protobuf \u6bd4\u8f83","text":"<p>Protobuf \u5168\u79f0\uff1aProtocol Buffers\uff0c\u662f Google \u63a8\u51fa\u7684\u4e00\u79cd\u4e0e\u5e73\u53f0\u65e0\u5173\u3001\u8bed\u8a00\u65e0\u5173\u3001\u53ef\u6269\u5c55\u7684\u8f7b\u4fbf\u9ad8\u6548\u7684\u5e8f\u5217\u5316\u6570\u636e\u5b58\u50a8\u683c\u5f0f\u3002</p> <p>Protobuf \u6570\u636e\u4ee5\u4e8c\u8fdb\u5236\u683c\u5f0f\u5b58\u50a8\uff0c\u76f8\u6bd4 json \u5360\u7528\u4f53\u79ef\u8981\u5c0f\u5f88\u591a\uff0c\u6bd4\u5982\u6211\u4eec\u5c06\u4e0a\u9762\u7684 json \u6587\u4ef6\u8f6c\u5316\u6210 Protobuf \u4e8c\u8fdb\u5236\u6587\u4ef6\u4e4b\u540e\uff0c\u4f53\u79ef\u7f29\u5c0f\u4e86 50% \u5de6\u53f3\u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u770b\u4e0b Protobuf \u53cd\u5e8f\u5217\u5316\u7684\u901f\u5ea6\u76f8\u6bd4 json \u5230\u5e95\u600e\u4e48\u6837\u3002</p>"},{"location":"practical/speed/json-serialization-speed/#_6","title":"\u591a\u6b21\u8fd0\u884c\u6d4b\u8bd5\u7ed3\u679c","text":"small data medium  data large data Kotlin Serialization 171,134   ns 1,010,621   ns 2,945,403   ns JSONReader 191,611   ns 1,165,174   ns 3,426,443   ns Protobuf 108,520   ns 576,859   ns 1,674,978   ns <p>\u6211\u4eec\u5c06 Protobuf \u4e0e\u4e4b\u524d\u8868\u73b0\u6bd4\u8f83\u4f18\u79c0\u7684 Kotlin Serialization \u4e0e JSONReader \u8fdb\u884c\u5bf9\u6bd4\uff0c\u53ef\u4ee5\u770b\u51fa Protobuf \u7684\u53cd\u5e8f\u5217\u5316\u901f\u5ea6\u76f8\u6bd4\u4e4b\u524d\u8868\u73b0\u6700\u4f18\u79c0\u7684 Kotlin Serialization \u4e5f\u6709 50% \u5de6\u53f3\u7684\u63d0\u5347</p>"},{"location":"practical/speed/json-serialization-speed/#_7","title":"\u4e00\u6b21\u8fd0\u884c\u6d4b\u8bd5\u7ed3\u679c","text":"small data medium  data large data Kotlin Serialization 5,033,698   ns 15,217,709   ns 17,278,021   ns JSONReader 519,167   ns 1,617,604   ns 5,623,749   ns Protobuf 3,605,313   ns 6,869,480   ns 11,330,886   ns <p>\u53ef\u4ee5\u770b\u51fa\u5728\u51b7\u542f\u52a8\u65f6\uff0cJSONReader \u7684\u8868\u73b0\u8fd8\u662f\u9065\u9065\u9886\u5148\uff0c\u800c Protobuf \u7684\u8868\u73b0\u6bd4 Kotlin Serialization \u8fd8\u662f\u8981\u597d\u4e00\u4e9b\u3002</p> <p>\u5f53\u7136\u4f7f\u7528 JSONReader \u4e0e JSONObject \u8fd9\u4e9b\u539f\u751f API \u9700\u8981\u5199\u5f88\u591a\u6a21\u677f\u4ee3\u7801\uff0c\u53ef\u4ee5\u4f7f\u7528\u7c7b\u4f3c MSON \u7684\u65b9\u5f0f\uff0c\u901a\u8fc7\u4ee3\u7801\u751f\u6210\u7684\u65b9\u5f0f\u51cf\u5c11\u5f00\u53d1\u6210\u672c\u3002</p>"},{"location":"practical/speed/json-serialization-speed/#_8","title":"\u603b\u7ed3","text":"<ul> <li>Kotlin Serialization \u662f\u5728\u7eaf Kotlin \u4ee3\u7801\u4e2d\u53cd\u5e8f\u5217\u5316 json \u7684\u6700\u4f73\u9009\u62e9\uff0c\u901f\u5ea6\u6700\u5feb</li> <li>\u5982\u679c\u53ef\u4ee5\u727a\u7272\u53ef\u8bfb\u6027\uff0c\u4f7f\u7528 Protobuf \u53ef\u4ee5\u5e26\u6765 50% \u5de6\u53f3\u7684\u4f53\u79ef\u4e0e\u53cd\u5e8f\u5217\u5316\u901f\u5ea6\u63d0\u5347</li> <li>\u5728\u51b7\u542f\u52a8\u573a\u666f\u4e2d\uff0c\u4f7f\u7528 JSONReader \u4e0e JSONObject \u53ef\u4ee5\u5e26\u6765\u5f88\u5927\u7684\u6027\u80fd\u63d0\u5347\u3002</li> </ul> <p>\u5f53\u7136\u6027\u80fd\u6d4b\u8bd5\u7684\u7ed3\u679c\u53ef\u80fd\u56e0\u4e3a\u673a\u578b\u548c\u6570\u636e\u7684\u4e0d\u540c\u6709\u6240\u5dee\u5f02\uff0c\u6b22\u8fce\u4f7f\u7528\u6d4b\u8bd5\u4ee3\u7801\u8fdb\u884c\u6d4b\u8bd5\uff0c\u5982\u6709\u4e0d\u540c\u610f\u89c1\uff0c\u6b22\u8fce\u5728\u8bc4\u8bba\u533a\u4ea4\u6d41~</p>"},{"location":"practical/speed/json-serialization-speed/#_9","title":"\u6d4b\u8bd5\u4ee3\u7801","text":"<p>\u6d4b\u8bd5\u4ee3\u7801\u53ef\u89c1\uff1ahttps://github.com/RicardoJiang/json-benchmark</p>"},{"location":"practical/speed/kcp-gson-moshi/","title":"\u4f7f\u7528 KCP \u6253\u9020\u66f4\u5b89\u5168\u7684 Gson \u4e0e\u66f4\u5feb\u7684 Moshi","text":""},{"location":"practical/speed/kcp-gson-moshi/#_1","title":"\u524d\u8a00","text":"<p>\u4f17\u6240\u5468\u77e5\uff0c\u4f7f\u7528 Gson\u3001Jackson \u7b49\u6846\u67b6\u53cd\u5e8f\u5217\u5316 JSON \u5230 Kotlin \u7c7b\u65f6\u5b58\u5728\u7a7a\u5b89\u5168\u95ee\u9898\u548c\u6784\u9020\u5668\u9ed8\u8ba4\u503c\u5931\u6548\u7684\u95ee\u9898\uff0c\u540c\u65f6\u5e38\u7528\u7684 Gson, Moshi \u7b49\u6846\u67b6\u5f80\u5f80\u5728\u529f\u80fd\u4e0a\u6bd4\u8f83\u5f3a\u5927\uff0c\u5168\u9762\uff0c\u800c\u5728\u6027\u80fd\u4e0a\u5374\u6ca1\u6709\u5f88\u660e\u663e\u7684\u4f18\u52bf\u3002\u672c\u6587\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\u6253\u9020\u66f4\u5b89\u5168\u7684 Gson \u4e0e\u66f4\u5feb\u7684 Moshi\u3002</p>"},{"location":"practical/speed/kcp-gson-moshi/#_2","title":"\u7a7a\u5b89\u5168\u4e0e\u9ed8\u8ba4\u503c\u95ee\u9898","text":"<p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u5728\u4f7f\u7528 Gson \u5c06 Json \u6570\u636e\u53cd\u5e8f\u5217\u5316\u4e3a <code>User</code> \u5bf9\u8c61\u65f6\uff0c\u4f1a\u9047\u5230\u7a7a\u503c\u5b89\u5168\u95ee\u9898\u548c\u9ed8\u8ba4\u6784\u9020\u53c2\u6570\u5931\u6548\u7684\u95ee\u9898\u3002\u4e0b\u9762\u8ba9\u6211\u4eec\u6765\u63a2\u8ba8\u4e00\u4e0b\u4e3a\u4f55\u4f1a\u51fa\u73b0\u8fd9\u6837\u7684\u60c5\u51b5\u3002</p> <p></p> <ul> <li>\u5f53\u8c03\u7528<code>Gson.fromJson</code>\u65b9\u6cd5\u6765\u53cd\u5e8f\u5217\u5316\u5bf9\u8c61\u65f6\uff0c\u9996\u5148\u4f1a\u521b\u5efa<code>Adapter</code></li> <li>\u5728\u521b\u5efa<code>Adapter</code>\u7684\u8fc7\u7a0b\u65f6\u9700\u8981\u83b7\u53d6\u7c7b\u7684\u6784\u5efa\u51fd\u6570\uff0c\u5982\u679c\u5b58\u5728\u65e0\u53c2\u6784\u5efa\u51fd\u6570\u4f1a\u76f4\u63a5\u8fd4\u56de\uff0c\u5426\u5219\u4f1a\u901a\u8fc7 UnSafe \u7684\u65b9\u5f0f\u521b\u5efa</li> <li>\u5f53\u4f7f\u7528 UnSafe \u65b9\u5f0f\u521b\u5efa\u65f6\uff0c\u5c31\u4e0d\u4f1a\u8c03\u7528\u6211\u4eec\u5b9a\u4e49\u7684\u4e3b\u6784\u9020\u51fd\u6570\u4e86\uff0c\u9ed8\u8ba4\u503c\u81ea\u7136\u4e5f\u5c31\u5931\u6548\u4e86</li> <li>\u5728<code>Adapter</code>\u521b\u5efa\u540e\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u5728<code>Adapter</code>\u4e2d\u901a\u8fc7<code>jsonReader</code>\u8bfb\u53d6\u8f93\u5165</li> <li>\u5728\u8bfb\u53d6\u8f93\u5165\u7684\u8fc7\u7a0b\u4e2d\u901a\u8fc7<code>field.set(target, fieldValue)</code>\u53cd\u5c04\u8d4b\u503c\uff0c\u81ea\u7136\u4e5f\u5c31\u65e0\u6cd5\u4fdd\u8bc1\u7a7a\u5b89\u5168\u4e86</li> </ul>"},{"location":"practical/speed/kcp-gson-moshi/#_3","title":"\u6027\u80fd\u95ee\u9898","text":"<p>\u53cd\u5e8f\u5217\u5316\u662f Android \u5f00\u53d1\u4e2d\u5fc5\u5907\u4e14\u975e\u5e38\u9ad8\u9891\u7684\u9700\u6c42\uff0c\u56e0\u6b64\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684\u53cd\u5e8f\u5217\u5316\u6846\u67b6\u5c31\u975e\u5e38\u91cd\u8981\u4e86\uff0c\u90a3\u4e48\u5e38\u7528\u7684 Gson \u4e0e Moshi \u7b49\u6846\u67b6\u6027\u80fd\u5230\u5e95\u600e\u4e48\u6837\u5462?</p> <p>\u4e0b\u9762\u5217\u51fa\u4f7f\u7528 Jetpack Microbenchmark \u5e93\u6d4b\u8bd5\u5e38\u7528\u53cd\u5e8f\u5217\u5316\u6846\u67b6\u7684\u7ed3\u679c\uff0c\u5177\u4f53\u6d4b\u8bd5\u8fc7\u7a0b\u53ef\u89c1\uff1a\u5e38\u7528 JSON \u5e93\u6027\u80fd\u5bf9\u6bd4</p>"},{"location":"practical/speed/kcp-gson-moshi/#_4","title":"\u591a\u6b21\u8fd0\u884c\u6d4b\u8bd5\u7ed3\u679c","text":"<p>\u4ece\u67f1\u72b6\u56fe\u53ef\u4ee5\u5f88\u660e\u663e\u7684\u770b\u51fa\u5404\u4e2a\u6846\u67b6\u7684\u901f\u5ea6\u5bf9\u6bd4</p> <ul> <li>Kotlin Serialization \u770b\u8d77\u6765\u662f\u6700\u9002\u5408 Kotlin \u7684\u53cd\u5e8f\u5217\u5316\u6846\u67b6\uff0c\u5728\u5404\u4e2a\u6846\u67b6\u4e2d\u8868\u73b0\u6700\u597d</li> <li>JSONReader \u4e0e JSONObject \u5728\u5c0f\u6570\u636e\u4e0a\u8868\u73b0\u4e5f\u4e0d\u9519\uff0c\u5728\u5927\u6570\u636e\u4e0a JSONReader \u4e0e\u5176\u5b83\u6846\u67b6\u76f8\u5dee\u4e0d\u5927\uff0c\u800c JSONObject \u7531\u4e8e\u8981\u5c06 InputStream \u8f6c\u5316\u6210 String\uff0c\u8868\u73b0\u8f83\u5dee</li> <li>Moshi \u4e0e Gson \u5728\u53cd\u5e8f\u5217\u5316\u901f\u5ea6\u4e0a\u5dee\u8ddd\u4e0d\u5927\uff0c\u57fa\u672c\u4e0a\u662f\u4e00\u4e2a\u91cf\u7ea7\uff0c\u4f46\u76f8\u6bd4 JSONReader \u7b49\u6846\u67b6\u5219\u660e\u663e\u8f83\u6162</li> </ul>"},{"location":"practical/speed/kcp-gson-moshi/#_5","title":"\u4e00\u6b21\u8fd0\u884c\u6d4b\u8bd5\u7ed3\u679c","text":"<p>\u53ef\u4ee5\u770b\u51fa\uff0c\u4e00\u6b21\u8fd0\u884c\u6d4b\u8bd5\u7ed3\u679c\u4e0e\u591a\u6b21\u8fd0\u884c\u6d4b\u8bd5\u7ed3\u679c\u660e\u663e\u4e0d\u540c</p> <ul> <li>JSONReader \u4e0e JSONObject \u76f8\u6bd4\u5176\u5b83\u6846\u67b6\u4f18\u52bf\u660e\u663e\uff0c\u5728\u51b7\u542f\u52a8\u573a\u666f\u4f7f\u7528\u8fd9\u4e9b\u7cfb\u7edf\u539f\u751f API \u5e94\u8be5\u4f1a\u6709\u4e00\u5b9a\u4f18\u52bf</li> <li>\u5728\u51b7\u542f\u52a8\u573a\u666f\uff0cMoshi \u4e0e Kotlin Serialization \u901f\u5ea6\u5dee\u4e0d\u591a\uff0c\u76f8\u6bd4 Gson \u5219\u7565\u6162</li> </ul> <p>\u6839\u636e\u4e0a\u8ff0\u7ed3\u679c\uff0c\u53ef\u4ee5\u770b\u51fa JSONReader \u8fd9\u4e9b\u539f\u751f API \u5728\u51b7\u542f\u52a8\u573a\u666f\u6709\u6781\u5927\u4f18\u52bf\uff0c\u5728\u7ecf\u8fc7\u5145\u5206\u4f18\u5316\u540e\u76f8\u6bd4 Gson, Moshi \u7b49\u5e93\u4ecd\u7136\u6709\u4e00\u5b9a\u4f18\u52bf\u3002\u56e0\u6b64\uff0c\u5982\u679c\u8981\u5b9e\u73b0\u66f4\u9ad8\u6027\u80fd\u7684\u53cd\u5e8f\u5217\u5316\uff0c\u4f7f\u7528 JSONReader \u4ee3\u66ff Gson \u4e0e Moshi\uff0c\u5e94\u8be5\u662f\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002</p> <p>\u4f46\u662f JSONReader \u8fd9\u4e9b\u539f\u751f API \u4f7f\u7528\u8d77\u6765\u8f83\u4e3a\u9ebb\u70e6\uff0c\u9700\u8981\u5199\u5f88\u591a\u6a21\u677f\u4ee3\u7801\uff0c\u6211\u4eec\u8be5\u5982\u4f55\u4f18\u5316\u5462\uff1f\u7b54\u6848\u5c31\u662f Kudos\u3002</p>"},{"location":"practical/speed/kcp-gson-moshi/#kudos","title":"Kudos \u662f\u4ec0\u4e48","text":"<p>Kudos \u662f Kotlin utilities for deserializing objects \u7684\u7f29\u5199\u3002\u5b83\u53ef\u4ee5\u89e3\u51b3\u4f7f\u7528 Gson\u3001Jackson \u7b49\u6846\u67b6\u53cd\u5e8f\u5217\u5316 JSON \u5230 Kotlin \u7c7b\u65f6\u6240\u5b58\u5728\u7684\u7a7a\u5b89\u5168\u95ee\u9898\u548c\u6784\u9020\u5668\u9ed8\u8ba4\u503c\u5931\u6548\u7684\u95ee\u9898\uff0c\u540c\u65f6\u53ef\u4ee5\u7b80\u5316\u9ad8\u6027\u80fd\u7684\u53cd\u5e8f\u5217\u5316\u6846\u67b6 JsonReader \u7684\u4f7f\u7528\u65b9\u5f0f\u3002</p> <p>Kudos \u5df2\u7ecf\u5728 Github \u4e0a\u5f00\u6e90\uff0c\u5f00\u6e90\u5730\u5740\u53ef\u89c1\uff1ahttps://github.com/kanyun-inc/Kudos</p>"},{"location":"practical/speed/kcp-gson-moshi/#kudos_1","title":"Kudos \u4f7f\u7528","text":"<p>\u5f15\u5165 Kudos \u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u51e0\u6b65</p>"},{"location":"practical/speed/kcp-gson-moshi/#1-classpath","title":"1. \u6dfb\u52a0\u63d2\u4ef6\u5230 classpath","text":"<pre><code>// \u65b9\u5f0f 1\n// \u4f20\u7edf\u65b9\u5f0f\uff0c\u5728\u6839\u76ee\u5f55\u7684 build.gradle.kts \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(\"com.kanyun.kudos:kudos-gradle-plugin:$latest_version\")\n    }\n}\n\n// \u65b9\u5f0f 2\n// \u5f15\u7528\u63d2\u4ef6\u65b0\u65b9\u5f0f\uff0c\u5728 settings.gradle.kts \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\npluginManagement {\n    repositories {\n        mavenCentral()\n    }\n    plugins {\n        id(\"com.kanyun.kudos\") version \"$latest_version\" apply false\n    }\n}\n</code></pre>"},{"location":"practical/speed/kcp-gson-moshi/#_6","title":"\u5728\u9879\u76ee\u4e2d\u542f\u7528\u63d2\u4ef6","text":"<pre><code>plugins {\n    // \u542f\u7528 Kudos \u63d2\u4ef6. \n    // \u4e3a\u88ab @Kudos \u6ce8\u89e3\u6807\u6ce8\u7684\u7c7b\u751f\u6210\u4f18\u5316\u7248\u672c\u7684\u65e0\u53c2\u6784\u9020\u5668\n    id(\"com.kanyun.kudos\")\n}\n\nkudos {\n    // \u542f\u7528 Kudos.Gson. \u4e3a\u88ab @Kudos \u6807\u6ce8\u7684\u7c7b\u540c\u65f6\u751f\u6210 @JsonAdapter \u6ce8\u89e3\uff0c\u5e76\u6dfb\u52a0 kudos-gson \u4f9d\u8d56.\n    gson = true\n    // \u542f\u7528 Kudos.Jackson. \u6dfb\u52a0 kudos-jackson \u4f9d\u8d56.\n    jackson = true\n    // \u542f\u7528 Kudos.AndroidJsonReader. \u6dfb\u52a0 kudos-android-json-reader \u4f9d\u8d56.\n    androidJsonReader = true\n}\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u5728\u6a21\u5757\u7ea7\u522b\u914d\u7f6e Kudos \u7684\u529f\u80fd\u5f00\u5173</p> <ul> <li>\u5f53\u8bbe\u7f6e<code>gson = true</code>\u65f6\u5c31\u4f1a\u542f\u7528 Kudos.Gson\uff0c\u5b9e\u73b0\u66f4\u5b89\u5168\u7684 Gson</li> <li>\u5f53\u8bbe\u7f6e<code>jackson = true</code>\u65f6\u5c31\u4f1a\u542f\u7528 Kudos.jackson\uff0c\u5b9e\u73b0\u66f4\u5b89\u5168\u7684 Jackson</li> <li>\u5f53\u8bbe\u7f6e<code>androidJsonReader = true</code>\u65f6\u5c31\u4f1a\u542f\u7528 Kudos.AndroidJsonReader\uff0c\u7b80\u5316 JsonReader \u7684\u4f7f\u7528</li> </ul>"},{"location":"practical/speed/kcp-gson-moshi/#kudos_2","title":"\u4e3a\u7279\u5b9a\u7c7b\u542f\u52a8 Kudos \u7684\u652f\u6301","text":"<pre><code>@Kudos\ndata class User(\n    val id: Long, \n    val name: String,\n    val age: Int = -1,\n    val tel: String = \"\"\n)\n\n@Kudos(KUDOS_GSON)\ndata class User(\n    val id: Long, \n    val name: String,\n    val age: Int = -1,\n    val tel: String = \"\"\n)\n</code></pre> <ul> <li>\u5bf9\u4e8e\u9700\u8981\u6dfb\u52a0 Kudos \u89e3\u6790\u652f\u6301\u7684\u7c7b\u578b\uff0c\u76f4\u63a5\u6dfb\u52a0<code>@Kudos</code>\u6ce8\u89e3\u5373\u53ef</li> <li><code>@Kudos</code>\u6ce8\u89e3\u7684\u7c7b\u7684\u529f\u80fd\u9ed8\u8ba4\u4e0e\u6a21\u5757\u914d\u7f6e\u4e00\u81f4\uff0c\u4e5f\u53ef\u4ee5\u6dfb\u52a0\u53c2\u6570\u4f8b\u5982<code>@Kudos(KUDOS_GSON)</code>\u5b9e\u73b0\u9488\u5bf9\u8be5\u7c7b\u53ea\u5f00\u542f\u7279\u5b9a\u529f\u80fd</li> </ul>"},{"location":"practical/speed/kcp-gson-moshi/#_7","title":"\u539f\u7406\u89e3\u6790\uff1a\u524d\u7f6e\u77e5\u8bc6","text":""},{"location":"practical/speed/kcp-gson-moshi/#_8","title":"\u7f16\u8bd1\u5668\u63d2\u4ef6\u662f\u4ec0\u4e48\uff1f","text":"<p>Kotlin \u7684\u7f16\u8bd1\u8fc7\u7a0b\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u5c06 Kotlin \u6e90\u4ee3\u7801\u7f16\u8bd1\u6210\u76ee\u6807\u4ea7\u7269\u7684\u8fc7\u7a0b\uff0c\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\uff0c\u901a\u8fc7\u5229\u7528\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u63d0\u4f9b\u7684\u5404\u79cd Hook \u65f6\u673a\uff0c\u8ba9\u6211\u4eec\u53ef\u4ee5\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u63d2\u5165\u81ea\u5df1\u7684\u903b\u8f91\uff0c\u4ee5\u8fbe\u5230\u4fee\u6539\u7f16\u8bd1\u4ea7\u7269\u7684\u76ee\u7684</p> <p>Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\u53ef\u4ee5\u5206\u4e3a Gradle \u63d2\u4ef6\uff0c\u7f16\u8bd1\u5668\u63d2\u4ef6\uff0cIDE \u63d2\u4ef6\u4e09\u90e8\u5206\uff0c\u5982\u4e0b\u56fe\u6240\u793a</p> <p></p>"},{"location":"practical/speed/kcp-gson-moshi/#k2-k1","title":"K2 \u7f16\u8bd1\u5668\u4e0e K1 \u7f16\u8bd1\u5668","text":""},{"location":"practical/speed/kcp-gson-moshi/#_9","title":"\u7f16\u8bd1\u5668\u524d\u7aef","text":"<p>Kotlin \u7f16\u8bd1\u5668\u53ef\u4ee5\u5206\u4e3a\u7f16\u8bd1\u5668\u524d\u7aef\u4e0e\u7f16\u8bd1\u5668\u540e\u7aef\u4e24\u90e8\u5206\uff0c\u76ee\u524d Kotlin \u7f16\u8bd1\u5668\u524d\u7aef\u6709\u4e24\u4e2a\u7248\u672c\uff0c\u4e00\u4e2a\u662f\u8001\u7248\u672c\u7684 PSI \u7248\u672c\uff0c\u4e00\u4e2a\u662f\u5373\u5c06\u5728 Kotlin 2.0 \u7248\u672c\u7a33\u5b9a\u7684 FIR \u7248\u672c\u3002</p> <p>PSI \u5373 Program Structure Interface\uff0cPSI \u539f\u672c\u662f Intellij \u5e73\u53f0\u5bf9\u5404\u7c7b\u7f16\u7a0b\u8bed\u8a00\u8bed\u6cd5\u6811\u7684\u7edf\u4e00\u62bd\u8c61\uff0c\u4e3a\u4e86\u5feb\u901f\u5b9e\u73b0\u9700\u6c42\uff0cKotlin \u56e2\u961f\u5728\u5f00\u53d1\u521d\u671f\u590d\u7528\u4e86 Intellij \u5e73\u53f0\u5df2\u7ecf\u6709\u7684\u6280\u672f\u79ef\u7d2f\u3002\u800c\u4ece Kotlin 1.6 \u7248\u672c\u5f00\u59cb\uff0c\u4e3a\u4e86\u5b9e\u73b0\u66f4\u597d\u7684\u7f16\u8bd1\u5668\u6027\u80fd\uff0cKotlin\u56e2\u961f\u5f00\u59cb\u5f00\u53d1\u4e00\u6b3e\u5168\u65b0\u7684\u524d\u7aef\u7f16\u8bd1\u5668\uff0c\u5373 K2 \u7f16\u8bd1\u5668\u7684 FIR \u524d\u7aef\u3002</p> <p>\u56e0\u6b64\u5f53\u6211\u4eec\u5f00\u53d1\u7f16\u8bd1\u5668\u63d2\u4ef6\u65f6\uff0c\u5728\u6d89\u53ca\u7f16\u8bd1\u5668\u524d\u7aef\u7684\u4fee\u6539\u65f6\u9700\u8981\u540c\u65f6\u9002\u914d K1 \u4e0e K2 \u4e24\u4e2a\u7248\u672c\u3002</p>"},{"location":"practical/speed/kcp-gson-moshi/#_10","title":"\u7f16\u8bd1\u5668\u540e\u7aef","text":"<p>\u540c\u65f6 Kotlin \u4f5c\u4e3a\u4e00\u4e2a\u591a\u5e73\u53f0\u8bed\u8a00\uff0c\u53ef\u4ee5\u5c06\u6e90\u4ee3\u7801\u7f16\u8bd1\u6210\u591a\u4e2a\u5e73\u53f0\u7684\u76ee\u6807\u4ee3\u7801\uff0c\u6bd4\u5982 Kotlin/Jvm \u53ef\u4ee5\u751f\u6210 Java \u5b57\u8282\u7801\uff0cKotlin/Js \u53ef\u4ee5\u751f\u6210 Javascript\uff0cKotlin/Native \u53ef\u4ee5\u751f\u6210 .so \u6587\u4ef6\u3002</p> <p>\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u540e\u7aef\u4e4b\u95f4\u5fc5\u7136\u6709\u4e0d\u5c11\u903b\u8f91\u53ef\u4ee5\u5171\u4eab\uff0c\u56e0\u6b64\u4e3a\u4e86\u5728\u4e0d\u540c\u7684\u540e\u7aef\u4e4b\u95f4\u5171\u4eab\u903b\u8f91\uff0c\u964d\u4f4e\u652f\u6301\u65b0\u7684\u8bed\u8a00\u7279\u6027\u7684\u6210\u672c\uff0c\u540c\u65f6\u65b9\u4fbf\u540e\u7eed\u6269\u5c55\u652f\u6301\u65b0\u7684\u5e73\u53f0\uff0cKotlin \u7f16\u8bd1\u5668\u540e\u7aef\u5f15\u5165\u4e86 IR \u8fd9\u4e00\u4e2d\u95f4\u5c42\u3002</p> <p>\u4e0d\u8fc7\u7531\u4e8e Kotlin/Jvm \u5df2\u7ecf\u5728 Kotlin 1.5 \u7248\u672c\u652f\u6301\u4e86 IR\uff0cKotlin/Js \u5728 Kotlin 1.6 \u7248\u672c\u652f\u6301\u4e86 IR\uff0c\u800c Kotlin/Native \u5728\u4e00\u5f00\u59cb\u5c31\u652f\u6301 IR\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u5f00\u53d1\u7f16\u8bd1\u5668\u63d2\u4ef6\u65f6\uff0c\u6d89\u53ca\u4fee\u6539 IR \u65f6\u4e0d\u9700\u8981\u505a\u4ec0\u4e48\u989d\u5916\u7684\u9002\u914d\u3002</p>"},{"location":"practical/speed/kcp-gson-moshi/#_11","title":"\u7f16\u8bd1\u5668\u6269\u5c55\u70b9","text":"<p>\u524d\u9762\u63d0\u5230 Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\uff0c\u901a\u8fc7\u5229\u7528\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u63d0\u4f9b\u7684\u5404\u79cd\u6269\u5c55\u70b9\uff0c\u8ba9\u6211\u4eec\u53ef\u4ee5\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u63d2\u5165\u81ea\u5df1\u7684\u903b\u8f91\uff0c\u4ee5\u8fbe\u5230\u4fee\u6539\u7f16\u8bd1\u4ea7\u7269\u7684\u76ee\u7684\uff0c\u4e0b\u9762\u5c31\u4ecb\u7ecd\u4e00\u4e0b Kudos \u4e2d\u4f7f\u7528\u5230\u7684\u6269\u5c55\u70b9\u4ee5\u53ca\u5bf9\u5e94\u7684 API</p> \u6269\u5c55\u7684\u7c7b\u540d \u7f16\u8bd1\u9636\u6bb5 \u529f\u80fd\u8bf4\u660e \u7528\u4f8b SyntheticResolveExtension \u524d\u7aef \u89e3\u6790\u751f\u6210\u7684\u7c7b\uff0c\u51fd\u6570\u7b49\uff0c\u53ef\u7528\u4e8e\u7ed9\u7c7b\u6dfb\u52a0\u63a5\u53e3\u6216\u8005\u65b9\u6cd5 Parcelize FirExtensionRegistrar \u524d\u7aef FIR \u6269\u5c55\uff0c\u53ef\u7528\u4e8e\u63d0\u4f9b\u4ee3\u7801\u58f0\u660e\u4fe1\u606f\u4e0e\u4ee3\u7801\u68c0\u67e5 Parcelize StorageComponentContainerContributor \u524d\u7aef \u53ef\u7528\u4e8e\u7f16\u8bd1\u671f\u4ee3\u7801\u68c0\u67e5 Compose IrGenerationExtension \u591a\u5e73\u53f0 IR \u540e\u7aef \u751f\u6210\u4e0e\u4fee\u6539 IR Parcelize\u3001Atomicfu\u3001NoArg <p>\u603b\u5f97\u6765\u8bf4\uff0c\u5728\u6d89\u53ca\u5230\u4fee\u6539\u7c7b\u6216\u8005\u51fd\u6570\u7684\u58f0\u660e\uff0c\u4f8b\u5982\u51fd\u6570\u7684\u7b7e\u540d\u4fe1\u606f\uff0c\u7ed9\u7c7b\u6dfb\u52a0\u63a5\u53e3\u7b49\u5185\u5bb9\u65f6\uff0c\u9700\u8981\u4f7f\u7528\u5230\u7f16\u8bd1\u5668\u524d\u7aef\u7684\u6269\u5c55\u70b9\uff1b\u800c\u5f53\u6d89\u53ca\u5230\u65b9\u6cd5\u4f53\u7684\u5185\u90e8\u5b9e\u73b0\uff0c\u7c7b\u7684\u79c1\u6709\u5c5e\u6027\u7b49\u5185\u5bb9\u65f6\uff0c\u76f4\u63a5\u751f\u6210\u6216\u4fee\u6539 IR \u5373\u53ef\u3002</p>"},{"location":"practical/speed/kcp-gson-moshi/#kudos_3","title":"Kudos \u539f\u7406\u89e3\u6790","text":""},{"location":"practical/speed/kcp-gson-moshi/#_12","title":"\u9879\u76ee\u7ed3\u6784","text":"<p>\u6211\u4eec\u77e5\u9053\uff0cKudos \u662f\u4e00\u4e2a Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u5206\u4e3a Gradle \u63d2\u4ef6\uff0c\u7f16\u8bd1\u5668\u63d2\u4ef6\uff0cIDE \u63d2\u4ef6\u4e09\u90e8\u5206\uff0c\u4e3a\u4e86\u652f\u6301 Jackson\uff0cKudos \u4e5f\u63d0\u4f9b\u4e86 Maven \u96c6\u6210\u80fd\u529b\u3002</p> <p>\u540c\u65f6 Kudos \u6dfb\u52a0\u4e86\u5bf9 Gson, Jackson, JsonReader \u7b49\u6846\u67b6\u7684\u589e\u5f3a\uff0c\u9488\u5bf9\u8fd9\u4e9b\u6846\u67b6\u7684\u5b9a\u5236\u5316\u4ee3\u7801\u5c01\u88c5\u5728\u7279\u5b9a\u7684 runtime \u6a21\u5757\u4e2d\uff0c\u53ea\u6709\u5f00\u542f\u4e86\u5bf9\u5e94\u7684\u529f\u80fd\u5f00\u5173\u624d\u4f1a\u5f15\u5165\u3002</p>"},{"location":"practical/speed/kcp-gson-moshi/#kudos_4","title":"Kudos \u5982\u4f55\u4fdd\u8bc1\u7a7a\u5b89\u5168\u4e0e\u9ed8\u8ba4\u503c\uff1f","text":"<p>\u524d\u9762\u4ecb\u7ecd\u4e86 Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\u76f8\u5173\u7684\u524d\u7f6e\u77e5\u8bc6\uff0c\u90a3\u4e48 Kudos \u5230\u5e95\u662f\u5982\u4f55\u4fdd\u8bc1\u7a7a\u5b89\u5168\u4e0e\u9ed8\u8ba4\u503c\u7684\u5462\uff1f</p> <pre><code>@Kudos\ndata class User(\n    val id: Long, \n    val name: String,\n    val age: Int = -1,\n    val tel: String = \"\"\n)\n</code></pre> <p>\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\uff0c\u5728\u7f16\u8bd1\u8fc7\u540e\u5927\u81f4\u76f8\u5f53\u4e8e</p> <pre><code>@Kudos\n// \u5982\u679c\u542f\u7528\u4e86 com.kanyun.kudos.gson \u63d2\u4ef6\uff0c\u5219\u751f\u6210 @JsonAdapter \u6ce8\u89e3\n@JsonAdapter(value = KudosReflectiveTypeAdapterFactory::class)\ndata class User(\n    val id: Long, \n    val name: String,\n    val age: Int = -1,\n    val tel: String = \"\"\n) : KudosValidator {\n    constructor() { // \u751f\u6210\u7684\u9ed8\u8ba4\u65e0\u53c2\u6784\u9020\u5668\n        super() // \u8c03\u7528\u7236\u7c7b\u9ed8\u8ba4\u65e0\u53c2\u6784\u9020\u5668\n        init&lt;User&gt;() // \u8c03\u7528 User \u7c7b\u5185\u90e8\u7684 init \u5757\uff08\u5305\u62ec\u5b9a\u4e49\u5728\u5185\u90e8\u7684\u5c5e\u6027\u521d\u59cb\u5316\uff09\n        this.age = -1 // \u4f7f\u7528\u4e3b\u6784\u9020\u5668\u7684\u53c2\u6570\u9ed8\u8ba4\u503c\u521d\u59cb\u5316\u5c5e\u6027\n        this.tel = \"\" // \u4f7f\u7528\u4e3b\u6784\u9020\u5668\u7684\u53c2\u6570\u9ed8\u8ba4\u503c\u521d\u59cb\u5316\u5c5e\u6027\n    }\n\n    // \u751f\u6210\u7684\u7528\u4e8e\u6821\u9a8c\u5b57\u6bb5\u7a7a\u5b89\u5168\u7684\u51fd\u6570\n    override fun validate(status: Map&lt;String, Boolean&gt;) {\n        validateField(\"id\", status)\n        validateField(\"name\", status)\n    }\n}\n</code></pre> <ul> <li>Kudos \u63d2\u4ef6\u4f1a\u751f\u6210\u9ed8\u8ba4\u65e0\u53c2\u6784\u9020\u5668\uff0c\u5728\u5176\u4e2d\u4f7f\u7528\u4e3b\u6784\u9020\u5668\u7684\u53c2\u6570\u9ed8\u8ba4\u503c\u521d\u59cb\u5316\u5c5e\u6027\uff0c\u56e0\u6b64\u53ef\u4ee5\u907f\u514d\u9ed8\u8ba4\u503c\u5931\u6548\u3002</li> <li>\u5f53\u542f\u7528\u4e86 Kudos.gson \u65f6\uff0c\u4f1a\u7ed9\u7c7b\u6dfb\u52a0<code>@JsonAdapter</code>\u6ce8\u89e3\uff0c\u5728\u81ea\u5b9a\u4e49\u7684<code>KudosReflectiveTypeAdapterFactory</code>\u4e2d\u81ea\u5b9a\u4e49\u53cd\u5e8f\u5217\u5316\u903b\u8f91</li> <li>Kudos \u63d2\u4ef6\u540c\u6837\u4f1a\u7ed9\u7c7b\u6dfb\u52a0<code>KudosValidator</code>\u63a5\u53e3\u4e0e<code>validate</code>\u65b9\u6cd5\uff0c\u5728<code>validate</code>\u65b9\u6cd5\u4f53\u4e2d\u4f1a\u7ed9\u6ca1\u6709\u9ed8\u8ba4\u503c\u7684\u975e\u7a7a\u5c5e\u6027\u6dfb\u52a0<code>validateField</code>\u8c03\u7528</li> <li>\u5728<code>KudosReflectiveTypeAdapterFactory</code>\u4e2d\u5728\u53cd\u5e8f\u5217\u5316\u5b8c\u6210\u540e\u4f1a\u8c03\u7528<code>KudosValidator</code>\u7684<code>validate</code>\u65b9\u6cd5\uff0c\u4ee5\u9a8c\u8bc1\u58f0\u660e\u975e\u7a7a\u7684\u5c5e\u6027\u662f\u5426\u4e0d\u4e3a\u7a7a\uff0c\u5426\u5219\u4f1a\u629b\u51fa\u5f02\u5e38</li> </ul>"},{"location":"practical/speed/kcp-gson-moshi/#kudos-jsonreader","title":"Kudos \u5982\u4f55\u7b80\u5316 JsonReader \u7684\u4f7f\u7528","text":"<p>JsonReader \u4f7f\u7528\u8d77\u6765\u9ebb\u70e6\u7684\u539f\u56e0\u5c31\u5728\u4e8e\u8981\u5199\u5f88\u591a\u6a21\u677f\u4ee3\u7801\uff0c\u6211\u4eec\u901a\u8fc7\u7f16\u8bd1\u5668\u63d2\u4ef6\u6765\u751f\u6210\u8fd9\u4e9b\u6a21\u677f\u4ee3\u7801\u5c31\u53ef\u4ee5\u89e3\u51b3 JsonReader \u4f7f\u7528\u9ebb\u70e6\u7684\u95ee\u9898\u3002\u540c\u65f6\u5f53\u6211\u4eec\u5f00\u542f Kudos.AndroidJsonReader, \u4e4b\u524d\u7684\u4fdd\u8bc1\u9ed8\u8ba4\u503c\u751f\u6548\u4e0e\u7a7a\u5b89\u5168\u7684\u4ee3\u7801\u4e5f\u540c\u6837\u80fd\u751f\u6548\u3002\u7f16\u8bd1\u8fc7\u540e\u7684\u4ee3\u7801\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>@Kudos\ndata class User(\n    val id: Long, \n    val name: String,\n    val age: Int = -1,\n    val tel: String = \"\"\n) : KudosJsonAdapter {\n    private var kudosFieldStatusMap: Map&lt;String, Boolean&gt; = hashMapOf()\n\n    override fun fromJson(jsonReader: JsonReader): User {\n        jsonReader.beginObject()\n        while (jsonReader.hasNext()) {\n            val tmp0 = jsonReader.nextName()\n            if (jsonReader.peek() == JsonToken.NULL) {\n                jsonReader.skipValue()\n                continue\n            }\n            when {\n                tmp0 == \"id\" -&gt; {\n                    &lt;this&gt;.id = jsonReader.nextLong()\n                    &lt;this&gt;.kudosFieldStatusMap.put(\"id\", &lt;this&gt;.id != null)\n                }\n                tmp0 == \"name\" -&gt; {\n                    &lt;this&gt;.name = jsonReader.nextString()\n                    &lt;this&gt;.kudosFieldStatusMap.put(\"name\", &lt;this&gt;.name != null)\n                }\n                // ...\n                else -&gt; {\n                    jsonReader.skipValue()\n                }\n            }\n        }\n        jsonReader.endObject()\n        validate(&lt;this&gt;.kudosFieldStatusMap)\n        return this\n    }\n}\n</code></pre>"},{"location":"practical/speed/kcp-gson-moshi/#kudos-compiler","title":"kudos-compiler \u7684\u5b9e\u73b0","text":"<p>\u524d\u9762\u6211\u4eec\u4ecb\u7ecd\u4e86 kudos-compiler \u6a21\u5757\u8981\u5b9e\u73b0\u7684\u4ee3\u7801\uff0c\u90a3\u4e48\u4f5c\u4e3a\u63d0\u4f9b\u6838\u5fc3\u80fd\u529b\u7684\u6a21\u5757\uff0ckudos-compiler \u5177\u4f53\u53c8\u662f\u5982\u4f55\u5b9e\u73b0\u7684\u5462\uff1f</p> <ul> <li>KudosCommandLineProcessor \u4f5c\u4e3a\u7f16\u8bd1\u4ef6\u63d2\u4ef6\u7684\u5165\u53e3\uff0c\u6ce8\u518c pluginId\uff0c\u540c\u65f6\u63a5\u6536\u547d\u4ee4\u884c\u6216\u8005 gradle \u63d2\u4ef6\u4f20\u8fc7\u6765\u7684\u53c2\u6570</li> <li>KudosCompilerPluginRegistrar \u7684\u4f5c\u7528\u5219\u662f\u7528\u4e8e\u6ce8\u518c\u6211\u4eec\u6240\u9700\u7684\u5404\u79cd\u6269\u5c55\u70b9</li> <li>KudosSyntheticResolveExtension \u7684\u4f5c\u7528\u662f\u5728\u7b26\u53f7\u5f15\u7528\u89e3\u6790\u65f6\u63d0\u4f9b\u58f0\u660e\u4fe1\u606f\u5728\u7b26\u53f7\u5f15\u7528\u89e3\u6790\u65f6\u63d0\u4f9b\u58f0\u660e\u4fe1\u606f\uff0c\u6bd4\u5982\u7ed9\u7c7b\u6dfb\u52a0<code>KudosValidator</code>\u63a5\u53e3\u4e0e<code>validate</code>\u65b9\u6cd5</li> <li>KudosFirExtensionRegistrar \u7684\u4f5c\u7528\u662f\u5728 K2 \u89e3\u6790\u65f6\u63d0\u4f9b\u58f0\u660e\u4fe1\u606f\u4e0e\u4ee3\u7801\u68c0\u67e5\uff0c\u4e0e KudosSyntheticResolveExtension \u7c7b\u4f3c\uff0c\u533a\u522b\u5728\u4e8e\u4e24\u8005\u9002\u7528\u7684\u7f16\u8bd1\u5668\u524d\u7aef\u7248\u672c\u4e0d\u540c</li> <li>KudosComponentContainerContributor \u7684\u4f5c\u7528\u662f\u63d0\u4f9b\u4ee3\u7801\u7f16\u8bd1\u671f\u68c0\u67e5</li> <li>KudosIrGenerationExtension \u7684\u4f5c\u7528\u662f\u5728\u7f16\u8bd1\u4ea7\u7269\u4e2d\u63d0\u4f9b\u5b9e\u73b0\uff0c\u6bd4\u5982<code>validate</code>\u4e0e<code>fromJson</code>\u7684\u65b9\u6cd5\u4f53</li> </ul>"},{"location":"practical/speed/kcp-gson-moshi/#_13","title":"\u6027\u80fd\u6570\u636e","text":"<p>\u57fa\u4e8e Kudos \u7684\u5de5\u4f5c\u673a\u5236\u4e0d\u96be\u60f3\u5230\uff0cKudos \u7684\u8fd0\u884c\u8017\u65f6\u4f1a\u7565\u5fae\u591a\u4e8e\u5bf9\u5e94\u7684 JSON \u5e8f\u5217\u5316\u6846\u67b6\u3002</p> <p>\u4f7f\u7528 Jetpack Microbenchmark \u5e93\u5bf9 Kudos \u4e0e\u5176\u5bf9\u5e94\u7684 JSON \u5e8f\u5217\u5316\u6846\u67b6\u8fdb\u884c\u6027\u80fd\u5bf9\u6bd4\u53ef\u4ee5\u53d1\u73b0\uff0cKudos.Gson \u7684\u8017\u65f6\u4e3a Gson \u7684 1.1-1.2 \u500d, Kudos.Jackson, KudosAndroidJsonReader \u7684\u60c5\u51b5\u7c7b\u4f3c\uff0c\u5728\u53ef\u63a5\u53d7\u7684\u8303\u56f4\u4e4b\u5185\u3002</p>"},{"location":"practical/speed/kcp-gson-moshi/#_14","title":"\u591a\u6b21\u8fd0\u884c\u6d4b\u8bd5\u7ed3\u679c","text":"small json medium json large json Gson 412,375   ns 1,374,838   ns 3,641,904   ns Kudos-Gson 517,123   ns 1,686,568   ns 4,311,910   ns Jackson 1,035,010   ns 1,750,709   ns 3,450,974   ns Kudos-Jackson 1,261,026   ns 2,030,874   ns 3,939,600   ns JsonReader 190,302   ns 1,176,479   ns 3,464,174   ns Kudos-JsonReader 215,974   ns 1,359,587   ns 4,019,024   ns"},{"location":"practical/speed/kcp-gson-moshi/#_15","title":"\u4e00\u6b21\u8fd0\u884c\u6d4b\u8bd5\u7ed3\u679c","text":"small json medium json large json Gson 3,974,219   ns 4,666,927   ns 8,271,355   ns Kudos-Gson 4,531,718   ns 6,244,479   ns 11,160,782   ns Jackson 12,821,094   ns 13,930,625   ns 15,989,791   ns Kudos-Jackson 13,233,750   ns 15,674,010   ns 18,641,302   ns JsonReader 662,032   ns 2,056,666   ns 4,624,687   ns Kudos-JsonReader 734,907   ns 2,362,010   ns 6,212,917   ns"},{"location":"practical/speed/kcp-gson-moshi/#kotlin","title":"\u5982\u4f55\u5b66\u4e60 Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6","text":"<p>Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\u76ee\u524d\u8fd8\u6ca1\u6709\u7a33\u5b9a\uff0c\u6ca1\u6709\u7a33\u5b9a\u7684 API \u4e0e\u6587\u6863\uff0c\u90a3\u4e48\u6211\u4eec\u8be5\u5982\u4f55\u5b66\u4e60 Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\u5462\uff1f</p> <ul> <li>\u901a\u8fc7 Kotlin \u6e90\u7801\u5b66\u4e60\uff1a\u7531\u4e8e\u6ca1\u6709\u6587\u6863\uff0cKotlin \u6e90\u7801\u5b9e\u9645\u4e0a\u5c31\u662f\u6700\u65b0\u7684\u6587\u6863\uff0c\u5982\u679c\u60f3\u8981\u5b66\u4e60 KCP\uff0c\u53ef\u4ee5\u5148\u4ece Kotlin \u5b98\u65b9\u5f00\u53d1\u7684\u63d2\u4ef6\uff0c\u4f8b\u5982 Parcelize, NoArg \u7b49\u5f00\u59cb</li> <li>\u901a\u8fc7 AI \u5b66\u4e60\uff1a\u5f53\u6211\u4eec\u5728\u5f00\u53d1\u7f16\u8bd1\u5668\u63d2\u4ef6\u65f6\uff0c\u5f80\u5f80\u662f\u77e5\u9053\u60f3\u8981\u751f\u6210\u7684\u4ee3\u7801\u7684\u6837\u5f0f\uff0c\u5374\u7531\u4e8e\u6ca1\u6709 API \u4e0d\u77e5\u9053\u5982\u4f55\u5b9e\u73b0\uff0c\u8fd9\u79cd\u573a\u666f\u6b63\u662f AI \u7684\u7528\u6b66\u4e4b\u5730\u4e86\uff0c\u6211\u4eec\u53ef\u4ee5\u63d0\u4f9b\u7ed9 AI \u60f3\u8981\u751f\u6210\u7684\u4ee3\u7801\u793a\u4f8b\uff0c\u8fd4\u56de\u7f16\u8bd1\u5668\u63d2\u4ef6\u7684\u5b9e\u73b0\u3002</li> <li>\u5b66\u4e60\u300a\u6df1\u5165\u5b9e\u8df5 Kotlin \u5143\u7f16\u7a0b\u300b\uff1a\u8fd9\u672c\u4e66\u662f\u76ee\u524d\u5c11\u6709\u7684\u9488\u5bf9 Kotlin \u7f16\u8bd1\u5668\u63d2\u4ef6\u505a\u4e86\u7cfb\u7edf\u4ecb\u7ecd\u7684\u5b66\u4e60\u8d44\u6599\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u4ecb\u7ecd\u4e86\u53cd\u5c04\uff0c\u4ee3\u7801\u751f\u6210\uff0c\u7a0b\u5e8f\u9759\u6001\u5206\u6790\uff0c\u7b26\u53f7\u5904\u7406\u5668\u7b49 Kotlin \u5143\u7f16\u7a0b\u6280\u672f\uff0c\u60f3\u8981\u6df1\u5165\u5b66\u4e60 Kotlin \u5143\u7f16\u7a0b\u7684\u540c\u5b66\u90fd\u53ef\u4ee5\u4e86\u89e3\u4e0b\u3002</li> </ul> <p></p>"},{"location":"practical/speed/kcp-gson-moshi/#_16","title":"\u603b\u7ed3","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5982\u4f55\u4f7f\u7528 Kudos \uff0c\u4ee5\u53ca Kudos \u5230\u5e95\u662f\u5982\u4f55\u5b9e\u73b0\u7684\uff0c\u5982\u679c\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u6b22\u8fce\u63d0\u51fa Issue\uff0c\u5982\u679c\u5bf9\u4f60\u6709\u6240\u5e2e\u52a9\uff0c\u6b22\u8fce\u70b9\u8d5e\u6536\u85cf Star ~</p>"},{"location":"practical/speed/kcp-gson-moshi/#_17","title":"\u5f00\u6e90\u5730\u5740","text":"<p>https://github.com/kanyun-inc/Kudos</p>"},{"location":"practical/stability/airbag/","title":"\u5b89\u5168\u6c14\u56ca\u5982\u4f55\u5b9e\u73b0\uff1f","text":""},{"location":"practical/stability/airbag/#_2","title":"\u524d\u8a00","text":"<p>\u6211\u4eec\u90fd\u77e5\u9053\uff0c\u5f53 Andoird \u7a0b\u5e8f\u53d1\u751f\u672a\u6355\u83b7\u7684\u5f02\u5e38\u7684\u65f6\u5019\uff0c\u7a0b\u5e8f\u4f1a\u76f4\u63a5 Crash \u9000\u51fa</p> <p>\u800c\u6240\u8c13\u5b89\u5168\u6c14\u56ca\uff0c\u662f\u6307\u5728 Crash \u53d1\u751f\u65f6\uff0c\u53ef\u4ee5\u6355\u83b7\u5f02\u5e38\uff0c\u89e6\u53d1\u515c\u5e95\u903b\u8f91\uff0c\u5728\u7a0b\u5e8f\u9000\u51fa\u524d\u505a\u6700\u540e\u7684\u62a2\u6551</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u600e\u4e48\u5b9e\u73b0\u4e00\u4e2a\u5b89\u5168\u6c14\u56ca\uff0c\u4ee5\u5728 Crash \u53d1\u751f\u65f6\u505a\u6700\u540e\u7684\u62a2\u6551</p>"},{"location":"practical/stability/airbag/#java","title":"Java \u5c42\u5b89\u5168\u6c14\u56ca","text":""},{"location":"practical/stability/airbag/#java_1","title":"Java \u5f02\u5e38\u5982\u4f55\u6355\u83b7","text":"<p>\u5728\u5b9e\u73b0\u5b89\u5168\u6c14\u56ca\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u601d\u8003\u4e00\u4e2a\u95ee\u9898\uff0c\u50cf bugly, sentry \u8fd9\u79cd\u5e93\uff0c\u662f\u5982\u4f55\u6355\u83b7\u5f02\u5e38\u5e76\u4e0a\u4f20\u5806\u6808\u7684\u5462\uff1f</p> <p>\u8981\u4e86\u89e3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u9996\u5148\u8981\u4e86\u89e3\u4e00\u4e0b\u5f53\u5f02\u5e38\u53d1\u751f\u65f6\u662f\u600e\u4e48\u4f20\u64ad\u7684</p> <p></p> <p>\u5176\u5b9e\u4e5f\u5f88\u7b80\u5355\uff0c\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u51e0\u6b65</p> <ol> <li>\u5f53\u629b\u51fa\u5f02\u5e38\u65f6\uff0c\u901a\u8fc7<code>Thread.dispatchUncaughtException</code>\u8fdb\u884c\u5206\u53d1</li> <li>\u4f9d\u6b21\u7531<code>Thread</code>\uff0c<code>ThreadGroup</code>\uff0c<code>Thread.getDefaultUncaughtExceptionHandler</code>\u5904\u7406</li> <li>\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>KillApplicationHandler</code>\u4f1a\u88ab\u8bbe\u7f6e<code>defaultUncaughtExceptionHandler</code></li> <li><code>KillApplicationHandler</code>\u4e2d\u4f1a\u8c03\u7528<code>Process.killProcess</code>\u9000\u51fa\u5e94\u7528</li> </ol> <p>\u8fd9\u5c31\u662f\u5f02\u5e38\u53d1\u751f\u65f6\u7684\u4f20\u64ad\u8def\u5f84\uff0c\u53ef\u4ee5\u770b\u51fa\uff0c\u5982\u679c\u6211\u4eec\u901a\u8fc7<code>Thread.setDefaultUncaughtExceptionHandler</code>\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5904\u7406\u5668\uff0c\u5c31\u53ef\u4ee5\u6355\u83b7\u5f02\u5e38\u505a\u4e00\u4e9b\u515c\u5e95\u64cd\u4f5c\u4e86\uff0c\u5176\u5b9e bugly \u8fd9\u4e9b\u5e93\u4e5f\u662f\u8fd9\u4e48\u505a\u7684</p>"},{"location":"practical/stability/airbag/#_3","title":"\u81ea\u5b9a\u4e49\u5f02\u5e38\u5904\u7406\u5668\u7684\u95ee\u9898","text":"<p>\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u5982\u679c\u6211\u4eec\u8bbe\u7f6e\u4e86\u81ea\u5b9a\u4e49\u5904\u7406\u5668\uff0c\u5728\u91cc\u9762\u53ea\u505a\u4e00\u4e9b\u6253\u5370\u65e5\u5fd7\u7684\u64cd\u4f5c\uff0c\u800c\u4e0d\u662f\u9000\u51fa\u5e94\u7528\uff0c\u662f\u4e0d\u662f\u5c31\u53ef\u4ee5\u8ba9 app \u6c38\u4e0d\u5d29\u6e83\u4e86\u5462\uff1f</p> <p>\u7b54\u6848\u5f53\u7136\u662f\u5426\u5b9a\u7684\uff0c\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e24\u4e2a\u95ee\u9898</p>"},{"location":"practical/stability/airbag/#looper","title":"Looper \u5faa\u73af\u95ee\u9898","text":"<p>\u6211\u4eec\u77e5\u9053\uff0cApp \u7684\u8fd0\u884c\u5728\u5f88\u5927\u7a0b\u5e8f\u4e0a\u4f9d\u8d56\u4e8e Handler \u6d88\u606f\u673a\u5236\uff0c<code>Handler</code> \u4e0d\u65ad\u7684\u5f80 <code>MessageQueue</code> \u4e2d\u53d1\u9001 <code>Message</code>\uff0c\u800c<code>Looper</code>\u5219\u6b7b\u5faa\u73af\u7684\u4e0d\u65ad\u4ece<code>MessageQueue</code>\u4e2d\u53d6\u51fa<code>Message</code>\u5e76\u6d88\u8d39\uff0c\u6574\u4e2a app \u624d\u80fd\u8fd0\u884c\u8d77\u6765</p> <p>\u800c\u5f53\u5f02\u5e38\u53d1\u751f\u65f6\uff0c<code>Looper.loop</code> \u5faa\u73af\u88ab\u9000\u51fa\u4e86\uff0c\u4e8b\u4ef6\u4e5f\u5c31\u4e0d\u4f1a\u88ab\u6d88\u8d39\u4e86\uff0c\u56e0\u6b64\u867d\u7136 app \u4e0d\u4f1a\u76f4\u63a5\u9000\u51fa\uff0c\u4f46\u4e5f\u4f1a\u56e0\u4e3a\u65e0\u54cd\u5e94\u53d1\u751f ANR</p> <p>\u56e0\u6b64\uff0c\u5f53\u5d29\u6e83\u53d1\u751f\u5728\u4e3b\u7ebf\u7a0b\u65f6\uff0c\u6211\u4eec\u9700\u8981\u6062\u590d\u4e00\u4e0b<code>Looper.loop</code></p>"},{"location":"practical/stability/airbag/#_4","title":"\u4e3b\u6d41\u7a0b\u629b\u51fa\u5f02\u5e38\u95ee\u9898","text":"<p>\u5f53\u6211\u4eec\u5728\u4e3b\u6de4\u79ef\u629b\u51fa\u5f02\u5e38\u65f6\uff0c\u6bd4\u5982\u5728<code>onCreate</code>\u65b9\u6cd5\u4e2d\uff0c\u867d\u7136\u6211\u4eec\u6355\u83b7\u4f4f\u4e86\u5f02\u5e38\uff0c\u4f46\u7a0b\u5e8f\u7684\u6267\u884c\u4e5f\u88ab\u4e2d\u65ad\u4e86\uff0c\u754c\u9762\u7684\u7ed8\u5236\u53ef\u80fd\u65e0\u6cd5\u5b8c\u6210\uff0c\u70b9\u51fb\u4e8b\u4ef6\u7684\u8bbe\u7f6e\u4e5f\u6ca1\u6709\u751f\u6548</p> <p>\u8fd9\u5c31\u5bfc\u81f4\u4e86 app \u867d\u7136\u6ca1\u6709\u9000\u51fa\uff0c\u4f46\u7528\u6237\u5374\u65e0\u6cd5\u64cd\u4f5c\u7684\u95ee\u9898\uff0c\u8fd9\u79cd\u60c5\u51b5\u4f3c\u4e4e\u8fd8\u4e0d\u5982\u76f4\u63a5 Crash \u4e86\u5462</p> <p>\u56e0\u6b64\u6211\u4eec\u7684\u5b89\u5168\u6c14\u56ca\u5e94\u8be5\u652f\u6301\u914d\u7f6e\uff0c\u53ea\u5904\u7406\u90a3\u4e9b\u975e\u4e3b\u6d41\u7a0b\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u70b9\u51fb\u6309\u94ae\u89e6\u53d1\u7684\u5d29\u6e83\uff0c\u6216\u8005\u4e00\u4e9b\u6253\u70b9\u7b49\u5bf9\u7528\u6237\u65e0\u611f\u77e5\u64cd\u4f5c\u9020\u6210\u7684\u5d29\u6e83</p>"},{"location":"practical/stability/airbag/#_5","title":"\u65b9\u6848\u8bbe\u8ba1","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u4e0a\u9762\u63d0\u5230\u7684\u4e24\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u7684\u65b9\u6848\u5982\u4e0b</p> <p></p> <p>\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u51e0\u6b65\uff1a 1. \u6ce8\u518c\u81ea\u5b9a\u4e49<code>DefaultUncaughtExceptionHandler</code> 2. \u5f53\u5f02\u5e38\u53d1\u751f\u662f\u6355\u83b7\u5f02\u5e38 3. \u5339\u914d\u5f02\u5e38\u5806\u6808\u662f\u5426\u7b26\u5408\u914d\u7f6e\uff0c\u5982\u679c\u7b26\u5408\u5219\u6355\u83b7\uff0c\u5426\u5219\u4ea4\u7ed9\u9ed8\u8ba4\u5904\u7406\u5668\u5904\u7406 4. \u5224\u65ad\u5f02\u5e38\u53d1\u751f\u65f6\u662f\u5426\u662f\u4e3b\u7ebf\u7a0b\uff0c\u5982\u679c\u662f\u5219\u91cd\u542f<code>Looper</code></p>"},{"location":"practical/stability/airbag/#_6","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<p>\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b\uff1a </p> <pre><code>    fun setUpJavaAirBag(configList: List&lt;JavaAirBagConfig&gt;) {\n        val preDefaultExceptionHandler = Thread.getDefaultUncaughtExceptionHandler()\n        // \u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5904\u7406\u5668\n        Thread.setDefaultUncaughtExceptionHandler { thread, exception -&gt;\n            handleException(preDefaultExceptionHandler, configList, thread, exception)\n            if (thread == Looper.getMainLooper().thread) {\n                // \u91cd\u542f Looper\n                while (true) {\n                    try {\n                        Looper.loop()\n                    } catch (e: Throwable) {\n                        handleException(\n                            preDefaultExceptionHandler, configList, Thread.currentThread(), e\n                        )\n                    }\n                }\n            }\n        }\n    }\n\n    private fun handleException(\n        preDefaultExceptionHandler: Thread.UncaughtExceptionHandler,\n        configList: List&lt;JavaAirBagConfig&gt;,\n        thread: Thread,\n        exception: Throwable\n    ) {\n        // \u5339\u914d\u914d\u7f6e\n        if (configList.any { isStackTraceMatching(exception, it) }) {\n            Log.w(\"StabilityOptimize\", \"Java Crash \u5df2\u6355\u83b7\")\n        } else {\n            Log.w(\"StabilityOptimize\", \"Java Crash \u672a\u6355\u83b7\uff0c\u4ea4\u7ed9\u539f\u6709 ExceptionHandler \u5904\u7406\")\n            preDefaultExceptionHandler.uncaughtException(thread, exception)\n        }\n    }\n</code></pre>"},{"location":"practical/stability/airbag/#native","title":"Native \u5c42\u5b89\u5168\u6c14\u56ca","text":"<p>\u901a\u8fc7\u4e0a\u9762\u7684\u6b65\u9aa4\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a Java \u5c42\u5b89\u5168\u6c14\u56ca\uff0c\u4f46\u662f\u5982\u679c\u53d1\u751f Native \u5c42\u5d29\u6e83\u65f6\uff0c\u7a0b\u5e8f\u8fd8\u662f\u4f1a\u5d29\u6e83</p> <p>\u90a3\u4e48\u6211\u4eec\u80fd\u4e0d\u80fd\u6309\u7167 Java \u5c42\u5b89\u5168\u6c14\u56ca\u7684\u601d\u8def\uff0c\u5b9e\u73b0\u4e00\u4e2a Native \u5c42\u7684\u5b89\u5168\u6c14\u56ca\uff1f</p>"},{"location":"practical/stability/airbag/#native_1","title":"Native \u5f02\u5e38\u5982\u4f55\u6355\u83b7","text":"<p>Native \u5c42\u5f02\u5e38\u662f\u901a\u8fc7\u4fe1\u53f7\u673a\u5236\u5b9e\u73b0\u7684</p> <p></p> <ol> <li>crash\u4ea7\u751f\u540e\uff0c\u4f1a\u5728\u7528\u6237\u6001\u9636\u6bb5\u8c03\u7528\u4e2d\u65ad\u8fdb\u5165\u5185\u6838\u6001</li> <li>\u5728\u5904\u7406\u5b8c\u5185\u6838\u64cd\u4f5c\uff0c\u8fd4\u56de\u7528\u6237\u6001\u65f6\uff0c\u4f1a\u68c0\u67e5\u4fe1\u53f7\u961f\u5217\u4e0a\u662f\u5426\u6709\u4fe1\u53f7\u9700\u8981\u5904\u7406</li> <li>\u5982\u679c\u6709\u4fe1\u53f7\u9700\u8981\u5904\u7406\uff0c\u5219\u4f1a\u8c03\u7528<code>sigaction</code>\u51fd\u6570\u8fdb\u884c\u76f8\u5e94\u5904\u7406</li> </ol> <p>\u90a3\u4e48\u5982\u679c\u6211\u4eec\u901a\u8fc7\u6ce8\u518c\u4fe1\u53f7\u5904\u7406\u51fd\u6570<code>sigaction</code>\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u4fe1\u53f7\u5904\u7406\u5668\uff0c\u662f\u4e0d\u662f\u53ef\u4ee5\u5b9e\u73b0\u8ddf Java \u5b89\u5168\u6c14\u56ca\u4e00\u6837\u7684\u6548\u679c\uff1f</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>sigaction</code>\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u4fe1\u53f7\u5904\u7406\u5668\uff0c\u4f46\u662f<code>SIGKILL</code>\u4e0e<code>SIGSTOP</code>\u4fe1\u53f7\u6211\u4eec\u662f\u65e0\u6cd5\u66f4\u6539\u5176\u9ed8\u8ba4\u884c\u4e3a\u7684\uff0c\u5982\u679c\u6211\u4eec\u8bbe\u7f6e\u4e86\u81ea\u5b9a\u4e49\u4fe1\u53f7\u5904\u7406\u5668\uff0c\u6ca1\u6709\u9000\u51fa app\uff0c\u4f46\u9519\u8bef\u5b9e\u9645\u8fd8\u662f\u4ea7\u751f\u4e86\uff0c\u5f53\u9519\u8bef\u5b9e\u5728\u4e0d\u53ef\u63a7\u65f6\uff0c\u7cfb\u7edf\u8fd8\u662f\u4f1a\u53d1\u9001<code>SIGKILL/SIGSTOP</code>\u4fe1\u53f7\uff0c\u8fd9\u4e2a\u65f6\u5019\u8fd8\u4f1a\u5bfc\u81f4\u6211\u4eec crash \u65f6\u65e0\u6cd5\u83b7\u53d6\u771f\u6b63\u7684\u5806\u6808\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u81ea\u5b9a\u4e49\u4fe1\u53f7\u5904\u7406\u5668\u65f6\u9700\u8981\u614e\u91cd</p> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u8981\u4e86\u89e3 Native \u5f02\u5e38\u6355\u83b7\uff0c\u9700\u8981\u5bf9 Linux \u4fe1\u53f7\u673a\u5236\u6709\u4e00\u5b9a\u4e86\u89e3\uff0c\u60f3\u4e86\u89e3\u66f4\u591a\u7684\u540c\u5b66\u53ef\u4ee5\u67e5\u770b\uff1a\u5199\u7ed9android\u5f00\u53d1\u7684Linux \u4fe1\u53f7 - \u4e0a\u7bc7</p>"},{"location":"practical/stability/airbag/#_7","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<p>\u5728\u4e86\u89e3\u4e86 Native \u5c42\u5f02\u5e38\u5904\u7406\u7684\u539f\u7406\u4e4b\u540e\uff0c\u6211\u4eec\u901a\u8fc7\u81ea\u5b9a\u4e49\u4fe1\u53f7\u5904\u7406\u5668\u6765\u5b9e\u73b0\u4e00\u4e2a Native \u5c42\u7684\u5b89\u5168\u6c14\u56ca\uff0c\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u51e0\u6b65</p> <ol> <li>\u6ce8\u518c\u81ea\u5b9a\u4e49\u4fe1\u53f7\u5904\u7406\u5668</li> <li>\u83b7\u53d6 Native \u5806\u6808\u5e76\u4e0e\u914d\u7f6e\u5806\u6808\u8fdb\u884c\u6bd4\u8f83</li> <li>\u5982\u679c\u5339\u914d\u4e0a\u4e86\u5219\u5ffd\u7565\u76f8\u5173\u5d29\u6e83\uff0c\u5982\u679c\u672a\u5339\u914d\u4e0a\u5219\u4ea4\u7ed9\u539f\u4fe1\u53f7\u5904\u7406\u5668\u5904\u7406</li> </ol> <pre><code>extern \"C\" JNIEXPORT void JNICALL\nJava_com_zj_android_stability_optimize_StabilityNativeLib_openNativeAirBag(\n        JNIEnv *env,\n        jobject /* this */,\n        jint signal,\n        jstring soName,\n        jstring backtrace) {\n    do {\n        //...\n        struct sigaction sigc;\n        // \u81ea\u5b9a\u4e49\u5904\u7406\u5668\n        sigc.sa_sigaction = sig_handler;\n        sigemptyset(&amp;sigc.sa_mask);\n        sigc.sa_flags = SA_SIGINFO | SA_ONSTACK | SA_RESTART;\n        // \u6ce8\u518c\u4fe1\u53f7\n        int flag = sigaction(signal, &amp;sigc, &amp;old);\n    } while (false);\n}\n\nstatic void sig_handler(int sig, struct siginfo *info, void *ptr) {\n    // \u83b7\u53d6\u5806\u6808\n    auto stackTrace = getStackTraceWhenCrash();\n    // \u4e0e\u914d\u7f6e\u7684\u5806\u6808\u8fdb\u884c\u5339\u914d\n    if (sig == airBagConfig.signal &amp;&amp;\n        stackTrace.find(airBagConfig.soName) != std::string::npos &amp;&amp;\n        stackTrace.find(airBagConfig.backtrace) != std::string::npos) {\n        LOG(\"\u5f02\u5e38\u4fe1\u53f7\u5df2\u6355\u83b7\");\n    } else {\n        // \u6ca1\u5339\u914d\u4e0a\u7684\u4ea4\u7ed9\u539f\u6709\u5904\u7406\u5668\u5904\u7406\n        LOG(\"\u5f02\u5e38\u4fe1\u53f7\u4ea4\u7ed9\u539f\u6709\u4fe1\u53f7\u5904\u7406\u5668\u5904\u7406\");\n        sigaction(sig, &amp;old, nullptr);\n        raise(sig);\n    }\n}\n</code></pre>"},{"location":"practical/stability/airbag/#_8","title":"\u5b58\u5728\u7684\u95ee\u9898","text":"<p>\u901a\u8fc7\u4e0a\u9762\u7684\u6b65\u9aa4\uff0c\u5176\u5b9e Native \u5c42\u7684\u5b89\u5168\u6c14\u56ca\u5df2\u7ecf\u5b9e\u73b0\u4e86\uff0c\u5728 demo \u4e2d\u89e6\u53d1 Native Crash \u53ef\u4ee5\u88ab\u6355\u83b7\u5230</p> <p>\u4f46\u662f\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u5fc5\u987b\u662f<code>async-signal-safe</code>\u548c\u53ef\u91cd\u5165\u7684\uff0c\u7406\u8bba\u4e0a\u4e0d\u5e94\u8be5\u5728\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u4e2d\u505a\u592a\u591a\u5de5\u4f5c\uff0c\u6bd4\u5982<code>malloc</code>\u7b49\u51fd\u6570\u90fd\u4e0d\u662f\u53ef\u91cd\u5165\u7684</p> <p>\u800c\u6211\u4eec\u5728\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u4e2d\u83b7\u53d6\u4e86\u5806\u6808\uff0c\u6253\u5370\u4e86\u65e5\u5fd7\uff0c\u5f88\u53ef\u80fd\u4f1a\u9020\u6210\u4e00\u4e9b\u610f\u6599\u4e4b\u5916\u7684\u95ee\u9898</p> <p>\u7406\u8bba\u4e0a\u6211\u4eec\u53ef\u4ee5\u5728\u5b50\u7ebf\u7a0b\u83b7\u53d6\u5806\u6808\uff0c\u5728\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u4e2d\u53ea\u9700\u8981\u53d1\u51fa\u4fe1\u53f7\u5c31\u53ef\u4ee5\u4e86\uff0c\u4f46\u6211\u5c1d\u8bd5\u5728\u5b50\u7ebf\u7a0b\u4e2d\u4f7f\u7528 unwind \u83b7\u53d6\u5806\u6808\uff0c\u53d1\u73b0\u83b7\u53d6\u4e0d\u5230\u771f\u6b63\u7684\u5806\u6808\uff0c\u56e0\u6b64\u8fd8\u5b58\u5728\u4e00\u5b9a\u7684\u95ee\u9898\uff0c\u6709\u4e86\u89e3\u7684\u5927\u4f6c\u53ef\u4ee5\u5728\u8bc4\u8bba\u533a\u6307\u70b9\u4e0b</p> <p>Native \u5c42\u5b89\u5168\u6c14\u56ca\u7684\u65b9\u6848\u4e5f\u53ef\u4ee5\u770b\u770b@Pika \u5199\u7684https://github.com/TestPlanB/mooner\uff0c\u652f\u6301\u6355\u83b7 Android \u57fa\u4e8e\u201cpthread_create\u201d \u4ea7\u751f\u7684\u5b50\u7ebf\u7a0b\u4e2d\u5f02\u5e38\u4e1a\u52a1\u903b\u8f91\u4ea7\u751f\u4fe1\u53f7\uff0c\u5bfc\u81f4\u7684native crash</p>"},{"location":"practical/stability/airbag/#_9","title":"\u603b\u7ed3","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86Java \u5c42\u4e0e Native \u5c42\u5b89\u5168\u6c14\u56ca\u7684\u5b9e\u73b0\u65b9\u6848\u4e0e\u5f02\u5e38\u6355\u83b7\u539f\u7406\uff0c\u5728\u4e00\u4e9b\u975e\u4e3b\u6d41\u7a0b\u7684 Crash \u53d1\u751f\u65f6\uff0c\u901a\u8fc7\u5b89\u5168\u6c14\u56ca\u53ef\u4ee5\u505a\u4e00\u4e9b\u6700\u540e\u7684\u633d\u6551\uff0c\u5728\u964d\u4f4e\u5d29\u6e83\u7387\u65b9\u9762\u5e94\u8be5\u8fd8\u662f\u6709\u4e00\u4e9b\u5e94\u7528\u573a\u666f\u7684\uff0c\u5e0c\u671b\u672c\u6587\u5bf9\u4f60\u6709\u6240\u5e2e\u52a9~</p>"},{"location":"practical/stability/airbag/#_10","title":"\u793a\u4f8b\u4ee3\u7801","text":"<p>\u672c\u6587\u6240\u6709\u6e90\u7801\u53ef\u89c1\uff1ahttps://github.com/RicardoJiang/android-performance</p>"},{"location":"resource/","title":"\u5b66\u4e60\u8d44\u6e90","text":""},{"location":"resource/#_1","title":"\u8ba1\u7b97\u673a\u57fa\u7840","text":"<ul> <li>CS\u81ea\u5b66\u6307\u5357</li> <li>Teach Yourself Computer Science</li> <li>\u5c0f\u6797 x \u56fe\u89e3\u8ba1\u7b97\u673a\u57fa\u7840</li> <li>Linux C\u7f16\u7a0b\u4e00\u7ad9\u5f0f\u5b66\u4e60</li> </ul>"},{"location":"resource/#_2","title":"\u6027\u80fd\u4f18\u5316\u4e13\u680f","text":"<ul> <li>Android \u5f00\u53d1\u9ad8\u624b\u8bfe</li> <li>Android\u5f00\u53d1\u9ad8\u624b\u8bfe\u7b14\u8bb0</li> <li>\u539f\u7406+\u5b9e\u6218+\u8fdb\u9636\uff0c\u5168\u9762\u638c\u63e1 Android \u6027\u80fd\u4f18\u5316</li> <li>https://androidperformance.com/</li> </ul>"},{"location":"resource/#_3","title":"\u4e66\u7c4d\u63a8\u8350","text":"<ul> <li>\u7a0b\u5e8f\u5458\u7684\u81ea\u6211\u4fee\u517b\u2014\u2014\u94fe\u63a5\u3001\u88c5\u8f7d\u4e0e\u5e93</li> <li>C \u548c\u6307\u9488</li> <li>\u8ba1\u7b97\u673a\u7cfb\u7edf\u8981\u7d20</li> </ul>"},{"location":"resource/#_4","title":"\u5f00\u6e90\u9879\u76ee","text":"<ul> <li>https://github.com/Tencent/matrix</li> <li>https://github.com/didi/DoKit</li> </ul>"}]}